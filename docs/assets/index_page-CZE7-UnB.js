(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function I0(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var R0={exports:{}},_a={},L0={exports:{}},re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vo=Symbol.for("react.element"),F1=Symbol.for("react.portal"),V1=Symbol.for("react.fragment"),H1=Symbol.for("react.strict_mode"),W1=Symbol.for("react.profiler"),U1=Symbol.for("react.provider"),q1=Symbol.for("react.context"),K1=Symbol.for("react.forward_ref"),J1=Symbol.for("react.suspense"),Y1=Symbol.for("react.memo"),G1=Symbol.for("react.lazy"),Pp=Symbol.iterator;function Q1(t){return t===null||typeof t!="object"?null:(t=Pp&&t[Pp]||t["@@iterator"],typeof t=="function"?t:null)}var _0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$0=Object.assign,B0={};function ws(t,e,n){this.props=t,this.context=e,this.refs=B0,this.updater=n||_0}ws.prototype.isReactComponent={};ws.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ws.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function F0(){}F0.prototype=ws.prototype;function Vd(t,e,n){this.props=t,this.context=e,this.refs=B0,this.updater=n||_0}var Hd=Vd.prototype=new F0;Hd.constructor=Vd;$0(Hd,ws.prototype);Hd.isPureReactComponent=!0;var Ip=Array.isArray,V0=Object.prototype.hasOwnProperty,Wd={current:null},H0={key:!0,ref:!0,__self:!0,__source:!0};function W0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)V0.call(e,r)&&!H0.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Vo,type:t,key:s,ref:o,props:i,_owner:Wd.current}}function X1(t,e){return{$$typeof:Vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Ud(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vo}function Z1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Rp=/\/+/g;function vc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Z1(""+t.key):e.toString(36)}function jl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vo:case F1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+vc(o,0):r,Ip(i)?(n="",t!=null&&(n=t.replace(Rp,"$&/")+"/"),jl(i,e,n,"",function(c){return c})):i!=null&&(Ud(i)&&(i=X1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Rp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ip(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+vc(s,l);o+=jl(s,e,n,a,i)}else if(a=Q1(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+vc(s,l++),o+=jl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rl(t,e,n){if(t==null)return t;var r=[],i=0;return jl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function ek(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var pt={current:null},Al={transition:null},tk={ReactCurrentDispatcher:pt,ReactCurrentBatchConfig:Al,ReactCurrentOwner:Wd};function U0(){throw Error("act(...) is not supported in production builds of React.")}re.Children={map:rl,forEach:function(t,e,n){rl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return rl(t,function(){e++}),e},toArray:function(t){return rl(t,function(e){return e})||[]},only:function(t){if(!Ud(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};re.Component=ws;re.Fragment=V1;re.Profiler=W1;re.PureComponent=Vd;re.StrictMode=H1;re.Suspense=J1;re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tk;re.act=U0;re.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=$0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Wd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)V0.call(e,a)&&!H0.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Vo,type:t.type,key:i,ref:s,props:r,_owner:o}};re.createContext=function(t){return t={$$typeof:q1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:U1,_context:t},t.Consumer=t};re.createElement=W0;re.createFactory=function(t){var e=W0.bind(null,t);return e.type=t,e};re.createRef=function(){return{current:null}};re.forwardRef=function(t){return{$$typeof:K1,render:t}};re.isValidElement=Ud;re.lazy=function(t){return{$$typeof:G1,_payload:{_status:-1,_result:t},_init:ek}};re.memo=function(t,e){return{$$typeof:Y1,type:t,compare:e===void 0?null:e}};re.startTransition=function(t){var e=Al.transition;Al.transition={};try{t()}finally{Al.transition=e}};re.unstable_act=U0;re.useCallback=function(t,e){return pt.current.useCallback(t,e)};re.useContext=function(t){return pt.current.useContext(t)};re.useDebugValue=function(){};re.useDeferredValue=function(t){return pt.current.useDeferredValue(t)};re.useEffect=function(t,e){return pt.current.useEffect(t,e)};re.useId=function(){return pt.current.useId()};re.useImperativeHandle=function(t,e,n){return pt.current.useImperativeHandle(t,e,n)};re.useInsertionEffect=function(t,e){return pt.current.useInsertionEffect(t,e)};re.useLayoutEffect=function(t,e){return pt.current.useLayoutEffect(t,e)};re.useMemo=function(t,e){return pt.current.useMemo(t,e)};re.useReducer=function(t,e,n){return pt.current.useReducer(t,e,n)};re.useRef=function(t){return pt.current.useRef(t)};re.useState=function(t){return pt.current.useState(t)};re.useSyncExternalStore=function(t,e,n){return pt.current.useSyncExternalStore(t,e,n)};re.useTransition=function(){return pt.current.useTransition()};re.version="18.3.1";L0.exports=re;var T=L0.exports;const G=I0(T);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nk=T,rk=Symbol.for("react.element"),ik=Symbol.for("react.fragment"),sk=Object.prototype.hasOwnProperty,ok=nk.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,lk={key:!0,ref:!0,__self:!0,__source:!0};function q0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sk.call(e,r)&&!lk.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rk,type:t,key:s,ref:o,props:i,_owner:ok.current}}_a.Fragment=ik;_a.jsx=q0;_a.jsxs=q0;R0.exports=_a;var f=R0.exports,ku={},K0={exports:{}},Lt={},J0={exports:{}},Y0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,V){var K=A.length;A.push(V);e:for(;0<K;){var ae=K-1>>>1,ie=A[ae];if(0<i(ie,V))A[ae]=V,A[K]=ie,K=ae;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var V=A[0],K=A.pop();if(K!==V){A[0]=K;e:for(var ae=0,ie=A.length,ce=ie>>>1;ae<ce;){var be=2*(ae+1)-1,We=A[be],Pe=be+1,$t=A[Pe];if(0>i(We,K))Pe<ie&&0>i($t,We)?(A[ae]=$t,A[Pe]=K,ae=Pe):(A[ae]=We,A[be]=K,ae=be);else if(Pe<ie&&0>i($t,K))A[ae]=$t,A[Pe]=K,ae=Pe;else break e}}return V}function i(A,V){var K=A.sortIndex-V.sortIndex;return K!==0?K:A.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,p=3,h=!1,m=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function k(A){for(var V=n(c);V!==null;){if(V.callback===null)r(c);else if(V.startTime<=A)r(c),V.sortIndex=V.expirationTime,e(a,V);else break;V=n(c)}}function b(A){if(y=!1,k(A),!m)if(n(a)!==null)m=!0,q(S);else{var V=n(c);V!==null&&fe(b,V.startTime-A)}}function S(A,V){m=!1,y&&(y=!1,g(N),N=-1),h=!0;var K=p;try{for(k(V),d=n(a);d!==null&&(!(d.expirationTime>V)||A&&!I());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,p=d.priorityLevel;var ie=ae(d.expirationTime<=V);V=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(a)&&r(a),k(V)}else r(a);d=n(a)}if(d!==null)var ce=!0;else{var be=n(c);be!==null&&fe(b,be.startTime-V),ce=!1}return ce}finally{d=null,p=K,h=!1}}var w=!1,C=null,N=-1,D=5,E=-1;function I(){return!(t.unstable_now()-E<D)}function U(){if(C!==null){var A=t.unstable_now();E=A;var V=!0;try{V=C(!0,A)}finally{V?Y():(w=!1,C=null)}}else w=!1}var Y;if(typeof v=="function")Y=function(){v(U)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,se=J.port2;J.port1.onmessage=U,Y=function(){se.postMessage(null)}}else Y=function(){x(U,0)};function q(A){C=A,w||(w=!0,Y())}function fe(A,V){N=x(function(){A(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,q(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return p},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(A){switch(p){case 1:case 2:case 3:var V=3;break;default:V=p}var K=p;p=V;try{return A()}finally{p=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,V){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var K=p;p=A;try{return V()}finally{p=K}},t.unstable_scheduleCallback=function(A,V,K){var ae=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?ae+K:ae):K=ae,A){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=K+ie,A={id:u++,callback:V,priorityLevel:A,startTime:K,expirationTime:ie,sortIndex:-1},K>ae?(A.sortIndex=K,e(c,A),n(a)===null&&A===n(c)&&(y?(g(N),N=-1):y=!0,fe(b,K-ae))):(A.sortIndex=ie,e(a,A),m||h||(m=!0,q(S))),A},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(A){var V=p;return function(){var K=p;p=V;try{return A.apply(this,arguments)}finally{p=K}}}})(Y0);J0.exports=Y0;var ak=J0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ck=T,Pt=ak;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var G0=new Set,po={};function Ci(t,e){ss(t,e),ss(t+"Capture",e)}function ss(t,e){for(po[t]=e,t=0;t<e.length;t++)G0.add(e[t])}var Wn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bu=Object.prototype.hasOwnProperty,uk=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Lp={},_p={};function dk(t){return bu.call(_p,t)?!0:bu.call(Lp,t)?!1:uk.test(t)?_p[t]=!0:(Lp[t]=!0,!1)}function fk(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function pk(t,e,n,r){if(e===null||typeof e>"u"||fk(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function ht(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Qe={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Qe[t]=new ht(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Qe[e]=new ht(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Qe[t]=new ht(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Qe[t]=new ht(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Qe[t]=new ht(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Qe[t]=new ht(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Qe[t]=new ht(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Qe[t]=new ht(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Qe[t]=new ht(t,5,!1,t.toLowerCase(),null,!1,!1)});var qd=/[\-:]([a-z])/g;function Kd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qd,Kd);Qe[e]=new ht(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qd,Kd);Qe[e]=new ht(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qd,Kd);Qe[e]=new ht(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Qe[t]=new ht(t,1,!1,t.toLowerCase(),null,!1,!1)});Qe.xlinkHref=new ht("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Qe[t]=new ht(t,1,!1,t.toLowerCase(),null,!0,!0)});function Jd(t,e,n,r){var i=Qe.hasOwnProperty(e)?Qe[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(pk(e,n,i,r)&&(n=null),r||i===null?dk(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Yn=ck.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,il=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),Li=Symbol.for("react.fragment"),Yd=Symbol.for("react.strict_mode"),wu=Symbol.for("react.profiler"),Q0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),Gd=Symbol.for("react.forward_ref"),Su=Symbol.for("react.suspense"),Cu=Symbol.for("react.suspense_list"),Qd=Symbol.for("react.memo"),or=Symbol.for("react.lazy"),Z0=Symbol.for("react.offscreen"),$p=Symbol.iterator;function Os(t){return t===null||typeof t!="object"?null:(t=$p&&t[$p]||t["@@iterator"],typeof t=="function"?t:null)}var ke=Object.assign,kc;function Vs(t){if(kc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);kc=e&&e[1]||""}return`
`+kc+t}var bc=!1;function wc(t,e){if(!t||bc)return"";bc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{bc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function hk(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=wc(t.type,!1),t;case 11:return t=wc(t.type.render,!1),t;case 1:return t=wc(t.type,!0),t;default:return""}}function zu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Li:return"Fragment";case Ri:return"Portal";case wu:return"Profiler";case Yd:return"StrictMode";case Su:return"Suspense";case Cu:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X0:return(t.displayName||"Context")+".Consumer";case Q0:return(t._context.displayName||"Context")+".Provider";case Gd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Qd:return e=t.displayName||null,e!==null?e:zu(t.type)||"Memo";case or:e=t._payload,t=t._init;try{return zu(t(e))}catch{}}return null}function mk(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return zu(e);case 8:return e===Yd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function eg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function gk(t){var e=eg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function sl(t){t._valueTracker||(t._valueTracker=gk(t))}function tg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=eg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Nu(t,e){var n=e.checked;return ke({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Bp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ng(t,e){e=e.checked,e!=null&&Jd(t,"checked",e,!1)}function Mu(t,e){ng(t,e);var n=Or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Eu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Eu(t,e.type,Or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Fp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Eu(t,e,n){(e!=="number"||Yl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hs=Array.isArray;function Gi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Or(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Tu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return ke({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Vp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Hs(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Or(n)}}function rg(t,e){var n=Or(e.value),r=Or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Hp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function ig(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ou(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?ig(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ol,sg=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ol=ol||document.createElement("div"),ol.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ol.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},yk=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(t){yk.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ys[e]=Ys[t]})});function og(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ys.hasOwnProperty(t)&&Ys[t]?(""+e).trim():e+"px"}function lg(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=og(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var xk=ke({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Du(t,e){if(e){if(xk[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function ju(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Au=null;function Xd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Pu=null,Qi=null,Xi=null;function Wp(t){if(t=Uo(t)){if(typeof Pu!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Ha(e),Pu(t.stateNode,t.type,e))}}function ag(t){Qi?Xi?Xi.push(t):Xi=[t]:Qi=t}function cg(){if(Qi){var t=Qi,e=Xi;if(Xi=Qi=null,Wp(t),e)for(t=0;t<e.length;t++)Wp(e[t])}}function ug(t,e){return t(e)}function dg(){}var Sc=!1;function fg(t,e,n){if(Sc)return t(e,n);Sc=!0;try{return ug(t,e,n)}finally{Sc=!1,(Qi!==null||Xi!==null)&&(dg(),cg())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=Ha(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var Iu=!1;if(Wn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){Iu=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{Iu=!1}function vk(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gs=!1,Gl=null,Ql=!1,Ru=null,kk={onError:function(t){Gs=!0,Gl=t}};function bk(t,e,n,r,i,s,o,l,a){Gs=!1,Gl=null,vk.apply(kk,arguments)}function wk(t,e,n,r,i,s,o,l,a){if(bk.apply(this,arguments),Gs){if(Gs){var c=Gl;Gs=!1,Gl=null}else throw Error(j(198));Ql||(Ql=!0,Ru=c)}}function zi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Up(t){if(zi(t)!==t)throw Error(j(188))}function Sk(t){var e=t.alternate;if(!e){if(e=zi(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Up(i),t;if(s===r)return Up(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function hg(t){return t=Sk(t),t!==null?mg(t):null}function mg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=mg(t);if(e!==null)return e;t=t.sibling}return null}var gg=Pt.unstable_scheduleCallback,qp=Pt.unstable_cancelCallback,Ck=Pt.unstable_shouldYield,zk=Pt.unstable_requestPaint,ze=Pt.unstable_now,Nk=Pt.unstable_getCurrentPriorityLevel,Zd=Pt.unstable_ImmediatePriority,yg=Pt.unstable_UserBlockingPriority,Xl=Pt.unstable_NormalPriority,Mk=Pt.unstable_LowPriority,xg=Pt.unstable_IdlePriority,$a=null,Mn=null;function Ek(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot($a,t,void 0,(t.current.flags&128)===128)}catch{}}var gn=Math.clz32?Math.clz32:Dk,Tk=Math.log,Ok=Math.LN2;function Dk(t){return t>>>=0,t===0?32:31-(Tk(t)/Ok|0)|0}var ll=64,al=4194304;function Ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Zl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ws(l):(s&=o,s!==0&&(r=Ws(s)))}else o=n&~i,o!==0?r=Ws(o):s!==0&&(r=Ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-gn(e),i=1<<n,r|=t[n],e&=~i;return r}function jk(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ak(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-gn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=jk(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Lu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function vg(){var t=ll;return ll<<=1,!(ll&4194240)&&(ll=64),t}function Cc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-gn(e),t[e]=n}function Pk(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-gn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ef(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-gn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ue=0;function kg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var bg,tf,wg,Sg,Cg,_u=!1,cl=[],xr=null,vr=null,kr=null,go=new Map,yo=new Map,ur=[],Ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Kp(t,e){switch(t){case"focusin":case"focusout":xr=null;break;case"dragenter":case"dragleave":vr=null;break;case"mouseover":case"mouseout":kr=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(e.pointerId)}}function js(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Uo(e),e!==null&&tf(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Rk(t,e,n,r,i){switch(e){case"focusin":return xr=js(xr,t,e,n,r,i),!0;case"dragenter":return vr=js(vr,t,e,n,r,i),!0;case"mouseover":return kr=js(kr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,js(go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yo.set(s,js(yo.get(s)||null,t,e,n,r,i)),!0}return!1}function zg(t){var e=Xr(t.target);if(e!==null){var n=zi(e);if(n!==null){if(e=n.tag,e===13){if(e=pg(n),e!==null){t.blockedOn=e,Cg(t.priority,function(){wg(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=$u(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Au=r,n.target.dispatchEvent(r),Au=null}else return e=Uo(n),e!==null&&tf(e),t.blockedOn=n,!1;e.shift()}return!0}function Jp(t,e,n){Pl(t)&&n.delete(e)}function Lk(){_u=!1,xr!==null&&Pl(xr)&&(xr=null),vr!==null&&Pl(vr)&&(vr=null),kr!==null&&Pl(kr)&&(kr=null),go.forEach(Jp),yo.forEach(Jp)}function As(t,e){t.blockedOn===e&&(t.blockedOn=null,_u||(_u=!0,Pt.unstable_scheduleCallback(Pt.unstable_NormalPriority,Lk)))}function xo(t){function e(i){return As(i,t)}if(0<cl.length){As(cl[0],t);for(var n=1;n<cl.length;n++){var r=cl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(xr!==null&&As(xr,t),vr!==null&&As(vr,t),kr!==null&&As(kr,t),go.forEach(e),yo.forEach(e),n=0;n<ur.length;n++)r=ur[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ur.length&&(n=ur[0],n.blockedOn===null);)zg(n),n.blockedOn===null&&ur.shift()}var Zi=Yn.ReactCurrentBatchConfig,ea=!0;function _k(t,e,n,r){var i=ue,s=Zi.transition;Zi.transition=null;try{ue=1,nf(t,e,n,r)}finally{ue=i,Zi.transition=s}}function $k(t,e,n,r){var i=ue,s=Zi.transition;Zi.transition=null;try{ue=4,nf(t,e,n,r)}finally{ue=i,Zi.transition=s}}function nf(t,e,n,r){if(ea){var i=$u(t,e,n,r);if(i===null)Pc(t,e,r,ta,n),Kp(t,r);else if(Rk(i,t,e,n,r))r.stopPropagation();else if(Kp(t,r),e&4&&-1<Ik.indexOf(t)){for(;i!==null;){var s=Uo(i);if(s!==null&&bg(s),s=$u(t,e,n,r),s===null&&Pc(t,e,r,ta,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Pc(t,e,r,null,n)}}var ta=null;function $u(t,e,n,r){if(ta=null,t=Xd(r),t=Xr(t),t!==null)if(e=zi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pg(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ta=t,null}function Ng(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Nk()){case Zd:return 1;case yg:return 4;case Xl:case Mk:return 16;case xg:return 536870912;default:return 16}default:return 16}}var pr=null,rf=null,Il=null;function Mg(){if(Il)return Il;var t,e=rf,n=e.length,r,i="value"in pr?pr.value:pr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Il=i.slice(t,1<r?1-r:void 0)}function Rl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ul(){return!0}function Yp(){return!1}function _t(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ul:Yp,this.isPropagationStopped=Yp,this}return ke(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ul)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ul)},persist:function(){},isPersistent:ul}),e}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sf=_t(Ss),Wo=ke({},Ss,{view:0,detail:0}),Bk=_t(Wo),zc,Nc,Ps,Ba=ke({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:of,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(zc=t.screenX-Ps.screenX,Nc=t.screenY-Ps.screenY):Nc=zc=0,Ps=t),zc)},movementY:function(t){return"movementY"in t?t.movementY:Nc}}),Gp=_t(Ba),Fk=ke({},Ba,{dataTransfer:0}),Vk=_t(Fk),Hk=ke({},Wo,{relatedTarget:0}),Mc=_t(Hk),Wk=ke({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),Uk=_t(Wk),qk=ke({},Ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Kk=_t(qk),Jk=ke({},Ss,{data:0}),Qp=_t(Jk),Yk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Qk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Xk(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Qk[t])?!!e[t]:!1}function of(){return Xk}var Zk=ke({},Wo,{key:function(t){if(t.key){var e=Yk[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Rl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gk[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:of,charCode:function(t){return t.type==="keypress"?Rl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Rl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),eb=_t(Zk),tb=ke({},Ba,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Xp=_t(tb),nb=ke({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:of}),rb=_t(nb),ib=ke({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),sb=_t(ib),ob=ke({},Ba,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),lb=_t(ob),ab=[9,13,27,32],lf=Wn&&"CompositionEvent"in window,Qs=null;Wn&&"documentMode"in document&&(Qs=document.documentMode);var cb=Wn&&"TextEvent"in window&&!Qs,Eg=Wn&&(!lf||Qs&&8<Qs&&11>=Qs),Zp=" ",eh=!1;function Tg(t,e){switch(t){case"keyup":return ab.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Og(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _i=!1;function ub(t,e){switch(t){case"compositionend":return Og(e);case"keypress":return e.which!==32?null:(eh=!0,Zp);case"textInput":return t=e.data,t===Zp&&eh?null:t;default:return null}}function db(t,e){if(_i)return t==="compositionend"||!lf&&Tg(t,e)?(t=Mg(),Il=rf=pr=null,_i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Eg&&e.locale!=="ko"?null:e.data;default:return null}}var fb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function th(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!fb[t.type]:e==="textarea"}function Dg(t,e,n,r){ag(r),e=na(e,"onChange"),0<e.length&&(n=new sf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xs=null,vo=null;function pb(t){Vg(t,0)}function Fa(t){var e=Fi(t);if(tg(e))return t}function hb(t,e){if(t==="change")return e}var jg=!1;if(Wn){var Ec;if(Wn){var Tc="oninput"in document;if(!Tc){var nh=document.createElement("div");nh.setAttribute("oninput","return;"),Tc=typeof nh.oninput=="function"}Ec=Tc}else Ec=!1;jg=Ec&&(!document.documentMode||9<document.documentMode)}function rh(){Xs&&(Xs.detachEvent("onpropertychange",Ag),vo=Xs=null)}function Ag(t){if(t.propertyName==="value"&&Fa(vo)){var e=[];Dg(e,vo,t,Xd(t)),fg(pb,e)}}function mb(t,e,n){t==="focusin"?(rh(),Xs=e,vo=n,Xs.attachEvent("onpropertychange",Ag)):t==="focusout"&&rh()}function gb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Fa(vo)}function yb(t,e){if(t==="click")return Fa(e)}function xb(t,e){if(t==="input"||t==="change")return Fa(e)}function vb(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:vb;function ko(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!bu.call(e,i)||!xn(t[i],e[i]))return!1}return!0}function ih(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function sh(t,e){var n=ih(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ih(n)}}function Pg(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Pg(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Ig(){for(var t=window,e=Yl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Yl(t.document)}return e}function af(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function kb(t){var e=Ig(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Pg(n.ownerDocument.documentElement,n)){if(r!==null&&af(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=sh(n,s);var o=sh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var bb=Wn&&"documentMode"in document&&11>=document.documentMode,$i=null,Bu=null,Zs=null,Fu=!1;function oh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Fu||$i==null||$i!==Yl(r)||(r=$i,"selectionStart"in r&&af(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zs&&ko(Zs,r)||(Zs=r,r=na(Bu,"onSelect"),0<r.length&&(e=new sf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$i)))}function dl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bi={animationend:dl("Animation","AnimationEnd"),animationiteration:dl("Animation","AnimationIteration"),animationstart:dl("Animation","AnimationStart"),transitionend:dl("Transition","TransitionEnd")},Oc={},Rg={};Wn&&(Rg=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Va(t){if(Oc[t])return Oc[t];if(!Bi[t])return t;var e=Bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Rg)return Oc[t]=e[n];return t}var Lg=Va("animationend"),_g=Va("animationiteration"),$g=Va("animationstart"),Bg=Va("transitionend"),Fg=new Map,lh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ar(t,e){Fg.set(t,e),Ci(e,[t])}for(var Dc=0;Dc<lh.length;Dc++){var jc=lh[Dc],wb=jc.toLowerCase(),Sb=jc[0].toUpperCase()+jc.slice(1);Ar(wb,"on"+Sb)}Ar(Lg,"onAnimationEnd");Ar(_g,"onAnimationIteration");Ar($g,"onAnimationStart");Ar("dblclick","onDoubleClick");Ar("focusin","onFocus");Ar("focusout","onBlur");Ar(Bg,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);Ci("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ci("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ci("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ci("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ci("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Cb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function ah(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,wk(r,e,void 0,t),t.currentTarget=null}function Vg(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;ah(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;ah(i,l,c),s=a}}}if(Ql)throw t=Ru,Ql=!1,Ru=null,t}function he(t,e){var n=e[qu];n===void 0&&(n=e[qu]=new Set);var r=t+"__bubble";n.has(r)||(Hg(e,t,2,!1),n.add(r))}function Ac(t,e,n){var r=0;e&&(r|=4),Hg(n,t,r,e)}var fl="_reactListening"+Math.random().toString(36).slice(2);function bo(t){if(!t[fl]){t[fl]=!0,G0.forEach(function(n){n!=="selectionchange"&&(Cb.has(n)||Ac(n,!1,t),Ac(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[fl]||(e[fl]=!0,Ac("selectionchange",!1,e))}}function Hg(t,e,n,r){switch(Ng(e)){case 1:var i=_k;break;case 4:i=$k;break;default:i=nf}n=i.bind(null,e,n,t),i=void 0,!Iu||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Pc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Xr(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}fg(function(){var c=s,u=Xd(n),d=[];e:{var p=Fg.get(t);if(p!==void 0){var h=sf,m=t;switch(t){case"keypress":if(Rl(n)===0)break e;case"keydown":case"keyup":h=eb;break;case"focusin":m="focus",h=Mc;break;case"focusout":m="blur",h=Mc;break;case"beforeblur":case"afterblur":h=Mc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Gp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=Vk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=rb;break;case Lg:case _g:case $g:h=Uk;break;case Bg:h=sb;break;case"scroll":h=Bk;break;case"wheel":h=lb;break;case"copy":case"cut":case"paste":h=Kk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Xp}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?p!==null?p+"Capture":null:p;y=[];for(var v=c,k;v!==null;){k=v;var b=k.stateNode;if(k.tag===5&&b!==null&&(k=b,g!==null&&(b=mo(v,g),b!=null&&y.push(wo(v,b,k)))),x)break;v=v.return}0<y.length&&(p=new h(p,m,null,n,u),d.push({event:p,listeners:y}))}}if(!(e&7)){e:{if(p=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",p&&n!==Au&&(m=n.relatedTarget||n.fromElement)&&(Xr(m)||m[Un]))break e;if((h||p)&&(p=u.window===u?u:(p=u.ownerDocument)?p.defaultView||p.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Xr(m):null,m!==null&&(x=zi(m),m!==x||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(y=Gp,b="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=Xp,b="onPointerLeave",g="onPointerEnter",v="pointer"),x=h==null?p:Fi(h),k=m==null?p:Fi(m),p=new y(b,v+"leave",h,n,u),p.target=x,p.relatedTarget=k,b=null,Xr(u)===c&&(y=new y(g,v+"enter",m,n,u),y.target=k,y.relatedTarget=x,b=y),x=b,h&&m)t:{for(y=h,g=m,v=0,k=y;k;k=Oi(k))v++;for(k=0,b=g;b;b=Oi(b))k++;for(;0<v-k;)y=Oi(y),v--;for(;0<k-v;)g=Oi(g),k--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Oi(y),g=Oi(g)}y=null}else y=null;h!==null&&ch(d,p,h,y,!1),m!==null&&x!==null&&ch(d,x,m,y,!0)}}e:{if(p=c?Fi(c):window,h=p.nodeName&&p.nodeName.toLowerCase(),h==="select"||h==="input"&&p.type==="file")var S=hb;else if(th(p))if(jg)S=xb;else{S=gb;var w=mb}else(h=p.nodeName)&&h.toLowerCase()==="input"&&(p.type==="checkbox"||p.type==="radio")&&(S=yb);if(S&&(S=S(t,c))){Dg(d,S,n,u);break e}w&&w(t,p,c),t==="focusout"&&(w=p._wrapperState)&&w.controlled&&p.type==="number"&&Eu(p,"number",p.value)}switch(w=c?Fi(c):window,t){case"focusin":(th(w)||w.contentEditable==="true")&&($i=w,Bu=c,Zs=null);break;case"focusout":Zs=Bu=$i=null;break;case"mousedown":Fu=!0;break;case"contextmenu":case"mouseup":case"dragend":Fu=!1,oh(d,n,u);break;case"selectionchange":if(bb)break;case"keydown":case"keyup":oh(d,n,u)}var C;if(lf)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else _i?Tg(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Eg&&n.locale!=="ko"&&(_i||N!=="onCompositionStart"?N==="onCompositionEnd"&&_i&&(C=Mg()):(pr=u,rf="value"in pr?pr.value:pr.textContent,_i=!0)),w=na(c,N),0<w.length&&(N=new Qp(N,t,null,n,u),d.push({event:N,listeners:w}),C?N.data=C:(C=Og(n),C!==null&&(N.data=C)))),(C=cb?ub(t,n):db(t,n))&&(c=na(c,"onBeforeInput"),0<c.length&&(u=new Qp("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}Vg(d,e)})}function wo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function na(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(wo(t,s,i)),s=mo(t,e),s!=null&&r.push(wo(t,s,i))),t=t.return}return r}function Oi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ch(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=mo(n,s),a!=null&&o.unshift(wo(n,a,l))):i||(a=mo(n,s),a!=null&&o.push(wo(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var zb=/\r\n?/g,Nb=/\u0000|\uFFFD/g;function uh(t){return(typeof t=="string"?t:""+t).replace(zb,`
`).replace(Nb,"")}function pl(t,e,n){if(e=uh(e),uh(t)!==e&&n)throw Error(j(425))}function ra(){}var Vu=null,Hu=null;function Wu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Uu=typeof setTimeout=="function"?setTimeout:void 0,Mb=typeof clearTimeout=="function"?clearTimeout:void 0,dh=typeof Promise=="function"?Promise:void 0,Eb=typeof queueMicrotask=="function"?queueMicrotask:typeof dh<"u"?function(t){return dh.resolve(null).then(t).catch(Tb)}:Uu;function Tb(t){setTimeout(function(){throw t})}function Ic(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xo(e)}function br(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function fh(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),zn="__reactFiber$"+Cs,So="__reactProps$"+Cs,Un="__reactContainer$"+Cs,qu="__reactEvents$"+Cs,Ob="__reactListeners$"+Cs,Db="__reactHandles$"+Cs;function Xr(t){var e=t[zn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Un]||n[zn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=fh(t);t!==null;){if(n=t[zn])return n;t=fh(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[zn]||t[Un],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Ha(t){return t[So]||null}var Ku=[],Vi=-1;function Pr(t){return{current:t}}function me(t){0>Vi||(t.current=Ku[Vi],Ku[Vi]=null,Vi--)}function pe(t,e){Vi++,Ku[Vi]=t.current,t.current=e}var Dr={},rt=Pr(Dr),bt=Pr(!1),di=Dr;function ls(t,e){var n=t.type.contextTypes;if(!n)return Dr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wt(t){return t=t.childContextTypes,t!=null}function ia(){me(bt),me(rt)}function ph(t,e,n){if(rt.current!==Dr)throw Error(j(168));pe(rt,e),pe(bt,n)}function Wg(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,mk(t)||"Unknown",i));return ke({},n,r)}function sa(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Dr,di=rt.current,pe(rt,t),pe(bt,bt.current),!0}function hh(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=Wg(t,e,di),r.__reactInternalMemoizedMergedChildContext=t,me(bt),me(rt),pe(rt,t)):me(bt),pe(bt,n)}var Rn=null,Wa=!1,Rc=!1;function Ug(t){Rn===null?Rn=[t]:Rn.push(t)}function jb(t){Wa=!0,Ug(t)}function Ir(){if(!Rc&&Rn!==null){Rc=!0;var t=0,e=ue;try{var n=Rn;for(ue=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Rn=null,Wa=!1}catch(i){throw Rn!==null&&(Rn=Rn.slice(t+1)),gg(Zd,Ir),i}finally{ue=e,Rc=!1}}return null}var Hi=[],Wi=0,oa=null,la=0,Ut=[],qt=0,fi=null,Ln=1,_n="";function Kr(t,e){Hi[Wi++]=la,Hi[Wi++]=oa,oa=t,la=e}function qg(t,e,n){Ut[qt++]=Ln,Ut[qt++]=_n,Ut[qt++]=fi,fi=t;var r=Ln;t=_n;var i=32-gn(r)-1;r&=~(1<<i),n+=1;var s=32-gn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Ln=1<<32-gn(e)+i|n<<i|r,_n=s+t}else Ln=1<<s|n<<i|r,_n=t}function cf(t){t.return!==null&&(Kr(t,1),qg(t,1,0))}function uf(t){for(;t===oa;)oa=Hi[--Wi],Hi[Wi]=null,la=Hi[--Wi],Hi[Wi]=null;for(;t===fi;)fi=Ut[--qt],Ut[qt]=null,_n=Ut[--qt],Ut[qt]=null,Ln=Ut[--qt],Ut[qt]=null}var jt=null,Dt=null,ge=!1,pn=null;function Kg(t,e){var n=Jt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function mh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,jt=t,Dt=br(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,jt=t,Dt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=fi!==null?{id:Ln,overflow:_n}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Jt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,jt=t,Dt=null,!0):!1;default:return!1}}function Ju(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Yu(t){if(ge){var e=Dt;if(e){var n=e;if(!mh(t,e)){if(Ju(t))throw Error(j(418));e=br(n.nextSibling);var r=jt;e&&mh(t,e)?Kg(r,n):(t.flags=t.flags&-4097|2,ge=!1,jt=t)}}else{if(Ju(t))throw Error(j(418));t.flags=t.flags&-4097|2,ge=!1,jt=t}}}function gh(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;jt=t}function hl(t){if(t!==jt)return!1;if(!ge)return gh(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Wu(t.type,t.memoizedProps)),e&&(e=Dt)){if(Ju(t))throw Jg(),Error(j(418));for(;e;)Kg(t,e),e=br(e.nextSibling)}if(gh(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Dt=br(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Dt=null}}else Dt=jt?br(t.stateNode.nextSibling):null;return!0}function Jg(){for(var t=Dt;t;)t=br(t.nextSibling)}function as(){Dt=jt=null,ge=!1}function df(t){pn===null?pn=[t]:pn.push(t)}var Ab=Yn.ReactCurrentBatchConfig;function Is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function ml(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function yh(t){var e=t._init;return e(t._payload)}function Yg(t){function e(g,v){if(t){var k=g.deletions;k===null?(g.deletions=[v],g.flags|=16):k.push(v)}}function n(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function r(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function i(g,v){return g=zr(g,v),g.index=0,g.sibling=null,g}function s(g,v,k){return g.index=k,t?(k=g.alternate,k!==null?(k=k.index,k<v?(g.flags|=2,v):k):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,k,b){return v===null||v.tag!==6?(v=Hc(k,g.mode,b),v.return=g,v):(v=i(v,k),v.return=g,v)}function a(g,v,k,b){var S=k.type;return S===Li?u(g,v,k.props.children,b,k.key):v!==null&&(v.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===or&&yh(S)===v.type)?(b=i(v,k.props),b.ref=Is(g,v,k),b.return=g,b):(b=Hl(k.type,k.key,k.props,null,g.mode,b),b.ref=Is(g,v,k),b.return=g,b)}function c(g,v,k,b){return v===null||v.tag!==4||v.stateNode.containerInfo!==k.containerInfo||v.stateNode.implementation!==k.implementation?(v=Wc(k,g.mode,b),v.return=g,v):(v=i(v,k.children||[]),v.return=g,v)}function u(g,v,k,b,S){return v===null||v.tag!==7?(v=ii(k,g.mode,b,S),v.return=g,v):(v=i(v,k),v.return=g,v)}function d(g,v,k){if(typeof v=="string"&&v!==""||typeof v=="number")return v=Hc(""+v,g.mode,k),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case il:return k=Hl(v.type,v.key,v.props,null,g.mode,k),k.ref=Is(g,null,v),k.return=g,k;case Ri:return v=Wc(v,g.mode,k),v.return=g,v;case or:var b=v._init;return d(g,b(v._payload),k)}if(Hs(v)||Os(v))return v=ii(v,g.mode,k,null),v.return=g,v;ml(g,v)}return null}function p(g,v,k,b){var S=v!==null?v.key:null;if(typeof k=="string"&&k!==""||typeof k=="number")return S!==null?null:l(g,v,""+k,b);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case il:return k.key===S?a(g,v,k,b):null;case Ri:return k.key===S?c(g,v,k,b):null;case or:return S=k._init,p(g,v,S(k._payload),b)}if(Hs(k)||Os(k))return S!==null?null:u(g,v,k,b,null);ml(g,k)}return null}function h(g,v,k,b,S){if(typeof b=="string"&&b!==""||typeof b=="number")return g=g.get(k)||null,l(v,g,""+b,S);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case il:return g=g.get(b.key===null?k:b.key)||null,a(v,g,b,S);case Ri:return g=g.get(b.key===null?k:b.key)||null,c(v,g,b,S);case or:var w=b._init;return h(g,v,k,w(b._payload),S)}if(Hs(b)||Os(b))return g=g.get(k)||null,u(v,g,b,S,null);ml(v,b)}return null}function m(g,v,k,b){for(var S=null,w=null,C=v,N=v=0,D=null;C!==null&&N<k.length;N++){C.index>N?(D=C,C=null):D=C.sibling;var E=p(g,C,k[N],b);if(E===null){C===null&&(C=D);break}t&&C&&E.alternate===null&&e(g,C),v=s(E,v,N),w===null?S=E:w.sibling=E,w=E,C=D}if(N===k.length)return n(g,C),ge&&Kr(g,N),S;if(C===null){for(;N<k.length;N++)C=d(g,k[N],b),C!==null&&(v=s(C,v,N),w===null?S=C:w.sibling=C,w=C);return ge&&Kr(g,N),S}for(C=r(g,C);N<k.length;N++)D=h(C,g,N,k[N],b),D!==null&&(t&&D.alternate!==null&&C.delete(D.key===null?N:D.key),v=s(D,v,N),w===null?S=D:w.sibling=D,w=D);return t&&C.forEach(function(I){return e(g,I)}),ge&&Kr(g,N),S}function y(g,v,k,b){var S=Os(k);if(typeof S!="function")throw Error(j(150));if(k=S.call(k),k==null)throw Error(j(151));for(var w=S=null,C=v,N=v=0,D=null,E=k.next();C!==null&&!E.done;N++,E=k.next()){C.index>N?(D=C,C=null):D=C.sibling;var I=p(g,C,E.value,b);if(I===null){C===null&&(C=D);break}t&&C&&I.alternate===null&&e(g,C),v=s(I,v,N),w===null?S=I:w.sibling=I,w=I,C=D}if(E.done)return n(g,C),ge&&Kr(g,N),S;if(C===null){for(;!E.done;N++,E=k.next())E=d(g,E.value,b),E!==null&&(v=s(E,v,N),w===null?S=E:w.sibling=E,w=E);return ge&&Kr(g,N),S}for(C=r(g,C);!E.done;N++,E=k.next())E=h(C,g,N,E.value,b),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?N:E.key),v=s(E,v,N),w===null?S=E:w.sibling=E,w=E);return t&&C.forEach(function(U){return e(g,U)}),ge&&Kr(g,N),S}function x(g,v,k,b){if(typeof k=="object"&&k!==null&&k.type===Li&&k.key===null&&(k=k.props.children),typeof k=="object"&&k!==null){switch(k.$$typeof){case il:e:{for(var S=k.key,w=v;w!==null;){if(w.key===S){if(S=k.type,S===Li){if(w.tag===7){n(g,w.sibling),v=i(w,k.props.children),v.return=g,g=v;break e}}else if(w.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===or&&yh(S)===w.type){n(g,w.sibling),v=i(w,k.props),v.ref=Is(g,w,k),v.return=g,g=v;break e}n(g,w);break}else e(g,w);w=w.sibling}k.type===Li?(v=ii(k.props.children,g.mode,b,k.key),v.return=g,g=v):(b=Hl(k.type,k.key,k.props,null,g.mode,b),b.ref=Is(g,v,k),b.return=g,g=b)}return o(g);case Ri:e:{for(w=k.key;v!==null;){if(v.key===w)if(v.tag===4&&v.stateNode.containerInfo===k.containerInfo&&v.stateNode.implementation===k.implementation){n(g,v.sibling),v=i(v,k.children||[]),v.return=g,g=v;break e}else{n(g,v);break}else e(g,v);v=v.sibling}v=Wc(k,g.mode,b),v.return=g,g=v}return o(g);case or:return w=k._init,x(g,v,w(k._payload),b)}if(Hs(k))return m(g,v,k,b);if(Os(k))return y(g,v,k,b);ml(g,k)}return typeof k=="string"&&k!==""||typeof k=="number"?(k=""+k,v!==null&&v.tag===6?(n(g,v.sibling),v=i(v,k),v.return=g,g=v):(n(g,v),v=Hc(k,g.mode,b),v.return=g,g=v),o(g)):n(g,v)}return x}var cs=Yg(!0),Gg=Yg(!1),aa=Pr(null),ca=null,Ui=null,ff=null;function pf(){ff=Ui=ca=null}function hf(t){var e=aa.current;me(aa),t._currentValue=e}function Gu(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function es(t,e){ca=t,ff=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(kt=!0),t.firstContext=null)}function en(t){var e=t._currentValue;if(ff!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(ca===null)throw Error(j(308));Ui=t,ca.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var Zr=null;function mf(t){Zr===null?Zr=[t]:Zr.push(t)}function Qg(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,mf(e)):(n.next=i.next,i.next=n),e.interleaved=n,qn(t,r)}function qn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var lr=!1;function gf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xg(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function wr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,qn(t,n)}return i=r.interleaved,i===null?(e.next=e,mf(r)):(e.next=i.next,i.next=e),r.interleaved=e,qn(t,n)}function Ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ef(t,n)}}function xh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ua(t,e,n,r){var i=t.updateQueue;lr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,u=c=a=null,l=s;do{var p=l.lane,h=l.eventTime;if((r&p)===p){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,y=l;switch(p=e,h=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(h,d,p);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,p=typeof m=="function"?m.call(h,d,p):m,p==null)break e;d=ke({},d,p);break e;case 2:lr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,p=i.effects,p===null?i.effects=[l]:p.push(l))}else h={eventTime:h,lane:p,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=h,a=d):u=u.next=h,o|=p;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;p=l,l=p.next,p.next=null,i.lastBaseUpdate=p,i.shared.pending=null}}while(!0);if(u===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);hi|=o,t.lanes=o,t.memoizedState=d}}function vh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var qo={},En=Pr(qo),Co=Pr(qo),zo=Pr(qo);function ei(t){if(t===qo)throw Error(j(174));return t}function yf(t,e){switch(pe(zo,e),pe(Co,t),pe(En,qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Ou(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Ou(e,t)}me(En),pe(En,e)}function us(){me(En),me(Co),me(zo)}function Zg(t){ei(zo.current);var e=ei(En.current),n=Ou(e,t.type);e!==n&&(pe(Co,t),pe(En,n))}function xf(t){Co.current===t&&(me(En),me(Co))}var xe=Pr(0);function da(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Lc=[];function vf(){for(var t=0;t<Lc.length;t++)Lc[t]._workInProgressVersionPrimary=null;Lc.length=0}var _l=Yn.ReactCurrentDispatcher,_c=Yn.ReactCurrentBatchConfig,pi=0,ve=null,Oe=null,Le=null,fa=!1,eo=!1,No=0,Pb=0;function Ze(){throw Error(j(321))}function kf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function bf(t,e,n,r,i,s){if(pi=s,ve=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,_l.current=t===null||t.memoizedState===null?_b:$b,t=n(r,i),eo){s=0;do{if(eo=!1,No=0,25<=s)throw Error(j(301));s+=1,Le=Oe=null,e.updateQueue=null,_l.current=Bb,t=n(r,i)}while(eo)}if(_l.current=pa,e=Oe!==null&&Oe.next!==null,pi=0,Le=Oe=ve=null,fa=!1,e)throw Error(j(300));return t}function wf(){var t=No!==0;return No=0,t}function wn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ve.memoizedState=Le=t:Le=Le.next=t,Le}function tn(){if(Oe===null){var t=ve.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var e=Le===null?ve.memoizedState:Le.next;if(e!==null)Le=e,Oe=t;else{if(t===null)throw Error(j(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},Le===null?ve.memoizedState=Le=t:Le=Le.next=t}return Le}function Mo(t,e){return typeof e=="function"?e(t):e}function $c(t){var e=tn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=Oe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((pi&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ve.lanes|=u,hi|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,xn(r,e.memoizedState)||(kt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ve.lanes|=s,hi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Bc(t){var e=tn(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);xn(s,e.memoizedState)||(kt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function ey(){}function ty(t,e){var n=ve,r=tn(),i=e(),s=!xn(r.memoizedState,i);if(s&&(r.memoizedState=i,kt=!0),r=r.queue,Sf(iy.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,Eo(9,ry.bind(null,n,r,i,e),void 0,null),Be===null)throw Error(j(349));pi&30||ny(n,e,i)}return i}function ny(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ry(t,e,n,r){e.value=n,e.getSnapshot=r,sy(e)&&oy(t)}function iy(t,e,n){return n(function(){sy(e)&&oy(t)})}function sy(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function oy(t){var e=qn(t,1);e!==null&&yn(e,t,1,-1)}function kh(t){var e=wn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Mo,lastRenderedState:t},e.queue=t,t=t.dispatch=Lb.bind(null,ve,t),[e.memoizedState,t]}function Eo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ve.updateQueue,e===null?(e={lastEffect:null,stores:null},ve.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function ly(){return tn().memoizedState}function $l(t,e,n,r){var i=wn();ve.flags|=t,i.memoizedState=Eo(1|e,n,void 0,r===void 0?null:r)}function Ua(t,e,n,r){var i=tn();r=r===void 0?null:r;var s=void 0;if(Oe!==null){var o=Oe.memoizedState;if(s=o.destroy,r!==null&&kf(r,o.deps)){i.memoizedState=Eo(e,n,s,r);return}}ve.flags|=t,i.memoizedState=Eo(1|e,n,s,r)}function bh(t,e){return $l(8390656,8,t,e)}function Sf(t,e){return Ua(2048,8,t,e)}function ay(t,e){return Ua(4,2,t,e)}function cy(t,e){return Ua(4,4,t,e)}function uy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dy(t,e,n){return n=n!=null?n.concat([t]):null,Ua(4,4,uy.bind(null,e,t),n)}function Cf(){}function fy(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function py(t,e){var n=tn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&kf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function hy(t,e,n){return pi&21?(xn(n,e)||(n=vg(),ve.lanes|=n,hi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,kt=!0),t.memoizedState=n)}function Ib(t,e){var n=ue;ue=n!==0&&4>n?n:4,t(!0);var r=_c.transition;_c.transition={};try{t(!1),e()}finally{ue=n,_c.transition=r}}function my(){return tn().memoizedState}function Rb(t,e,n){var r=Cr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gy(t))yy(e,n);else if(n=Qg(t,e,n,r),n!==null){var i=ut();yn(n,t,r,i),xy(n,e,r)}}function Lb(t,e,n){var r=Cr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gy(t))yy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,xn(l,o)){var a=e.interleaved;a===null?(i.next=i,mf(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Qg(t,e,i,r),n!==null&&(i=ut(),yn(n,t,r,i),xy(n,e,r))}}function gy(t){var e=t.alternate;return t===ve||e!==null&&e===ve}function yy(t,e){eo=fa=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function xy(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ef(t,n)}}var pa={readContext:en,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},_b={readContext:en,useCallback:function(t,e){return wn().memoizedState=[t,e===void 0?null:e],t},useContext:en,useEffect:bh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,$l(4194308,4,uy.bind(null,e,t),n)},useLayoutEffect:function(t,e){return $l(4194308,4,t,e)},useInsertionEffect:function(t,e){return $l(4,2,t,e)},useMemo:function(t,e){var n=wn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=wn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Rb.bind(null,ve,t),[r.memoizedState,t]},useRef:function(t){var e=wn();return t={current:t},e.memoizedState=t},useState:kh,useDebugValue:Cf,useDeferredValue:function(t){return wn().memoizedState=t},useTransition:function(){var t=kh(!1),e=t[0];return t=Ib.bind(null,t[1]),wn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ve,i=wn();if(ge){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Be===null)throw Error(j(349));pi&30||ny(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,bh(iy.bind(null,r,s,t),[t]),r.flags|=2048,Eo(9,ry.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=wn(),e=Be.identifierPrefix;if(ge){var n=_n,r=Ln;n=(r&~(1<<32-gn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=No++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Pb++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},$b={readContext:en,useCallback:fy,useContext:en,useEffect:Sf,useImperativeHandle:dy,useInsertionEffect:ay,useLayoutEffect:cy,useMemo:py,useReducer:$c,useRef:ly,useState:function(){return $c(Mo)},useDebugValue:Cf,useDeferredValue:function(t){var e=tn();return hy(e,Oe.memoizedState,t)},useTransition:function(){var t=$c(Mo)[0],e=tn().memoizedState;return[t,e]},useMutableSource:ey,useSyncExternalStore:ty,useId:my,unstable_isNewReconciler:!1},Bb={readContext:en,useCallback:fy,useContext:en,useEffect:Sf,useImperativeHandle:dy,useInsertionEffect:ay,useLayoutEffect:cy,useMemo:py,useReducer:Bc,useRef:ly,useState:function(){return Bc(Mo)},useDebugValue:Cf,useDeferredValue:function(t){var e=tn();return Oe===null?e.memoizedState=t:hy(e,Oe.memoizedState,t)},useTransition:function(){var t=Bc(Mo)[0],e=tn().memoizedState;return[t,e]},useMutableSource:ey,useSyncExternalStore:ty,useId:my,unstable_isNewReconciler:!1};function dn(t,e){if(t&&t.defaultProps){e=ke({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Qu(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:ke({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var qa={isMounted:function(t){return(t=t._reactInternals)?zi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ut(),i=Cr(t),s=Fn(r,i);s.payload=e,n!=null&&(s.callback=n),e=wr(t,s,i),e!==null&&(yn(e,t,i,r),Ll(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ut(),i=Cr(t),s=Fn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=wr(t,s,i),e!==null&&(yn(e,t,i,r),Ll(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ut(),r=Cr(t),i=Fn(n,r);i.tag=2,e!=null&&(i.callback=e),e=wr(t,i,r),e!==null&&(yn(e,t,r,n),Ll(e,t,r))}};function wh(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ko(n,r)||!ko(i,s):!0}function vy(t,e,n){var r=!1,i=Dr,s=e.contextType;return typeof s=="object"&&s!==null?s=en(s):(i=wt(e)?di:rt.current,r=e.contextTypes,s=(r=r!=null)?ls(t,i):Dr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=qa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Sh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&qa.enqueueReplaceState(e,e.state,null)}function Xu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},gf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=en(s):(s=wt(e)?di:rt.current,i.context=ls(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Qu(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&qa.enqueueReplaceState(i,i.state,null),ua(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ds(t,e){try{var n="",r=e;do n+=hk(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Fc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Zu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Fb=typeof WeakMap=="function"?WeakMap:Map;function ky(t,e,n){n=Fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ma||(ma=!0,cd=r),Zu(t,e)},n}function by(t,e,n){n=Fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Zu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Zu(t,e),typeof r!="function"&&(Sr===null?Sr=new Set([this]):Sr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Ch(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Fb;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=tw.bind(null,t,e,n),e.then(t,t))}function zh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Nh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Fn(-1,1),e.tag=2,wr(n,e,1))),n.lanes|=1),t)}var Vb=Yn.ReactCurrentOwner,kt=!1;function ct(t,e,n,r){e.child=t===null?Gg(e,null,n,r):cs(e,t.child,n,r)}function Mh(t,e,n,r,i){n=n.render;var s=e.ref;return es(e,i),r=bf(t,e,n,r,s,i),n=wf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kn(t,e,i)):(ge&&n&&cf(e),e.flags|=1,ct(t,e,r,i),e.child)}function Eh(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!jf(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,wy(t,e,s,r,i)):(t=Hl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ko,n(o,r)&&t.ref===e.ref)return Kn(t,e,i)}return e.flags|=1,t=zr(s,r),t.ref=e.ref,t.return=e,e.child=t}function wy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ko(s,r)&&t.ref===e.ref)if(kt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(kt=!0);else return e.lanes=t.lanes,Kn(t,e,i)}return ed(t,e,n,r,i)}function Sy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},pe(Ki,Tt),Tt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,pe(Ki,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,pe(Ki,Tt),Tt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,pe(Ki,Tt),Tt|=r;return ct(t,e,i,n),e.child}function Cy(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ed(t,e,n,r,i){var s=wt(n)?di:rt.current;return s=ls(e,s),es(e,i),n=bf(t,e,n,r,s,i),r=wf(),t!==null&&!kt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Kn(t,e,i)):(ge&&r&&cf(e),e.flags|=1,ct(t,e,n,i),e.child)}function Th(t,e,n,r,i){if(wt(n)){var s=!0;sa(e)}else s=!1;if(es(e,i),e.stateNode===null)Bl(t,e),vy(e,n,r),Xu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=en(c):(c=wt(n)?di:rt.current,c=ls(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Sh(e,o,r,c),lr=!1;var p=e.memoizedState;o.state=p,ua(e,r,o,i),a=e.memoizedState,l!==r||p!==a||bt.current||lr?(typeof u=="function"&&(Qu(e,n,u,r),a=e.memoizedState),(l=lr||wh(e,n,l,r,p,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Xg(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:dn(e.type,l),o.props=c,d=e.pendingProps,p=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=en(a):(a=wt(n)?di:rt.current,a=ls(e,a));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||p!==a)&&Sh(e,o,r,a),lr=!1,p=e.memoizedState,o.state=p,ua(e,r,o,i);var m=e.memoizedState;l!==d||p!==m||bt.current||lr?(typeof h=="function"&&(Qu(e,n,h,r),m=e.memoizedState),(c=lr||wh(e,n,c,r,p,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&p===t.memoizedState||(e.flags|=1024),r=!1)}return td(t,e,n,r,s,i)}function td(t,e,n,r,i,s){Cy(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&hh(e,n,!1),Kn(t,e,s);r=e.stateNode,Vb.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cs(e,t.child,null,s),e.child=cs(e,null,l,s)):ct(t,e,l,s),e.memoizedState=r.state,i&&hh(e,n,!0),e.child}function zy(t){var e=t.stateNode;e.pendingContext?ph(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ph(t,e.context,!1),yf(t,e.containerInfo)}function Oh(t,e,n,r,i){return as(),df(i),e.flags|=256,ct(t,e,n,r),e.child}var nd={dehydrated:null,treeContext:null,retryLane:0};function rd(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ny(t,e,n){var r=e.pendingProps,i=xe.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),pe(xe,i&1),t===null)return Yu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ya(o,r,0,null),t=ii(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=rd(n),e.memoizedState=nd,t):zf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Hb(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=zr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=zr(l,s):(s=ii(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?rd(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=nd,r}return s=t.child,t=s.sibling,r=zr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function zf(t,e){return e=Ya({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function gl(t,e,n,r){return r!==null&&df(r),cs(e,t.child,null,n),t=zf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Hb(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Fc(Error(j(422))),gl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ya({mode:"visible",children:r.children},i,0,null),s=ii(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cs(e,t.child,null,o),e.child.memoizedState=rd(o),e.memoizedState=nd,s);if(!(e.mode&1))return gl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=Fc(s,r,void 0),gl(t,e,o,r)}if(l=(o&t.childLanes)!==0,kt||l){if(r=Be,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,qn(t,i),yn(r,t,i,-1))}return Df(),r=Fc(Error(j(421))),gl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=nw.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Dt=br(i.nextSibling),jt=e,ge=!0,pn=null,t!==null&&(Ut[qt++]=Ln,Ut[qt++]=_n,Ut[qt++]=fi,Ln=t.id,_n=t.overflow,fi=e),e=zf(e,r.children),e.flags|=4096,e)}function Dh(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Gu(t.return,e,n)}function Vc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function My(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(ct(t,e,r.children,n),r=xe.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Dh(t,n,e);else if(t.tag===19)Dh(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(pe(xe,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&da(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Vc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&da(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Vc(e,!0,n,null,s);break;case"together":Vc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Bl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Kn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),hi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=zr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=zr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Wb(t,e,n){switch(e.tag){case 3:zy(e),as();break;case 5:Zg(e);break;case 1:wt(e.type)&&sa(e);break;case 4:yf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;pe(aa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(pe(xe,xe.current&1),e.flags|=128,null):n&e.child.childLanes?Ny(t,e,n):(pe(xe,xe.current&1),t=Kn(t,e,n),t!==null?t.sibling:null);pe(xe,xe.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return My(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),pe(xe,xe.current),r)break;return null;case 22:case 23:return e.lanes=0,Sy(t,e,n)}return Kn(t,e,n)}var Ey,id,Ty,Oy;Ey=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};id=function(){};Ty=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ei(En.current);var s=null;switch(n){case"input":i=Nu(t,i),r=Nu(t,r),s=[];break;case"select":i=ke({},i,{value:void 0}),r=ke({},r,{value:void 0}),s=[];break;case"textarea":i=Tu(t,i),r=Tu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ra)}Du(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(po.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(po.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&he("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Oy=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rs(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ub(t,e,n){var r=e.pendingProps;switch(uf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return wt(e.type)&&ia(),et(e),null;case 3:return r=e.stateNode,us(),me(bt),me(rt),vf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(hl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,pn!==null&&(fd(pn),pn=null))),id(t,e),et(e),null;case 5:xf(e);var i=ei(zo.current);if(n=e.type,t!==null&&e.stateNode!=null)Ty(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return et(e),null}if(t=ei(En.current),hl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[zn]=e,r[So]=s,t=(e.mode&1)!==0,n){case"dialog":he("cancel",r),he("close",r);break;case"iframe":case"object":case"embed":he("load",r);break;case"video":case"audio":for(i=0;i<Us.length;i++)he(Us[i],r);break;case"source":he("error",r);break;case"img":case"image":case"link":he("error",r),he("load",r);break;case"details":he("toggle",r);break;case"input":Bp(r,s),he("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},he("invalid",r);break;case"textarea":Vp(r,s),he("invalid",r)}Du(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&pl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&pl(r.textContent,l,t),i=["children",""+l]):po.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&he("scroll",r)}switch(n){case"input":sl(r),Fp(r,s,!0);break;case"textarea":sl(r),Hp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ra)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=ig(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[zn]=e,t[So]=r,Ey(t,e,!1,!1),e.stateNode=t;e:{switch(o=ju(n,r),n){case"dialog":he("cancel",t),he("close",t),i=r;break;case"iframe":case"object":case"embed":he("load",t),i=r;break;case"video":case"audio":for(i=0;i<Us.length;i++)he(Us[i],t);i=r;break;case"source":he("error",t),i=r;break;case"img":case"image":case"link":he("error",t),he("load",t),i=r;break;case"details":he("toggle",t),i=r;break;case"input":Bp(t,r),i=Nu(t,r),he("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=ke({},r,{value:void 0}),he("invalid",t);break;case"textarea":Vp(t,r),i=Tu(t,r),he("invalid",t);break;default:i=r}Du(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?lg(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&sg(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ho(t,a):typeof a=="number"&&ho(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(po.hasOwnProperty(s)?a!=null&&s==="onScroll"&&he("scroll",t):a!=null&&Jd(t,s,a,o))}switch(n){case"input":sl(t),Fp(t,r,!1);break;case"textarea":sl(t),Hp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Or(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Gi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ra)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)Oy(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=ei(zo.current),ei(En.current),hl(e)){if(r=e.stateNode,n=e.memoizedProps,r[zn]=e,(s=r.nodeValue!==n)&&(t=jt,t!==null))switch(t.tag){case 3:pl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&pl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[zn]=e,e.stateNode=r}return et(e),null;case 13:if(me(xe),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&Dt!==null&&e.mode&1&&!(e.flags&128))Jg(),as(),e.flags|=98560,s=!1;else if(s=hl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[zn]=e}else as(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),s=!1}else pn!==null&&(fd(pn),pn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||xe.current&1?je===0&&(je=3):Df())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return us(),id(t,e),t===null&&bo(e.stateNode.containerInfo),et(e),null;case 10:return hf(e.type._context),et(e),null;case 17:return wt(e.type)&&ia(),et(e),null;case 19:if(me(xe),s=e.memoizedState,s===null)return et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rs(s,!1);else{if(je!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=da(t),o!==null){for(e.flags|=128,Rs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return pe(xe,xe.current&1|2),e.child}t=t.sibling}s.tail!==null&&ze()>fs&&(e.flags|=128,r=!0,Rs(s,!1),e.lanes=4194304)}else{if(!r)if(t=da(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ge)return et(e),null}else 2*ze()-s.renderingStartTime>fs&&n!==1073741824&&(e.flags|=128,r=!0,Rs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ze(),e.sibling=null,n=xe.current,pe(xe,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Of(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function qb(t,e){switch(uf(e),e.tag){case 1:return wt(e.type)&&ia(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return us(),me(bt),me(rt),vf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return xf(e),null;case 13:if(me(xe),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));as()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return me(xe),null;case 4:return us(),null;case 10:return hf(e.type._context),null;case 22:case 23:return Of(),null;case 24:return null;default:return null}}var yl=!1,nt=!1,Kb=typeof WeakSet=="function"?WeakSet:Set,$=null;function qi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Se(t,e,r)}else n.current=null}function sd(t,e,n){try{n()}catch(r){Se(t,e,r)}}var jh=!1;function Jb(t,e){if(Vu=ea,t=Ig(),af(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,p=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)p=d,d=h;for(;;){if(d===t)break t;if(p===n&&++c===i&&(l=o),p===s&&++u===r&&(a=o),(h=d.nextSibling)!==null)break;d=p,p=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Hu={focusedElem:t,selectionRange:n},ea=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,x=m.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:dn(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var k=e.stateNode.containerInfo;k.nodeType===1?k.textContent="":k.nodeType===9&&k.documentElement&&k.removeChild(k.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(b){Se(e,e.return,b)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return m=jh,jh=!1,m}function to(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&sd(e,n,s)}i=i.next}while(i!==r)}}function Ka(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function od(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Dy(t){var e=t.alternate;e!==null&&(t.alternate=null,Dy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[zn],delete e[So],delete e[qu],delete e[Ob],delete e[Db])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function jy(t){return t.tag===5||t.tag===3||t.tag===4}function Ah(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||jy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function ld(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ra));else if(r!==4&&(t=t.child,t!==null))for(ld(t,e,n),t=t.sibling;t!==null;)ld(t,e,n),t=t.sibling}function ad(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(ad(t,e,n),t=t.sibling;t!==null;)ad(t,e,n),t=t.sibling}var qe=null,fn=!1;function rr(t,e,n){for(n=n.child;n!==null;)Ay(t,e,n),n=n.sibling}function Ay(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount($a,n)}catch{}switch(n.tag){case 5:nt||qi(n,e);case 6:var r=qe,i=fn;qe=null,rr(t,e,n),qe=r,fn=i,qe!==null&&(fn?(t=qe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):qe.removeChild(n.stateNode));break;case 18:qe!==null&&(fn?(t=qe,n=n.stateNode,t.nodeType===8?Ic(t.parentNode,n):t.nodeType===1&&Ic(t,n),xo(t)):Ic(qe,n.stateNode));break;case 4:r=qe,i=fn,qe=n.stateNode.containerInfo,fn=!0,rr(t,e,n),qe=r,fn=i;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&sd(n,e,o),i=i.next}while(i!==r)}rr(t,e,n);break;case 1:if(!nt&&(qi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Se(n,e,l)}rr(t,e,n);break;case 21:rr(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,rr(t,e,n),nt=r):rr(t,e,n);break;default:rr(t,e,n)}}function Ph(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Kb),e.forEach(function(r){var i=rw.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function un(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:qe=l.stateNode,fn=!1;break e;case 3:qe=l.stateNode.containerInfo,fn=!0;break e;case 4:qe=l.stateNode.containerInfo,fn=!0;break e}l=l.return}if(qe===null)throw Error(j(160));Ay(s,o,i),qe=null,fn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Se(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Py(e,t),e=e.sibling}function Py(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(un(e,t),bn(t),r&4){try{to(3,t,t.return),Ka(3,t)}catch(y){Se(t,t.return,y)}try{to(5,t,t.return)}catch(y){Se(t,t.return,y)}}break;case 1:un(e,t),bn(t),r&512&&n!==null&&qi(n,n.return);break;case 5:if(un(e,t),bn(t),r&512&&n!==null&&qi(n,n.return),t.flags&32){var i=t.stateNode;try{ho(i,"")}catch(y){Se(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&ng(i,s),ju(l,o);var c=ju(l,s);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?lg(i,d):u==="dangerouslySetInnerHTML"?sg(i,d):u==="children"?ho(i,d):Jd(i,u,d,c)}switch(l){case"input":Mu(i,s);break;case"textarea":rg(i,s);break;case"select":var p=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Gi(i,!!s.multiple,h,!1):p!==!!s.multiple&&(s.defaultValue!=null?Gi(i,!!s.multiple,s.defaultValue,!0):Gi(i,!!s.multiple,s.multiple?[]:"",!1))}i[So]=s}catch(y){Se(t,t.return,y)}}break;case 6:if(un(e,t),bn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){Se(t,t.return,y)}}break;case 3:if(un(e,t),bn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xo(e.containerInfo)}catch(y){Se(t,t.return,y)}break;case 4:un(e,t),bn(t);break;case 13:un(e,t),bn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Ef=ze())),r&4&&Ph(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(c=nt)||u,un(e,t),nt=c):un(e,t),bn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for($=t,u=t.child;u!==null;){for(d=$=u;$!==null;){switch(p=$,h=p.child,p.tag){case 0:case 11:case 14:case 15:to(4,p,p.return);break;case 1:qi(p,p.return);var m=p.stateNode;if(typeof m.componentWillUnmount=="function"){r=p,n=p.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){Se(r,n,y)}}break;case 5:qi(p,p.return);break;case 22:if(p.memoizedState!==null){Rh(d);continue}}h!==null?(h.return=p,$=h):Rh(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=og("display",o))}catch(y){Se(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){Se(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:un(e,t),bn(t),r&4&&Ph(t);break;case 21:break;default:un(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(jy(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ho(i,""),r.flags&=-33);var s=Ah(t);ad(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Ah(t);ld(t,l,o);break;default:throw Error(j(161))}}catch(a){Se(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Yb(t,e,n){$=t,Iy(t)}function Iy(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||yl;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||nt;l=yl;var c=nt;if(yl=o,(nt=a)&&!c)for($=i;$!==null;)o=$,a=o.child,o.tag===22&&o.memoizedState!==null?Lh(i):a!==null?(a.return=o,$=a):Lh(i);for(;s!==null;)$=s,Iy(s),s=s.sibling;$=i,yl=l,nt=c}Ih(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Ih(t)}}function Ih(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||Ka(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:dn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&vh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}vh(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&xo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}nt||e.flags&512&&od(e)}catch(p){Se(e,e.return,p)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function Rh(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function Lh(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ka(4,e)}catch(a){Se(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Se(e,i,a)}}var s=e.return;try{od(e)}catch(a){Se(e,s,a)}break;case 5:var o=e.return;try{od(e)}catch(a){Se(e,o,a)}}}catch(a){Se(e,e.return,a)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var Gb=Math.ceil,ha=Yn.ReactCurrentDispatcher,Nf=Yn.ReactCurrentOwner,Gt=Yn.ReactCurrentBatchConfig,le=0,Be=null,Ee=null,Ge=0,Tt=0,Ki=Pr(0),je=0,To=null,hi=0,Ja=0,Mf=0,no=null,vt=null,Ef=0,fs=1/0,Pn=null,ma=!1,cd=null,Sr=null,xl=!1,hr=null,ga=0,ro=0,ud=null,Fl=-1,Vl=0;function ut(){return le&6?ze():Fl!==-1?Fl:Fl=ze()}function Cr(t){return t.mode&1?le&2&&Ge!==0?Ge&-Ge:Ab.transition!==null?(Vl===0&&(Vl=vg()),Vl):(t=ue,t!==0||(t=window.event,t=t===void 0?16:Ng(t.type)),t):1}function yn(t,e,n,r){if(50<ro)throw ro=0,ud=null,Error(j(185));Ho(t,n,r),(!(le&2)||t!==Be)&&(t===Be&&(!(le&2)&&(Ja|=n),je===4&&dr(t,Ge)),St(t,r),n===1&&le===0&&!(e.mode&1)&&(fs=ze()+500,Wa&&Ir()))}function St(t,e){var n=t.callbackNode;Ak(t,e);var r=Zl(t,t===Be?Ge:0);if(r===0)n!==null&&qp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&qp(n),e===1)t.tag===0?jb(_h.bind(null,t)):Ug(_h.bind(null,t)),Eb(function(){!(le&6)&&Ir()}),n=null;else{switch(kg(r)){case 1:n=Zd;break;case 4:n=yg;break;case 16:n=Xl;break;case 536870912:n=xg;break;default:n=Xl}n=Hy(n,Ry.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ry(t,e){if(Fl=-1,Vl=0,le&6)throw Error(j(327));var n=t.callbackNode;if(ts()&&t.callbackNode!==n)return null;var r=Zl(t,t===Be?Ge:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ya(t,r);else{e=r;var i=le;le|=2;var s=_y();(Be!==t||Ge!==e)&&(Pn=null,fs=ze()+500,ri(t,e));do try{Zb();break}catch(l){Ly(t,l)}while(!0);pf(),ha.current=s,le=i,Ee!==null?e=0:(Be=null,Ge=0,e=je)}if(e!==0){if(e===2&&(i=Lu(t),i!==0&&(r=i,e=dd(t,i))),e===1)throw n=To,ri(t,0),dr(t,r),St(t,ze()),n;if(e===6)dr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Qb(i)&&(e=ya(t,r),e===2&&(s=Lu(t),s!==0&&(r=s,e=dd(t,s))),e===1))throw n=To,ri(t,0),dr(t,r),St(t,ze()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Jr(t,vt,Pn);break;case 3:if(dr(t,r),(r&130023424)===r&&(e=Ef+500-ze(),10<e)){if(Zl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ut(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Uu(Jr.bind(null,t,vt,Pn),e);break}Jr(t,vt,Pn);break;case 4:if(dr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-gn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ze()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Gb(r/1960))-r,10<r){t.timeoutHandle=Uu(Jr.bind(null,t,vt,Pn),r);break}Jr(t,vt,Pn);break;case 5:Jr(t,vt,Pn);break;default:throw Error(j(329))}}}return St(t,ze()),t.callbackNode===n?Ry.bind(null,t):null}function dd(t,e){var n=no;return t.current.memoizedState.isDehydrated&&(ri(t,e).flags|=256),t=ya(t,e),t!==2&&(e=vt,vt=n,e!==null&&fd(e)),t}function fd(t){vt===null?vt=t:vt.push.apply(vt,t)}function Qb(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!xn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function dr(t,e){for(e&=~Mf,e&=~Ja,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-gn(e),r=1<<n;t[n]=-1,e&=~r}}function _h(t){if(le&6)throw Error(j(327));ts();var e=Zl(t,0);if(!(e&1))return St(t,ze()),null;var n=ya(t,e);if(t.tag!==0&&n===2){var r=Lu(t);r!==0&&(e=r,n=dd(t,r))}if(n===1)throw n=To,ri(t,0),dr(t,e),St(t,ze()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Jr(t,vt,Pn),St(t,ze()),null}function Tf(t,e){var n=le;le|=1;try{return t(e)}finally{le=n,le===0&&(fs=ze()+500,Wa&&Ir())}}function mi(t){hr!==null&&hr.tag===0&&!(le&6)&&ts();var e=le;le|=1;var n=Gt.transition,r=ue;try{if(Gt.transition=null,ue=1,t)return t()}finally{ue=r,Gt.transition=n,le=e,!(le&6)&&Ir()}}function Of(){Tt=Ki.current,me(Ki)}function ri(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Mb(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(uf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ia();break;case 3:us(),me(bt),me(rt),vf();break;case 5:xf(r);break;case 4:us();break;case 13:me(xe);break;case 19:me(xe);break;case 10:hf(r.type._context);break;case 22:case 23:Of()}n=n.return}if(Be=t,Ee=t=zr(t.current,null),Ge=Tt=e,je=0,To=null,Mf=Ja=hi=0,vt=no=null,Zr!==null){for(e=0;e<Zr.length;e++)if(n=Zr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Zr=null}return t}function Ly(t,e){do{var n=Ee;try{if(pf(),_l.current=pa,fa){for(var r=ve.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}fa=!1}if(pi=0,Le=Oe=ve=null,eo=!1,No=0,Nf.current=null,n===null||n.return===null){je=1,To=e,Ee=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ge,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var p=u.alternate;p?(u.updateQueue=p.updateQueue,u.memoizedState=p.memoizedState,u.lanes=p.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=zh(o);if(h!==null){h.flags&=-257,Nh(h,o,l,s,e),h.mode&1&&Ch(s,c,e),e=h,a=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(a),e.updateQueue=y}else m.add(a);break e}else{if(!(e&1)){Ch(s,c,e),Df();break e}a=Error(j(426))}}else if(ge&&l.mode&1){var x=zh(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Nh(x,o,l,s,e),df(ds(a,l));break e}}s=a=ds(a,l),je!==4&&(je=2),no===null?no=[s]:no.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=ky(s,a,e);xh(s,g);break e;case 1:l=a;var v=s.type,k=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||k!==null&&typeof k.componentDidCatch=="function"&&(Sr===null||!Sr.has(k)))){s.flags|=65536,e&=-e,s.lanes|=e;var b=by(s,l,e);xh(s,b);break e}}s=s.return}while(s!==null)}By(n)}catch(S){e=S,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function _y(){var t=ha.current;return ha.current=pa,t===null?pa:t}function Df(){(je===0||je===3||je===2)&&(je=4),Be===null||!(hi&268435455)&&!(Ja&268435455)||dr(Be,Ge)}function ya(t,e){var n=le;le|=2;var r=_y();(Be!==t||Ge!==e)&&(Pn=null,ri(t,e));do try{Xb();break}catch(i){Ly(t,i)}while(!0);if(pf(),le=n,ha.current=r,Ee!==null)throw Error(j(261));return Be=null,Ge=0,je}function Xb(){for(;Ee!==null;)$y(Ee)}function Zb(){for(;Ee!==null&&!Ck();)$y(Ee)}function $y(t){var e=Vy(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?By(t):Ee=e,Nf.current=null}function By(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=qb(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{je=6,Ee=null;return}}else if(n=Ub(n,e,Tt),n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);je===0&&(je=5)}function Jr(t,e,n){var r=ue,i=Gt.transition;try{Gt.transition=null,ue=1,ew(t,e,n,r)}finally{Gt.transition=i,ue=r}return null}function ew(t,e,n,r){do ts();while(hr!==null);if(le&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(Pk(t,s),t===Be&&(Ee=Be=null,Ge=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||xl||(xl=!0,Hy(Xl,function(){return ts(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Gt.transition,Gt.transition=null;var o=ue;ue=1;var l=le;le|=4,Nf.current=null,Jb(t,n),Py(n,t),kb(Hu),ea=!!Vu,Hu=Vu=null,t.current=n,Yb(n),zk(),le=l,ue=o,Gt.transition=s}else t.current=n;if(xl&&(xl=!1,hr=t,ga=i),s=t.pendingLanes,s===0&&(Sr=null),Ek(n.stateNode),St(t,ze()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ma)throw ma=!1,t=cd,cd=null,t;return ga&1&&t.tag!==0&&ts(),s=t.pendingLanes,s&1?t===ud?ro++:(ro=0,ud=t):ro=0,Ir(),null}function ts(){if(hr!==null){var t=kg(ga),e=Gt.transition,n=ue;try{if(Gt.transition=null,ue=16>t?16:t,hr===null)var r=!1;else{if(t=hr,hr=null,ga=0,le&6)throw Error(j(331));var i=le;for(le|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for($=c;$!==null;){var u=$;switch(u.tag){case 0:case 11:case 15:to(8,u,s)}var d=u.child;if(d!==null)d.return=u,$=d;else for(;$!==null;){u=$;var p=u.sibling,h=u.return;if(Dy(u),u===c){$=null;break}if(p!==null){p.return=h,$=p;break}$=h}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:to(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,$=g;break e}$=s.return}}var v=t.current;for($=v;$!==null;){o=$;var k=o.child;if(o.subtreeFlags&2064&&k!==null)k.return=o,$=k;else e:for(o=v;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ka(9,l)}}catch(S){Se(l,l.return,S)}if(l===o){$=null;break e}var b=l.sibling;if(b!==null){b.return=l.return,$=b;break e}$=l.return}}if(le=i,Ir(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot($a,t)}catch{}r=!0}return r}finally{ue=n,Gt.transition=e}}return!1}function $h(t,e,n){e=ds(n,e),e=ky(t,e,1),t=wr(t,e,1),e=ut(),t!==null&&(Ho(t,1,e),St(t,e))}function Se(t,e,n){if(t.tag===3)$h(t,t,n);else for(;e!==null;){if(e.tag===3){$h(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Sr===null||!Sr.has(r))){t=ds(n,t),t=by(e,t,1),e=wr(e,t,1),t=ut(),e!==null&&(Ho(e,1,t),St(e,t));break}}e=e.return}}function tw(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ut(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(Ge&n)===n&&(je===4||je===3&&(Ge&130023424)===Ge&&500>ze()-Ef?ri(t,0):Mf|=n),St(t,e)}function Fy(t,e){e===0&&(t.mode&1?(e=al,al<<=1,!(al&130023424)&&(al=4194304)):e=1);var n=ut();t=qn(t,e),t!==null&&(Ho(t,e,n),St(t,n))}function nw(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Fy(t,n)}function rw(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),Fy(t,n)}var Vy;Vy=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||bt.current)kt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return kt=!1,Wb(t,e,n);kt=!!(t.flags&131072)}else kt=!1,ge&&e.flags&1048576&&qg(e,la,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Bl(t,e),t=e.pendingProps;var i=ls(e,rt.current);es(e,n),i=bf(null,e,r,t,i,n);var s=wf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wt(r)?(s=!0,sa(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,gf(e),i.updater=qa,e.stateNode=i,i._reactInternals=e,Xu(e,r,t,n),e=td(null,e,r,!0,s,n)):(e.tag=0,ge&&s&&cf(e),ct(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Bl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=sw(r),t=dn(r,t),i){case 0:e=ed(null,e,r,t,n);break e;case 1:e=Th(null,e,r,t,n);break e;case 11:e=Mh(null,e,r,t,n);break e;case 14:e=Eh(null,e,r,dn(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),ed(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Th(t,e,r,i,n);case 3:e:{if(zy(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Xg(t,e),ua(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ds(Error(j(423)),e),e=Oh(t,e,r,n,i);break e}else if(r!==i){i=ds(Error(j(424)),e),e=Oh(t,e,r,n,i);break e}else for(Dt=br(e.stateNode.containerInfo.firstChild),jt=e,ge=!0,pn=null,n=Gg(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(as(),r===i){e=Kn(t,e,n);break e}ct(t,e,r,n)}e=e.child}return e;case 5:return Zg(e),t===null&&Yu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Wu(r,i)?o=null:s!==null&&Wu(r,s)&&(e.flags|=32),Cy(t,e),ct(t,e,o,n),e.child;case 6:return t===null&&Yu(e),null;case 13:return Ny(t,e,n);case 4:return yf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cs(e,null,r,n):ct(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Mh(t,e,r,i,n);case 7:return ct(t,e,e.pendingProps,n),e.child;case 8:return ct(t,e,e.pendingProps.children,n),e.child;case 12:return ct(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,pe(aa,r._currentValue),r._currentValue=o,s!==null)if(xn(s.value,o)){if(s.children===i.children&&!bt.current){e=Kn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Fn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Gu(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Gu(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ct(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,es(e,n),i=en(i),r=r(i),e.flags|=1,ct(t,e,r,n),e.child;case 14:return r=e.type,i=dn(r,e.pendingProps),i=dn(r.type,i),Eh(t,e,r,i,n);case 15:return wy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:dn(r,i),Bl(t,e),e.tag=1,wt(r)?(t=!0,sa(e)):t=!1,es(e,n),vy(e,r,i),Xu(e,r,i,n),td(null,e,r,!0,t,n);case 19:return My(t,e,n);case 22:return Sy(t,e,n)}throw Error(j(156,e.tag))};function Hy(t,e){return gg(t,e)}function iw(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Jt(t,e,n,r){return new iw(t,e,n,r)}function jf(t){return t=t.prototype,!(!t||!t.isReactComponent)}function sw(t){if(typeof t=="function")return jf(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Gd)return 11;if(t===Qd)return 14}return 2}function zr(t,e){var n=t.alternate;return n===null?(n=Jt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Hl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")jf(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Li:return ii(n.children,i,s,e);case Yd:o=8,i|=8;break;case wu:return t=Jt(12,n,e,i|2),t.elementType=wu,t.lanes=s,t;case Su:return t=Jt(13,n,e,i),t.elementType=Su,t.lanes=s,t;case Cu:return t=Jt(19,n,e,i),t.elementType=Cu,t.lanes=s,t;case Z0:return Ya(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q0:o=10;break e;case X0:o=9;break e;case Gd:o=11;break e;case Qd:o=14;break e;case or:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Jt(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function ii(t,e,n,r){return t=Jt(7,t,r,e),t.lanes=n,t}function Ya(t,e,n,r){return t=Jt(22,t,r,e),t.elementType=Z0,t.lanes=n,t.stateNode={isHidden:!1},t}function Hc(t,e,n){return t=Jt(6,t,null,e),t.lanes=n,t}function Wc(t,e,n){return e=Jt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function ow(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cc(0),this.expirationTimes=Cc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Af(t,e,n,r,i,s,o,l,a){return t=new ow(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Jt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},gf(s),t}function lw(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Wy(t){if(!t)return Dr;t=t._reactInternals;e:{if(zi(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(wt(n))return Wg(t,n,e)}return e}function Uy(t,e,n,r,i,s,o,l,a){return t=Af(n,r,!0,t,i,s,o,l,a),t.context=Wy(null),n=t.current,r=ut(),i=Cr(n),s=Fn(r,i),s.callback=e??null,wr(n,s,i),t.current.lanes=i,Ho(t,i,r),St(t,r),t}function Ga(t,e,n,r){var i=e.current,s=ut(),o=Cr(i);return n=Wy(n),e.context===null?e.context=n:e.pendingContext=n,e=Fn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=wr(i,e,o),t!==null&&(yn(t,i,o,s),Ll(t,i,o)),o}function xa(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Bh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pf(t,e){Bh(t,e),(t=t.alternate)&&Bh(t,e)}function aw(){return null}var qy=typeof reportError=="function"?reportError:function(t){console.error(t)};function If(t){this._internalRoot=t}Qa.prototype.render=If.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Ga(t,e,null,null)};Qa.prototype.unmount=If.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;mi(function(){Ga(null,t,null,null)}),e[Un]=null}};function Qa(t){this._internalRoot=t}Qa.prototype.unstable_scheduleHydration=function(t){if(t){var e=Sg();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ur.length&&e!==0&&e<ur[n].priority;n++);ur.splice(n,0,t),n===0&&zg(t)}};function Rf(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Xa(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Fh(){}function cw(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=xa(o);s.call(c)}}var o=Uy(e,r,t,0,null,!1,!1,"",Fh);return t._reactRootContainer=o,t[Un]=o.current,bo(t.nodeType===8?t.parentNode:t),mi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=xa(a);l.call(c)}}var a=Af(t,0,!1,null,null,!1,!1,"",Fh);return t._reactRootContainer=a,t[Un]=a.current,bo(t.nodeType===8?t.parentNode:t),mi(function(){Ga(e,a,n,r)}),a}function Za(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=xa(o);l.call(a)}}Ga(e,o,t,i)}else o=cw(n,e,t,i,r);return xa(o)}bg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ws(e.pendingLanes);n!==0&&(ef(e,n|1),St(e,ze()),!(le&6)&&(fs=ze()+500,Ir()))}break;case 13:mi(function(){var r=qn(t,1);if(r!==null){var i=ut();yn(r,t,1,i)}}),Pf(t,1)}};tf=function(t){if(t.tag===13){var e=qn(t,134217728);if(e!==null){var n=ut();yn(e,t,134217728,n)}Pf(t,134217728)}};wg=function(t){if(t.tag===13){var e=Cr(t),n=qn(t,e);if(n!==null){var r=ut();yn(n,t,e,r)}Pf(t,e)}};Sg=function(){return ue};Cg=function(t,e){var n=ue;try{return ue=t,e()}finally{ue=n}};Pu=function(t,e,n){switch(e){case"input":if(Mu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Ha(r);if(!i)throw Error(j(90));tg(r),Mu(r,i)}}}break;case"textarea":rg(t,n);break;case"select":e=n.value,e!=null&&Gi(t,!!n.multiple,e,!1)}};ug=Tf;dg=mi;var uw={usingClientEntryPoint:!1,Events:[Uo,Fi,Ha,ag,cg,Tf]},Ls={findFiberByHostInstance:Xr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},dw={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Yn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=hg(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||aw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vl.isDisabled&&vl.supportsFiber)try{$a=vl.inject(dw),Mn=vl}catch{}}Lt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=uw;Lt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Rf(e))throw Error(j(200));return lw(t,e,null,n)};Lt.createRoot=function(t,e){if(!Rf(t))throw Error(j(299));var n=!1,r="",i=qy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Af(t,1,!1,null,null,n,!1,r,i),t[Un]=e.current,bo(t.nodeType===8?t.parentNode:t),new If(e)};Lt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=hg(e),t=t===null?null:t.stateNode,t};Lt.flushSync=function(t){return mi(t)};Lt.hydrate=function(t,e,n){if(!Xa(e))throw Error(j(200));return Za(null,t,e,!0,n)};Lt.hydrateRoot=function(t,e,n){if(!Rf(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=qy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Uy(e,null,t,1,n??null,i,!1,s,o),t[Un]=e.current,bo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Qa(e)};Lt.render=function(t,e,n){if(!Xa(e))throw Error(j(200));return Za(null,t,e,!1,n)};Lt.unmountComponentAtNode=function(t){if(!Xa(t))throw Error(j(40));return t._reactRootContainer?(mi(function(){Za(null,null,t,!1,function(){t._reactRootContainer=null,t[Un]=null})}),!0):!1};Lt.unstable_batchedUpdates=Tf;Lt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Xa(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Za(t,e,n,!1,r)};Lt.version="18.3.1-next-f1338f8080-20240426";function Ky(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Ky)}catch(t){console.error(t)}}Ky(),K0.exports=Lt;var Jy=K0.exports;const fw=I0(Jy);var Vh=Jy;ku.createRoot=Vh.createRoot,ku.hydrateRoot=Vh.hydrateRoot;function Ke(t){this.content=t}Ke.prototype={constructor:Ke,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Ke(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Ke(n)},addToStart:function(t,e){return new Ke([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Ke(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Ke(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Ke.from(t),t.size?new Ke(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Ke.from(t),t.size?new Ke(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Ke.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Ke.from=function(t){if(t instanceof Ke)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Ke(e)};function Yy(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=Yy(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Gy(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=Gy(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class O{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new O(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new O(r,i)}cutByIndex(e,n){return e==n?O.empty:e==0&&n==this.content.length?this:new O(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new O(i,s)}addToStart(e){return new O([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new O(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return Yy(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Gy(this,e,n,r)}findIndex(e){if(e==0)return kl(0,e);if(e==this.size)return kl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?kl(n+1,s):kl(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return O.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new O(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return O.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new O(n||e,r)}static from(e){if(!e)return O.empty;if(e instanceof O)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new O([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}O.empty=new O([],0);const Uc={index:0,offset:0};function kl(t,e){return Uc.index=t,Uc.offset=e,Uc}function va(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!va(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!va(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let de=class pd{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&va(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return pd.none;if(e instanceof pd)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};de.none=[];class ka extends Error{}class L{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Xy(this.content,e+this.openStart,n);return r&&new L(r,this.openStart,this.openEnd)}removeBetween(e,n){return new L(Qy(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return L.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new L(O.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new L(e,r,i)}}L.empty=new L(O.empty,0,0);function Qy(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Qy(s.content,e-i-1,n-i-1)))}function Xy(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Xy(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function pw(t,e,n){if(n.openStart>t.depth)throw new ka("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new ka("Inconsistent open depths");return Zy(t,e,n,0)}function Zy(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=Zy(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return oi(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=hw(n,t);return oi(s,tx(t,o,l,e,r))}else return oi(s,ba(t,e,r))}function ex(t,e){if(!e.type.compatibleContent(t.type))throw new ka("Cannot join "+e.type.name+" onto "+t.type.name)}function hd(t,e,n){let r=t.node(n);return ex(r,e.node(n)),r}function si(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function io(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(si(t.nodeAfter,r),s++));for(let l=s;l<o;l++)si(i.child(l),r);e&&e.depth==n&&e.textOffset&&si(e.nodeBefore,r)}function oi(t,e){return t.type.checkContent(e),t.copy(e)}function tx(t,e,n,r,i){let s=t.depth>i&&hd(t,e,i+1),o=r.depth>i&&hd(n,r,i+1),l=[];return io(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(ex(s,o),si(oi(s,tx(t,e,n,r,i+1)),l)):(s&&si(oi(s,ba(t,e,i+1)),l),io(e,n,i,l),o&&si(oi(o,ba(n,r,i+1)),l)),io(r,null,i,l),new O(l)}function ba(t,e,n){let r=[];if(io(null,t,n,r),t.depth>n){let i=hd(t,e,n+1);si(oi(i,ba(t,e,n+1)),r)}return io(e,null,n,r),new O(r)}function hw(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(O.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class Oo{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return de.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new wa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new Oo(n,r,s)}static resolveCached(e,n){let r=Hh.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Hh.set(e,r=new mw);let i=r.elts[r.i]=Oo.resolve(e,n);return r.i=(r.i+1)%gw,i}}class mw{constructor(){this.elts=[],this.i=0}}const gw=12,Hh=new WeakMap;class wa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const yw=Object.create(null);let Nr=class md{constructor(e,n,r,i=de.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||O.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&va(this.attrs,n||e.defaultAttrs||yw)&&de.sameSet(this.marks,r||de.none)}copy(e=null){return e==this.content?this:new md(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new md(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return L.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new L(c,i.depth-o,s.depth-o)}replace(e,n,r){return pw(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return Oo.resolveCached(this,e)}resolveNoCache(e){return Oo.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),nx(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=O.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=de.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!de.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=O.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Nr.prototype.text=void 0;class Sa extends Nr{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):nx(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new Sa(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new Sa(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function nx(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class gi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new xw(e,n);if(r.next==null)return gi.empty;let i=rx(r);r.next&&r.err("Unexpected trailing text");let s=zw(Cw(i));return Nw(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return O.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let p=s(d,l.concat(u));if(p)return p}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}gi.empty=new gi(!0);class xw{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function rx(t){let e=[];do e.push(vw(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function vw(t){let e=[];do e.push(kw(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function kw(t){let e=Sw(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=bw(t,e);else break;return e}function Wh(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function bw(t,e){let n=Wh(t),r=n;return t.eat(",")&&(t.next!="}"?r=Wh(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function ww(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function Sw(t){if(t.eat("(")){let e=rx(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=ww(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function Cw(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function ix(t,e){return e-t}function Uh(t,e){let n=[];return r(e),n.sort(ix);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function zw(t){let e=Object.create(null);return n(Uh(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Uh(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new gi(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(ix);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function Nw(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function sx(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function ox(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function lx(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function ax(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Ew(t,r,e[r]);return n}let qh=class cx{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ax(e,r.attrs),this.defaultAttrs=sx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==gi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:ox(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Nr(this,this.computeAttrs(e),O.from(n),de.setFrom(r))}createChecked(e=null,n,r){return n=O.from(n),this.checkContent(n),new Nr(this,this.computeAttrs(e),n,de.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=O.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(O.empty,!0);return s?new Nr(this,e,n.append(s),de.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){lx(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:de.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new cx(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Mw(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class Ew{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Mw(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class ec{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=ax(e,i.attrs),this.excluded=null;let s=sx(this.attrs);this.instance=s?new de(this,s):null}create(e=null){return!e&&this.instance?this.instance:new de(this,ox(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new ec(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){lx(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class ux{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Ke.from(e.nodes),n.marks=Ke.from(e.marks||{}),this.nodes=qh.compile(this.spec.nodes,this),this.marks=ec.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=gi.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Kh(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Kh(this,o.split(" "))}this.nodeFromJSON=i=>Nr.fromJSON(this,i),this.markFromJSON=i=>de.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof qh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new Sa(r,r.defaultAttrs,e,de.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Kh(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Tw(t){return t.tag!=null}function Ow(t){return t.style!=null}let so=class gd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Tw(i))this.tags.push(i);else if(Ow(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new Yh(this,n,!1);return r.addAll(e,de.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new Yh(this,n,!0);return r.addAll(e,de.none,n.from,n.to),L.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Aw(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Gh(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Gh(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new gd(e,gd.schemaRules(e)))}};const dx={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Dw={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},fx={ol:!0,ul:!0},Do=1,yd=2,oo=4;function Jh(t,e,n){return e!=null?(e?Do:0)|(e==="full"?yd:0):t&&t.whitespace=="pre"?Do|yd:n&~oo}class bl{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=de.none,this.match=s||(o&oo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(O.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Do)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=O.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(O.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!dx.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Yh{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=Jh(null,n.preserveWhitespace,0)|(r?oo:0);i?s=new bl(i.type,i.attrs,de.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new bl(null,null,de.none,!0,null,o):s=new bl(e.schema.topNodeType,null,de.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&yd?"full":this.localPreserveWS||(i.options&Do)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let a=0;a<l.length;a++)a&&this.insertNode(o.linebreakReplacement.create(),n,!0),l[a]&&this.insertNode(o.text(l[a]),n,!/\S/.test(l[a]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;fx.hasOwnProperty(o)&&this.parser.normalizeLists&&jw(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:Dw.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(dx.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,s=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=de.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):Qh(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Jh(e,s,o.options);o.options&oo&&o.content.length==0&&(l|=oo);let a=de.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Qh(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new bl(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Do)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function jw(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&fx.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Aw(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Gh(t){let e={};for(let n in t)e[n]=t[n];return e}function Qh(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Ni{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=qc(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Wl(qc(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Wl(qc(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Wl(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ni(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Xh(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Xh(e.marks)}}function Xh(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function qc(t){return t.document||window.document}const Zh=new WeakMap;function Pw(t){let e=Zh.get(t);return e===void 0&&Zh.set(t,e=Iw(t)),e}function Iw(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Wl(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=Pw(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let p=d.indexOf(" ");p>0?a.setAttributeNS(d.slice(0,p),d.slice(p+1),c[d]):d=="style"&&a.style?a.style.cssText=c[d]:a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let p=e[d];if(p===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:m}=Wl(t,p,n,r);if(a.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:a,contentDOM:l}}const px=65535,hx=Math.pow(2,16);function Rw(t,e){return t+e*hx}function em(t){return t&px}function Lw(t){return(t-(t&px))/hx}const mx=1,gx=2,Ul=4,yx=8;class xd{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&yx)>0}get deletedBefore(){return(this.delInfo&(mx|Ul))>0}get deletedAfter(){return(this.delInfo&(gx|Ul))>0}get deletedAcross(){return(this.delInfo&Ul)>0}}class Ot{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ot.empty)return Ot.empty}recover(e){let n=0,r=em(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Lw(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],d=a+c;if(e<=d){let p=c?e==a?-1:e==d?1:n:n,h=a+i+(p<0?0:u);if(r)return h;let m=e==(n<0?a:d)?null:Rw(l/3,e-a),y=e==a?gx:e==d?mx:Ul;return(n<0?e!=a:e!=d)&&(y|=yx),new xd(h,y,m)}i+=u-c}return r?e+i:new xd(e+i,0,null)}touches(e,n){let r=0,i=em(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new Ot(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ot.empty:new Ot(e<0?[0,-e,0]:[0,0,e])}}Ot.empty=new Ot([]);class jo{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new jo(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new jo;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new xd(e,i,null)}}const Kc=Object.create(null);class ot{getMap(){return Ot.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Kc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Kc)throw new RangeError("Duplicate use of step JSON ID "+e);return Kc[e]=n,n.prototype.jsonID=e,n}}class Te{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Te(e,null)}static fail(e){return new Te(null,e)}static fromReplace(e,n,r,i){try{return Te.ok(e.replace(n,r,i))}catch(s){if(s instanceof ka)return Te.fail(s.message);throw s}}}function Lf(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Lf(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return O.fromArray(r)}class mr extends ot{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new L(Lf(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,s)}invert(){return new Nn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new mr(n.pos,r.pos,this.mark)}merge(e){return e instanceof mr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new mr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new mr(n.from,n.to,e.markFromJSON(n.mark))}}ot.jsonID("addMark",mr);class Nn extends ot{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new L(Lf(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,r)}invert(){return new mr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Nn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nn(n.from,n.to,e.markFromJSON(n.mark))}}ot.jsonID("removeMark",Nn);class gr extends ot{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new L(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new gr(this.pos,n.marks[i]);return new gr(this.pos,this.mark)}}return new yi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new gr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new gr(n.pos,e.markFromJSON(n.mark))}}ot.jsonID("addNodeMark",gr);class yi extends ot{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new L(O.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new gr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new yi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new yi(n.pos,e.markFromJSON(n.mark))}}ot.jsonID("removeNodeMark",yi);class _e extends ot{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&vd(e,this.from,this.to)?Te.fail("Structure replace would overwrite content"):Te.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ot([this.from,this.to-this.from,this.slice.size])}invert(e){return new _e(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new _e(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof _e)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?L.empty:new L(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new _e(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?L.empty:new L(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new _e(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new _e(n.from,n.to,L.fromJSON(e,n.slice),!!n.structure)}}ot.jsonID("replace",_e);class Fe extends ot{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(vd(e,this.from,this.gapFrom)||vd(e,this.gapTo,this.to)))return Te.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Te.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Te.fromReplace(e,this.from,this.to,r):Te.fail("Content does not fit in gap")}getMap(){return new Ot([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Fe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Fe(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Fe(n.from,n.to,n.gapFrom,n.gapTo,L.fromJSON(e,n.slice),n.insert,!!n.structure)}}ot.jsonID("replaceAround",Fe);function vd(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function _w(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let p=Math.max(c,e),h=Math.min(c+a.nodeSize,n),m=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==p&&o.mark.eq(d[y])?o.to=h:i.push(o=new Nn(p,h,d[y])));l&&l.to==p?l.to=h:s.push(l=new mr(p,h,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function $w(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof ec){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],p;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&d.eq(i[h].style)&&(p=m)}p?(p.to=c,p.step=s):i.push({style:d,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Nn(o.from,o.to,o.style)))}function _f(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new _e(l,u,L.empty));else{r=d;for(let p=0;p<c.marks.length;p++)n.allowsMarkType(c.marks[p].type)||t.step(new Nn(l,u,c.marks[p]));if(i&&c.isText&&n.whitespace!="pre"){let p,h=/\r?\n|\r/g,m;for(;p=h.exec(c.text);)m||(m=new L(O.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new _e(l+p.index,l+p.index+p[0].length,m))}}l=u}if(!r.validEnd){let a=r.fillBefore(O.empty,!0);t.replace(l,l,new L(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function Bw(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function zs(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),l=t.$from.index(r)+i,a=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(l,a,n))return r;if(r==0||o.type.spec.isolating||!Bw(o,l,a))break;l&&(i=1),a<o.childCount&&(s=1)}return null}function Fw(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=O.empty,d=0;for(let m=s,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,u=O.from(r.node(m).copy(u)),d++):a--;let p=O.empty,h=0;for(let m=s,y=!1;m>n;m--)y||i.after(m+1)<i.end(m)?(y=!0,p=O.from(i.node(m).copy(p)),h++):c++;t.step(new Fe(a,c,o,l,new L(u.append(p),d,h),u.size-d,!0))}function $f(t,e,n=null,r=t){let i=Vw(t,e),s=i&&Hw(r,e);return s?i.map(tm).concat({type:e,attrs:n}).concat(s.map(tm)):null}function tm(t){return{type:t,attrs:null}}function Vw(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function Hw(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function Ww(t,e,n){let r=O.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=O.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Fe(i,s,i,s,new L(r,0,0),n.length,!0))}function Uw(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&qw(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&vx(t,o,l,s),_f(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(l,1),p=u.map(l+o.nodeSize,1);return t.step(new Fe(d,p,d+1,p-1,new L(O.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&xx(t,o,l,s),!1}})}function xx(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function vx(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function qw(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Kw(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Fe(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new L(O.from(o),0,0),1,!0))}function Vn(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),p=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(p,d.childCount),m=r&&r[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||d;if(!d.canReplace(p+1,d.childCount)||!y.type.validContent(h))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function Jw(t,e,n=1,r){let i=t.doc.resolve(e),s=O.empty,o=O.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=O.from(i.node(l).copy(s));let u=r&&r[c];o=O.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new _e(e,e,new L(s.append(o),n,n),!0))}function Rr(t,e){let n=t.resolve(e),r=n.index();return kx(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Yw(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function kx(t,e){return!!(t&&e&&!t.isLeaf&&Yw(t,e))}function tc(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&kx(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function Gw(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);vx(t,u.node(),u.before(),l)}o.inlineContent&&_f(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new _e(c,a.map(e+n,-1),L.empty,!0)),r===!0){let u=t.doc.resolve(c);xx(t,u.node(),u.before(),t.steps.length)}return t}function Qw(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function bx(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function nc(t,e,n=e,r=L.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return wx(i,s,r)?new _e(e,n,r):new Xw(i,s,r).fit()}function wx(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Xw{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=O.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=O.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new L(s,o,l);return e>-1?new Fe(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new _e(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Jc(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(O.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Jc(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new L(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Jc(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new L(qs(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new L(qs(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:d,type:p}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));d=d.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let y=l.child(c),x=d.matchType(y.type);if(!x)break;c++,(c>1||a==0||y.content.size)&&(d=x,u.push(Sx(y.mark(p.allowedMarks(y.marks)),c==1?a:0,c==l.childCount?h:-1)))}let m=c==l.childCount;m||(h=-1),this.placed=Ks(this.placed,n,O.from(u)),this.frontier[n].match=d,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,x=l;y<h;y++){let g=x.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),x=g.content}this.unplaced=m?e==0?L.empty:new L(qs(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new L(qs(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Yc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=Yc(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=Yc(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ks(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ks(this.placed,this.depth,O.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(O.empty,!0);n.childCount&&(this.placed=Ks(this.placed,this.frontier.length,n))}}function qs(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(qs(t.firstChild.content,e-1,n)))}function Ks(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ks(t.lastChild.content,e-1,n)))}function Jc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function Sx(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,Sx(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(O.empty,!0)))),t.copy(r)}function Yc(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!Zw(n,s.content,o)?l:null}function Zw(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function eS(t){return t.spec.defining||t.spec.definingForContent}function tS(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(wx(i,s,r))return t.step(new _e(e,n,r));let o=zx(i,s);o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let p=i.depth,h=i.pos-1;p>0;p--,h--){let m=i.node(p).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(p)>-1?l=p:i.before(p)==h&&o.splice(1,0,-p)}let a=o.indexOf(l),c=[],u=r.openStart;for(let p=r.content,h=0;;h++){let m=p.firstChild;if(c.push(m),h==r.openStart)break;p=m.content}for(let p=u-1;p>=0;p--){let h=c[p],m=eS(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(l)-1)))u=p;else if(m||!h.type.isTextblock)break}for(let p=r.openStart;p>=0;p--){let h=(p+u+1)%(r.openStart+1),m=c[h];if(m)for(let y=0;y<o.length;y++){let x=o[(y+a)%o.length],g=!0;x<0&&(g=!1,x=-x);let v=i.node(x-1),k=i.index(x-1);if(v.canReplaceWith(k,k,m.type,m.marks))return t.replace(i.before(x),g?s.after(x):n,new L(Cx(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let p=o.length-1;p>=0&&(t.replace(e,n,r),!(t.steps.length>d));p--){let h=o[p];h<0||(e=i.before(h),n=s.after(h))}}function Cx(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(Cx(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(O.empty,!0))}return t}function nS(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Qw(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new L(O.from(r),0,0))}function rS(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=zx(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function zx(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class ns extends ot{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Te.fromReplace(e,this.pos,this.pos+1,new L(O.from(i),0,n.isLeaf?0:1))}getMap(){return Ot.empty}invert(e){return new ns(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ns(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ns(n.pos,n.attr,n.value)}}ot.jsonID("attr",ns);class Ao extends ot{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Te.ok(r)}getMap(){return Ot.empty}invert(e){return new Ao(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ao(n.attr,n.value)}}ot.jsonID("docAttr",Ao);let ps=class extends Error{};ps=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ps.prototype=Object.create(Error.prototype);ps.prototype.constructor=ps;ps.prototype.name="TransformError";class iS{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new jo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ps(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=L.empty){let i=nc(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new L(O.from(r),0,0))}delete(e,n){return this.replace(e,n,L.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return tS(this,e,n,r),this}replaceRangeWith(e,n,r){return nS(this,e,n,r),this}deleteRange(e,n){return rS(this,e,n),this}lift(e,n){return Fw(this,e,n),this}join(e,n=1){return Gw(this,e,n),this}wrap(e,n){return Ww(this,e,n),this}setBlockType(e,n=e,r,i=null){return Uw(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Kw(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ns(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ao(e,n)),this}addNodeMark(e,n){return this.step(new gr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof de)n.isInSet(r.marks)&&this.step(new yi(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new yi(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return Jw(this,e,n,r),this}addMark(e,n,r){return _w(this,e,n,r),this}removeMark(e,n,r){return $w(this,e,n,r),this}clearIncompatible(e,n,r){return _f(this,e,n,r),this}}const Gc=Object.create(null);class Z{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new sS(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=L.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?L.empty:n),l==0&&im(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),im(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Q(e):Ai(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Ai(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Ai(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new At(e.node(0))}static atStart(e){return Ai(e,e,0,0,1)||new At(e)}static atEnd(e){return Ai(e,e,e.content.size,e.childCount,-1)||new At(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Gc[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Gc)throw new RangeError("Duplicate use of selection JSON ID "+e);return Gc[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Q.between(this.$anchor,this.$head).getBookmark()}}Z.prototype.visible=!0;class sS{constructor(e,n){this.$from=e,this.$to=n}}let nm=!1;function rm(t){!nm&&!t.parent.inlineContent&&(nm=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Q extends Z{constructor(e,n=e){rm(e),rm(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Z.near(r);let i=e.resolve(n.map(this.anchor));return new Q(i.parent.inlineContent?i:r,r)}replace(e,n=L.empty){if(super.replace(e,n),n==L.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Q&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new rc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Q(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Z.findFrom(n,r,!0)||Z.findFrom(n,-r,!0);if(s)n=s.$head;else return Z.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Z.findFrom(e,-r,!0)||Z.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Q(e,n)}}Z.jsonID("text",Q);class rc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new rc(e.map(this.anchor),e.map(this.head))}resolve(e){return Q.between(e.resolve(this.anchor),e.resolve(this.head))}}class W extends Z{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Z.near(s):new W(s)}content(){return new L(O.from(this.node),0,0)}eq(e){return e instanceof W&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Bf(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new W(e.resolve(n.anchor))}static create(e,n){return new W(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}W.prototype.visible=!1;Z.jsonID("node",W);class Bf{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new rc(r,r):new Bf(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&W.isSelectable(r)?new W(n):Z.near(n)}}class At extends Z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=L.empty){if(n==L.empty){e.delete(0,e.doc.content.size);let r=Z.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new At(e)}map(e){return new At(e)}eq(e){return e instanceof At}getBookmark(){return oS}}Z.jsonID("all",At);const oS={map(){return this},resolve(t){return new At(t)}};function Ai(t,e,n,r,i,s=!1){if(e.inlineContent)return Q.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&W.isSelectable(l))return W.create(t,n-(i<0?l.nodeSize:0))}else{let a=Ai(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function im(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof _e||i instanceof Fe))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(Z.near(t.doc.resolve(o),n))}const sm=1,wl=2,om=4;class lS extends iS{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|sm)&~wl,this.storedMarks=null,this}get selectionSet(){return(this.updated&sm)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wl,this}ensureMarks(e){return de.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wl)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wl,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||de.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Z.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=om,this}get scrolledIntoView(){return(this.updated&om)>0}}function lm(t,e){return!e||!t?t:t.bind(e)}class Js{constructor(e,n,r){this.name=e,this.init=lm(n.init,r),this.apply=lm(n.apply,r)}}const aS=[new Js("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Js("selection",{init(t,e){return t.selection||Z.atStart(e.doc)},apply(t){return t.selection}}),new Js("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Js("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Qc{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=aS.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Js(r.key,r.spec.state,r))})}}class Ji{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ji(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new lS(this)}static create(e){let n=new Qc(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ji(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Qc(this.schema,e.plugins),r=n.fields,i=new Ji(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Qc(e.schema,e.plugins),s=new Ji(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Nr.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Z.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Nx(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Nx(i,e,{})),n[r]=i}return n}class mt{constructor(e){this.spec=e,this.props={},e.props&&Nx(e.props,this,this.props),this.key=e.key?e.key.key:Mx("plugin")}getState(e){return e[this.key]}}const Xc=Object.create(null);function Mx(t){return t in Xc?t+"$"+ ++Xc[t]:(Xc[t]=0,t+"$")}class vn{constructor(e="key"){this.key=Mx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Je=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},hs=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let kd=null;const In=function(t,e,n){let r=kd||(kd=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},cS=function(){kd=null},xi=function(t,e,n,r){return n&&(am(t,e,n,r,-1)||am(t,e,n,r,1))},uS=/^(img|br|input|textarea|hr)$/i;function am(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Kt(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Ko(t)||uS.test(t.nodeName)||t.contentEditable=="false")return!1;e=Je(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Kt(t):0}else return!1}}function Kt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function dS(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Kt(t)}else if(t.parentNode&&!Ko(t))e=Je(t),t=t.parentNode;else return null}}function fS(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ko(t))e=Je(t)+1,t=t.parentNode;else return null}}function pS(t,e,n){for(let r=e==0,i=e==Kt(t);r||i;){if(t==n)return!0;let s=Je(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Kt(t)}}function Ko(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const ic=function(t){return t.focusNode&&xi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Gr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function hS(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function mS(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Kt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Kt(r.startContainer),r.startOffset)}}}const On=typeof navigator<"u"?navigator:null,cm=typeof document<"u"?document:null,Lr=On&&On.userAgent||"",bd=/Edge\/(\d+)/.exec(Lr),Ex=/MSIE \d/.exec(Lr),wd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Lr),Ct=!!(Ex||wd||bd),Mr=Ex?document.documentMode:wd?+wd[1]:bd?+bd[1]:0,Qt=!Ct&&/gecko\/(\d+)/i.test(Lr);Qt&&+(/Firefox\/(\d+)/.exec(Lr)||[0,0])[1];const Sd=!Ct&&/Chrome\/(\d+)/.exec(Lr),$e=!!Sd,Tx=Sd?+Sd[1]:0,it=!Ct&&!!On&&/Apple Computer/.test(On.vendor),ms=it&&(/Mobile\/\w+/.test(Lr)||!!On&&On.maxTouchPoints>2),Wt=ms||(On?/Mac/.test(On.platform):!1),Ox=On?/Win/.test(On.platform):!1,$n=/Android \d/.test(Lr),Jo=!!cm&&"webkitFontSmoothing"in cm.documentElement.style,gS=Jo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function yS(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function An(t,e){return typeof t=="number"?t:t[e]}function xS(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function um(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=hs(o);continue}let l=o,a=l==s.body,c=a?yS(s):xS(l),u=0,d=0;if(e.top<c.top+An(r,"top")?d=-(c.top-e.top+An(i,"top")):e.bottom>c.bottom-An(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+An(i,"top")-c.top:e.bottom-c.bottom+An(i,"bottom")),e.left<c.left+An(r,"left")?u=-(c.left-e.left+An(i,"left")):e.right>c.right-An(r,"right")&&(u=e.right-c.right+An(i,"right")),u||d)if(a)s.defaultView.scrollBy(u,d);else{let h=l.scrollLeft,m=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let y=l.scrollLeft-h,x=l.scrollTop-m;e={left:e.left-y,top:e.top-x,right:e.right-y,bottom:e.bottom-x}}let p=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(p))break;o=p=="absolute"?o.offsetParent:hs(o)}}function vS(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Dx(t.dom)}}function Dx(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=hs(r));return e}function kS({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;jx(n,r==0?0:r-e)}function jx(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Di=null;function bS(t){if(t.setActive)return t.setActive();if(Di)return t.focus(Di);let e=Dx(t);t.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),Di||(Di=!1,jx(e,0))}function Ax(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let p;if(u.nodeType==1)p=u.getClientRects();else if(u.nodeType==3)p=In(u).getClientRects();else continue;for(let h=0;h<p.length;h++){let m=p[h];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){n=u,r=y,i=y&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(s=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?wS(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:Ax(n,i)}function wS(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=sr(r,1);if(o.top!=o.bottom&&Ff(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Ff(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function SS(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function CS(t,e,n){let{node:r,offset:i}=Ax(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function zS(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Px(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(Ff(e,c))return Px(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function NS(t,e){let n=t.dom.ownerDocument,r,i=0,s=mS(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!Ff(e,c)||(o=Px(t.dom,e,c),!o))return null}if(it)for(let c=o;r&&c;c=hs(c))c.draggable&&(r=void 0);if(o=SS(o,e),r){if(Qt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Jo&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=zS(t,r,i,e))}l==null&&(l=CS(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function dm(t){return t.top<t.bottom||t.left<t.right}function sr(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(dm(r))return r}return Array.prototype.find.call(n,dm)||t.getBoundingClientRect()}const MS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Ix(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Jo||Qt;if(r.nodeType==3)if(o&&(MS.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=sr(In(r,i,i),n);if(Qt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=sr(In(r,i-1,i-1),-1);if(c.top==a.top){let u=sr(In(r,i,i+1),-1);if(u.top!=a.top)return _s(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,_s(sr(In(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Kt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Zc(a.getBoundingClientRect(),!1)}if(s==null&&i<Kt(r)){let a=r.childNodes[i];if(a.nodeType==1)return Zc(a.getBoundingClientRect(),!0)}return Zc(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Kt(r))){let a=r.childNodes[i-1],c=a.nodeType==3?In(a,Kt(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return _s(sr(c,1),!1)}if(s==null&&i<Kt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?In(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return _s(sr(c,-1),!0)}return _s(sr(r.nodeType==3?In(r):r,-n),n>=0)}function _s(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Zc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Rx(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function ES(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Rx(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=Ix(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=In(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const TS=/[\u0590-\u08ac]/;function OS(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!TS.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:Rx(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),p=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),x=m&&!h.contains(m.nodeType==1?m:m.parentNode)||a==m&&c==y;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return p!=null&&(l.caretBidiLevel=p),x}):r.pos==r.start()||r.pos==r.end()}let fm=null,pm=null,hm=!1;function DS(t,e,n){return fm==e&&pm==n?hm:(fm=e,pm=n,hm=n=="up"||n=="down"?ES(t,e,n):OS(t,e,n))}const Xt=0,mm=1,ti=2,Dn=3;class Yo{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Xt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Je(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof _x){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Lx&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Je(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Je(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let d=l;d>0;d--){let p=this.children[d-1];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(1)){i=Je(p.dom)+1;break}e-=p.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Je(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let y=this.children[h],x=m+y.size;if(s>m&&o<x)return y.setSelection(e-m-y.border,n-m-y.border,r,i);m=x}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Qt||it)&&e==n){let{node:h,offset:m}=l;if(h.nodeType==3){if(d=!!(m&&h.nodeValue[m-1]==`
`),d&&m==h.nodeValue.length)for(let y=h,x;y;y=y.parentNode){if(x=y.nextSibling){x.nodeName=="BR"&&(l=a={node:x.parentNode,offset:Je(x)+1});break}let g=y.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let y=h.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Qt&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&it)&&xi(l.node,l.offset,u.anchorNode,u.anchorOffset)&&xi(a.node,a.offset,u.focusNode,u.focusOffset))return;let p=!1;if((c.extend||e==n)&&!(d&&Qt)){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),p=!0}catch{}}if(!p){if(e>n){let m=l;l=a,a=m}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?ti:mm,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Dn:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ti:Dn}r=o}this.dirty=ti}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ti:mm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Lx extends Yo{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Xt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class jS extends Yo{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class vi extends Yo{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Ni.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new vi(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&Dn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Dn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Xt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Xt}}slice(e,n,r){let i=vi.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=zd(s,n,o,r)),e>0&&(s=zd(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Er extends Yo{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Ni.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let p=u;return u=Fx(u,r,n),c?a=new AS(e,n,r,i,u,d||null,p,c,s,o+1):n.isText?new sc(e,n,r,i,u,p,s):new Er(e,n,r,i,u,d||null,p,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>O.empty)}return e}matchesNode(e,n,r){return this.dirty==Xt&&e.eq(this.node)&&Ca(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new IS(this,o&&o.node,e);_S(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?de.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,p)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,u,d,p)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,d,h,e)||a.updateNextNode(c,u,d,e,p,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==ti)&&(o&&this.protectLocalComposition(e,o),$x(this.contentDOM,this.children,e),ms&&$S(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Q)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=BS(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new jS(this,s,n,i);e.input.compositionNodes.push(o),this.children=zd(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==Dn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Xt}updateOuterDeco(e){if(Ca(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Bx(this.dom,this.nodeDOM,Cd(this.outerDeco,this.node,n),Cd(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function gm(t,e,n,r,i){Fx(r,e,t);let s=new Er(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class sc extends Er{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Dn||this.dirty!=Xt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Xt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Xt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new sc(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Dn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class _x extends Yo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Xt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class AS extends Er{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==Dn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function $x(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=ym(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof vi){let a=r?r.previousSibling:t.lastChild;$x(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=ym(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const lo=function(t){t&&(this.nodeName=t)};lo.prototype=Object.create(null);const ni=[new lo];function Cd(t,e,n){if(t.length==0)return ni;let r=n?ni[0]:new lo,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new lo(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new lo(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Bx(t,e,n,r){if(n==ni&&r==ni)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=ni[0]),i=a}PS(i,l||ni[0],o)}return i}function PS(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function Fx(t,e,n){return Bx(t,t,ni,Cd(e,n,t.nodeType!=1))}function Ca(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ym(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class IS{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=RS(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Xt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=vi.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==Dn&&o.dom==o.contentDOM&&(o.dirty=ti),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Er){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,d,p=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=Dn&&Ca(n,a.outerDeco));if(!p&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!p&&(d=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ti,d.updateChildren(i,o+1),d.dirty=Xt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Ca(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Er.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Er.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Lx(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof vi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof sc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((it||$e)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new _x(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function RS(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof vi)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function LS(t,e){return t.type.side-e.type.side}function _S(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let x=i[o++];x.widget&&(u?(d||(d=[u])).push(x):u=x)}if(u)if(d){d.sort(LS);for(let x=0;x<d.length;x++)n(d[x],c,!!a)}else n(u,c,!!a);let p,h;if(a)h=-1,p=a,a=null;else if(c<t.childCount)h=c,p=t.child(c++);else break;for(let x=0;x<l.length;x++)l[x].to<=s&&l.splice(x--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let m=s+p.nodeSize;if(p.isText){let x=m;o<i.length&&i[o].from<x&&(x=i[o].from);for(let g=0;g<l.length;g++)l[g].to<x&&(x=l[g].to);x<m&&(a=p.cut(x-s),p=p.cut(0,x-s),m=x,h=-1)}else for(;o<i.length&&i[o].to<m;)o++;let y=p.isInline&&!p.isLeaf?l.filter(x=>!x.inline):l.slice();r(p,y,e.forChild(s,p),h),s=m}}function $S(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function BS(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function zd(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function Vf(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(ic(n)){for(a=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&W.isSelectable(d)&&i.parent&&!(d.isInline&&pS(n.focusNode,n.focusOffset,i.dom))){let p=i.posBefore;c=new W(o==p?l:r.resolve(p))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,p=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),p=Math.max(p,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[a,o]=p==t.state.selection.anchor?[p,d]:[d,p],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=Hf(t,u,l,d)}return c}function Vx(t){return t.editable?t.hasFocus():Wx(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Hn(t,e=!1){let n=t.state.selection;if(Hx(t,n),!!Vx(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&$e){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&xi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)VS(t);else{let{anchor:r,head:i}=n,s,o;xm&&!(n instanceof Q)&&(n.$from.parent.inlineContent||(s=vm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=vm(t,n.to))),t.docView.setSelection(r,i,t,e),xm&&(s&&km(s),o&&km(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&FS(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const xm=it||$e&&Tx<63;function vm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(it&&i&&i.contentEditable=="false")return eu(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return eu(i);if(s)return eu(s)}}function eu(t){return t.contentEditable="true",it&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function km(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function FS(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!Vx(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function VS(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Je(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&Ct&&Mr<=11&&(n.disabled=!0,n.disabled=!1)}function Hx(t,e){if(e instanceof W){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(bm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else bm(t)}function bm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Hf(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Q.between(e,n,r)}function wm(t){return t.editable&&!t.hasFocus()?!1:Wx(t)}function Wx(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function HS(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return xi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Nd(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Z.findFrom(s,e)}function ar(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function Sm(t,e,n){let r=t.state.selection;if(r instanceof Q)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return ar(t,new Q(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Nd(t.state,e);return i&&i instanceof W?ar(t,i):!1}else if(!(Wt&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?W.isSelectable(s)?ar(t,new W(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Jo?ar(t,new Q(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof W&&r.node.isInline)return ar(t,new Q(e>0?r.$to:r.$from));{let i=Nd(t.state,e);return i?ar(t,i):!1}}}function za(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ao(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ji(t,e){return e<0?WS(t):US(t)}function WS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Qt&&n.nodeType==1&&r<za(n)&&ao(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(ao(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Ux(n))break;{let l=n.previousSibling;for(;l&&ao(l,-1);)i=n.parentNode,s=Je(l),l=l.previousSibling;if(l)n=l,r=za(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Md(t,n,r):i&&Md(t,i,s)}function US(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=za(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(ao(l,1))s=n,o=++r;else break}else{if(Ux(n))break;{let l=n.nextSibling;for(;l&&ao(l,1);)s=l.parentNode,o=Je(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=za(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&Md(t,s,o)}function Ux(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function qS(t,e){for(;t&&e==t.childNodes.length&&!Ko(t);)e=Je(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function KS(t,e){for(;t&&!e&&!Ko(t);)e=Je(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Md(t,e,n){if(e.nodeType!=3){let s,o;(o=qS(e,n))?(e=o,n=0):(s=KS(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(ic(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&Hn(t)},50)}function Cm(t,e){let n=t.state.doc.resolve(e);if(!($e||Ox)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function zm(t,e,n){let r=t.state.selection;if(r instanceof Q&&!r.empty||n.indexOf("s")>-1||Wt&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Nd(t.state,e);if(o&&o instanceof W)return ar(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof At?Z.near(o,e):Z.findFrom(o,e);return l?ar(t,l):!1}return!1}function Nm(t,e){if(!(t.state.selection instanceof Q))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Mm(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function JS(t){if(!it||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Mm(t,r,"true"),setTimeout(()=>Mm(t,r,"false"),20)}return!1}function YS(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function GS(t,e){let n=e.keyCode,r=YS(e);if(n==8||Wt&&n==72&&r=="c")return Nm(t,-1)||ji(t,-1);if(n==46&&!e.shiftKey||Wt&&n==68&&r=="c")return Nm(t,1)||ji(t,1);if(n==13||n==27)return!0;if(n==37||Wt&&n==66&&r=="c"){let i=n==37?Cm(t,t.state.selection.from)=="ltr"?-1:1:-1;return Sm(t,i,r)||ji(t,i)}else if(n==39||Wt&&n==70&&r=="c"){let i=n==39?Cm(t,t.state.selection.from)=="ltr"?1:-1:1;return Sm(t,i,r)||ji(t,i)}else{if(n==38||Wt&&n==80&&r=="c")return zm(t,-1,r)||ji(t,-1);if(n==40||Wt&&n==78&&r=="c")return JS(t)||zm(t,1,r)||ji(t,1);if(r==(Wt?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Wf(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||Ni.fromSchema(t.state.schema),l=Qx(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=Gx[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=l.createElement(u[h]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let p=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:p,slice:e}}function qx(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=!!e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",p=>{e=p(e,s||r,t)}),s)return l=new L(O.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",p=>{l=p(l,t,!0)}),l;let d=t.someProp("clipboardTextParser",p=>p(e,i,r,t));if(d)l=d;else{let p=i.marks(),{schema:h}=t.state,m=Ni.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let x=o.appendChild(document.createElement("p"));y&&x.appendChild(m.serializeNode(h.text(y,p)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=eC(n),Jo&&tC(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let p=o.firstChild;for(;p&&p.nodeType!=1;)p=p.nextSibling;if(!p)break;o=p}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||so.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(p){return p.nodeName=="BR"&&!p.nextSibling&&p.parentNode&&!QS.test(p.parentNode.nodeName)?{ignore:!0}:null}})),u)l=nC(Em(l,+u[1],+u[2]),u[4]);else if(l=L.maxOpen(XS(l.content,i),!0),l.openStart||l.openEnd){let d=0,p=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;p<l.openEnd&&!h.type.spec.isolating;p++,h=h.lastChild);l=Em(l,d,p)}return t.someProp("transformPasted",d=>{l=d(l,t,a)}),l}const QS=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function XS(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&Jx(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=Yx(o[o.length-1],s.length));let u=Kx(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return O.from(o)}return t}function Kx(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,O.from(t));return t}function Jx(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Jx(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(O.from(Kx(n,t,i+1))))}}function Yx(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Yx(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(O.empty,!0);return t.copy(n.append(r))}function Ed(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=Ed(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(O.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function Em(t,e,n){return e<t.openStart&&(t=new L(Ed(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new L(Ed(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Gx={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Tm=null;function Qx(){return Tm||(Tm=document.implementation.createHTMLDocument("title"))}let tu=null;function ZS(t){let e=window.trustedTypes;return e?(tu||(tu=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),tu.createHTML(t)):t}function eC(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Qx().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Gx[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=ZS(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function tC(t){let e=t.querySelectorAll($e?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function nC(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=O.from(a.create(r[l+1],i)),s++,o++}return new L(i,s,o)}const dt={},ft={},rC={touchstart:!0,touchmove:!0};class iC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function sC(t){for(let e in dt){let n=dt[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{lC(t,r)&&!Uf(t,r)&&(t.editable||!(r.type in ft))&&n(t,r)},rC[e]?{passive:!0}:void 0)}it&&t.dom.addEventListener("input",()=>null),Td(t)}function yr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function oC(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Td(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Uf(t,r))})}function Uf(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function lC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function aC(t,e){!Uf(t,e)&&dt[e.type]&&(t.editable||!(e.type in ft))&&dt[e.type](t,e)}ft.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Zx(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!($n&&$e&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ms&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Gr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||GS(t,n)?n.preventDefault():yr(t,"key")};ft.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};ft.keypress=(t,e)=>{let n=e;if(Zx(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Wt&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Q)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function oc(t){return{left:t.clientX,top:t.clientY}}function cC(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function qf(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function rs(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function uC(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&W.isSelectable(r)?(rs(t,new W(n)),!0):!1}function dC(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof W&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(W.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(rs(t,W.create(t.state.doc,i)),!0):!1}function fC(t,e,n,r,i){return qf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?dC(t,n):uC(t,n))}function pC(t,e,n,r){return qf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function hC(t,e,n,r){return qf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||mC(t,n,r)}function mC(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(rs(t,Q.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)rs(t,Q.create(r,l+1,l+1+o.content.size));else if(W.isSelectable(o))rs(t,W.create(r,l));else continue;return!0}}function Kf(t){return Na(t)}const Xx=Wt?"metaKey":"ctrlKey";dt.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Kf(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&cC(n,t.input.lastClick)&&!n[Xx]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(oc(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new gC(t,o,n,!!r)):(s=="doubleClick"?pC:hC)(t,o.pos,o.inside,n)?n.preventDefault():yr(t,"pointer"))};class gC{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Xx],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof W&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Qt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),yr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Hn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(oc(e))),this.updateAllowDefault(e),this.allowDefault||!n?yr(this.view,"pointer"):fC(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||it&&this.mightDrag&&!this.mightDrag.node.isAtom||$e&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(rs(this.view,Z.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):yr(this.view,"pointer")}move(e){this.updateAllowDefault(e),yr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}dt.touchstart=t=>{t.input.lastTouch=Date.now(),Kf(t),yr(t,"pointer")};dt.touchmove=t=>{t.input.lastTouch=Date.now(),yr(t,"pointer")};dt.contextmenu=t=>Kf(t);function Zx(t,e){return t.composing?!0:it&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const yC=$n?5e3:-1;ft.compositionstart=ft.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Q&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||$e&&Ox&&xC(t)))t.markCursor=t.state.storedMarks||n.marks(),Na(t,!0),t.markCursor=null;else if(Na(t,!e.selection.empty),Qt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}ev(t,yC)};function xC(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}ft.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,ev(t,20))};function ev(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Na(t),e))}function tv(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=kC());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function vC(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=dS(e.focusNode,e.focusOffset),r=fS(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function kC(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Na(t,e=!1){if(!($n&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),tv(t),e||t.docView&&t.docView.dirty){let n=Vf(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function bC(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Po=Ct&&Mr<15||ms&&gS<604;dt.copy=ft.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Po?null:n.clipboardData,o=r.content(),{dom:l,text:a}=Wf(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):bC(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function wC(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function SC(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Io(t,r.value,null,i,e):Io(t,r.textContent,r.innerHTML,i,e)},50)}function Io(t,e,n,r,i){let s=qx(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||L.empty)))return!0;if(!s)return!1;let o=wC(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function nv(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}ft.paste=(t,e)=>{let n=e;if(t.composing&&!$n)return;let r=Po?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Io(t,nv(r),r.getData("text/html"),i,n)?n.preventDefault():SC(t,n)};class rv{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const CC=Wt?"altKey":"ctrlKey";function iv(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[CC]}dt.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(oc(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof W?i.to-1:i.to))){if(r&&r.mightDrag)o=W.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=W.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=Wf(t,l);(!n.dataTransfer.files.length||!$e||Tx>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Po?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Po||n.dataTransfer.setData("text/plain",c),t.dragging=new rv(u,iv(t,n),o)};dt.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};ft.dragover=ft.dragenter=(t,e)=>e.preventDefault();ft.drop=(t,e)=>{try{zC(t,e,t.dragging)}finally{t.dragging=null}};function zC(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(oc(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",h=>{s=h(s,t,!1)}):s=qx(t,nv(e.dataTransfer),Po?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&iv(t,e));if(t.someProp("handleDrop",h=>h(t,e,s||L.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let l=s?bx(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let a=t.state.tr;if(o){let{node:h}=n;h?h.replace(a):a.deleteSelection()}let c=a.mapping.map(l),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=a.doc;if(u?a.replaceRangeWith(c,c,s.content.firstChild):a.replaceRange(c,c,s),a.doc.eq(d))return;let p=a.doc.resolve(c);if(u&&W.isSelectable(s.content.firstChild)&&p.nodeAfter&&p.nodeAfter.sameMarkup(s.content.firstChild))a.setSelection(new W(p));else{let h=a.mapping.map(l);a.mapping.maps[a.mapping.maps.length-1].forEach((m,y,x,g)=>h=g),a.setSelection(Hf(t,p,a.doc.resolve(h)))}t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}dt.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Hn(t)},20))};dt.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};dt.beforeinput=(t,e)=>{if($e&&$n&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Gr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in ft)dt[t]=ft[t];function Ro(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Ma{constructor(e,n){this.toDOM=e,this.spec=n||li,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Yt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Ma&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ro(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Tr{constructor(e,n){this.attrs=e,this.spec=n||li}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Yt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Tr&&Ro(this.attrs,e.attrs)&&Ro(this.spec,e.spec)}static is(e){return e.type instanceof Tr}destroy(){}}class Jf{constructor(e,n){this.attrs=e,this.spec=n||li}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Yt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Jf&&Ro(this.attrs,e.attrs)&&Ro(this.spec,e.spec)}destroy(){}}class Yt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Yt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Yt(e,e,new Ma(n,r))}static inline(e,n,r,i){return new Yt(e,n,new Tr(r,i))}static node(e,n,r,i){return new Yt(e,n,new Jf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Tr}get widget(){return this.type instanceof Ma}}const Pi=[],li={};class De{constructor(e,n){this.local=e.length?e:Pi,this.children=n.length?n:Pi}static create(e,n){return n.length?Ea(n,e,0,li):tt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==tt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||li)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?NC(this.children,o||[],e,n,r,i,s):o?new De(o.sort(ai),Pi):tt}add(e,n){return n.length?this==tt?De.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=ov(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Ea(u,l,c+1,li)),s+=3}});let o=sv(s?lv(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new De(o.length?this.local.concat(o).sort(ai):this.local,i||this.children)}remove(e){return e.length==0||this==tt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=tt?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new De(i,r):tt}forChild(e,n){if(this==tt)return this;if(n.isLeaf)return De.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof Tr){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new De(i.sort(ai),Pi);return r?new fr([l,r]):l}return r||tt}eq(e){if(this==e)return!0;if(!(e instanceof De)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return Yf(this.localsInner(e))}localsInner(e){if(this==tt)return Pi;if(e.inlineContent||!this.local.some(Tr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Tr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}De.empty=new De([],[]);De.removeOverlap=Yf;const tt=De.empty;class fr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,li));return fr.from(r)}forChild(e,n){if(n.isLeaf)return De.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=tt&&(s instanceof fr?r=r.concat(s.members):r.push(s))}return fr.from(r)}eq(e){if(!(e instanceof fr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Yf(r?n:n.sort(ai)):Pi}static from(e){switch(e.length){case 0:return tt;case 1:return e[0];default:return new fr(e.every(n=>n instanceof De)?e:e.reduce((n,r)=>n.concat(r instanceof De?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function NC(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((p,h,m,y)=>{let x=y-m-(h-p);for(let g=0;g<l.length;g+=3){let v=l[g+1];if(v<0||p>v+u-d)continue;let k=l[g]+u-d;h>=k?l[g+1]=p<=k?-2:-1:p>=u&&x&&(l[g]+=x,l[g+1]+=x)}d+=x}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let p=n.map(t[c+1]+s,-1),h=p-i,{index:m,offset:y}=r.content.findIndex(d),x=r.maybeChild(m);if(x&&y==d&&y+x.nodeSize==h){let g=l[c+2].mapInner(n,x,u+1,t[c]+s+1,o);g!=tt?(l[c]=d,l[c+1]=h,l[c+2]=g):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=MC(l,t,e,n,i,s,o),u=Ea(c,r,0,o);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,p=0;d<u.children.length;d+=3){let h=u.children[d];for(;p<l.length&&l[p]<h;)p+=3;l.splice(p,0,u.children[d],u.children[d+1],u.children[d+2])}}return new De(e.sort(ai),l)}function sv(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new Yt(i.from+e,i.to+e,i.type))}return n}function MC(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function ov(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function lv(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ea(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=ov(t,l,a+n);if(c){s=!0;let u=Ea(c,l,n+a+1,r);u!=tt&&i.push(a,a+l.nodeSize,u)}});let o=sv(s?lv(t):t,-n).sort(ai);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new De(o,i):tt}function ai(t,e){return t.from-e.from||t.to-e.to}function Yf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Om(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Om(e,i,r.copy(s.from,r.to)));break}}}return e}function Om(t,e,n){for(;e<t.length&&ai(n,t[e])>0;)e++;t.splice(e,0,n)}function nu(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=tt&&e.push(r)}),t.cursorWrapper&&e.push(De.create(t.state.doc,[t.cursorWrapper.deco])),fr.from(e)}const EC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},TC=Ct&&Mr<=11;class OC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class DC{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new OC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Ct&&Mr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),TC&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,EC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(wm(this.view)){if(this.suppressingSelectionUpdates)return Hn(this.view);if(Ct&&Mr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&xi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=hs(s))n.add(s);for(let s=e.anchorNode;s;s=hs(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&wm(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(Qt&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,p]=u;d.parentNode&&d.parentNode.parentNode==p.parentNode?p.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let p of u){let h=p.parentNode;h&&h.nodeName=="LI"&&(!d||PC(e,d)!=h)&&p.remove()}}}else if(($e||it)&&a.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of a)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&ic(r)&&(c=Vf(e))&&c.eq(Z.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Hn(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),jC(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||Hn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(Ct&&Mr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:p}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!p||Array.prototype.indexOf.call(e.addedNodes,p)<0)&&(s=p)}let o=i&&i.parentNode==e.target?Je(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?Je(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Dm=new WeakMap,jm=!1;function jC(t){if(!Dm.has(t)&&(Dm.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Qt,jm)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),jm=!0}}function Am(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return xi(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function AC(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return Am(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?Am(t,n):null}function PC(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function IC(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],ic(a)||c.push({node:a.focusNode,offset:a.focusOffset})),$e&&t.input.lastKeyCode===8)for(let x=s;x>i;x--){let g=r.childNodes[x-1],v=g.pmViewDesc;if(g.nodeName=="BR"&&!v){s=x;break}if(!v||v.size)break}let d=t.state.doc,p=t.someProp("domParser")||so.fromSchema(t.state.schema),h=d.resolve(o),m=null,y=p.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:RC,context:h});if(c&&c[0].pos!=null){let x=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=x),m={anchor:x+o,head:g+o}}return{doc:y,sel:m,from:o,to:l}}function RC(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(it&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||it&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const LC=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function _C(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,N=Vf(t,C);if(N&&!t.state.selection.eq(N)){if($e&&$n&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",E=>E(t,Gr(13,"Enter"))))return;let D=t.state.tr.setSelection(N);C=="pointer"?D.setMeta("pointer",!0):C=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),t.dispatch(D)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=IC(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),p,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(p=t.state.selection.to,h="end"):(p=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=FC(d.content,c.doc.content,c.from,p,h);if(m&&t.input.domChangeCount++,(ms&&t.input.lastIOSEnter>Date.now()-225||$n)&&i.some(C=>C.nodeType==1&&!LC.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Gr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof Q&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=Pm(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let N=t.state.tr.setSelection(C);s&&N.setMeta("composition",s),t.dispatch(N)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Q&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),Ct&&Mr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),x=c.doc.resolveNoCache(m.endB-c.from),g=u.resolve(m.start),v=y.sameParent(x)&&y.parent.inlineContent&&g.end()>=m.endA;if((ms&&t.input.lastIOSEnter>Date.now()-225&&(!v||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!v&&y.pos<c.doc.content.size&&(!y.sameParent(x)||!y.parent.inlineContent)&&y.pos<x.pos&&!/\S/.test(c.doc.textBetween(y.pos,x.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Gr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&BC(u,m.start,m.endA,y,x)&&t.someProp("handleKeyDown",C=>C(t,Gr(8,"Backspace")))){$n&&$e&&t.domObserver.suppressSelectionUpdates();return}$e&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),$n&&!v&&y.start()!=x.start()&&x.parentOffset==0&&y.depth==x.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,x=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Gr(13,"Enter"))})},20));let k=m.start,b=m.endA,S=C=>{let N=C||t.state.tr.replace(k,b,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let D=Pm(t,N.doc,c.sel);D&&!($e&&t.composing&&D.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(D.head==k||D.head==N.mapping.map(b)-1)||Ct&&D.empty&&D.head==k)&&N.setSelection(D)}return s&&N.setMeta("composition",s),N.scrollIntoView()},w;if(v)if(y.pos==x.pos){Ct&&Mr<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Hn(t),20));let C=S(t.state.tr.delete(k,b)),N=u.resolve(m.start).marksAcross(u.resolve(m.endA));N&&C.ensureMarks(N),t.dispatch(C)}else if(m.endA==m.endB&&(w=$C(y.parent.content.cut(y.parentOffset,x.parentOffset),g.parent.content.cut(g.parentOffset,m.endA-g.start())))){let C=S(t.state.tr);w.type=="add"?C.addMark(k,b,w.mark):C.removeMark(k,b,w.mark),t.dispatch(C)}else if(y.parent.child(y.index()).isText&&y.index()==x.index()-(x.textOffset?0:1)){let C=y.parent.textBetween(y.parentOffset,x.parentOffset),N=()=>S(t.state.tr.insertText(C,k,b));t.someProp("handleTextInput",D=>D(t,k,b,C,N))||t.dispatch(N())}else t.dispatch(S());else t.dispatch(S())}function Pm(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Hf(t,e.resolve(n.anchor),e.resolve(n.head))}function $C(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(O.from(c).eq(t))return{mark:l,type:o}}function BC(t,e,n,r,i){if(n-e<=i.pos-r.pos||ru(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(ru(s,!0,!0));return!o.parent.isTextblock||o.pos>n||ru(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function ru(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function FC(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&Im(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&Im(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function Im(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class av{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new iC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Bm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=_m(this),Lm(this),this.nodeViews=$m(this),this.docView=gm(this.state.doc,Rm(this),nu(this),this.dom,this),this.domObserver=new DC(this,(r,i,s,o)=>_C(this,r,i,s,o)),this.domObserver.start(),sC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Td(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Bm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(tv(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=$m(this);HC(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Td(this),this.editable=_m(this),Lm(this);let a=nu(this),c=Rm(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(o=!0);let p=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&vS(this);if(o){this.domObserver.stop();let h=d&&(Ct||$e)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&VC(i.selection,e.selection);if(d){let m=$e?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=vC(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=gm(e.doc,c,a,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&HS(this))?Hn(this,h):(Hx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():p&&kS(p)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof W){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&um(this,n.getBoundingClientRect(),e)}else um(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new rv(e.slice,e.move,i<0?void 0:W.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Ct){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&bS(this.dom),Hn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return NS(this,e)}coordsAtPos(e,n=1){return Ix(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return DS(this,n||this.state,e)}pasteHTML(e,n){return Io(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Io(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Wf(this,e)}destroy(){this.docView&&(oC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],nu(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,cS())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return aC(this,e)}domSelectionRange(){let e=this.domSelection();return e?it&&this.root.nodeType===11&&hS(this.dom.ownerDocument)==this.dom&&AC(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}av.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Rm(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Yt.node(0,t.state.doc.content.size,e)]}function Lm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Yt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function _m(t){return!t.someProp("editable",e=>e(t.state)===!1)}function VC(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function $m(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function HC(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Bm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ta={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},WC=typeof navigator<"u"&&/Mac/.test(navigator.platform),UC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ye=0;Ye<10;Ye++)jr[48+Ye]=jr[96+Ye]=String(Ye);for(var Ye=1;Ye<=24;Ye++)jr[Ye+111]="F"+Ye;for(var Ye=65;Ye<=90;Ye++)jr[Ye]=String.fromCharCode(Ye+32),Ta[Ye]=String.fromCharCode(Ye);for(var iu in jr)Ta.hasOwnProperty(iu)||(Ta[iu]=jr[iu]);function qC(t){var e=WC&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||UC&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ta:jr)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const KC=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),JC=typeof navigator<"u"&&/Win/.test(navigator.platform);function YC(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))KC?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function GC(t){let e=Object.create(null);for(let n in t)e[YC(n)]=t[n];return e}function su(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function QC(t){return new mt({props:{handleKeyDown:cv(t)}})}function cv(t){let e=GC(t);return function(n,r){let i=qC(r),s,o=e[su(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[su(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(JC&&r.ctrlKey&&r.altKey)&&(s=jr[r.keyCode])&&s!=i){let l=e[su(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Gf=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function uv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const dv=(t,e,n)=>{let r=uv(t,n);if(!r)return!1;let i=Qf(r);if(!i){let o=r.blockRange(),l=o&&zs(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(kv(t,i,e,-1))return!0;if(r.parent.content.size==0&&(gs(s,"end")||W.isSelectable(s)))for(let o=r.depth;;o--){let l=nc(t.doc,r.before(o),r.after(o),L.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(gs(s,"end")?Z.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):W.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},XC=(t,e,n)=>{let r=uv(t,n);if(!r)return!1;let i=Qf(r);return i?fv(t,i,e):!1},ZC=(t,e,n)=>{let r=hv(t,n);if(!r)return!1;let i=Xf(r);return i?fv(t,i,e):!1};function fv(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=nc(t.doc,s,a,L.empty);if(!c||c.from!=s||c instanceof _e&&c.slice.size>=a-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Q.create(u.doc,s)),n(u.scrollIntoView())}return!0}function gs(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const pv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Qf(r)}let o=s&&s.nodeBefore;return!o||!W.isSelectable(o)?!1:(e&&e(t.tr.setSelection(W.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Qf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function hv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const mv=(t,e,n)=>{let r=hv(t,n);if(!r)return!1;let i=Xf(r);if(!i)return!1;let s=i.nodeAfter;if(kv(t,i,e,1))return!0;if(r.parent.content.size==0&&(gs(s,"start")||W.isSelectable(s))){let o=nc(t.doc,r.before(),r.after(),L.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(gs(s,"start")?Z.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):W.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},gv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Xf(r)}let o=s&&s.nodeAfter;return!o||!W.isSelectable(o)?!1:(e&&e(t.tr.setSelection(W.create(t.doc,s.pos)).scrollIntoView()),!0)};function Xf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const ez=(t,e)=>{let n=t.selection,r=n instanceof W,i;if(r){if(n.node.isTextblock||!Rr(t.doc,n.from))return!1;i=n.from}else if(i=tc(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(W.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},tz=(t,e)=>{let n=t.selection,r;if(n instanceof W){if(n.node.isTextblock||!Rr(t.doc,n.to))return!1;r=n.to}else if(r=tc(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},nz=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&zs(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},yv=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Zf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const rz=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Zf(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(Z.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},xv=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof At||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Zf(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Q.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},vv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Vn(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&zs(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function iz(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof W&&e.selection.node.isBlock)return!r.parentOffset||!Vn(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=Zf(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),s.unshift(a&&l?{type:l}:null),o=h;break}else{if(h==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Q||e.selection instanceof At)&&u.deleteSelection();let d=u.mapping.map(r.pos),p=Vn(u.doc,d,s.length,s);if(p||(s[0]=l?{type:l}:null,p=Vn(u.doc,d,s.length,s)),!p)return!1;if(u.split(d,s.length,s),!a&&c&&r.node(o).type!=l){let h=u.mapping.map(r.before(o)),m=u.doc.resolve(h);l&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const sz=iz(),oz=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(W.create(t.doc,i))),!0)};function lz(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||Rr(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function kv(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&lz(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,m=O.empty;for(let g=o.length-1;g>=0;g--)m=O.from(o[g].create(null,m));m=O.from(i.copy(m));let y=t.tr.step(new Fe(e.pos-1,h,e.pos,h,new L(m,1,0),o.length,!0)),x=y.doc.resolve(h+2*o.length);x.nodeAfter&&x.nodeAfter.type==i.type&&Rr(y.doc,x.pos)&&y.join(x.pos),n(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:Z.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),p=d&&zs(d);if(p!=null&&p>=e.depth)return n&&n(t.tr.lift(d,p).scrollIntoView()),!0;if(c&&gs(s,"start",!0)&&gs(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let y=s,x=1;for(;!y.isTextblock;y=y.firstChild)x++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let g=O.empty;for(let k=m.length-1;k>=0;k--)g=O.from(m[k].copy(g));let v=t.tr.step(new Fe(e.pos-m.length,e.pos+s.nodeSize,e.pos+x,e.pos+s.nodeSize-x,new L(g,m.length,0),0,!0));n(v.scrollIntoView())}return!0}}return!1}function bv(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Q.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const az=bv(-1),cz=bv(1);function uz(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&$f(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function Fm(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}function ep(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}ep(Gf,dv,pv);ep(Gf,mv,gv);ep(yv,xv,vv,sz);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function dz(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return fz(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function fz(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=o.resolve(e.start-2);s=new wa(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new wa(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=$f(s,n,r,e);return l?(t&&pz(t,e,l,i,n),!0):!1}function pz(t,e,n,r,i){let s=O.empty;for(let u=n.length-1;u>=0;u--)s=O.from(n[u].type.create(n[u].attrs,s));t.step(new Fe(e.start-(r?2:0),e.end,e.start,e.end,new L(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,p=!0;u<d;u++,p=!1)!p&&Vn(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function hz(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?mz(e,n,t,s):gz(e,n,s):!0:!1}}function mz(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Fe(s-1,o,s,o,new L(O.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new wa(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=zs(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return Rr(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function gz(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?O.empty:O.from(i))))return!1;let d=s.pos,p=d+o.nodeSize;return r.step(new Fe(d-(l?1:0),p+(a?1:0),d+1,p-1,new L((l?O.empty:O.from(i.copy(O.empty))).append(a?O.empty:O.from(i.copy(O.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function yz(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=O.from(c?t.create():null),d=new L(O.from(t.create(null,O.from(l.type.create(null,u)))),c?3:1,0),p=s.start,h=s.end;n(e.tr.step(new Fe(p-(c?3:1),h,p,h,d,1,!0)).scrollIntoView())}return!0}}function lc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class ac{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(p=>p===!0)),d={...Object.fromEntries(Object.entries(r).map(([p,h])=>[p,(...y)=>{const x=this.buildProps(c,n),g=h(...y)(x);return l.push(g),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:lc({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class xz{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function B(t,e,n){return t.config[e]===void 0&&t.parent?B(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?B(t.parent,e,n):null}):t.config[e]}function cc(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function wv(t){const e=[],{nodeExtensions:n,markExtensions:r}=cc(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=B(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([p,h])=>{e.push({type:d,name:p,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=B(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const p={...s,...d};typeof(p==null?void 0:p.default)=="function"&&(p.default=p.default()),p!=null&&p.isRequired&&(p==null?void 0:p.default)===void 0&&delete p.default,e.push({type:o.name,name:u,attribute:p})})}),e}function He(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ne(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,p]=u.split(":").map(h=>h.trim());c.set(d,p)}),l.forEach(u=>{const[d,p]=u.split(":").map(h=>h.trim());c.set(d,p)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function Od(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ne(n,r),{})}function Sv(t){return typeof t=="function"}function te(t,e=void 0,...n){return Sv(t)?e?t.bind(e)(...n):t(...n):t}function vz(t={}){return Object.keys(t).length===0&&t.constructor===Object}function kz(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Vm(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):kz(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function Hm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&vz(n)?!1:n!=null))}function bz(t,e){var n;const r=wv(t),{nodeExtensions:i,markExtensions:s}=cc(t),o=(n=i.find(c=>B(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((g,v)=>{const k=B(v,"extendNodeSchema",d);return{...g,...k?k(c):{}}},{}),h=Hm({...p,content:te(B(c,"content",d)),marks:te(B(c,"marks",d)),group:te(B(c,"group",d)),inline:te(B(c,"inline",d)),atom:te(B(c,"atom",d)),selectable:te(B(c,"selectable",d)),draggable:te(B(c,"draggable",d)),code:te(B(c,"code",d)),whitespace:te(B(c,"whitespace",d)),linebreakReplacement:te(B(c,"linebreakReplacement",d)),defining:te(B(c,"defining",d)),isolating:te(B(c,"isolating",d)),attrs:Object.fromEntries(u.map(g=>{var v;return[g.name,{default:(v=g==null?void 0:g.attribute)===null||v===void 0?void 0:v.default}]}))}),m=te(B(c,"parseHTML",d));m&&(h.parseDOM=m.map(g=>Vm(g,u)));const y=B(c,"renderHTML",d);y&&(h.toDOM=g=>y({node:g,HTMLAttributes:Od(g,u)}));const x=B(c,"renderText",d);return x&&(h.toText=x),[c.name,h]})),a=Object.fromEntries(s.map(c=>{const u=r.filter(x=>x.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},p=t.reduce((x,g)=>{const v=B(g,"extendMarkSchema",d);return{...x,...v?v(c):{}}},{}),h=Hm({...p,inclusive:te(B(c,"inclusive",d)),excludes:te(B(c,"excludes",d)),group:te(B(c,"group",d)),spanning:te(B(c,"spanning",d)),code:te(B(c,"code",d)),attrs:Object.fromEntries(u.map(x=>{var g;return[x.name,{default:(g=x==null?void 0:x.attribute)===null||g===void 0?void 0:g.default}]}))}),m=te(B(c,"parseHTML",d));m&&(h.parseDOM=m.map(x=>Vm(x,u)));const y=B(c,"renderHTML",d);return y&&(h.toDOM=x=>y({mark:x,HTMLAttributes:Od(x,u)})),[c.name,h]}));return new ux({topNode:o,nodes:l,marks:a})}function ou(t,e){return e.nodes[t]||e.marks[t]||null}function Wm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function tp(t,e){const n=Ni.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const wz=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function np(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class uc{constructor(e){this.find=e.find,this.handler=e.handler}}const Sz=(t,e)=>{if(np(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Sl(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(p=>p.type.spec.code))return!1;let u=!1;const d=wz(c)+s;return o.forEach(p=>{if(u)return;const h=Sz(d,p.find);if(!h)return;const m=a.state.tr,y=lc({state:a.state,transaction:m}),x={from:r-(h[0].length-s.length),to:i},{commands:g,chain:v,can:k}=new ac({editor:n,state:y});p.handler({state:y,range:x,match:h,commands:g,chain:v,can:k})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:i,text:s}),a.dispatch(m),u=!0)}),u}function Cz(t){const{editor:e,rules:n}=t,r=new mt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=tp(O.from(u),o.schema);const{from:d}=a,p=d+u.length;Sl({editor:e,from:d,to:p,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Sl({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Sl({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Sl({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function zz(t){return Object.prototype.toString.call(t).slice(8,-1)}function Cl(t){return zz(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function dc(t,e){const n={...t};return Cl(t)&&Cl(e)&&Object.keys(e).forEach(r=>{Cl(e[r])&&Cl(t[r])?n[r]=dc(t[r],e[r]):n[r]=e[r]}),n}class It{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(B(this,"addOptions",{name:this.name}))),this.storage=te(B(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new It(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>dc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new It(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=te(B(n,"addOptions",{name:n.name})),n.storage=te(B(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=o.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function Nz(t){return typeof t=="number"}class Mz{constructor(e){this.find=e.find,this.handler=e.handler}}const Ez=(t,e,n)=>{if(np(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function Tz(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:c,can:u}=new ac({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const y=Math.max(r,m),x=Math.min(i,m+h.content.size),g=h.textBetween(y-m,x-m,void 0,"");Ez(g,s.find,o).forEach(k=>{if(k.index===void 0)return;const b=y+k.index+1,S=b+k[0].length,w={from:n.tr.mapping.map(b),to:n.tr.mapping.map(S)},C=s.handler({state:n,range:w,match:k,commands:a,chain:c,can:u,pasteEvent:o,dropEvent:l});d.push(C)})}),d.every(h=>h!==null)}let zl=null;const Oz=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function Dz(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:p,rule:h,pasteEvt:m})=>{const y=u.tr,x=lc({state:u,transaction:y});if(!(!Tz({editor:e,state:x,from:Math.max(d-1,0),to:p.b-1,rule:h,pasteEvent:m,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new mt({view(d){const p=m=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?d.dom.parentElement:null,r&&(zl=e)},h=()=>{zl&&(zl=null)};return window.addEventListener("dragstart",p),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",p),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,p)=>{if(s=r===d.dom.parentElement,l=p,!s){const h=zl;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,p)=>{var h;const m=(h=p.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=p,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,p,h)=>{const m=d[0],y=m.getMeta("uiEvent")==="paste"&&!i,x=m.getMeta("uiEvent")==="drop"&&!s,g=m.getMeta("applyPasteRules"),v=!!g;if(!y&&!x&&!v)return;if(v){let{text:S}=g;typeof S=="string"?S=S:S=tp(O.from(S),h.schema);const{from:w}=g,C=w+S.length,N=Oz(S);return a({rule:u,state:h,from:w,to:{b:C},pasteEvt:N})}const k=p.doc.content.findDiffStart(h.doc.content),b=p.doc.content.findDiffEnd(h.doc.content);if(!(!Nz(k)||!b||k===b.b))return a({rule:u,state:h,from:k,to:b,pasteEvt:o})}}))}function jz(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Yi{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Yi.resolve(e),this.schema=bz(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Yi.sort(Yi.flatten(e)),r=jz(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=B(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=B(r,"priority")||100,o=B(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ou(n.name,this.schema)},i=B(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Yi.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:ou(o.name,this.schema)},a=[],c=B(o,"addKeyboardShortcuts",l);let u={};if(o.type==="mark"&&B(o,"exitable",l)&&(u.ArrowRight=()=>It.handleExit({editor:e,mark:o})),c){const y=Object.fromEntries(Object.entries(c()).map(([x,g])=>[x,()=>g({editor:e})]));u={...u,...y}}const d=QC(u);a.push(d);const p=B(o,"addInputRules",l);Wm(o,e.options.enableInputRules)&&p&&r.push(...p());const h=B(o,"addPasteRules",l);Wm(o,e.options.enablePasteRules)&&h&&i.push(...h());const m=B(o,"addProseMirrorPlugins",l);if(m){const y=m();a.push(...y)}return a}).flat();return[Cz({editor:e,rules:r}),...Dz({editor:e,rules:i}),...s]}get attributes(){return wv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=cc(this.extensions);return Object.fromEntries(n.filter(r=>!!B(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:He(r.name,this.schema)},o=B(r,"addNodeView",s);if(!o)return[];const l=(a,c,u,d,p)=>{const h=Od(a,i);return o()({node:a,view:c,getPos:u,decorations:d,innerDecorations:p,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ou(e.name,this.schema)};e.type==="mark"&&(!((n=te(B(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=B(e,"onBeforeCreate",r),s=B(e,"onCreate",r),o=B(e,"onUpdate",r),l=B(e,"onSelectionUpdate",r),a=B(e,"onTransaction",r),c=B(e,"onFocus",r),u=B(e,"onBlur",r),d=B(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ae{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(B(this,"addOptions",{name:this.name}))),this.storage=te(B(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ae(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>dc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ae({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=te(B(n,"addOptions",{name:n.name})),n.storage=te(B(n,"addStorage",{name:n.name,options:n.options})),n}}function Cv(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,d)=>{var p;a.isBlock&&c>r&&(l+=s);const h=o==null?void 0:o[a.type.name];if(h)return u&&(l+=h({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(p=a==null?void 0:a.text)===null||p===void 0?void 0:p.slice(Math.max(r,c)-c,i-c))}),l}function zv(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const Az=Ae.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new mt({key:new vn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=zv(n);return Cv(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),Pz=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),Iz=(t=!1)=>({commands:e})=>e.setContent("",t),Rz=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),p=c.resolve(u.map(a+l.nodeSize)),h=d.blockRange(p);if(!h)return;const m=zs(h);if(l.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,y)}(m||m===0)&&e.lift(h,m)})}),!0},Lz=t=>e=>t(e),_z=()=>({state:t,dispatch:e})=>xv(t,e),$z=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Q(r.doc.resolve(Math.max(o-1,0)))),!0},Bz=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},Fz=t=>({tr:e,state:n,dispatch:r})=>{const i=He(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},Vz=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},Hz=()=>({state:t,dispatch:e})=>Gf(t,e),Wz=()=>({commands:t})=>t.keyboardShortcut("Enter"),Uz=()=>({state:t,dispatch:e})=>rz(t,e);function Oa(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:np(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Nv(t,e,n={}){return t.find(r=>r.type===e&&Oa(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Um(t,e,n={}){return!!Nv(t,e,n)}function rp(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Nv([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,a=o+1,c=l+i.node.nodeSize;for(;o>0&&Um([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&Um([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function _r(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const qz=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=_r(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const d=rp(a,s,e);if(d&&d.from<=c&&d.to>=u){const p=Q.create(o,d.from,d.to);n.setSelection(p)}}return!0},Kz=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function ip(t){return t instanceof Q}function Bn(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Mv(t,e=null){if(!e)return null;const n=Z.atStart(t),r=Z.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Q.create(t,Bn(0,i,s),Bn(t.content.size,i,s)):Q.create(t,Bn(e,i,s),Bn(e,i,s))}function Jz(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function sp(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const Yz=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(sp()||Jz())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!ip(n.state.selection))return o(),!0;const l=Mv(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},Gz=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),Qz=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Ev=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Ev(r)}return t};function Nl(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Ev(n)}function Lo(t,e,n){if(t instanceof Nr||t instanceof O)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return O.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Lo("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new ux({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?so.fromSchema(a).parseSlice(Nl(t),n.parseOptions):so.fromSchema(a).parse(Nl(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=so.fromSchema(e);return n.slice?s.parseSlice(Nl(t),n.parseOptions).content:s.parse(Nl(t),n.parseOptions)}return Lo("",e,n)}function Xz(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof _e||i instanceof Fe))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(Z.near(t.doc.resolve(o),n))}const Zz=t=>!("type"in t),eN=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=x=>{s.emit("contentError",{editor:s,error:x,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Lo(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(x){a(x)}try{l=Lo(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(x){return a(x),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},p=!0,h=!0;if((Zz(l)?l:[l]).forEach(x=>{x.check(),p=p?x.isText&&x.marks.length===0:!1,h=h?x.isBlock:!1}),u===d&&h){const{parent:x}=r.doc.resolve(u);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(u-=1,d+=1)}let y;if(p){if(Array.isArray(e))y=e.map(x=>x.text||"").join("");else if(e instanceof O){let x="";e.forEach(g=>{g.text&&(x+=g.text)}),y=x}else typeof e=="object"&&e&&e.text?y=e.text:y=e;r.insertText(y,u,d)}else y=l,r.replaceWith(u,d,y);n.updateSelection&&Xz(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:y})}return!0},tN=()=>({state:t,dispatch:e})=>ez(t,e),nN=()=>({state:t,dispatch:e})=>tz(t,e),rN=()=>({state:t,dispatch:e})=>dv(t,e),iN=()=>({state:t,dispatch:e})=>mv(t,e),sN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=tc(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},oN=()=>({state:t,dispatch:e,tr:n})=>{try{const r=tc(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},lN=()=>({state:t,dispatch:e})=>XC(t,e),aN=()=>({state:t,dispatch:e})=>ZC(t,e);function Tv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function cN(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))sp()||Tv()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const uN=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=cN(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function _o(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?He(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,p)=>{if(d.isText)return;const h=Math.max(r,p),m=Math.min(i,p+d.nodeSize);l.push({node:d,from:h,to:m})});const a=i-r,c=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Oa(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,p)=>d+p.to-p.from,0)>=a}const dN=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return _o(n,i,e)?nz(n,r):!1},fN=()=>({state:t,dispatch:e})=>vv(t,e),pN=t=>({state:e,dispatch:n})=>{const r=He(t,e.schema);return hz(r)(e,n)},hN=()=>({state:t,dispatch:e})=>yv(t,e);function fc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function qm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const mN=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=fc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=He(t,r.schema)),l==="mark"&&(o=_r(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,qm(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(qm(d.attrs,e)))})})}),!0):!1},gN=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),yN=()=>({tr:t,dispatch:e})=>{if(e){const n=new At(t.doc);t.setSelection(n)}return!0},xN=()=>({state:t,dispatch:e})=>pv(t,e),vN=()=>({state:t,dispatch:e})=>gv(t,e),kN=()=>({state:t,dispatch:e})=>oz(t,e),bN=()=>({state:t,dispatch:e})=>cz(t,e),wN=()=>({state:t,dispatch:e})=>az(t,e);function Dd(t,e,n={},r={}){return Lo(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const SN=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=Dd(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function Ov(t,e){const n=_r(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function CN(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function zN(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function op(t){return e=>zN(e.$from,t)}function NN(t,e){const n={from:0,to:t.content.size};return Cv(t,n,e)}function MN(t,e){const n=He(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function EN(t,e){const n=fc(typeof e=="string"?e:e.name,t.schema);return n==="node"?MN(t,e):n==="mark"?Ov(t,e):{}}function Dv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=rp(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function ql(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function jd(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?_r(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Oa(d.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:d,$to:p})=>{const h=d.pos,m=p.pos;t.doc.nodesBetween(h,m,(y,x)=>{if(!y.isText&&!y.marks.length)return;const g=Math.max(h,x),v=Math.min(m,x+y.nodeSize),k=v-g;o+=k,l.push(...y.marks.map(b=>({mark:b,from:g,to:v})))})}),o===0)return!1;const a=l.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Oa(d.mark.attrs,n,{strict:!1})).reduce((d,p)=>d+p.to-p.from,0),c=l.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,p)=>d+p.to-p.from,0);return(a>0?a+c:a)>=o}function TN(t,e,n={}){if(!e)return _o(t,null,n)||jd(t,null,n);const r=fc(e,t.schema);return r==="node"?_o(t,e,n):r==="mark"?jd(t,e,n):!1}function Km(t,e){const{nodeExtensions:n}=cc(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=te(B(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function lp(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(lp(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function jv(t){return t instanceof W}function ON(t,e,n){const i=t.state.doc.content.size,s=Bn(e,0,i),o=Bn(n,0,i),l=t.coordsAtPos(s),a=t.coordsAtPos(o,-1),c=Math.min(l.top,a.top),u=Math.max(l.bottom,a.bottom),d=Math.min(l.left,a.left),p=Math.max(l.right,a.right),h=p-d,m=u-c,g={top:c,bottom:u,left:d,right:p,width:h,height:m,x:d,y:c};return{...g,toJSON:()=>g}}function DN(t,e,n){var r;const{selection:i}=e;let s=null;if(ip(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,p)=>{if(c)return!1;if(u.isInline){const h=!p||p.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=h&&m}return!c}),c})}const jN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=_r(t,r.schema);if(i)if(o){const c=Ov(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(p,h)=>{const m=Math.max(h,u),y=Math.min(h+p.nodeSize,d);p.marks.find(g=>g.type===a)?p.marks.forEach(g=>{a===g.type&&n.addMark(m,y,a.create({...g.attrs,...e}))}):n.addMark(m,y,a.create(e))})});return DN(r,n,a)},AN=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),PN=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=He(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>Fm(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>Fm(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},IN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Bn(t,0,r.content.size),s=W.create(r,i);e.setSelection(s)}return!0},RN=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Q.atStart(r).from,l=Q.atEnd(r).to,a=Bn(i,o,l),c=Bn(s,o,l),u=Q.create(r,a,c);e.setSelection(u)}return!0},LN=t=>({state:e,dispatch:n})=>{const r=He(t,e.schema);return yz(r)(e,n)};function Jm(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const _N=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=ql(c,l.node().type.name,l.node().attrs);if(s instanceof W&&s.node.isBlock)return!l.parentOffset||!Vn(o,l.pos)?!1:(r&&(t&&Jm(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,p=l.depth===0?void 0:CN(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&p?[{type:p,attrs:u}]:void 0,m=Vn(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!m&&Vn(e.doc,e.mapping.map(l.pos),1,p?[{type:p}]:void 0)&&(m=!0,h=p?[{type:p,attrs:u}]:void 0),r){if(m&&(s instanceof Q&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),p&&!d&&!l.parentOffset&&l.parent.type!==p)){const y=e.mapping.map(l.before()),x=e.doc.resolve(y);l.node(-1).canReplaceWith(x.index(),x.index()+1,p)&&e.setNodeMarkup(e.mapping.map(l.before()),p)}t&&Jm(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},$N=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=He(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const p=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=O.empty;const v=a.index(-1)?1:a.index(-2)?2:3;for(let N=a.depth-v;N>=a.depth-3;N-=1)g=O.from(a.node(N).copy(g));const k=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,b={...ql(p,a.node().type.name,a.node().attrs),...e},S=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(b))||void 0;g=g.append(O.from(l.createAndFill(null,S)||void 0));const w=a.before(a.depth-(v-1));n.replace(w,a.after(-k),new L(g,4-v,0));let C=-1;n.doc.nodesBetween(w,n.doc.content.size,(N,D)=>{if(C>-1)return!1;N.isTextblock&&N.content.size===0&&(C=D+1)}),C>-1&&n.setSelection(Q.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,m={...ql(p,d.type.name,d.attrs),...e},y={...ql(p,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const x=h?[{type:l,attrs:m},{type:h,attrs:y}]:[{type:l,attrs:m}];if(!Vn(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:v}=r,{splittableMarks:k}=s.extensionManager,b=v||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,x).scrollIntoView(),!b||!i)return!0;const S=b.filter(w=>k.includes(w.type.name));n.ensureMarks(S)}return!0},lu=(t,e)=>{const n=op(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Rr(t.doc,n.pos)&&t.join(n.pos),!0},au=(t,e)=>{const n=op(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&Rr(t.doc,r)&&t.join(r),!0},BN=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:p}=i.extensionManager,h=He(t,o.schema),m=He(e,o.schema),{selection:y,storedMarks:x}=o,{$from:g,$to:v}=y,k=g.blockRange(v),b=x||y.$to.parentOffset&&y.$from.marks();if(!k)return!1;const S=op(w=>Km(w.type.name,d))(y);if(k.depth>=1&&S&&k.depth-S.depth<=1){if(S.node.type===h)return c.liftListItem(m);if(Km(S.node.type.name,d)&&h.validContent(S.node.content)&&l)return a().command(()=>(s.setNodeMarkup(S.pos,h),!0)).command(()=>lu(s,h)).command(()=>au(s,h)).run()}return!n||!b||!l?a().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>lu(s,h)).command(()=>au(s,h)).run():a().command(()=>{const w=u().wrapInList(h,r),C=b.filter(N=>p.includes(N.type.name));return s.ensureMarks(C),w?!0:c.clearNodes()}).wrapInList(h,r).command(()=>lu(s,h)).command(()=>au(s,h)).run()},FN=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=_r(t,r.schema);return jd(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},VN=(t,e,n={})=>({state:r,commands:i})=>{const s=He(t,r.schema),o=He(e,r.schema),l=_o(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},HN=(t,e={})=>({state:n,commands:r})=>{const i=He(t,n.schema);return _o(n,i,e)?r.lift(i):r.wrapIn(i,e)},WN=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},UN=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},qN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=_r(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!i)return!0;if(u&&o){let{from:p,to:h}=l;const m=(s=c.marks().find(x=>x.type===a))===null||s===void 0?void 0:s.attrs,y=rp(c,a,m);y&&(p=y.from,h=y.to),n.removeMark(p,h,a)}else d.forEach(p=>{n.removeMark(p.$from.pos,p.$to.pos,a)});return n.removeStoredMark(a),!0},KN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=fc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=He(t,r.schema)),l==="mark"&&(o=_r(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,p,h,m;n.selection.empty?r.doc.nodesBetween(c,u,(y,x)=>{s&&s===y.type&&(h=Math.max(x,c),m=Math.min(x+y.nodeSize,u),d=x,p=y)}):r.doc.nodesBetween(c,u,(y,x)=>{x<c&&s&&s===y.type&&(h=Math.max(x,c),m=Math.min(x+y.nodeSize,u),d=x,p=y),x>=c&&x<=u&&(s&&s===y.type&&n.setNodeMarkup(x,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(g=>{if(o===g.type){const v=Math.max(x,c),k=Math.min(x+y.nodeSize,u);n.addMark(v,k,o.create({...g.attrs,...e}))}}))}),p&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...p.attrs,...e}),o&&p.marks.length&&p.marks.forEach(y=>{o===y.type&&n.addMark(h,m,o.create({...y.attrs,...e}))}))}),!0):!1},JN=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return uz(i,e)(n,r)},YN=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return dz(i,e)(n,r)};var GN=Object.freeze({__proto__:null,blur:Pz,clearContent:Iz,clearNodes:Rz,command:Lz,createParagraphNear:_z,cut:$z,deleteCurrentNode:Bz,deleteNode:Fz,deleteRange:Vz,deleteSelection:Hz,enter:Wz,exitCode:Uz,extendMarkRange:qz,first:Kz,focus:Yz,forEach:Gz,insertContent:Qz,insertContentAt:eN,joinBackward:rN,joinDown:nN,joinForward:iN,joinItemBackward:sN,joinItemForward:oN,joinTextblockBackward:lN,joinTextblockForward:aN,joinUp:tN,keyboardShortcut:uN,lift:dN,liftEmptyBlock:fN,liftListItem:pN,newlineInCode:hN,resetAttributes:mN,scrollIntoView:gN,selectAll:yN,selectNodeBackward:xN,selectNodeForward:vN,selectParentNode:kN,selectTextblockEnd:bN,selectTextblockStart:wN,setContent:SN,setMark:jN,setMeta:AN,setNode:PN,setNodeSelection:IN,setTextSelection:RN,sinkListItem:LN,splitBlock:_N,splitListItem:$N,toggleList:BN,toggleMark:FN,toggleNode:VN,toggleWrap:HN,undoInputRule:WN,unsetAllMarks:UN,unsetMark:qN,updateAttributes:KN,wrapIn:JN,wrapInList:YN});const QN=Ae.create({name:"commands",addCommands(){return{...GN}}}),XN=Ae.create({name:"drop",addProseMirrorPlugins(){return[new mt({key:new vn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),ZN=Ae.create({name:"editable",addProseMirrorPlugins(){return[new mt({key:new vn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),e2=new vn("focusEvents"),t2=Ae.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new mt({key:e2,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),n2=Ae.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:p,parent:h}=d,m=d.parent.isTextblock&&p>0?l.doc.resolve(p-1):d,y=m.parent.type.spec.isolating,x=d.pos-d.parentOffset,g=y&&m.parent.childCount===1?x===d.pos:Z.atStart(c).from===p;return!u||!h.type.isTextblock||h.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return sp()||Tv()?s:i},addProseMirrorPlugins(){return[new mt({key:new vn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=Z.atStart(e.doc).from,c=Z.atEnd(e.doc).to;if(s||!(o===a&&l===c)||!lp(n.doc))return;const p=n.tr,h=lc({state:n,transaction:p}),{commands:m}=new ac({editor:this.editor,state:h});if(m.clearNodes(),!!p.steps.length)return p}})]}}),r2=Ae.create({name:"paste",addProseMirrorPlugins(){return[new mt({key:new vn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),i2=Ae.create({name:"tabindex",addProseMirrorPlugins(){return[new mt({key:new vn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Qr{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Qr(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Qr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Qr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new Qr(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Qr(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const s2=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function o2(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class l2 extends xz{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=o2(s2,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=Sv(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[ZN,Az.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),QN,t2,n2,i2,XN,r2].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Yi(i,this)}createCommandManager(){this.commandManager=new ac({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Dd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Dd(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Mv(n,this.options.autofocus);this.view=new av(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ji.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return EN(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return TN(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return tp(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return NN(this.state.doc,{blockSeparator:n,textSerializers:{...zv(this.schema),...r}})}get isEmpty(){return lp(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Qr(n,this)}get $doc(){return this.$pos(0)}}function ki(t){return new uc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=te(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),c=n.from+l.indexOf(o),u=c+o.length;if(Dv(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===t.type&&y!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+a,c);const p=n.from+a+o.length;s.addMark(n.from+a,p,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function Av(t){return new uc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=te(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function Ad(t){return new uc({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=te(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function $o(t){return new uc({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=te(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&$f(a,t.type,s);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:p}=e,{splittableMarks:h}=t.editor.extensionManager,m=p||d.$to.parentOffset&&d.$from.marks();if(m){const y=m.filter(x=>h.includes(x.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&Rr(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class st{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=te(B(this,"addOptions",{name:this.name}))),this.storage=te(B(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new st(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>dc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new st(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=te(B(n,"addOptions",{name:n.name})),n.storage=te(B(n,"addStorage",{name:n.name,options:n.options})),n}}function bi(t){return new Mz({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=te(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),p=d+l.length;if(Dv(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(x=>x===t.type&&x!==m.mark.type)).filter(m=>m.to>d).length)return null;p<n.to&&o.delete(p,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+l.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function a2(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof W){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}const c2=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},u2=It.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&c2(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),d2=Ae.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),f2=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,p2=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,h2=It.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[ki({find:f2,type:this.type})]},addPasteRules(){return[bi({find:p2,type:this.type})]}}),m2=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,g2=st.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Ne(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[Av({find:m2,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),y2=It.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),x2=It.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),v2=Ae.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),k2=It.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});var zt="top",nn="bottom",rn="right",Nt="left",ap="auto",Go=[zt,nn,rn,Nt],ys="start",Bo="end",b2="clippingParents",Pv="viewport",$s="popper",w2="reference",Ym=Go.reduce(function(t,e){return t.concat([e+"-"+ys,e+"-"+Bo])},[]),Iv=[].concat(Go,[ap]).reduce(function(t,e){return t.concat([e,e+"-"+ys,e+"-"+Bo])},[]),S2="beforeRead",C2="read",z2="afterRead",N2="beforeMain",M2="main",E2="afterMain",T2="beforeWrite",O2="write",D2="afterWrite",j2=[S2,C2,z2,N2,M2,E2,T2,O2,D2];function jn(t){return t?(t.nodeName||"").toLowerCase():null}function Rt(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function wi(t){var e=Rt(t).Element;return t instanceof e||t instanceof Element}function Zt(t){var e=Rt(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function cp(t){if(typeof ShadowRoot>"u")return!1;var e=Rt(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function A2(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Zt(s)||!jn(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var l=i[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function P2(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(a,c){return a[c]="",a},{});!Zt(i)||!jn(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(a){i.removeAttribute(a)}))})}}const Rv={name:"applyStyles",enabled:!0,phase:"write",fn:A2,effect:P2,requires:["computeStyles"]};function Tn(t){return t.split("-")[0]}var ci=Math.max,Da=Math.min,xs=Math.round;function Pd(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Lv(){return!/^((?!chrome|android).)*safari/i.test(Pd())}function vs(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Zt(t)&&(i=t.offsetWidth>0&&xs(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&xs(r.height)/t.offsetHeight||1);var o=wi(t)?Rt(t):window,l=o.visualViewport,a=!Lv()&&n,c=(r.left+(a&&l?l.offsetLeft:0))/i,u=(r.top+(a&&l?l.offsetTop:0))/s,d=r.width/i,p=r.height/s;return{width:d,height:p,top:u,right:c+d,bottom:u+p,left:c,x:c,y:u}}function up(t){var e=vs(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function _v(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&cp(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Jn(t){return Rt(t).getComputedStyle(t)}function I2(t){return["table","td","th"].indexOf(jn(t))>=0}function $r(t){return((wi(t)?t.ownerDocument:t.document)||window.document).documentElement}function pc(t){return jn(t)==="html"?t:t.assignedSlot||t.parentNode||(cp(t)?t.host:null)||$r(t)}function Gm(t){return!Zt(t)||Jn(t).position==="fixed"?null:t.offsetParent}function R2(t){var e=/firefox/i.test(Pd()),n=/Trident/i.test(Pd());if(n&&Zt(t)){var r=Jn(t);if(r.position==="fixed")return null}var i=pc(t);for(cp(i)&&(i=i.host);Zt(i)&&["html","body"].indexOf(jn(i))<0;){var s=Jn(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Qo(t){for(var e=Rt(t),n=Gm(t);n&&I2(n)&&Jn(n).position==="static";)n=Gm(n);return n&&(jn(n)==="html"||jn(n)==="body"&&Jn(n).position==="static")?e:n||R2(t)||e}function dp(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function co(t,e,n){return ci(t,Da(e,n))}function L2(t,e,n){var r=co(t,e,n);return r>n?n:r}function $v(){return{top:0,right:0,bottom:0,left:0}}function Bv(t){return Object.assign({},$v(),t)}function Fv(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var _2=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Bv(typeof e!="number"?e:Fv(e,Go))};function $2(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Tn(n.placement),a=dp(l),c=[Nt,rn].indexOf(l)>=0,u=c?"height":"width";if(!(!s||!o)){var d=_2(i.padding,n),p=up(s),h=a==="y"?zt:Nt,m=a==="y"?nn:rn,y=n.rects.reference[u]+n.rects.reference[a]-o[a]-n.rects.popper[u],x=o[a]-n.rects.reference[a],g=Qo(s),v=g?a==="y"?g.clientHeight||0:g.clientWidth||0:0,k=y/2-x/2,b=d[h],S=v-p[u]-d[m],w=v/2-p[u]/2+k,C=co(b,w,S),N=a;n.modifiersData[r]=(e={},e[N]=C,e.centerOffset=C-w,e)}}function B2(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||_v(e.elements.popper,i)&&(e.elements.arrow=i))}const F2={name:"arrow",enabled:!0,phase:"main",fn:$2,effect:B2,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ks(t){return t.split("-")[1]}var V2={top:"auto",right:"auto",bottom:"auto",left:"auto"};function H2(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:xs(n*i)/i||0,y:xs(r*i)/i||0}}function Qm(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,l=t.position,a=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,p=o.x,h=p===void 0?0:p,m=o.y,y=m===void 0?0:m,x=typeof u=="function"?u({x:h,y}):{x:h,y};h=x.x,y=x.y;var g=o.hasOwnProperty("x"),v=o.hasOwnProperty("y"),k=Nt,b=zt,S=window;if(c){var w=Qo(n),C="clientHeight",N="clientWidth";if(w===Rt(n)&&(w=$r(n),Jn(w).position!=="static"&&l==="absolute"&&(C="scrollHeight",N="scrollWidth")),w=w,i===zt||(i===Nt||i===rn)&&s===Bo){b=nn;var D=d&&w===S&&S.visualViewport?S.visualViewport.height:w[C];y-=D-r.height,y*=a?1:-1}if(i===Nt||(i===zt||i===nn)&&s===Bo){k=rn;var E=d&&w===S&&S.visualViewport?S.visualViewport.width:w[N];h-=E-r.width,h*=a?1:-1}}var I=Object.assign({position:l},c&&V2),U=u===!0?H2({x:h,y},Rt(n)):{x:h,y};if(h=U.x,y=U.y,a){var Y;return Object.assign({},I,(Y={},Y[b]=v?"0":"",Y[k]=g?"0":"",Y.transform=(S.devicePixelRatio||1)<=1?"translate("+h+"px, "+y+"px)":"translate3d("+h+"px, "+y+"px, 0)",Y))}return Object.assign({},I,(e={},e[b]=v?y+"px":"",e[k]=g?h+"px":"",e.transform="",e))}function W2(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,l=n.roundOffsets,a=l===void 0?!0:l,c={placement:Tn(e.placement),variation:ks(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Qm(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Qm(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const U2={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:W2,data:{}};var Ml={passive:!0};function q2(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,l=o===void 0?!0:o,a=Rt(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Ml)}),l&&a.addEventListener("resize",n.update,Ml),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Ml)}),l&&a.removeEventListener("resize",n.update,Ml)}}const K2={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:q2,data:{}};var J2={left:"right",right:"left",bottom:"top",top:"bottom"};function Kl(t){return t.replace(/left|right|bottom|top/g,function(e){return J2[e]})}var Y2={start:"end",end:"start"};function Xm(t){return t.replace(/start|end/g,function(e){return Y2[e]})}function fp(t){var e=Rt(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function pp(t){return vs($r(t)).left+fp(t).scrollLeft}function G2(t,e){var n=Rt(t),r=$r(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,l=0,a=0;if(i){s=i.width,o=i.height;var c=Lv();(c||!c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:o,x:l+pp(t),y:a}}function Q2(t){var e,n=$r(t),r=fp(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=ci(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=ci(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+pp(t),a=-r.scrollTop;return Jn(i||n).direction==="rtl"&&(l+=ci(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:l,y:a}}function hp(t){var e=Jn(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function Vv(t){return["html","body","#document"].indexOf(jn(t))>=0?t.ownerDocument.body:Zt(t)&&hp(t)?t:Vv(pc(t))}function uo(t,e){var n;e===void 0&&(e=[]);var r=Vv(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=Rt(r),o=i?[s].concat(s.visualViewport||[],hp(r)?r:[]):r,l=e.concat(o);return i?l:l.concat(uo(pc(o)))}function Id(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function X2(t,e){var n=vs(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Zm(t,e,n){return e===Pv?Id(G2(t,n)):wi(e)?X2(e,n):Id(Q2($r(t)))}function Z2(t){var e=uo(pc(t)),n=["absolute","fixed"].indexOf(Jn(t).position)>=0,r=n&&Zt(t)?Qo(t):t;return wi(r)?e.filter(function(i){return wi(i)&&_v(i,r)&&jn(i)!=="body"}):[]}function eM(t,e,n,r){var i=e==="clippingParents"?Z2(t):[].concat(e),s=[].concat(i,[n]),o=s[0],l=s.reduce(function(a,c){var u=Zm(t,c,r);return a.top=ci(u.top,a.top),a.right=Da(u.right,a.right),a.bottom=Da(u.bottom,a.bottom),a.left=ci(u.left,a.left),a},Zm(t,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Hv(t){var e=t.reference,n=t.element,r=t.placement,i=r?Tn(r):null,s=r?ks(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,a;switch(i){case zt:a={x:o,y:e.y-n.height};break;case nn:a={x:o,y:e.y+e.height};break;case rn:a={x:e.x+e.width,y:l};break;case Nt:a={x:e.x-n.width,y:l};break;default:a={x:e.x,y:e.y}}var c=i?dp(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ys:a[c]=a[c]-(e[u]/2-n[u]/2);break;case Bo:a[c]=a[c]+(e[u]/2-n[u]/2);break}}return a}function Fo(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,l=n.boundary,a=l===void 0?b2:l,c=n.rootBoundary,u=c===void 0?Pv:c,d=n.elementContext,p=d===void 0?$s:d,h=n.altBoundary,m=h===void 0?!1:h,y=n.padding,x=y===void 0?0:y,g=Bv(typeof x!="number"?x:Fv(x,Go)),v=p===$s?w2:$s,k=t.rects.popper,b=t.elements[m?v:p],S=eM(wi(b)?b:b.contextElement||$r(t.elements.popper),a,u,o),w=vs(t.elements.reference),C=Hv({reference:w,element:k,placement:i}),N=Id(Object.assign({},k,C)),D=p===$s?N:w,E={top:S.top-D.top+g.top,bottom:D.bottom-S.bottom+g.bottom,left:S.left-D.left+g.left,right:D.right-S.right+g.right},I=t.modifiersData.offset;if(p===$s&&I){var U=I[i];Object.keys(E).forEach(function(Y){var J=[rn,nn].indexOf(Y)>=0?1:-1,se=[zt,nn].indexOf(Y)>=0?"y":"x";E[Y]+=U[se]*J})}return E}function tM(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?Iv:a,u=ks(r),d=u?l?Ym:Ym.filter(function(m){return ks(m)===u}):Go,p=d.filter(function(m){return c.indexOf(m)>=0});p.length===0&&(p=d);var h=p.reduce(function(m,y){return m[y]=Fo(t,{placement:y,boundary:i,rootBoundary:s,padding:o})[Tn(y)],m},{});return Object.keys(h).sort(function(m,y){return h[m]-h[y]})}function nM(t){if(Tn(t)===ap)return[];var e=Kl(t);return[Xm(t),e,Xm(e)]}function rM(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!0:o,a=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,p=n.altBoundary,h=n.flipVariations,m=h===void 0?!0:h,y=n.allowedAutoPlacements,x=e.options.placement,g=Tn(x),v=g===x,k=a||(v||!m?[Kl(x)]:nM(x)),b=[x].concat(k).reduce(function(be,We){return be.concat(Tn(We)===ap?tM(e,{placement:We,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:y}):We)},[]),S=e.rects.reference,w=e.rects.popper,C=new Map,N=!0,D=b[0],E=0;E<b.length;E++){var I=b[E],U=Tn(I),Y=ks(I)===ys,J=[zt,nn].indexOf(U)>=0,se=J?"width":"height",q=Fo(e,{placement:I,boundary:u,rootBoundary:d,altBoundary:p,padding:c}),fe=J?Y?rn:Nt:Y?nn:zt;S[se]>w[se]&&(fe=Kl(fe));var A=Kl(fe),V=[];if(s&&V.push(q[U]<=0),l&&V.push(q[fe]<=0,q[A]<=0),V.every(function(be){return be})){D=I,N=!1;break}C.set(I,V)}if(N)for(var K=m?3:1,ae=function(We){var Pe=b.find(function($t){var sn=C.get($t);if(sn)return sn.slice(0,We).every(function(Bt){return Bt})});if(Pe)return D=Pe,"break"},ie=K;ie>0;ie--){var ce=ae(ie);if(ce==="break")break}e.placement!==D&&(e.modifiersData[r]._skip=!0,e.placement=D,e.reset=!0)}}const iM={name:"flip",enabled:!0,phase:"main",fn:rM,requiresIfExists:["offset"],data:{_skip:!1}};function e0(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function t0(t){return[zt,rn,nn,Nt].some(function(e){return t[e]>=0})}function sM(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Fo(e,{elementContext:"reference"}),l=Fo(e,{altBoundary:!0}),a=e0(o,r),c=e0(l,i,s),u=t0(a),d=t0(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const oM={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:sM};function lM(t,e,n){var r=Tn(t),i=[Nt,zt].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],l=s[1];return o=o||0,l=(l||0)*i,[Nt,rn].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function aM(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=Iv.reduce(function(u,d){return u[d]=lM(d,e.rects,s),u},{}),l=o[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const cM={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:aM};function uM(t){var e=t.state,n=t.name;e.modifiersData[n]=Hv({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const dM={name:"popperOffsets",enabled:!0,phase:"read",fn:uM,data:{}};function fM(t){return t==="x"?"y":"x"}function pM(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!1:o,a=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,p=n.tether,h=p===void 0?!0:p,m=n.tetherOffset,y=m===void 0?0:m,x=Fo(e,{boundary:a,rootBoundary:c,padding:d,altBoundary:u}),g=Tn(e.placement),v=ks(e.placement),k=!v,b=dp(g),S=fM(b),w=e.modifiersData.popperOffsets,C=e.rects.reference,N=e.rects.popper,D=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,E=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,U={x:0,y:0};if(w){if(s){var Y,J=b==="y"?zt:Nt,se=b==="y"?nn:rn,q=b==="y"?"height":"width",fe=w[b],A=fe+x[J],V=fe-x[se],K=h?-N[q]/2:0,ae=v===ys?C[q]:N[q],ie=v===ys?-N[q]:-C[q],ce=e.elements.arrow,be=h&&ce?up(ce):{width:0,height:0},We=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:$v(),Pe=We[J],$t=We[se],sn=co(0,C[q],be[q]),Bt=k?C[q]/2-K-sn-Pe-E.mainAxis:ae-sn-Pe-E.mainAxis,Mt=k?-C[q]/2+K+sn+$t+E.mainAxis:ie+sn+$t+E.mainAxis,Gn=e.elements.arrow&&Qo(e.elements.arrow),gt=Gn?b==="y"?Gn.clientTop||0:Gn.clientLeft||0:0,on=(Y=I==null?void 0:I[b])!=null?Y:0,Mi=fe+Bt-on-gt,Qn=fe+Mt-on,Xn=co(h?Da(A,Mi):A,fe,h?ci(V,Qn):V);w[b]=Xn,U[b]=Xn-fe}if(l){var Zn,Ei=b==="x"?zt:Nt,er=b==="x"?nn:rn,Et=w[S],yt=S==="y"?"height":"width",lt=Et+x[Ei],Xe=Et-x[er],Ft=[zt,Nt].indexOf(g)!==-1,Br=(Zn=I==null?void 0:I[S])!=null?Zn:0,ln=Ft?lt:Et-C[yt]-N[yt]-Br+E.altAxis,Fr=Ft?Et+C[yt]+N[yt]-Br-E.altAxis:Xe,kn=h&&Ft?L2(ln,Et,Fr):co(h?ln:lt,Et,h?Fr:Xe);w[S]=kn,U[S]=kn-Et}e.modifiersData[r]=U}}const hM={name:"preventOverflow",enabled:!0,phase:"main",fn:pM,requiresIfExists:["offset"]};function mM(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function gM(t){return t===Rt(t)||!Zt(t)?fp(t):mM(t)}function yM(t){var e=t.getBoundingClientRect(),n=xs(e.width)/t.offsetWidth||1,r=xs(e.height)/t.offsetHeight||1;return n!==1||r!==1}function xM(t,e,n){n===void 0&&(n=!1);var r=Zt(e),i=Zt(e)&&yM(e),s=$r(e),o=vs(t,i,n),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((jn(e)!=="body"||hp(s))&&(l=gM(e)),Zt(e)?(a=vs(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):s&&(a.x=pp(s))),{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function vM(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var a=e.get(l);a&&i(a)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function kM(t){var e=vM(t);return j2.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function bM(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function wM(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var n0={placement:"bottom",modifiers:[],strategy:"absolute"};function r0(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function SM(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?n0:i;return function(l,a,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},n0,s),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},d=[],p=!1,h={state:u,setOptions:function(g){var v=typeof g=="function"?g(u.options):g;y(),u.options=Object.assign({},s,u.options,v),u.scrollParents={reference:wi(l)?uo(l):l.contextElement?uo(l.contextElement):[],popper:uo(a)};var k=kM(wM([].concat(r,u.options.modifiers)));return u.orderedModifiers=k.filter(function(b){return b.enabled}),m(),h.update()},forceUpdate:function(){if(!p){var g=u.elements,v=g.reference,k=g.popper;if(r0(v,k)){u.rects={reference:xM(v,Qo(k),u.options.strategy==="fixed"),popper:up(k)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var b=0;b<u.orderedModifiers.length;b++){if(u.reset===!0){u.reset=!1,b=-1;continue}var S=u.orderedModifiers[b],w=S.fn,C=S.options,N=C===void 0?{}:C,D=S.name;typeof w=="function"&&(u=w({state:u,options:N,name:D,instance:h})||u)}}}},update:bM(function(){return new Promise(function(x){h.forceUpdate(),x(u)})}),destroy:function(){y(),p=!0}};if(!r0(l,a))return h;h.setOptions(c).then(function(x){!p&&c.onFirstUpdate&&c.onFirstUpdate(x)});function m(){u.orderedModifiers.forEach(function(x){var g=x.name,v=x.options,k=v===void 0?{}:v,b=x.effect;if(typeof b=="function"){var S=b({state:u,name:g,instance:h,options:k}),w=function(){};d.push(S||w)}})}function y(){d.forEach(function(x){return x()}),d=[]}return h}}var CM=[K2,dM,U2,Rv,cM,iM,hM,F2,oM],zM=SM({defaultModifiers:CM}),NM="tippy-box",Wv="tippy-content",MM="tippy-backdrop",Uv="tippy-arrow",qv="tippy-svg-arrow",Yr={passive:!0,capture:!0},Kv=function(){return document.body};function cu(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function mp(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Jv(t,e){return typeof t=="function"?t.apply(void 0,e):t}function i0(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function EM(t){return t.split(/\s+/).filter(Boolean)}function Ii(t){return[].concat(t)}function s0(t,e){t.indexOf(e)===-1&&t.push(e)}function TM(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function OM(t){return t.split("-")[0]}function ja(t){return[].slice.call(t)}function o0(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function fo(){return document.createElement("div")}function hc(t){return["Element","Fragment"].some(function(e){return mp(t,e)})}function DM(t){return mp(t,"NodeList")}function jM(t){return mp(t,"MouseEvent")}function AM(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function PM(t){return hc(t)?[t]:DM(t)?ja(t):Array.isArray(t)?t:ja(document.querySelectorAll(t))}function uu(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function l0(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function IM(t){var e,n=Ii(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function RM(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,l=i.props,a=l.interactiveBorder,c=OM(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,p=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,m=c==="left"?u.right.x:0,y=s.top-r+d>a,x=r-s.bottom-p>a,g=s.left-n+h>a,v=n-s.right-m>a;return y||x||g||v})}function du(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function a0(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Cn={isTouch:!1},c0=0;function LM(){Cn.isTouch||(Cn.isTouch=!0,window.performance&&document.addEventListener("mousemove",Yv))}function Yv(){var t=performance.now();t-c0<20&&(Cn.isTouch=!1,document.removeEventListener("mousemove",Yv)),c0=t}function _M(){var t=document.activeElement;if(AM(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function $M(){document.addEventListener("touchstart",LM,Yr),window.addEventListener("blur",_M)}var BM=typeof window<"u"&&typeof document<"u",FM=BM?!!window.msCrypto:!1,VM={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},HM={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},mn=Object.assign({appendTo:Kv,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},VM,HM),WM=Object.keys(mn),UM=function(e){var n=Object.keys(e);n.forEach(function(r){mn[r]=e[r]})};function Gv(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var l;r[s]=t[s]!==void 0?t[s]:(l=mn[s])!=null?l:o}return r},{});return Object.assign({},t,n)}function qM(t,e){var n=e?Object.keys(Gv(Object.assign({},mn,{plugins:e}))):WM,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function u0(t,e){var n=Object.assign({},e,{content:Jv(e.content,[t])},e.ignoreAttributes?{}:qM(t,e.plugins));return n.aria=Object.assign({},mn.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var KM=function(){return"innerHTML"};function Rd(t,e){t[KM()]=e}function d0(t){var e=fo();return t===!0?e.className=Uv:(e.className=qv,hc(t)?e.appendChild(t):Rd(e,t)),e}function f0(t,e){hc(e.content)?(Rd(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Rd(t,e.content):t.textContent=e.content)}function Ld(t){var e=t.firstElementChild,n=ja(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Wv)}),arrow:n.find(function(r){return r.classList.contains(Uv)||r.classList.contains(qv)}),backdrop:n.find(function(r){return r.classList.contains(MM)})}}function Qv(t){var e=fo(),n=fo();n.className=NM,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=fo();r.className=Wv,r.setAttribute("data-state","hidden"),f0(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var l=Ld(e),a=l.box,c=l.content,u=l.arrow;o.theme?a.setAttribute("data-theme",o.theme):a.removeAttribute("data-theme"),typeof o.animation=="string"?a.setAttribute("data-animation",o.animation):a.removeAttribute("data-animation"),o.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?a.setAttribute("role",o.role):a.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&f0(c,t.props),o.arrow?u?s.arrow!==o.arrow&&(a.removeChild(u),a.appendChild(d0(o.arrow))):a.appendChild(d0(o.arrow)):u&&a.removeChild(u)}return{popper:e,onUpdate:i}}Qv.$$tippy=!0;var JM=1,El=[],fu=[];function YM(t,e){var n=u0(t,Object.assign({},mn,Gv(o0(e)))),r,i,s,o=!1,l=!1,a=!1,c=!1,u,d,p,h=[],m=i0(Mi,n.interactiveDebounce),y,x=JM++,g=null,v=TM(n.plugins),k={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},b={id:x,reference:t,popper:fo(),popperInstance:g,props:n,state:k,plugins:v,clearDelayTimeouts:ln,setProps:Fr,setContent:kn,show:Zo,hide:Vr,hideWithInteractivity:el,enable:Ft,disable:Br,unmount:Ns,destroy:tl};if(!n.render)return b;var S=n.render(b),w=S.popper,C=S.onUpdate;w.setAttribute("data-tippy-root",""),w.id="tippy-"+b.id,b.popper=w,t._tippy=b,w._tippy=b;var N=v.map(function(M){return M.fn(b)}),D=t.hasAttribute("aria-expanded");return Gn(),K(),fe(),A("onCreate",[b]),n.showOnCreate&&lt(),w.addEventListener("mouseenter",function(){b.props.interactive&&b.state.isVisible&&b.clearDelayTimeouts()}),w.addEventListener("mouseleave",function(){b.props.interactive&&b.props.trigger.indexOf("mouseenter")>=0&&J().addEventListener("mousemove",m)}),b;function E(){var M=b.props.touch;return Array.isArray(M)?M:[M,0]}function I(){return E()[0]==="hold"}function U(){var M;return!!((M=b.props.render)!=null&&M.$$tippy)}function Y(){return y||t}function J(){var M=Y().parentNode;return M?IM(M):document}function se(){return Ld(w)}function q(M){return b.state.isMounted&&!b.state.isVisible||Cn.isTouch||u&&u.type==="focus"?0:cu(b.props.delay,M?0:1,mn.delay)}function fe(M){M===void 0&&(M=!1),w.style.pointerEvents=b.props.interactive&&!M?"":"none",w.style.zIndex=""+b.props.zIndex}function A(M,_,H){if(H===void 0&&(H=!0),N.forEach(function(ne){ne[M]&&ne[M].apply(ne,_)}),H){var oe;(oe=b.props)[M].apply(oe,_)}}function V(){var M=b.props.aria;if(M.content){var _="aria-"+M.content,H=w.id,oe=Ii(b.props.triggerTarget||t);oe.forEach(function(ne){var Ie=ne.getAttribute(_);if(b.state.isVisible)ne.setAttribute(_,Ie?Ie+" "+H:H);else{var we=Ie&&Ie.replace(H,"").trim();we?ne.setAttribute(_,we):ne.removeAttribute(_)}})}}function K(){if(!(D||!b.props.aria.expanded)){var M=Ii(b.props.triggerTarget||t);M.forEach(function(_){b.props.interactive?_.setAttribute("aria-expanded",b.state.isVisible&&_===Y()?"true":"false"):_.removeAttribute("aria-expanded")})}}function ae(){J().removeEventListener("mousemove",m),El=El.filter(function(M){return M!==m})}function ie(M){if(!(Cn.isTouch&&(a||M.type==="mousedown"))){var _=M.composedPath&&M.composedPath()[0]||M.target;if(!(b.props.interactive&&a0(w,_))){if(Ii(b.props.triggerTarget||t).some(function(H){return a0(H,_)})){if(Cn.isTouch||b.state.isVisible&&b.props.trigger.indexOf("click")>=0)return}else A("onClickOutside",[b,M]);b.props.hideOnClick===!0&&(b.clearDelayTimeouts(),b.hide(),l=!0,setTimeout(function(){l=!1}),b.state.isMounted||Pe())}}}function ce(){a=!0}function be(){a=!1}function We(){var M=J();M.addEventListener("mousedown",ie,!0),M.addEventListener("touchend",ie,Yr),M.addEventListener("touchstart",be,Yr),M.addEventListener("touchmove",ce,Yr)}function Pe(){var M=J();M.removeEventListener("mousedown",ie,!0),M.removeEventListener("touchend",ie,Yr),M.removeEventListener("touchstart",be,Yr),M.removeEventListener("touchmove",ce,Yr)}function $t(M,_){Bt(M,function(){!b.state.isVisible&&w.parentNode&&w.parentNode.contains(w)&&_()})}function sn(M,_){Bt(M,_)}function Bt(M,_){var H=se().box;function oe(ne){ne.target===H&&(du(H,"remove",oe),_())}if(M===0)return _();du(H,"remove",d),du(H,"add",oe),d=oe}function Mt(M,_,H){H===void 0&&(H=!1);var oe=Ii(b.props.triggerTarget||t);oe.forEach(function(ne){ne.addEventListener(M,_,H),h.push({node:ne,eventType:M,handler:_,options:H})})}function Gn(){I()&&(Mt("touchstart",on,{passive:!0}),Mt("touchend",Qn,{passive:!0})),EM(b.props.trigger).forEach(function(M){if(M!=="manual")switch(Mt(M,on),M){case"mouseenter":Mt("mouseleave",Qn);break;case"focus":Mt(FM?"focusout":"blur",Xn);break;case"focusin":Mt("focusout",Xn);break}})}function gt(){h.forEach(function(M){var _=M.node,H=M.eventType,oe=M.handler,ne=M.options;_.removeEventListener(H,oe,ne)}),h=[]}function on(M){var _,H=!1;if(!(!b.state.isEnabled||Zn(M)||l)){var oe=((_=u)==null?void 0:_.type)==="focus";u=M,y=M.currentTarget,K(),!b.state.isVisible&&jM(M)&&El.forEach(function(ne){return ne(M)}),M.type==="click"&&(b.props.trigger.indexOf("mouseenter")<0||o)&&b.props.hideOnClick!==!1&&b.state.isVisible?H=!0:lt(M),M.type==="click"&&(o=!H),H&&!oe&&Xe(M)}}function Mi(M){var _=M.target,H=Y().contains(_)||w.contains(_);if(!(M.type==="mousemove"&&H)){var oe=yt().concat(w).map(function(ne){var Ie,we=ne._tippy,Vt=(Ie=we.popperInstance)==null?void 0:Ie.state;return Vt?{popperRect:ne.getBoundingClientRect(),popperState:Vt,props:n}:null}).filter(Boolean);RM(oe,M)&&(ae(),Xe(M))}}function Qn(M){var _=Zn(M)||b.props.trigger.indexOf("click")>=0&&o;if(!_){if(b.props.interactive){b.hideWithInteractivity(M);return}Xe(M)}}function Xn(M){b.props.trigger.indexOf("focusin")<0&&M.target!==Y()||b.props.interactive&&M.relatedTarget&&w.contains(M.relatedTarget)||Xe(M)}function Zn(M){return Cn.isTouch?I()!==M.type.indexOf("touch")>=0:!1}function Ei(){er();var M=b.props,_=M.popperOptions,H=M.placement,oe=M.offset,ne=M.getReferenceClientRect,Ie=M.moveTransition,we=U()?Ld(w).arrow:null,Vt=ne?{getBoundingClientRect:ne,contextElement:ne.contextElement||Y()}:t,Hr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(Ur){var cn=Ur.state;if(U()){var mc=se(),qr=mc.box;["placement","reference-hidden","escaped"].forEach(function(tr){tr==="placement"?qr.setAttribute("data-placement",cn.placement):cn.attributes.popper["data-popper-"+tr]?qr.setAttribute("data-"+tr,""):qr.removeAttribute("data-"+tr)}),cn.attributes.popper={}}}},an=[{name:"offset",options:{offset:oe}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!Ie}},Hr];U()&&we&&an.push({name:"arrow",options:{element:we,padding:3}}),an.push.apply(an,(_==null?void 0:_.modifiers)||[]),b.popperInstance=zM(Vt,w,Object.assign({},_,{placement:H,onFirstUpdate:p,modifiers:an}))}function er(){b.popperInstance&&(b.popperInstance.destroy(),b.popperInstance=null)}function Et(){var M=b.props.appendTo,_,H=Y();b.props.interactive&&M===Kv||M==="parent"?_=H.parentNode:_=Jv(M,[H]),_.contains(w)||_.appendChild(w),b.state.isMounted=!0,Ei()}function yt(){return ja(w.querySelectorAll("[data-tippy-root]"))}function lt(M){b.clearDelayTimeouts(),M&&A("onTrigger",[b,M]),We();var _=q(!0),H=E(),oe=H[0],ne=H[1];Cn.isTouch&&oe==="hold"&&ne&&(_=ne),_?r=setTimeout(function(){b.show()},_):b.show()}function Xe(M){if(b.clearDelayTimeouts(),A("onUntrigger",[b,M]),!b.state.isVisible){Pe();return}if(!(b.props.trigger.indexOf("mouseenter")>=0&&b.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(M.type)>=0&&o)){var _=q(!1);_?i=setTimeout(function(){b.state.isVisible&&b.hide()},_):s=requestAnimationFrame(function(){b.hide()})}}function Ft(){b.state.isEnabled=!0}function Br(){b.hide(),b.state.isEnabled=!1}function ln(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Fr(M){if(!b.state.isDestroyed){A("onBeforeUpdate",[b,M]),gt();var _=b.props,H=u0(t,Object.assign({},_,o0(M),{ignoreAttributes:!0}));b.props=H,Gn(),_.interactiveDebounce!==H.interactiveDebounce&&(ae(),m=i0(Mi,H.interactiveDebounce)),_.triggerTarget&&!H.triggerTarget?Ii(_.triggerTarget).forEach(function(oe){oe.removeAttribute("aria-expanded")}):H.triggerTarget&&t.removeAttribute("aria-expanded"),K(),fe(),C&&C(_,H),b.popperInstance&&(Ei(),yt().forEach(function(oe){requestAnimationFrame(oe._tippy.popperInstance.forceUpdate)})),A("onAfterUpdate",[b,M])}}function kn(M){b.setProps({content:M})}function Zo(){var M=b.state.isVisible,_=b.state.isDestroyed,H=!b.state.isEnabled,oe=Cn.isTouch&&!b.props.touch,ne=cu(b.props.duration,0,mn.duration);if(!(M||_||H||oe)&&!Y().hasAttribute("disabled")&&(A("onShow",[b],!1),b.props.onShow(b)!==!1)){if(b.state.isVisible=!0,U()&&(w.style.visibility="visible"),fe(),We(),b.state.isMounted||(w.style.transition="none"),U()){var Ie=se(),we=Ie.box,Vt=Ie.content;uu([we,Vt],0)}p=function(){var an;if(!(!b.state.isVisible||c)){if(c=!0,w.offsetHeight,w.style.transition=b.props.moveTransition,U()&&b.props.animation){var Wr=se(),Ur=Wr.box,cn=Wr.content;uu([Ur,cn],ne),l0([Ur,cn],"visible")}V(),K(),s0(fu,b),(an=b.popperInstance)==null||an.forceUpdate(),A("onMount",[b]),b.props.animation&&U()&&sn(ne,function(){b.state.isShown=!0,A("onShown",[b])})}},Et()}}function Vr(){var M=!b.state.isVisible,_=b.state.isDestroyed,H=!b.state.isEnabled,oe=cu(b.props.duration,1,mn.duration);if(!(M||_||H)&&(A("onHide",[b],!1),b.props.onHide(b)!==!1)){if(b.state.isVisible=!1,b.state.isShown=!1,c=!1,o=!1,U()&&(w.style.visibility="hidden"),ae(),Pe(),fe(!0),U()){var ne=se(),Ie=ne.box,we=ne.content;b.props.animation&&(uu([Ie,we],oe),l0([Ie,we],"hidden"))}V(),K(),b.props.animation?U()&&$t(oe,b.unmount):b.unmount()}}function el(M){J().addEventListener("mousemove",m),s0(El,m),m(M)}function Ns(){b.state.isVisible&&b.hide(),b.state.isMounted&&(er(),yt().forEach(function(M){M._tippy.unmount()}),w.parentNode&&w.parentNode.removeChild(w),fu=fu.filter(function(M){return M!==b}),b.state.isMounted=!1,A("onHidden",[b]))}function tl(){b.state.isDestroyed||(b.clearDelayTimeouts(),b.unmount(),gt(),delete t._tippy,b.state.isDestroyed=!0,A("onDestroy",[b]))}}function Xo(t,e){e===void 0&&(e={});var n=mn.plugins.concat(e.plugins||[]);$M();var r=Object.assign({},e,{plugins:n}),i=PM(t),s=i.reduce(function(o,l){var a=l&&YM(l,r);return a&&o.push(a),o},[]);return hc(t)?s[0]:s}Xo.defaultProps=mn;Xo.setDefaultProps=UM;Xo.currentInput=Cn;Object.assign({},Rv,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Xo.setDefaultProps({render:Qv});class GM{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:l,state:a,from:c,to:u})=>{const{doc:d,selection:p}=a,{empty:h}=p,m=!d.textBetween(c,u).length&&ip(a.selection),y=this.element.contains(document.activeElement);return!(!(l.hasFocus()||y)||h||m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var a;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(l.relatedTarget))||(l==null?void 0:l.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.handleDebouncedUpdate=(l,a)=>{const c=!(a!=null&&a.selection.eq(l.state.selection)),u=!(a!=null&&a.doc.eq(l.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(l,c,u,a)},this.updateDelay))},this.updateHandler=(l,a,c,u)=>{var d,p,h;const{state:m,composing:y}=l,{selection:x}=m;if(y||!a&&!c)return;this.createTooltip();const{ranges:v}=x,k=Math.min(...v.map(w=>w.$from.pos)),b=Math.max(...v.map(w=>w.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,element:this.element,view:l,state:m,oldState:u,from:k,to:b}))){this.hide();return}(p=this.tippy)===null||p===void 0||p.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(jv(m.selection)){let w=l.nodeDOM(k);if(w){const C=w.dataset.nodeViewWrapper?w:w.querySelector("[data-node-view-wrapper]");if(C&&(w=C.firstChild),w)return w.getBoundingClientRect()}}return ON(l,k,b)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!n)&&(this.tippy=Xo(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const s=!(n!=null&&n.selection.eq(e.state.selection)),o=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,s,o,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Xv=t=>new mt({key:typeof t.pluginKey=="string"?new vn(t.pluginKey):t.pluginKey,view:e=>new GM({view:e,...t})});Ae.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Xv({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function QM(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Zv={exports:{}},pu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var p0;function XM(){if(p0)return pu;p0=1;var t=G;function e(d,p){return d===p&&(d!==0||1/d===1/p)||d!==d&&p!==p}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(d,p){var h=p(),m=r({inst:{value:h,getSnapshot:p}}),y=m[0].inst,x=m[1];return s(function(){y.value=h,y.getSnapshot=p,a(y)&&x({inst:y})},[d,h,p]),i(function(){return a(y)&&x({inst:y}),d(function(){a(y)&&x({inst:y})})},[d]),o(h),h}function a(d){var p=d.getSnapshot;d=d.value;try{var h=p();return!n(d,h)}catch{return!0}}function c(d,p){return p()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return pu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,pu}Zv.exports=XM();var gp=Zv.exports;const ZM=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},eE=({contentComponent:t})=>{const e=gp.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return G.createElement(G.Fragment,null,Object.values(e))};function tE(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:fw.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class nE extends G.Component{constructor(e){var n;super(e),this.editorContentRef=G.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=tE(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return G.createElement(G.Fragment,null,G.createElement("div",{ref:ZM(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&G.createElement(eE,{contentComponent:e.contentComponent}))}}const rE=T.forwardRef((t,e)=>{const n=G.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return G.createElement(nE,{key:n,innerRef:e,...t})}),iE=G.memo(rE);var sE=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},oE=QM(sE),e1={exports:{}},hu={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var h0;function lE(){if(h0)return hu;h0=1;var t=G,e=gp;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return hu.useSyncExternalStoreWithSelector=function(c,u,d,p,h){var m=s(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=l(function(){function g(w){if(!v){if(v=!0,k=w,w=p(w),h!==void 0&&y.hasValue){var C=y.value;if(h(C,w))return b=C}return b=w}if(C=b,r(k,w))return C;var N=p(w);return h!==void 0&&h(C,N)?C:(k=w,b=N)}var v=!1,k,b,S=d===void 0?null:d;return[function(){return g(u())},S===null?void 0:function(){return g(S())}]},[u,d,p,h]);var x=i(c,m[0],m[1]);return o(function(){y.hasValue=!0,y.value=x},[x]),a(x),x},hu}e1.exports=lE();var aE=e1.exports;const cE=typeof window<"u"?T.useLayoutEffect:T.useEffect;class uE{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function dE(t){var e;const[n]=T.useState(()=>new uE(t.editor)),r=aE.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:oE);return cE(()=>n.watch(t.editor),[t.editor,n]),T.useDebugValue(r),r}const fE=!1,_d=typeof window>"u",pE=_d||!!(typeof window<"u"&&window.next);class yp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?_d||pE?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new l2(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?yp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function hE(t={},e=[]){const n=T.useRef(t);n.current=t;const[r]=T.useState(()=>new yp(n)),i=gp.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return T.useDebugValue(i),T.useEffect(r.onRender(e)),dE({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const t1=T.createContext({editor:null});t1.Consumer;const mE=()=>T.useContext(t1),gE=t=>{const[e,n]=T.useState(null),{editor:r}=mE();return T.useEffect(()=>{var i;if(!e||!((i=t.editor)===null||i===void 0)&&i.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:s="bubbleMenu",editor:o,tippyOptions:l={},updateDelay:a,shouldShow:c=null}=t,u=o||r;if(!u){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const d=Xv({updateDelay:a,editor:u,element:e,pluginKey:s,shouldShow:c,tippyOptions:l});return u.registerPlugin(d),()=>{u.unregisterPlugin(s)}},[t.editor,r,e]),G.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},yE=T.createContext({onDragStart:void 0}),xE=()=>T.useContext(yE);G.forwardRef((t,e)=>{const{onDragStart:n}=xE(),r=t.as||"div";return G.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const vE=/^\s*>\s$/,kE=st.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[$o({find:vE,type:this.type})]}}),bE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,wE=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,SE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,CE=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,zE=It.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ki({find:bE,type:this.type}),ki({find:SE,type:this.type})]},addPasteRules(){return[bi({find:wE,type:this.type}),bi({find:CE,type:this.type})]}}),NE="listItem",m0="textStyle",g0=/^\s*([-+*])\s$/,ME=st.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(NE,this.editor.getAttributes(m0)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=$o({find:g0,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$o({find:g0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(m0),editor:this.editor})),[t]}}),EE=/(^|[^`])`([^`]+)`(?!`)/,TE=/(^|[^`])`([^`]+)`(?!`)/g,OE=It.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ki({find:EE,type:this.type})]},addPasteRules(){return[bi({find:TE,type:this.type})]}}),DE=/^```([a-z]+)?[\s\n]$/,jE=/^~~~([a-z]+)?[\s\n]$/,AE=st.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ne(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(Z.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[Ad({find:DE,type:this.type,getAttributes:t=>({language:t[1]})}),Ad({find:jE,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new mt({key:new vn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(Q.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),PE=st.create({name:"doc",topNode:!0,content:"block+"});function IE(t={}){return new mt({view(e){return new RE(e,t)}})}class RE{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,p=e.nodeAfter;if(d||p){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let m=h.getBoundingClientRect(),y=d?m.bottom:m.top;d&&p&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*l;r={left:m.left,right:m.right,top:y-x,bottom:y+x}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),p=this.width/2*o;r={left:d.left-p,right:d.left+p,top:d.top,bottom:d.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=a.getBoundingClientRect(),p=d.width/a.offsetWidth,h=d.height/a.offsetHeight;c=d.left-a.scrollLeft*p,u=d.top-a.scrollTop*h}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=bx(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const LE=Ae.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[IE(this.options)]}});class Ce extends Z{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return Ce.valid(r)?new Ce(r):Z.near(r)}content(){return L.empty}eq(e){return e instanceof Ce&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Ce(e.resolve(n.pos))}getBookmark(){return new xp(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!_E(e)||!$E(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&Ce.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(Ce.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!W.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(Ce.valid(l))return l}return null}}}Ce.prototype.visible=!1;Ce.findFrom=Ce.findGapCursorFrom;Z.jsonID("gapcursor",Ce);class xp{constructor(e){this.pos=e}map(e){return new xp(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return Ce.valid(n)?new Ce(n):Z.near(n)}}function n1(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function _E(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||n1(i.type))return!0;if(i.inlineContent)return!1}}return!0}function $E(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||n1(i.type))return!0;if(i.inlineContent)return!1}}return!0}function BE(){return new mt({props:{decorations:WE,createSelectionBetween(t,e,n){return e.pos==n.pos&&Ce.valid(n)?new Ce(n):null},handleClick:VE,handleKeyDown:FE,handleDOMEvents:{beforeinput:HE}}})}const FE=cv({ArrowLeft:Tl("horiz",-1),ArrowRight:Tl("horiz",1),ArrowUp:Tl("vert",-1),ArrowDown:Tl("vert",1)});function Tl(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof Q){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=Ce.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new Ce(c))),!0):!1}}function VE(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!Ce.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&W.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new Ce(r))),!0)}function HE(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof Ce))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=O.empty;for(let o=r.length-1;o>=0;o--)i=O.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new L(i,0,0));return s.setSelection(Q.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function WE(t){if(!(t.selection instanceof Ce))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",De.create(t.doc,[Yt.widget(t.selection.head,e,{key:"gapcursor"})])}const UE=Ae.create({name:"gapCursor",addProseMirrorPlugins(){return[BE()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=te(B(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),qE=st.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ne(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const d=a.filter(p=>l.includes(p.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),KE=st.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ne(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Ad({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Aa=200,Ve=function(){};Ve.prototype.append=function(e){return e.length?(e=Ve.from(e),!this.length&&e||e.length<Aa&&this.leafAppend(e)||this.length<Aa&&e.leafPrepend(this)||this.appendInner(e)):this};Ve.prototype.prepend=function(e){return e.length?Ve.from(e).append(this):this};Ve.prototype.appendInner=function(e){return new JE(this,e)};Ve.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ve.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ve.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ve.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ve.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Ve.from=function(e){return e instanceof Ve?e:e&&e.length?new r1(e):Ve.empty};var r1=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Aa)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Aa)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ve);Ve.empty=new r1([]);var JE=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ve);const YE=500;class hn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((d,p)=>{if(!d.step){i||(i=this.remapping(r,p+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new Sn(d.map));let h=d.step.map(i.slice(s)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new Sn(m,void 0,void 0,c.length+u.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,a=new hn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),p=new Sn(e.mapping.maps[u],d,n),h;(h=a&&a.merge(p))&&(p=h,u?s.pop():l=l.slice(0,l.length-1)),s.push(p),n&&(o++,n=void 0),i||(a=p)}let c=o-r.depth;return c>QE&&(l=GE(l,c),o-=c),new hn(l.append(s),o)}remapping(e,n){let r=new jo;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new hn(this.items.append(e.map(n=>new Sn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(p=>{p.selection&&l--},i);let a=n;this.items.forEach(p=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let m=s.maps[h];if(p.step){let y=e.steps[h].invert(e.docs[h]),x=p.selection&&p.selection.map(s.slice(a+1,h));x&&l++,r.push(new Sn(m,y,x))}else r.push(new Sn(m))},i);let c=[];for(let p=n;p<o;p++)c.push(new Sn(s.maps[p]));let u=this.items.slice(0,i).append(c).append(r),d=new hn(u,l);return d.emptyItemCount()>YE&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new Sn(c.invert(),a,u),p,h=i.length-1;(p=i.length&&i[h].merge(d))?i[h]=p:i.push(d)}}else o.map&&r--},this.items.length,0),new hn(Ve.from(i.reverse()),s)}}hn.empty=new hn(Ve.empty,0);function GE(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class Sn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Sn(n.getMap().invert(),n,this.selection)}}}class cr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const QE=20;function XE(t,e,n,r){let i=n.getMeta(ui),s;if(i)return i.historyState;n.getMeta(tT)&&(t=new cr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(ui))return o.getMeta(ui).redo?new cr(t.done.addTransform(n,void 0,r,Jl(e)),t.undone,y0(n.mapping.maps),t.prevTime,t.prevComposition):new cr(t.done,t.undone.addTransform(n,void 0,r,Jl(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!ZE(n,t.prevRanges)),c=o?mu(t.prevRanges,n.mapping):y0(n.mapping.maps);return new cr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,Jl(e)),hn.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new cr(t.done.rebased(n,s),t.undone.rebased(n,s),mu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new cr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),mu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function ZE(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function y0(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function mu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function eT(t,e,n){let r=Jl(e),i=ui.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new cr(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(ui,{redo:n,historyState:a})}let gu=!1,x0=null;function Jl(t){let e=t.plugins;if(x0!=e){gu=!1,x0=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){gu=!0;break}}return gu}const ui=new vn("history"),tT=new vn("closeHistory");function nT(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new mt({key:ui,state:{init(){return new cr(hn.empty,hn.empty,null,0,-1)},apply(e,n,r){return XE(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?s1:r=="historyRedo"?o1:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function i1(t,e){return(n,r)=>{let i=ui.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=eT(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const s1=i1(!1,!0),o1=i1(!0,!0),rT=Ae.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>s1(t,e),redo:()=>({state:t,dispatch:e})=>o1(t,e)}},addProseMirrorPlugins(){return[nT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),iT=st.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ne(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!a2(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):jv(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Q.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(W.create(o.doc,c.pos)):o.setSelection(Q.create(o.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(u,d),o.setSelection(Q.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[Av({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),sT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,oT=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,lT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,aT=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,cT=It.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ki({find:sT,type:this.type}),ki({find:lT,type:this.type})]},addPasteRules(){return[bi({find:oT,type:this.type}),bi({find:aT,type:this.type})]}}),uT=st.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ne(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),dT="listItem",v0="textStyle",k0=/^(\d+)\.\s$/,fT=st.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ne(this.options.HTMLAttributes,n),0]:["ol",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(dT,this.editor.getAttributes(v0)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=$o({find:k0,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$o({find:k0,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(v0)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),pT=st.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),hT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,mT=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,gT=It.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ki({find:hT,type:this.type})]},addPasteRules(){return[bi({find:mT,type:this.type})]}}),yT=st.create({name:"text",group:"inline"}),xT=Ae.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(zE.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(kE.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(ME.configure(this.options.bulletList)),this.options.code!==!1&&t.push(OE.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(AE.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(PE.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(LE.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(UE.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(qE.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(KE.configure(this.options.heading)),this.options.history!==!1&&t.push(rT.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(iT.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(cT.configure(this.options.italic)),this.options.listItem!==!1&&t.push(uT.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(fT.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(pT.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(gT.configure(this.options.strike)),this.options.text!==!1&&t.push(yT.configure(this.options.text)),t}}),l1="inscript_demo_posts",vp="inscript_demo_drafts",Ol=()=>{const t=localStorage.getItem(l1);return t?JSON.parse(t):[{filename:"welcome-to-inscript.md",title:"Welcome to Inscript (Demo)",created:new Date().toISOString(),modified:new Date().toISOString(),tags:["demo","welcome"],categories:["Guide"],isUnpublished:!1,content:"<h1>Welcome to Inscript!</h1><p>This is a <strong>live demo</strong> running entirely in your browser.</p><p>Feel free to edit this post or create new ones.</p><blockquote><p>Note: Changes are saved to your browser's LocalStorage.</p></blockquote>"}]},b0=t=>{localStorage.setItem(l1,JSON.stringify(t))},Pa=()=>{const t=localStorage.getItem(vp);return t?JSON.parse(t):{"welcome-to-inscript.md":{history:[{html:"<h1>My First Post</h1><p>Just getting started...</p>",title:"My First Post",tags:[],categories:[],timestamp:new Date(Date.now()-4*24*60*60*1e3).toISOString()},{html:"<h1>Getting Started with Inscript</h1><p>This is my first blog post using Inscript.</p><p>It's pretty cool!</p>",title:"Getting Started with Inscript",tags:["first-post"],categories:["Personal"],timestamp:new Date(Date.now()-3*24*60*60*1e3).toISOString()},{html:"<h1>Welcome to Inscript</h1><p>This is a <strong>live demo</strong> running entirely in your browser.</p><p>Feel free to explore the editor!</p>",title:"Welcome to Inscript",tags:["demo","tutorial"],categories:["Guide"],timestamp:new Date(Date.now()-2*24*60*60*1e3).toISOString()},{html:"<h1>Welcome to Inscript!</h1><p>This is a <strong>live demo</strong> running entirely in your browser.</p><p>Feel free to edit this post or create new ones.</p><blockquote><p>Tip: All changes are saved to your browser's LocalStorage.</p></blockquote>",title:"Welcome to Inscript!",tags:["demo","welcome","tutorial"],categories:["Guide","Documentation"],timestamp:new Date(Date.now()-1*24*60*60*1e3).toISOString()},{html:"<h1>Welcome to Inscript!</h1><p>This is a <strong>live demo</strong> running entirely in your browser.</p><p>Feel free to edit this post or create new ones.</p><blockquote><p>Note: Changes are saved to your browser's LocalStorage.</p></blockquote>",title:"Welcome to Inscript (Demo)",tags:["demo","welcome"],categories:["Guide"],timestamp:new Date(Date.now()-2*60*60*1e3).toISOString()}],currentIndex:4}}},vT=(t,e)=>{const n=Pa();n[t]=e,localStorage.setItem(vp,JSON.stringify(n))},yu=t=>{const e=Pa();delete e[t],localStorage.setItem(vp,JSON.stringify(e))},kT={get:async(t,e)=>{if(await new Promise(r=>setTimeout(r,400)),t==="/api/posts")return{data:Ol().map(({content:r,...i})=>i)};const n=t.split("?")[0];if(n.startsWith("/api/posts/")){const r=n.split("/").pop(),i=Ol().find(s=>s.filename===r);if(i){const o=Pa()[r];return{data:{filename:r,frontmatter:{title:i.title,tags:i.tags,categories:i.categories,created:i.created,modified:i.modified},html:i.content,title:i.title,savedHtml:i.content,savedTitle:i.title,hasDraft:!!o,history:(o==null?void 0:o.history)||[],currentIndex:(o==null?void 0:o.currentIndex)||0,isUnpublished:!1}}}return Pa(),{status:404}}return t==="/api/images"?{data:[{url:"https://images.unsplash.com/photo-1707343843437-caacff5cfa74",name:"demo-nature.jpg"},{url:"https://images.unsplash.com/photo-1707345512638-997d31a10cee",name:"demo-tech.jpg"}]}:t==="/api/youtube/search"?{data:{items:[]}}:{data:{}}},post:async(t,e,n)=>{if(await new Promise(r=>setTimeout(r,600)),t==="/api/posts"){const{filename:r,frontmatter:i,html:s}=e,o=Ol(),l=o.findIndex(c=>c.filename===r),a={filename:r,title:i.title||"Untitled",created:i.created||new Date().toISOString(),modified:new Date().toISOString(),tags:i.tags||[],categories:i.categories||[],content:s,isUnpublished:!1};return l>=0?o[l]=a:o.push(a),b0(o),yu(r),{data:{success:!0,frontmatter:i}}}if(t.startsWith("/api/drafts/")){const r=t.split("/").pop(),{title:i,history:s,currentIndex:o}=e;return vT(r,{history:s,currentIndex:o,title:i}),{data:{success:!0}}}return t==="/api/upload"?{data:{url:"https://source.unsplash.com/random/800x600"}}:{data:{success:!0}}},delete:async t=>{if(await new Promise(e=>setTimeout(e,300)),t.startsWith("/api/drafts/")){const e=t.split("/").pop();return yu(e),{data:{success:!0}}}if(t.startsWith("/api/posts/")){const e=t.split("/").pop(),n=Ol().filter(r=>r.filename!==e);return b0(n),yu(e),{data:{success:!0}}}return{data:{success:!0}}}},xt=kT;class a1{diff(e,n,r={}){let i;typeof r=="function"?(i=r,r={}):"callback"in r&&(i=r.callback);const s=this.castInput(e,r),o=this.castInput(n,r),l=this.removeEmpty(this.tokenize(s,r)),a=this.removeEmpty(this.tokenize(o,r));return this.diffWithOptionsObj(l,a,r,i)}diffWithOptionsObj(e,n,r,i){var s;const o=v=>{if(v=this.postProcess(v,r),i){setTimeout(function(){i(v)},0);return}else return v},l=n.length,a=e.length;let c=1,u=l+a;r.maxEditLength!=null&&(u=Math.min(u,r.maxEditLength));const d=(s=r.timeout)!==null&&s!==void 0?s:1/0,p=Date.now()+d,h=[{oldPos:-1,lastComponent:void 0}];let m=this.extractCommon(h[0],n,e,0,r);if(h[0].oldPos+1>=a&&m+1>=l)return o(this.buildValues(h[0].lastComponent,n,e));let y=-1/0,x=1/0;const g=()=>{for(let v=Math.max(y,-c);v<=Math.min(x,c);v+=2){let k;const b=h[v-1],S=h[v+1];b&&(h[v-1]=void 0);let w=!1;if(S){const N=S.oldPos-v;w=S&&0<=N&&N<l}const C=b&&b.oldPos+1<a;if(!w&&!C){h[v]=void 0;continue}if(!C||w&&b.oldPos<S.oldPos?k=this.addToPath(S,!0,!1,0,r):k=this.addToPath(b,!1,!0,1,r),m=this.extractCommon(k,n,e,v,r),k.oldPos+1>=a&&m+1>=l)return o(this.buildValues(k.lastComponent,n,e))||!0;h[v]=k,k.oldPos+1>=a&&(x=Math.min(x,v-1)),m+1>=l&&(y=Math.max(y,v+1))}c++};if(i)(function v(){setTimeout(function(){if(c>u||Date.now()>p)return i(void 0);g()||v()},0)})();else for(;c<=u&&Date.now()<=p;){const v=g();if(v)return v}}addToPath(e,n,r,i,s){const o=e.lastComponent;return o&&!s.oneChangePerToken&&o.added===n&&o.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}}extractCommon(e,n,r,i,s){const o=n.length,l=r.length;let a=e.oldPos,c=a-i,u=0;for(;c+1<o&&a+1<l&&this.equals(r[a+1],n[c+1],s);)c++,a++,u++,s.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!s.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,c}equals(e,n,r){return r.comparator?r.comparator(e,n):e===n||!!r.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,r){const i=[];let s;for(;e;)i.push(e),s=e.previousComponent,delete e.previousComponent,e=s;i.reverse();const o=i.length;let l=0,a=0,c=0;for(;l<o;l++){const u=i[l];if(u.removed)u.value=this.join(r.slice(c,c+u.count)),c+=u.count;else{if(!u.added&&this.useLongestToken){let d=n.slice(a,a+u.count);d=d.map(function(p,h){const m=r[c+h];return m.length>p.length?m:p}),u.value=this.join(d)}else u.value=this.join(n.slice(a,a+u.count));a+=u.count,u.added||(c+=u.count)}}return i}}function w0(t,e){let n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}function S0(t,e){let n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}function $d(t,e,n){if(t.slice(0,e.length)!=e)throw Error(`string ${JSON.stringify(t)} doesn't start with prefix ${JSON.stringify(e)}; this is a bug`);return n+t.slice(e.length)}function Bd(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error(`string ${JSON.stringify(t)} doesn't end with suffix ${JSON.stringify(e)}; this is a bug`);return t.slice(0,-e.length)+n}function Bs(t,e){return $d(t,e,"")}function Dl(t,e){return Bd(t,e,"")}function C0(t,e){return e.slice(0,bT(t,e))}function bT(t,e){let n=0;t.length>e.length&&(n=t.length-e.length);let r=e.length;t.length<e.length&&(r=t.length);const i=Array(r);let s=0;i[0]=0;for(let o=1;o<r;o++){for(e[o]==e[s]?i[o]=i[s]:i[o]=s;s>0&&e[o]!=e[s];)s=i[s];e[o]==e[s]&&s++}s=0;for(let o=n;o<t.length;o++){for(;s>0&&t[o]!=e[s];)s=i[s];t[o]==e[s]&&s++}return s}function Fs(t){let e;for(e=t.length-1;e>=0&&t[e].match(/\s/);e--);return t.substring(e+1)}function ir(t){const e=t.match(/^\s*/);return e?e[0]:""}const z0="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",wT=new RegExp(`[${z0}]+|\\s+|[^${z0}]`,"ug");class ST extends a1{equals(e,n,r){return r.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e.trim()===n.trim()}tokenize(e,n={}){let r;if(n.intlSegmenter){const o=n.intlSegmenter;if(o.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(o.segment(e),l=>l.segment)}else r=e.match(wT)||[];const i=[];let s=null;return r.forEach(o=>{/\s/.test(o)?s==null?i.push(o):i.push(i.pop()+o):s!=null&&/\s/.test(s)?i[i.length-1]==s?i.push(i.pop()+o):i.push(s+o):i.push(o),s=o}),i}join(e){return e.map((n,r)=>r==0?n:n.replace(/^\s+/,"")).join("")}postProcess(e,n){if(!e||n.oneChangePerToken)return e;let r=null,i=null,s=null;return e.forEach(o=>{o.added?i=o:o.removed?s=o:((i||s)&&M0(r,s,i,o),r=o,i=null,s=null)}),(i||s)&&M0(r,s,i,null),e}}const CT=new ST;function N0(t,e,n){return CT.diff(t,e,n)}function M0(t,e,n,r){if(e&&n){const i=ir(e.value),s=Fs(e.value),o=ir(n.value),l=Fs(n.value);if(t){const a=w0(i,o);t.value=Bd(t.value,o,a),e.value=Bs(e.value,a),n.value=Bs(n.value,a)}if(r){const a=S0(s,l);r.value=$d(r.value,l,a),e.value=Dl(e.value,a),n.value=Dl(n.value,a)}}else if(n){if(t){const i=ir(n.value);n.value=n.value.substring(i.length)}if(r){const i=ir(r.value);r.value=r.value.substring(i.length)}}else if(t&&r){const i=ir(r.value),s=ir(e.value),o=Fs(e.value),l=w0(i,s);e.value=Bs(e.value,l);const a=S0(Bs(i,l),o);e.value=Dl(e.value,a),r.value=$d(r.value,i,a),t.value=Bd(t.value,i,i.slice(0,i.length-a.length))}else if(r){const i=ir(r.value),s=Fs(e.value),o=C0(s,i);e.value=Dl(e.value,o)}else if(t){const i=Fs(t.value),s=ir(e.value),o=C0(i,s);e.value=Bs(e.value,o)}}class zT extends a1{constructor(){super(...arguments),this.tokenize=ET}equals(e,n,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!r.newlineIsToken||!n.includes(`
`))&&(n=n.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),n.endsWith(`
`)&&(n=n.slice(0,-1))),super.equals(e,n,r)}}const NT=new zT;function MT(t,e,n){return NT.diff(t,e,n)}function ET(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));const n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(let i=0;i<r.length;i++){const s=r[i];i%2&&!e.newlineIsToken?n[n.length-1]+=s:n.push(s)}return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TT=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),OT=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),E0=t=>{const e=OT(t);return e.charAt(0).toUpperCase()+e.slice(1)},c1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),DT=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var jT={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AT=T.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},a)=>T.createElement("svg",{ref:a,...jT,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:c1("lucide",i),...!s&&!DT(l)&&{"aria-hidden":"true"},...l},[...o.map(([c,u])=>T.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const F=(t,e)=>{const n=T.forwardRef(({className:r,...i},s)=>T.createElement(AT,{ref:s,iconNode:e,className:c1(`lucide-${TT(E0(t))}`,`lucide-${t}`,r),...i}));return n.displayName=E0(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PT=[["path",{d:"m15 16 2.536-7.328a1.02 1.02 1 0 1 1.928 0L22 16",key:"xik6mr"}],["path",{d:"M15.697 14h5.606",key:"1stdlc"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]],IT=F("a-large-small",PT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RT=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],LT=F("activity",RT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _T=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],$T=F("arrow-down-wide-narrow",_T);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BT=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],FT=F("arrow-up-narrow-wide",BT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VT=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],u1=F("bold",VT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HT=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],WT=F("calendar",HT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UT=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],d1=F("chevron-down",UT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qT=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],KT=F("chevron-left",qT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JT=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],f1=F("chevron-right",JT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YT=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],GT=F("chevrons-right",YT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],p1=F("circle-alert",QT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XT=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],is=F("circle-check-big",XT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZT=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Ia=F("circle-x",ZT);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],tO=F("clock",eO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],h1=F("cloud-upload",nO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rO=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],m1=F("code",rO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iO=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],sO=F("cpu",iO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oO=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],lO=F("database",oO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],cO=F("eye",aO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],T0=F("file-text",uO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],kp=F("funnel",dO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fO=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],g1=F("git-commit-horizontal",fO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],y1=F("globe",pO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],mO=F("heading-1",hO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],yO=F("heading-2",gO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],x1=F("highlighter",xO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],v1=F("image",vO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],bO=F("info",kO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],k1=F("italic",wO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],CO=F("list-ordered",SO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],NO=F("list",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MO=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],EO=F("monitor",MO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M20.985 12.486a9 9 0 1 1-9.473-9.472c.405-.022.617.46.402.803a6 6 0 0 0 8.268 8.268c.344-.215.825-.004.803.401",key:"kfwtm"}]],OO=F("moon",TO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],b1=F("palette",DO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],xu=F("panel-left-close",jO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],O0=F("panel-left-open",AO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],IO=F("panels-top-left",PO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],vu=F("pen-line",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],D0=F("pin",LO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],bs=F("plus",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],w1=F("quote",$O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],S1=F("redo",BO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],C1=F("save",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],HO=F("settings",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],UO=F("share-2",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qO=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],KO=F("strikethrough",qO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]],YO=F("subscript",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]],QO=F("sun",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]],ZO=F("superscript",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],tD=F("tag",eD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],rD=F("text-align-center",nD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],sD=F("text-align-end",iD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],lD=F("text-align-justify",oD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],cD=F("text-align-start",aD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],z1=F("trash-2",uD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],N1=F("triangle-alert",dD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],pD=F("underline",fD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],mD=F("undo",hD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Si=F("x",gD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],Fd=F("youtube",yD),xD=st.create({name:"youtube",group:"block",selectable:!0,draggable:!0,atom:!0,addAttributes(){return{"data-youtube-video":{default:null}}},parseHTML(){return[{tag:"div[data-youtube-video]"},{tag:'iframe[src*="youtube.com"]',getAttrs:t=>{const e=t.getAttribute("src");if(!e)return!1;const n=e.match(/(?:embed\/|v=)([^&?/\s]+)/);return n?{"data-youtube-video":n[1]}:!1}}]},renderHTML({HTMLAttributes:t}){const e=t["data-youtube-video"];return["div",{"data-youtube-video":e,class:"youtube-embed relative w-full aspect-video rounded-lg overflow-hidden my-4 bg-zinc-100 dark:bg-zinc-800"},["iframe",{src:`https://www.youtube.com/embed/${e}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:"true",class:"absolute top-0 left-0 w-full h-full"}]]},addCommands(){return{setYoutubeVideo:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),vD=Ae.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize.replace("px",""),renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}px`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),kD=({isOpen:t,onClose:e,tags:n,categories:r,postTags:i,postCategories:s,onTagsChange:o,onCategoriesChange:l})=>{if(!t)return null;const[a,c]=T.useState("tags"),[u,d]=T.useState(""),p=a==="tags"?n:r,h=a==="tags"?i:s,m=a==="tags"?o:l,y=p.filter(k=>k.toLowerCase().includes(u.toLowerCase())),x=k=>{h.includes(k)?m(h.filter(b=>b!==k)):m([...h,k])},g=()=>{if(!u)return;const k=p.find(b=>b.toLowerCase()===u.toLowerCase());k?h.includes(k)||x(k):x(u),d("")},v=k=>{k.key==="Enter"&&(k.preventDefault(),y.length>0?(x(y[0]),d("")):u&&g())};return f.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl shadow-2xl w-full max-w-lg flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-200",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[f.jsx("h2",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100",children:"Metadata"}),f.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:f.jsx(Si,{size:20})})]}),f.jsxs("div",{className:"flex p-2 gap-2 border-b border-zinc-200 dark:border-zinc-800",children:[f.jsxs("button",{onClick:()=>{c("tags"),d("")},className:`flex-1 py-2 text-sm font-bold rounded-lg transition-colors ${a==="tags"?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:["Tags (",i.length,")"]}),f.jsxs("button",{onClick:()=>{c("categories"),d("")},className:`flex-1 py-2 text-sm font-bold rounded-lg transition-colors ${a==="categories"?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:["Categories (",s.length,")"]})]}),f.jsx("div",{className:"p-4 border-b border-zinc-200 dark:border-zinc-800",children:f.jsx("input",{type:"text",value:u,onChange:k=>d(k.target.value),onKeyDown:v,placeholder:`Search or create ${a}...`,className:"w-full bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg px-4 py-3 text-zinc-900 dark:text-white placeholder-zinc-600 focus:outline-none focus:border-emerald-500 transition-colors",autoFocus:!0})}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u&&y.length===0&&f.jsxs("button",{onClick:g,className:"w-full py-3 bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 rounded-lg hover:bg-emerald-500/20 transition-all font-bold flex items-center justify-center gap-2 mb-4",children:[f.jsx(bs,{size:16}),'Create "',u,'"']}),f.jsx("div",{className:"mb-2 text-[10px] font-bold uppercase text-zinc-400 dark:text-zinc-500 tracking-wider",children:u?"Matching Results":"Available Items"}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.map(k=>f.jsx("button",{onClick:()=>x(k),className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${h.includes(k)?"bg-emerald-500 text-black border-emerald-500":"bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 border-zinc-300 dark:border-zinc-700 hover:border-zinc-500 hover:text-zinc-900 dark:hover:text-white"}`,children:k},k)),y.length===0&&!u&&f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500 text-sm italic",children:"No items found."})]})]}),f.jsxs("div",{className:"p-4 bg-white dark:bg-zinc-950/50 border-t border-zinc-200 dark:border-zinc-800 text-xs text-zinc-400 dark:text-zinc-500",children:["Selected: ",h.length>0?h.join(", "):"None"]})]})})},bD=({isOpen:t,onClose:e,images:n,onSelect:r,onUpload:i})=>{if(!t)return null;const[s,o]=T.useState(""),l=n.filter(a=>a.name.toLowerCase().includes(s.toLowerCase()));return f.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl shadow-2xl w-full max-w-4xl flex flex-col h-[80vh] animate-in zoom-in-95 duration-200",children:[f.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-200 dark:border-zinc-800",children:[f.jsx("h2",{className:"text-lg font-bold text-zinc-900 dark:text-zinc-100",children:"Media Library"}),f.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:f.jsx(Si,{size:20})})]}),f.jsxs("div",{className:"p-4 border-b border-zinc-200 dark:border-zinc-800 flex gap-4",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx("input",{type:"text",value:s,onChange:a=>o(a.target.value),placeholder:"Search images...",className:"w-full bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg pl-10 pr-4 py-2 text-zinc-900 dark:text-white placeholder-zinc-600 focus:outline-none focus:border-emerald-500 transition-colors",autoFocus:!0}),f.jsx("div",{className:"absolute left-3 top-2.5 text-zinc-400 dark:text-zinc-500",children:f.jsx(kp,{size:16})})]}),f.jsxs("label",{className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-zinc-900 dark:text-white font-bold rounded-lg cursor-pointer transition-colors flex items-center gap-2 shadow-lg shadow-emerald-900/20",children:[f.jsx(bs,{size:18}),f.jsx("span",{children:"Upload New"}),f.jsx("input",{type:"file",className:"hidden",onChange:i,accept:"image/*"})]})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-white dark:bg-zinc-950/30",children:[f.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:l.map(a=>f.jsxs("button",{onClick:()=>r(a.url),className:"group relative aspect-square bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-xl overflow-hidden hover:ring-2 hover:ring-emerald-500 transition-all hover:scale-[1.02]",children:[f.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity",children:f.jsx("p",{className:"text-xs text-zinc-900 dark:text-white truncate font-medium",children:a.name})})]},a.url))}),l.length===0&&f.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-400 dark:text-zinc-500 gap-2",children:[f.jsx(v1,{size:48,className:"opacity-20"}),f.jsx("p",{children:"No images found"})]})]})]})})},Ht={BUTTON:38,DIVIDER:12,CUSTOM:48,GAP:4},Ra=({onClick:t,active:e,disabled:n,children:r,title:i,className:s="",width:o=Ht.BUTTON})=>f.jsx("button",{type:"button",onClick:t,disabled:n,title:i,style:{width:`${o}px`,height:`${Ht.BUTTON}px`},className:`flex items-center justify-center rounded transition-colors shrink-0 ${e?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-inner":"text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white"} ${n?"opacity-20 cursor-not-allowed grayscale":""} ${s}`,children:r}),La=({icon:t,title:e,activeColor:n,onChange:r,onRemove:i,presets:s,variant:o="text"})=>{const[l,a]=T.useState(!1);return f.jsxs("div",{className:"relative",children:[f.jsx(Ra,{onClick:()=>a(!l),active:!!n,title:e,children:f.jsxs("div",{className:"relative flex items-center justify-center",children:[f.jsx(t,{size:16,style:{color:o==="text"?n:void 0}}),o==="highlight"&&n&&f.jsx("span",{className:"absolute -bottom-1 left-0 right-0 h-1 rounded-sm",style:{backgroundColor:n}})]})}),l&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>a(!1)}),f.jsxs("div",{className:"absolute top-full right-0 md:left-1/2 md:-translate-x-1/2 mt-2 p-3 bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg shadow-xl z-[80] min-w-[200px] animate-in slide-in-from-top-2 fade-in",children:[f.jsx("div",{className:"text-xs font-medium text-zinc-500 dark:text-zinc-400 mb-2 uppercase tracking-wider",children:"Presets"}),f.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-3",children:s.map(c=>f.jsx("button",{onClick:()=>{r(c),a(!1)},className:`w-6 h-6 rounded border ${n===c?"border-white ring-1 ring-white":"border-zinc-300 dark:border-zinc-700 hover:scale-110 active:scale-95"} transition-all`,style:{backgroundColor:c},title:c},c))}),f.jsx("div",{className:"h-px bg-zinc-100 dark:bg-zinc-800 my-2"}),f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsxs("label",{className:"flex items-center gap-2 text-xs text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white cursor-pointer px-1 py-1 rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:[f.jsx("div",{className:"w-5 h-5 rounded border border-zinc-600 bg-gradient-to-br from-red-500 via-green-500 to-blue-500 relative overflow-hidden flex items-center justify-center",children:f.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer",value:n||"#000000",onChange:c=>{r(c.target.value)}})}),f.jsx("span",{children:"Custom Color..."})]}),f.jsxs("button",{onClick:()=>{i(),a(!1)},className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 px-1 py-1 rounded hover:bg-red-400/10 transition-colors",children:[f.jsx(Ia,{size:14}),f.jsx("span",{children:o==="text"?"Reset to Default":"No Highlight"})]})]})]})]})]})},M1=({editor:t})=>{var s;const[e,n]=T.useState(!1),r=[12,14,16,18,20,24,30,36,48,60,72],i=(s=t==null?void 0:t.getAttributes("textStyle"))==null?void 0:s.fontSize;return f.jsxs("div",{className:"relative",children:[f.jsx(Ra,{onClick:()=>n(!e),active:!!i,title:"Font Size",width:Ht.CUSTOM,children:f.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[f.jsx(IT,{size:16}),i&&f.jsx("span",{className:"text-[10px] font-bold",children:i})]})}),e&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>n(!1)}),f.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg shadow-xl z-[80] flex flex-col min-w-[80px] max-h-[200px] overflow-y-auto animate-in slide-in-from-top-2 fade-in",children:[r.map(o=>f.jsxs("button",{onClick:()=>{t.chain().focus().setFontSize(o).run(),n(!1)},className:`px-3 py-2 text-left hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-sm flex items-center justify-between ${i==o?"text-zinc-900 dark:text-white bg-zinc-100 dark:bg-zinc-800":"text-zinc-500 dark:text-zinc-400"}`,children:[f.jsxs("span",{children:[o,"px"]}),i==o&&f.jsx(is,{size:12,className:"text-emerald-500"})]},o)),f.jsxs("button",{onClick:()=>{t.chain().focus().unsetFontSize().run(),n(!1)},className:"px-3 py-2 text-left hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors text-xs text-red-400 border-t border-zinc-200 dark:border-zinc-800 mt-1 flex items-center gap-2",children:[f.jsx(Ia,{size:12}),"Reset"]})]})]})]})},wD=({editor:t,onHistoryUndo:e,onHistoryRedo:n,canUndo:r,canRedo:i,showMetadataModal:s,hasMetadata:o,showMetadataActive:l,onShowMediaLibrary:a,onAddYoutube:c})=>{const u=G.useRef(null),[d,p]=G.useState(100),[h,m]=G.useState(!1),y=T.useMemo(()=>[{id:"undo",icon:mD,action:e,disabled:!r,title:"Undo"},{id:"redo",icon:S1,action:n,disabled:!i,title:"Redo"},{type:"divider"},{id:"bold",icon:u1,action:()=>t.chain().focus().toggleBold().run(),active:t==null?void 0:t.isActive("bold")},{id:"italic",icon:k1,action:()=>t.chain().focus().toggleItalic().run(),active:t==null?void 0:t.isActive("italic")},{id:"underline",icon:pD,action:()=>t.chain().focus().toggleUnderline().run(),active:t==null?void 0:t.isActive("underline")},{id:"strike",icon:KO,action:()=>t.chain().focus().toggleStrike().run(),active:t==null?void 0:t.isActive("strike")},{type:"divider"},{id:"fontSize",type:"custom",render:()=>f.jsx(M1,{editor:t})},{id:"highlight",type:"custom",render:()=>f.jsx(La,{icon:x1,title:"Highlight Color",activeColor:t==null?void 0:t.getAttributes("highlight").color,onChange:k=>t.chain().focus().toggleHighlight({color:k}).run(),onRemove:()=>t.chain().focus().unsetHighlight().run(),presets:["#fef08a","#bbf7d0","#bfdbfe","#fbcfe8","#e9d5ff","#fed7aa","#fecaca"],variant:"highlight"})},{id:"color",type:"custom",render:()=>f.jsx(La,{icon:b1,title:"Text Color",activeColor:t==null?void 0:t.getAttributes("textStyle").color,onChange:k=>t.chain().focus().setColor(k).run(),onRemove:()=>t.chain().focus().unsetColor().run(),presets:["#000000","#2563eb","#dc2626","#16a34a","#d97706","#9333ea","#71717a"],variant:"text"})},{type:"divider"},{id:"h1",icon:mO,action:()=>t.chain().focus().toggleHeading({level:1}).run(),active:t==null?void 0:t.isActive("heading",{level:1})},{id:"h2",icon:yO,action:()=>t.chain().focus().toggleHeading({level:2}).run(),active:t==null?void 0:t.isActive("heading",{level:2})},{id:"sub",icon:YO,action:()=>t.chain().focus().toggleSubscript().run(),active:t==null?void 0:t.isActive("subscript")},{id:"sup",icon:ZO,action:()=>t.chain().focus().toggleSuperscript().run(),active:t==null?void 0:t.isActive("superscript")},{type:"divider"},{id:"bullet",icon:NO,action:()=>t.chain().focus().toggleBulletList().run(),active:t==null?void 0:t.isActive("bulletList")},{id:"ordered",icon:CO,action:()=>t.chain().focus().toggleOrderedList().run(),active:t==null?void 0:t.isActive("orderedList")},{type:"divider"},{id:"left",icon:cD,action:()=>t.chain().focus().setTextAlign("left").run(),active:t==null?void 0:t.isActive({textAlign:"left"})},{id:"center",icon:rD,action:()=>t.chain().focus().setTextAlign("center").run(),active:t==null?void 0:t.isActive({textAlign:"center"})},{id:"right",icon:sD,action:()=>t.chain().focus().setTextAlign("right").run(),active:t==null?void 0:t.isActive({textAlign:"right"})},{id:"justify",icon:lD,action:()=>t.chain().focus().setTextAlign("justify").run(),active:t==null?void 0:t.isActive({textAlign:"justify"})},{type:"divider"},{id:"code",icon:m1,action:()=>t.chain().focus().toggleCodeBlock().run(),active:t==null?void 0:t.isActive("codeBlock")},{id:"quote",icon:w1,action:()=>t.chain().focus().toggleBlockquote().run(),active:t==null?void 0:t.isActive("blockquote")},{type:"divider"},{id:"image",icon:v1,action:a,title:"Insert Image"},{id:"youtube",icon:Fd,action:c,title:"Embed YouTube Video"},{id:"tags",type:"custom",render:()=>f.jsx(Ra,{onClick:s,active:l,title:"Manage Tags & Categories",width:Ht.CUSTOM,children:f.jsxs("div",{className:"relative flex items-center justify-center",children:[f.jsx(tD,{size:18}),o&&f.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-emerald-500 rounded-full"})]})})}],[t,e,n,r,i,s,o,l,a,c]);T.useEffect(()=>{const k=()=>{if(u.current){const S=u.current.clientWidth-50;let w=0,C=0;for(let N=0;N<y.length;N++){const D=y[N];let E=0;if(D.type==="divider"?E=Ht.DIVIDER:D.type==="custom"?E=Ht.CUSTOM:E=Ht.BUTTON,w+E+Ht.GAP>S)break;w+=E+Ht.GAP,C++}p(Math.max(2,C))}};k(),window.addEventListener("resize",k);const b=new ResizeObserver(k);return u.current&&b.observe(u.current),()=>{window.removeEventListener("resize",k),b.disconnect()}},[]);const x=y.slice(0,d),g=y.slice(d),v=(k,b)=>{if(k.type==="divider")return f.jsx("div",{style:{width:`${Ht.DIVIDER}px`},className:"h-6 flex items-center justify-center shrink-0",children:f.jsx("div",{className:"w-px h-full bg-zinc-100 dark:bg-zinc-800"})},b);if(k.type==="custom")return f.jsx(G.Fragment,{children:k.render()},k.id);const S=k.icon;return S?f.jsx(Ra,{onClick:k.action,active:k.active,disabled:k.disabled,title:k.title,children:f.jsx(S,{size:18})},k.id):null};return f.jsxs("div",{ref:u,className:"px-4 py-2 border-b border-zinc-200 dark:border-zinc-800 flex items-center gap-1 bg-zinc-50 dark:bg-zinc-900/20 w-full relative",children:[x.map((k,b)=>v(k,b)),g.length>0&&f.jsxs("div",{className:"relative ml-auto",children:[f.jsx("button",{onClick:()=>m(!h),style:{width:`${Ht.BUTTON}px`,height:`${Ht.BUTTON}px`},className:`flex items-center justify-center rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors shrink-0 ${h?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white":""}`,title:"More tools",children:f.jsx(GT,{size:18})}),h&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),f.jsx("div",{className:"absolute right-0 top-full mt-2 bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg shadow-xl p-2 z-[60] flex flex-col gap-1 min-w-[150px] animate-in slide-in-from-top-2 fade-in",children:f.jsx("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:g.map((k,b)=>v(k,b))})})]})]})]})},SD=({value:t,onChange:e,options:n})=>{const[r,i]=T.useState(!1),s=n.find(o=>o.value===t);return f.jsxs("div",{className:"relative flex-1",children:[f.jsxs("button",{onClick:()=>i(!r),className:"w-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-lg py-1.5 px-3 text-xs text-left text-zinc-700 dark:text-zinc-300 hover:border-zinc-500 transition-colors flex justify-between items-center",children:[f.jsx("span",{children:s?s.label:"Sort by..."}),f.jsx(d1,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&f.jsxs(f.Fragment,{children:[f.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>i(!1)}),f.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg shadow-2xl z-[80] overflow-hidden animate-in fade-in slide-in-from-top-1 duration-150",children:n.map(o=>f.jsx("button",{onClick:()=>{e(o.value),i(!1)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${t===o.value?"bg-emerald-500/10 text-emerald-500":"text-zinc-500 dark:text-zinc-400 hover:bg-zinc-100 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white"}`,children:o.label},o.value))})]})]})},j0=({options:t,selected:e,onChange:n,placeholder:r,label:i})=>f.jsxs("div",{className:"space-y-1",children:[f.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-400 dark:text-zinc-500 ml-1",children:i}),f.jsx("div",{className:"bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-lg p-1 max-h-32 overflow-y-auto custom-scrollbar",children:t.length>0?t.map(s=>f.jsxs("button",{onClick:()=>{e.includes(s)?n(e.filter(o=>o!==s)):n([...e,s])},className:`w-full text-left px-2 py-1.5 rounded text-[11px] transition-all flex items-center justify-between group ${e.includes(s)?"bg-emerald-500/10 text-emerald-500":"text-zinc-500 dark:text-zinc-400 hover:bg-zinc-700 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white"}`,children:[f.jsx("span",{children:s}),e.includes(s)&&f.jsx(is,{size:12})]},s)):f.jsxs("div",{className:"p-2 text-[10px] text-zinc-600 italic",children:["No ",i.toLowerCase()," available"]})})]}),A0=({label:t,range:e,onChange:n})=>{const[r,i]=T.useState(new Date),[s,o]=T.useState("days"),l=(x,g)=>new Date(x,g+1,0).getDate(),a=(x,g)=>new Date(x,g,1).getDay(),c=x=>{const g=x;if(!e.start||e.start&&e.end)n({start:g,end:null});else{const v=new Date(e.start);new Date(g)<v?n({start:g,end:e.start}):n({start:e.start,end:g})}},u=()=>{s==="days"?o("months"):s==="months"?o("years"):s==="years"&&o("decades")},d=()=>{s==="days"?i(new Date(r.getFullYear(),r.getMonth()-1,1)):s==="months"?i(new Date(r.getFullYear()-1,r.getMonth(),1)):s==="years"?i(new Date(r.getFullYear()-10,r.getMonth(),1)):s==="decades"&&i(new Date(r.getFullYear()-100,r.getMonth(),1))},p=()=>{s==="days"?i(new Date(r.getFullYear(),r.getMonth()+1,1)):s==="months"?i(new Date(r.getFullYear()+1,r.getMonth(),1)):s==="years"?i(new Date(r.getFullYear()+10,r.getMonth(),1)):s==="decades"&&i(new Date(r.getFullYear()+100,r.getMonth(),1))},h=()=>{const x=new Date,g=`${x.getFullYear()}-${String(x.getMonth()+1).padStart(2,"0")}-${String(x.getDate()).padStart(2,"0")}`;i(new Date),o("days"),n({start:g,end:g})},m=()=>{const x=r.getFullYear();if(s==="days")return r.toLocaleString("default",{month:"short",year:"numeric"});if(s==="months")return`${x}`;if(s==="years"){const g=Math.floor(x/10)*10;return`${g} - ${g+9}`}if(s==="decades"){const g=Math.floor(x/100)*100;return`${g} - ${g+99}`}},y=()=>{const x=r.getFullYear();if(s==="days"){const g=r.getMonth(),v=l(x,g),k=a(x,g),b=[];for(let S=0;S<k;S++)b.push(null);for(let S=1;S<=v;S++){const w=new Date(x,g,S),C=w.getFullYear(),N=String(w.getMonth()+1).padStart(2,"0"),D=String(w.getDate()).padStart(2,"0");b.push(`${C}-${N}-${D}`)}return f.jsxs("div",{children:[f.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:["S","M","T","W","T","F","S"].map(S=>f.jsx("span",{className:"text-[9px] text-zinc-600 font-bold",children:S},S))}),f.jsx("div",{className:"grid grid-cols-7 gap-1",children:b.map((S,w)=>{const C=S&&(S===e.start||S===e.end),N=S&&e.start&&e.end&&S>e.start&&S<e.end,D=new Date,E=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,I=S===E;return f.jsx("button",{disabled:!S,onClick:()=>c(S),className:`aspect-square rounded text-[10px] flex items-center justify-center transition-all ${S?"":"invisible"} ${C?"bg-emerald-500 text-zinc-950 font-bold":N?"bg-emerald-500/20 text-emerald-500":I?"bg-zinc-700 text-zinc-900 dark:text-white font-bold ring-1 ring-zinc-500":"text-zinc-500 dark:text-zinc-400 hover:bg-zinc-700"}`,children:S?new Date(S).getDate():""},w)})})]})}if(s==="months"){const g=Array.from({length:12},(v,k)=>new Date(x,k,1));return f.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.map((v,k)=>f.jsx("button",{onClick:()=>{i(v),o("days")},className:"p-2 text-[10px] rounded text-zinc-500 dark:text-zinc-400 hover:bg-zinc-700 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white",children:v.toLocaleString("default",{month:"short"})},k))})}if(s==="years"){const g=Math.floor(x/10)*10,v=Array.from({length:10},(k,b)=>g+b);return f.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(k=>f.jsx("button",{onClick:()=>{i(new Date(k,0,1)),o("months")},className:`p-2 text-[10px] rounded hover:bg-zinc-700 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white ${k===new Date().getFullYear()?"text-emerald-500 font-bold":"text-zinc-500 dark:text-zinc-400"}`,children:k},k))})}if(s==="decades"){const g=Math.floor(x/100)*100,v=Array.from({length:10},(k,b)=>g+b*10);return f.jsx("div",{className:"grid grid-cols-3 gap-2",children:v.map(k=>f.jsxs("button",{onClick:()=>{i(new Date(k,0,1)),o("years")},className:"p-2 text-[10px] rounded text-zinc-500 dark:text-zinc-400 hover:bg-zinc-700 dark:hover:bg-zinc-800 hover:text-zinc-900 dark:hover:text-white",children:[k,"-",k+9]},k))})}};return f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex justify-between items-center px-1",children:[f.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-400 dark:text-zinc-500",children:t}),f.jsx("button",{onClick:h,className:"text-[9px] font-bold text-emerald-500 hover:text-emerald-400 transition-colors bg-emerald-500/5 px-1.5 py-0.5 rounded border border-emerald-500/10",children:"Today"})]}),f.jsxs("div",{className:"bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-lg p-3",children:[f.jsxs("div",{className:"flex justify-between items-center mb-3",children:[f.jsx("button",{onClick:d,className:"p-1 hover:bg-zinc-700 rounded text-zinc-500 dark:text-zinc-400",children:f.jsx(KT,{size:14})}),f.jsx("button",{onClick:u,className:"text-[11px] font-bold text-zinc-700 dark:text-zinc-300 hover:text-zinc-900 dark:hover:text-white hover:underline transition-all",children:m()}),f.jsx("button",{onClick:p,className:"p-1 hover:bg-zinc-700 rounded text-zinc-500 dark:text-zinc-400",children:f.jsx(f1,{size:14})})]}),y(),s==="days"&&(e.start||e.end)&&f.jsxs("div",{className:"mt-3 flex items-center justify-between text-[9px] text-zinc-400 dark:text-zinc-500 border-t border-zinc-300 dark:border-zinc-700 pt-2",children:[f.jsxs("span",{children:[e.start?new Date(e.start).toLocaleDateString():"..."," - ",e.end?new Date(e.end).toLocaleDateString():"..."]}),f.jsx("button",{onClick:()=>n({start:null,end:null}),className:"text-red-400 hover:underline",children:"Reset"})]})]})]})},CD=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,i]=T.useState("");if(!t)return null;const s=()=>{r.trim()&&(n(r.trim()),i(""))};return f.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 text-zinc-900 dark:text-white",children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 opacity-100",children:[f.jsxs("div",{className:"p-6 text-zinc-900 dark:text-white",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"p-2 bg-emerald-500/10 text-emerald-500 rounded-lg",children:f.jsx(bs,{size:20})}),f.jsx("h3",{className:"text-lg font-bold",children:"Create New Post"})]}),f.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm mb-4",children:"Enter a filename for your new post."}),f.jsx("input",{autoFocus:!0,type:"text",value:r,onChange:o=>i(o.target.value),placeholder:"My New Post",className:"w-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2.5 px-4 text-zinc-900 dark:text-white focus:outline-none focus:border-emerald-500 transition-colors shadow-inner",onKeyDown:o=>{o.key==="Enter"&&s(),o.key==="Escape"&&e()}})]}),f.jsxs("div",{className:"px-6 py-4 bg-white dark:bg-zinc-950/50 flex justify-end gap-3 border-t border-zinc-200 dark:border-zinc-800",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:s,disabled:!r.trim(),className:"px-6 py-2 rounded-lg text-sm font-bold text-zinc-950 bg-emerald-500 hover:bg-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/20 transition-all",children:"Create"})]})]})})},zD=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,i]=T.useState("search"),[s,o]=T.useState(""),[l,a]=T.useState([]),[c,u]=T.useState(!1),[d,p]=T.useState(""),[h,m]=T.useState(null);T.useEffect(()=>{t||(o(""),a([]),p(""),m(null))},[t]);const y=async g=>{if(g&&g.preventDefault(),!!s.trim()){u(!0);try{const v=await xt.get(`/api/youtube/search?q=${encodeURIComponent(s)}`);a(v.data.items||[])}catch(v){console.error("YouTube Search Failed:",v)}finally{u(!1)}}},x=g=>{const v=g.match(/(?:embed\/|v=|vi\/|youtu\.be\/|shorts\/|\/)([a-zA-Z0-9_-]{11})/);return v?v[1]:g.length===11?g:null};return T.useEffect(()=>{const g=x(d);m(g)},[d]),t?f.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 text-zinc-900 dark:text-white",children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden flex flex-col max-h-[90vh]",children:[f.jsxs("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-red-500/10 text-red-500 rounded-lg",children:f.jsx(Fd,{size:24})}),f.jsxs("div",{children:[f.jsx("h3",{className:"text-lg font-bold",children:"Embed YouTube Video"}),f.jsx("p",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:"Search or paste a link to embed"})]})]}),f.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-100 dark:hover:bg-zinc-800 rounded-lg text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white transition-colors",children:f.jsx(Si,{size:20})})]}),f.jsxs("div",{className:"flex px-6 pt-2 border-b border-zinc-200 dark:border-zinc-800 gap-6",children:[f.jsx("button",{onClick:()=>i("search"),className:`py-3 text-sm font-medium border-b-2 transition-all ${r==="search"?"border-emerald-500 text-emerald-500":"border-transparent text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:"Search YouTube"}),f.jsx("button",{onClick:()=>i("link"),className:`py-3 text-sm font-medium border-b-2 transition-all ${r==="link"?"border-emerald-500 text-emerald-500":"border-transparent text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:"Direct Link"})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:r==="search"?f.jsxs("div",{className:"space-y-6",children:[f.jsxs("form",{onSubmit:y,className:"relative",children:[f.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search for videos...",className:"w-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-xl py-3 pl-4 pr-12 text-zinc-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 outline-none transition-all shadow-inner",value:s,onChange:g=>o(g.target.value)}),f.jsx("button",{type:"submit",disabled:c,className:"absolute right-2 top-2 p-1.5 bg-emerald-500 text-zinc-950 rounded-lg hover:bg-emerald-400 transition-colors disabled:opacity-50",children:f.jsx(kp,{size:18})})]}),c?f.jsx("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[1,2,3,4].map(g=>f.jsxs("div",{className:"space-y-2",children:[f.jsx("div",{className:"aspect-video bg-zinc-100 dark:bg-zinc-800 rounded-lg"}),f.jsx("div",{className:"h-4 bg-zinc-100 dark:bg-zinc-800 rounded w-3/4"})]},g))}):l.length>0?f.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(g=>{var v;return f.jsxs("button",{onClick:()=>n(g.url.split("v=")[1]||g.url.split("/").pop()),className:"group text-left space-y-2 hover:bg-zinc-100 dark:hover:bg-zinc-800/50 p-2 rounded-xl transition-all",children:[f.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-zinc-100 dark:bg-zinc-800",children:[f.jsx("img",{src:g.thumbnail,alt:g.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),f.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:f.jsx(bs,{size:32,className:"text-zinc-900 dark:text-white bg-emerald-500 rounded-full p-2"})}),f.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-[10px] px-1.5 py-0.5 rounded font-mono",children:g.duration?Math.floor(g.duration/60)+":"+(g.duration%60).toString().padStart(2,"0"):""})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsx("h4",{className:"text-sm font-medium line-clamp-2 leading-tight group-hover:text-emerald-400 transition-colors",children:g.title}),f.jsxs("p",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 flex items-center gap-1",children:[g.uploaderName,"  ",(v=g.views)==null?void 0:v.toLocaleString()," views"]})]})]},g.url)})}):s&&!c?f.jsx("div",{className:"text-center py-12 text-zinc-400 dark:text-zinc-500 italic",children:"No videos found. Try a different search."}):f.jsxs("div",{className:"text-center py-12 flex flex-col items-center gap-4 text-zinc-400 dark:text-zinc-500",children:[f.jsx(Fd,{size:48,className:"opacity-10"}),f.jsx("p",{children:"Enter a topic or video name to find content"})]})]}):f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("label",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-2 block",children:"Video URL or ID"}),f.jsx("input",{autoFocus:!0,type:"text",placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-xl py-3 px-4 text-zinc-900 dark:text-white focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 outline-none transition-all shadow-inner",value:d,onChange:g=>p(g.target.value)})]}),h&&f.jsxs("div",{className:"space-y-3",children:[f.jsx("label",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest block",children:"Live Preview"}),f.jsxs("div",{className:"aspect-video rounded-xl overflow-hidden bg-black ring-1 ring-zinc-800 relative shadow-2xl",children:[f.jsx("iframe",{src:`https://www.youtube.com/embed/${h}?controls=0&modestbranding=1`,className:"w-full h-full",title:"Preview"}),f.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none border-2 border-emerald-500/30 rounded-xl"})]}),f.jsxs("p",{className:"text-[10px] text-emerald-500 font-mono text-center",children:["Detected ID: ",h]})]})]})}),f.jsxs("div",{className:"p-6 bg-white dark:bg-zinc-950/50 border-t border-zinc-200 dark:border-zinc-800 flex justify-end gap-3",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white transition-colors",children:"Cancel"}),f.jsx("button",{onClick:()=>h&&n(h),disabled:!h,className:"px-6 py-2 bg-emerald-500 text-zinc-950 rounded-lg text-sm font-bold hover:bg-emerald-400 transition-all disabled:opacity-50 disabled:grayscale",children:"Insert Video"})]})]})}):null},ND=({onSave:t,onAction:e,isSaving:n,isDirty:r,deployStatus:i})=>{const[s,o]=T.useState(!1),l=G.useRef(null);T.useEffect(()=>{const u=d=>{l.current&&!l.current.contains(d.target)&&o(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const a=[{label:"Save & Publish",icon:y1,steps:["save","publish"],color:"text-blue-400"},{label:"Save, Publish & Commit",icon:g1,steps:["save","publish","commit"],color:"text-purple-400"}];a.push({label:"Save, Publish, Commit & Push",icon:h1,steps:["save","publish","commit","push"],color:"text-emerald-400"});const c=()=>i==="publishing"?"Publishing...":i==="committing"?"Committing...":i==="pushing"?"Pushing...":n?"Saving...":"Save";return f.jsxs("div",{className:"relative flex items-stretch h-10",ref:l,children:[f.jsxs("button",{type:"button",onClick:t,disabled:n||!!i||!r,className:`flex items-center gap-2 pl-4 pr-3 rounded-l-lg font-bold transition-all justify-center text-sm border-r border-black/10 ${r?"bg-yellow-400 text-zinc-950 hover:bg-yellow-300 shadow-[0_0_20px_rgba(250,204,21,0.2)]":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 cursor-not-allowed opacity-50"}`,title:n?"Saving...":"Save Changes",children:[f.jsx(C1,{size:18}),f.jsx("span",{className:"hidden md:inline",children:c()})]}),f.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),i||o(!s)},disabled:!!i,className:`px-2 rounded-r-lg transition-all border-l border-white/10 ${r?"bg-yellow-400 text-zinc-950 hover:bg-yellow-300":"bg-zinc-100 dark:bg-zinc-800 text-zinc-600 cursor-not-allowed opacity-50"}`,children:f.jsx(d1,{size:16,className:`transition-transform duration-200 ${s?"rotate-180":""}`})}),s&&f.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.5)] z-[200] overflow-hidden",children:f.jsx("div",{className:"p-2 space-y-1",children:a.map(u=>f.jsxs("button",{type:"button",onClick:d=>{d.stopPropagation(),e(u.steps),o(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-zinc-100 dark:hover:bg-zinc-800 text-left transition-colors group",children:[f.jsx("div",{className:`p-1.5 rounded-md bg-zinc-100 dark:bg-zinc-800 group-hover:bg-zinc-700 ${u.color}`,children:f.jsx(u.icon,{size:16})}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-sm font-medium text-zinc-200",children:u.label}),f.jsx("span",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 uppercase tracking-tighter",children:"Workflow"})]})]},u.label))})})]})},MD=({isOpen:t,onClose:e,workflow:n,onCancelStep:r,onAbort:i,onConfirmCommit:s,currentTitle:o})=>{const[l,a]=T.useState(`Update ${o||"blog content"}`),[c,u]=T.useState(null),[d,p]=T.useState(!1),[h,m]=T.useState(()=>localStorage.getItem("inscript_hide_push_warning")==="true"),[y,x]=T.useState(()=>localStorage.getItem("inscript_hide_push_info")==="true");if(T.useEffect(()=>{(n==null?void 0:n.currentIndex)!==void 0&&(n.steps[n.currentIndex]==="commit"&&a(`Update ${o||"blog content"}`),u(N=>N!==null&&N<=n.currentIndex?null:N))},[n==null?void 0:n.currentIndex,o]),!t||!n)return null;const{steps:g,currentIndex:v,status:k,error:b}=n,S={save:{label:"Save",icon:C1},publish:{label:"Publish",icon:y1},commit:{label:"Commit",icon:g1},push:{label:"Push",icon:h1}},w=g[v],C=w==="commit"&&k==="paused";return f.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl shadow-2xl max-w-lg w-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[f.jsxs("div",{className:"p-6",children:[f.jsxs("div",{className:"flex justify-between items-center mb-8",children:[f.jsx("h2",{className:"text-xl font-bold text-zinc-900 dark:text-white",children:"Workflow Progress"}),f.jsx("button",{onClick:i,className:"text-zinc-400 dark:text-zinc-500 hover:text-red-400 transition-colors",children:f.jsx(Si,{size:20})})]}),f.jsxs("div",{className:"relative mb-12",children:[f.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-zinc-100 dark:bg-zinc-800 -translate-y-1/2"}),f.jsx("div",{className:"relative flex justify-between items-center",children:g.map((N,D)=>{const E=S[N],I=D<v||k==="completed"&&D===g.length-1,U=D===v&&k!=="error"&&k!=="completed",Y=D===v&&k==="error",J=D>v,se=c!==null&&D>=c&&D>v||d&&D>=v&&k!=="completed";return f.jsxs("div",{className:"relative flex flex-col items-center group",children:[D>0&&D<=v&&f.jsx("div",{className:`absolute top-1/2 right-full w-full h-0.5 -translate-y-1/2 z-0 ${(I||U)&&!se?"bg-emerald-500":"bg-zinc-100 dark:bg-zinc-800"}`,style:{width:"100%"}}),f.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center z-10 transition-all duration-300 relative ${se?"bg-red-500/20 text-red-500 ring-2 ring-red-500/30":I?"bg-emerald-500 text-zinc-950":U?"bg-emerald-500/20 text-emerald-500 ring-4 ring-emerald-500/10":Y?"bg-red-500/20 text-red-500":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500"}`,children:[I&&!se?f.jsx(is,{size:20}):f.jsx(E.icon,{size:20,className:U?"animate-pulse":""}),J&&f.jsx("button",{onClick:q=>{q.stopPropagation(),r(D)},onMouseEnter:()=>u(D),onMouseLeave:()=>u(null),className:"absolute -top-1 -right-1 bg-zinc-700 text-zinc-500 dark:text-zinc-400 hover:bg-red-500 hover:text-zinc-900 dark:hover:text-white rounded-full p-0.5 opacity-40 hover:opacity-100 transition-opacity z-20",title:"Cancel this and following steps",children:f.jsx(Si,{size:10})})]}),f.jsx("span",{className:`absolute top-full mt-2 text-[10px] font-bold uppercase tracking-wider ${se?"text-red-500":U?"text-emerald-500":"text-zinc-400 dark:text-zinc-500"}`,children:E.label})]},N)})})]}),f.jsxs("div",{className:"min-h-[140px] flex flex-col justify-center",children:[k==="error"?f.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex gap-3",children:[f.jsx(p1,{className:"text-red-500 shrink-0",size:20}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-red-200",children:"Step Failed"}),f.jsx("p",{className:"text-xs text-red-200/70",children:b})]})]}):C?f.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-2",children:[f.jsxs("div",{children:[f.jsx("label",{className:"block text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-wider mb-2",children:"Commit Message"}),f.jsx("textarea",{autoFocus:!0,value:l,onChange:N=>a(N.target.value),className:"w-full bg-white dark:bg-zinc-950 border border-zinc-200 dark:border-zinc-800 rounded-lg p-3 text-zinc-200 text-sm outline-none focus:border-emerald-500/50 transition-colors min-h-[80px] resize-none",placeholder:"What changed?"})]}),f.jsxs("button",{onClick:()=>s(l),className:"w-full py-2.5 bg-emerald-500 hover:bg-emerald-400 text-zinc-950 rounded-lg text-sm font-bold shadow-lg shadow-emerald-900/20 transition-all flex items-center justify-center gap-2",children:["Confirm & Continue ",f.jsx(f1,{size:16})]})]}):f.jsxs("div",{className:"text-center py-4",children:[f.jsx("div",{className:"text-sm text-zinc-700 dark:text-zinc-300 font-medium mb-1",children:k==="completed"?"Workflow Successful!":w==="save"?"Saving post content...":w==="publish"?"Generating static site...":w==="commit"?"Recording changes to Git...":w==="push"?"Pushing to remote repository...":"Processing..."}),f.jsx("div",{className:"text-xs text-zinc-400 dark:text-zinc-500",children:k==="completed"?"All steps finished. You can now close this modal.":"Please wait while we handle the deployment."})]}),f.jsxs("div",{className:"space-y-3 mt-4",children:[g.includes("push")&&k!=="completed"&&k!=="error"&&!h&&f.jsxs("div",{className:"p-4 bg-orange-500/10 border border-orange-500/20 rounded-lg flex gap-3 animate-in fade-in slide-in-from-top-1",children:[f.jsx(N1,{className:"text-orange-500 shrink-0",size:20}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-xs font-bold text-orange-200 mb-1",children:"Push Warning"}),f.jsx("p",{className:"text-[10px] text-orange-200/70 leading-relaxed",children:"External pushes are irreversible and will affect the live repository."}),f.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer group",children:[f.jsx("input",{type:"checkbox",checked:h,onChange:N=>{const D=N.target.checked;m(D),localStorage.setItem("inscript_hide_push_warning",D?"true":"false")},className:"w-3 h-3 rounded border-zinc-300 dark:border-zinc-700 bg-zinc-100 dark:bg-zinc-800 text-emerald-500"}),f.jsx("span",{className:"text-[9px] text-orange-200/40 group-hover:text-orange-200/60 transition-colors",children:"Don't show again"})]})]})]}),!1]})]})]}),f.jsxs("div",{className:"px-6 py-4 bg-white dark:bg-zinc-950/50 flex justify-between items-center border-t border-zinc-200 dark:border-zinc-800",children:[f.jsx("button",{onClick:i,onMouseEnter:()=>p(!0),onMouseLeave:()=>p(!1),className:"text-xs font-bold text-red-500/60 hover:text-red-500 transition-colors uppercase tracking-widest",children:"Abort Workflow"}),k==="completed"&&f.jsx("button",{onClick:e,className:"px-4 py-1.5 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-700 text-zinc-900 dark:text-white rounded text-xs font-bold transition-all",children:"Close"})]})]})})},ED=({config:t,onClose:e})=>{if(!t)return null;const{title:n,message:r,type:i="warning",confirmText:s="Confirm",onConfirm:o}=t;return f.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 opacity-100",children:[f.jsx("div",{className:"p-6",children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx("div",{className:`p-3 rounded-full ${i==="danger"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:i==="danger"?f.jsx(z1,{size:24}):f.jsx(N1,{size:24})}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-lg font-bold text-zinc-900 dark:text-white mb-2",children:n}),f.jsx("p",{className:"text-zinc-500 dark:text-zinc-400 text-sm leading-relaxed",children:r})]})]})}),f.jsxs("div",{className:"px-6 py-4 bg-white dark:bg-zinc-950/50 flex justify-end gap-3 border-t border-zinc-200 dark:border-zinc-800",children:[f.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors",children:"Cancel"}),f.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg text-sm font-bold text-zinc-900 dark:text-white shadow-lg transition-all ${i==="danger"?"bg-red-600 hover:bg-red-500 shadow-red-900/20":"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20"}`,children:s})]})]})})},TD=()=>{const[t,e]=T.useState(()=>typeof window<"u"&&localStorage.getItem("theme")||"dark");T.useEffect(()=>{const z=window.document.documentElement;z.classList.remove("light","dark"),z.classList.add(t),localStorage.setItem("theme",t)},[t]);const n=()=>e(z=>z==="dark"?"light":"dark"),r="Inscript Demo",[i,s]=T.useState([]),[o,l]=T.useState(!1),[a,c]=T.useState(null),[u,d]=T.useState(""),[p,h]=T.useState([]),[m,y]=T.useState([]),[x,g]=T.useState(""),[v,k]=T.useState(!1),[b,S]=T.useState(!1),[w,C]=T.useState([]),[N,D]=T.useState({title:"",html:"",tags:[],categories:[]}),[E,I]=T.useState(!1),[U,Y]=T.useState(!1),[J,se]=T.useState([]),[q,fe]=T.useState(-1),[A,V]=T.useState(0),[K,ae]=T.useState(null),[ie,ce]=T.useState(null),[be,We]=T.useState(!1),[Pe,$t]=T.useState(!1),[sn,Bt]=T.useState(null),[Mt,Gn]=T.useState("all"),[gt,on]=T.useState(!0),[Mi,Qn]=T.useState(!1),[Xn,Zn]=T.useState(!1),[Ei,er]=T.useState(!1),[Et,yt]=T.useState(null),[lt,Xe]=T.useState(null),[Ft,Br]=T.useState([]),[ln,Fr]=T.useState([]),[kn,Zo]=T.useState({start:null,end:null}),[Vr,el]=T.useState({start:null,end:null}),[Ns,tl]=T.useState(!1),M=G.useRef({title:"",html:""}),_=G.useRef(!1),H=G.useRef(!1),oe=G.useRef(u),ne=G.useRef([]),Ie=G.useRef(-1),we=G.useRef(null),Vt=G.useRef(null),Hr=G.useRef(!1),an=G.useRef(new URLSearchParams(window.location.search));T.useEffect(()=>{ne.current=J,Ie.current=q},[J,q]);const[Wr,Ur]=T.useState(()=>{const z=localStorage.getItem("inscript_sidebar_width");return z?parseInt(z,10):320}),cn=G.useRef(!1),mc=G.useCallback(()=>{cn.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),qr=G.useCallback(()=>{cn.current&&(cn.current=!1,document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem("inscript_sidebar_width",Wr))},[Wr]),tr=G.useCallback(z=>{if(cn.current){const P=Math.min(600,window.innerWidth-50),R=Math.max(240,Math.min(P,z.clientX));Ur(R)}},[]);T.useEffect(()=>{window.addEventListener("mousemove",tr),window.addEventListener("mouseup",qr);const z=()=>{Ur(P=>Math.min(P,window.innerWidth-50))};return window.addEventListener("resize",z),()=>{window.removeEventListener("mousemove",tr),window.removeEventListener("mouseup",qr),window.removeEventListener("resize",z)}},[tr,qr]),T.useEffect(()=>{oe.current=u},[u]);const gc=!1,[Ti,E1]=T.useState(()=>new URLSearchParams(window.location.search).get("readonly")==="true"),ye=Ti,bp=G.useRef(ye);T.useEffect(()=>{bp.current=ye},[ye]),T.useEffect(()=>{x&&u==null&&(console.warn("[Inscript] Detected invalid title (null/undefined). Healing to fallback..."),d(x.replace(".md","")||"Untitled"))},[u,x]);const X=hE({extensions:[xT,g2.configure({allowBase64:!0}),u2,d2,vD,h2.configure({multicolor:!0}),k2,y2,x2,v2.configure({types:["heading","paragraph"]}),xD],content:(a==null?void 0:a.html)||"",editable:!ye,editorProps:{attributes:{class:"prose prose-invert prose-lg max-w-none focus:outline-none min-h-[calc(100vh-300px)]"}},onUpdate:({editor:z})=>{bp.current||(V(P=>P+1),!_.current&&!H.current&&(we.current&&clearTimeout(we.current),we.current=setTimeout(()=>{const P=z.getHTML(),R=oe.current,Me=ne.current,ee=Ie.current,Re=Me[ee];if(!Re||Re.html!==P||Re.title!==R||JSON.stringify(Re.tags)!==JSON.stringify(p)||JSON.stringify(Re.categories)!==JSON.stringify(m)){const Ue=Me.slice(0,ee+1),at={html:P,title:R,tags:p,categories:m,timestamp:new Date().toISOString()};Ue.push(at),se(Ue),fe(Ue.length-1),I(!0)}},1e3)))},onSelectionUpdate:({editor:z})=>{V(P=>P+1)}},[x]);T.useEffect(()=>{X&&!X.isDestroyed&&X.setEditable(!ye)},[X,ye]);const T1=(z,P)=>{const R=J.length>1||J.length>0&&!J[0].isOriginal,Me=N&&z!==N.title;(R||Me)&&I(!0)};T.useEffect(()=>{if(!x||H.current||J.length<=1)return;const z=setTimeout(async()=>{try{await xt.post(`/api/drafts/${x}`,{history:J,currentIndex:q}),console.log(`[DraftSync] Saved history (len: ${J.length}, ptr: ${q})`),c(P=>P&&{...P,hasDraft:!0}),s(P=>P.map(R=>R.filename===x?{...R,hasDraft:!0}:R)),ce("success"),setTimeout(()=>ce(null),2e3)}catch(P){console.error("[DraftSync] Failed:",P),ce("error")}},2e3);return()=>clearTimeout(z)},[J,q,u,x,p,m]),T.useEffect(()=>{X&&!_.current&&!H.current&&T1(u,X.getHTML())},[u,X]),T.useEffect(()=>{const z=r;if(x){const P=new URL(window.location);P.searchParams.set("post",x.replace(".md","")),window.history.replaceState({},"",P),document.title=`${u} | ${z}`}else if(!an.current.get("post")){const R=new URL(window.location);R.searchParams.delete("post"),window.history.replaceState({},"",R),document.title=z}},[x,u]),T.useEffect(()=>{Ms()},[]);const Ms=async()=>{try{const z=(await xt.get(gc?"/data.json":"/api/posts")).data;s(z);const P=an.current.get("post");if(P&&!x){const R=P+".md";z.find(ee=>ee.filename===R)&&(yc(R,z),an.current=new URLSearchParams)}}catch(z){console.error("Error fetching posts:",z)}},wp=async()=>{try{const z=await xt.get("/api/images");C(z.data)}catch(z){console.error("Error fetching library images:",z)}},yc=async(z,P=null)=>{window.innerWidth<768&&on(!1),z!==x&&(I(!1),ce(null),Sp(z,P))},Sp=async(z,P=null)=>{var R,Me;k(!0),_.current=!0,g(z),we.current&&clearTimeout(we.current),Vt.current&&clearTimeout(Vt.current);try{let ee={data:null};gc||(ee=await xt.get(`/api/posts/${z}?t=${Date.now()}`));const Re=ee.data.title||ee.data.frontmatter.title||z;Y(!1),g(z),c(ee.data);const Ue={title:Re,html:ee.data.savedHtml!==void 0?ee.data.savedHtml:ee.data.html,tags:((R=ee.data.frontmatter)==null?void 0:R.tags)||ee.data.tags||[],categories:((Me=ee.data.frontmatter)==null?void 0:Me.categories)||ee.data.categories||[],timestamp:ee.data.created||new Date().toISOString(),isOriginal:!0};let at=Array.isArray(ee.data.history)&&ee.data.history.length>0?ee.data.history:[];const Op=at.length>0&&at[0].html===Ue.html;Op||(at=[Ue,...at]),at.length===0&&(at=[Ue]);const Dp=typeof ee.data.currentIndex=="number"?ee.data.currentIndex:at.length-1,B1=!Op&&ee.data.hasDraft?Dp+1:Dp,jp=Math.max(0,Math.min(B1,at.length-1));se(at),fe(jp),(at.length>1||at.length>0&&!at[0].isOriginal)&&I(!0);const Ts=at[jp],Ap=(Ts==null?void 0:Ts.title)||Re||(x==null?void 0:x.replace(".md",""))||"Untitled";d(Ap),oe.current=Ap,h(Ts.tags||Ue.tags),y(Ts.categories||Ue.categories),D({title:Ue.title,html:Ue.html,tags:Ue.tags||[],categories:Ue.categories||[]}),k(!1)}catch(ee){console.error("[LoadPost] Failed:",ee),k(!1),_.current=!1,H.current=!1}},xc=z=>{if(!x)return;fe(z);const P=J[z];if(P){H.current=!0,X.commands.setContent(P.html);const R=(P==null?void 0:P.title)||u||"Untitled";d(R),h(P.tags||[]),y(P.categories||[]),setTimeout(()=>H.current=!1,100)}Vt.current&&clearTimeout(Vt.current),Vt.current=setTimeout(async()=>{try{console.log(`[HistorySync] Syncing pointer to ${z}`),ce("saving"),await xt.post(`/api/drafts/${x}`,{history:ne.current,currentIndex:z}),ce("success"),setTimeout(()=>ce(null),2e3)}catch(R){console.error("[HistorySync] Failed:",R),ce("error")}},500)};T.useEffect(()=>{if(X&&a&&x&&a.filename===x&&q>=0&&J.length>q&&!X.isDestroyed){const z=J[q],P=(z==null?void 0:z.html)||"";_.current&&(console.log(`[Editor] Initializing content from history[${q}]`),X.commands.setContent(P),D({title:J[0].title,html:J[0].html,tags:J[0].tags,categories:J[0].categories}),_.current=!1,setTimeout(()=>{H.current=!1},100))}},[X,x,a,J,q]);const O1=async()=>{x&&Bt({title:"Delete Post",message:`Are you sure you want to delete "${x}"? This cannot be undone.`,type:"danger",confirmText:"Delete",onConfirm:async()=>{try{await xt.delete(`/api/posts/${x}`),g(null),c(null),I(!1),Ms(),Bt(null)}catch(z){console.error("[Delete] Failed:",z),alert("Failed to delete post")}}})},D1=async()=>{!x||!a||Bt({title:"Discard Draft",message:"Discard all draft changes? This will revert to the published version.",type:"warning",confirmText:"Discard Changes",onConfirm:async()=>{try{await xt.delete(`/api/drafts/${x}`),await Sp(x),Ms(),Bt(null)}catch(z){console.error("[Discard] Failed:",z),alert("Failed to discard draft")}}})},j1=async()=>{if(!(!x||!E||v)){k(!0),ce("saving");try{const z=X.getHTML();console.log("[Save] Sending to /api/posts:",{filename:x,title:u});const P=await xt.post("/api/posts",{filename:x,frontmatter:{...a==null?void 0:a.frontmatter,title:u,tags:p,categories:m},html:z});console.log("[Save] Success:",P.data),P.data.frontmatter&&c(Me=>({...Me,frontmatter:P.data.frontmatter}));const R=X.getHTML();M.current={title:u,html:R},D({title:u,html:R,tags:p,categories:m}),I(!1),k(!1),ce("success"),setTimeout(()=>ce("saved"),3e3),Ms()}catch(z){console.error("[Save] Failed to save post:",z),z.response&&(console.error("[Save] Server Error Data:",z.response.data),console.error("[Save] Server Status:",z.response.status)),k(!1),ce("error"),setTimeout(()=>ce(null),5e3)}}};T.useEffect(()=>{if(!lt||lt.status!=="active"||Hr.current)return;(async()=>{Hr.current=!0;const P=lt.steps[lt.currentIndex];try{if(P==="save"){ce("saving");const R=X.getHTML();await xt.post("/api/posts",{filename:x,frontmatter:{...a==null?void 0:a.frontmatter,title:u,tags:p,categories:m},html:R}),ce("success"),I(!1),setTimeout(()=>ce("saved"),2e3)}else if(P==="publish")yt("publishing"),await xt.post("/api/publish");else if(P==="commit"){if(!lt.commitMessage){Xe(R=>({...R,status:"paused"})),Hr.current=!1;return}yt("committing"),await xt.post("/api/git/commit",{message:lt.commitMessage,filename:x})}else P==="push"&&(yt("pushing"),await xt.post("/api/git/push"));Xe(R=>!R||R.status!=="active"?R:R.currentIndex<R.steps.length-1?{...R,currentIndex:R.currentIndex+1}:(yt(null),Ms(),{...R,status:"completed"}))}catch(R){console.error(`[Workflow] Step ${P} failed:`,R),Xe(Me=>{var ee,Re;return{...Me,status:"error",error:((Re=(ee=R.response)==null?void 0:ee.data)==null?void 0:Re.error)||R.message}}),yt(null)}finally{Hr.current=!1}})()},[lt,x,u,p,m,X,a]);const A1=z=>{!x||v||Et||Xe({steps:z,currentIndex:0,status:"active",error:null,commitMessage:null})},P1=()=>{Qn(!0)},Cp=(z,P={})=>{if(!z)return;const R=(z.endsWith(".md")?z:`${z}.md`).split(" ").join("").toLowerCase();g(R),d(z),X.commands.setContent(""),c({frontmatter:{title:z,...P},hasDraft:!1});const Me={filename:R,title:z,created:new Date().toISOString(),modified:new Date().toISOString(),hasDraft:!0,isUnpublished:!0,tags:[],categories:[],...P};s(ee=>[Me,...ee]),se([{title:z,html:"",tags:[],categories:[],...P,timestamp:new Date().toISOString(),isOriginal:!0}]),fe(0),I(!0),Qn(!1)},I1=async z=>{const P=z.target.files[0];if(!P)return;const R=new FormData;R.append("image",P),await xt.post("/api/upload",R),wp()},R1=z=>{X.chain().focus().setImage({src:z}).run(),S(!1)},[nl,zp]=T.useState(""),[Np,L1]=T.useState("created"),[Es,_1]=T.useState("desc"),Mp=T.useMemo(()=>{const z=new Set;return i.forEach(P=>(P.tags||[]).forEach(R=>z.add(R))),(p||[]).forEach(P=>z.add(P)),Array.from(z).sort()},[i,p]),Ep=T.useMemo(()=>{const z=new Set;return i.forEach(P=>(P.categories||[]).forEach(R=>z.add(R))),(m||[]).forEach(P=>z.add(P)),Array.from(z).sort()},[i,m]),nr=T.useMemo(()=>i.find(z=>z.type==="introduction"),[i]),$1=i.filter(z=>{if(z.type==="introduction"||!(z.title.toLowerCase().includes(nl.toLowerCase())||z.filename.toLowerCase().includes(nl.toLowerCase()))||Mt==="drafts"&&!z.hasDraft||Mt==="unpublished"&&!z.isUnpublished)return!1;if(Ft.length>0){const Me=z.tags||[];if(!Ft.some(Re=>Me.includes(Re)))return!1}if(ln.length>0){const Me=z.categories||[];if(!ln.some(Re=>Me.includes(Re)))return!1}const R=(Me,ee)=>{if(!ee.start&&!ee.end)return!0;const Re=new Date(Me).setHours(0,0,0,0);if(ee.start){const Ue=new Date(ee.start).setHours(0,0,0,0);if(Re<Ue)return!1}if(ee.end){const Ue=new Date(ee.end).setHours(0,0,0,0);if(Re>Ue)return!1}return!0};return!(!R(z.created,kn)||!R(z.modified,Vr))}).sort((z,P)=>{let R=0;switch(Np){case"title":R=z.title.localeCompare(P.title);break;case"filename":R=z.filename.localeCompare(P.filename);break;case"created":R=new Date(z.created)-new Date(P.created);break;case"modified":R=new Date(z.modified)-new Date(P.modified);break;case"status":R=(z.hasDraft?1:0)-(P.hasDraft?1:0);break;default:R=0}return Es==="asc"?R:-R}),Tp=()=>{Br([]),Fr([]),Zo({start:null,end:null}),el({start:null,end:null}),tl(!1)};return f.jsxs("div",{className:"flex h-screen overflow-hidden",children:[f.jsx(ED,{config:sn,onClose:()=>Bt(null)}),!ye&&f.jsx(CD,{isOpen:Mi,onClose:()=>Qn(!1),onConfirm:Cp,existingFilenames:i.map(z=>z.filename)}),!ye&&f.jsx(kD,{isOpen:Xn,onClose:()=>Zn(!1),tags:Mp,categories:Ep,postTags:p,postCategories:m,onTagsChange:h,onCategoriesChange:y}),!ye&&f.jsx(zD,{isOpen:Ei,onClose:()=>er(!1),onConfirm:z=>{X.chain().focus().setYoutubeVideo({"data-youtube-video":z}).run(),er(!1)}}),!ye&&f.jsx(bD,{isOpen:b,onClose:()=>S(!1),images:w,onSelect:R1,onUpload:I1}),!ye&&f.jsx(MD,{isOpen:!!lt,onClose:()=>Xe(null),workflow:lt,currentTitle:u,onAbort:()=>Xe(null),onCancelStep:z=>{Xe(P=>{const R=P.steps.slice(0,z);return R.length===0?null:{...P,steps:R}})},onConfirmCommit:z=>{Xe(P=>({...P,status:"active",commitMessage:z}))}}),gt&&f.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 md:hidden",onClick:()=>on(!1)}),gt&&f.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 md:sticky md:top-0 md:h-screen md:relative md:z-30 bg-zinc-50 dark:bg-zinc-900 border-r border-zinc-200 dark:border-zinc-800 flex flex-col flex-shrink-0 group/sidebar shadow-2xl md:shadow-none",style:{width:Math.min(Wr,typeof window<"u"?window.innerWidth-60:300)},children:[f.jsxs("div",{className:"p-6 border-b border-zinc-200 dark:border-zinc-800",children:[f.jsxs("div",{className:"flex justify-between items-center mb-6 min-h-14",children:[f.jsx("button",{onClick:()=>{g(null),c(null),se([]),fe(-1),I(!1),ce(null),D({title:"",html:"",tags:[],categories:[]})},className:"hover:opacity-80 transition-opacity text-left",children:f.jsx("h1",{className:"text-xl font-bold tracking-tight text-zinc-900 dark:text-white",children:r})}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("button",{onClick:n,className:"w-10 h-10 flex items-center justify-center p-0 rounded-lg transition-colors text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white bg-zinc-200 hover:bg-zinc-300 dark:bg-zinc-800 dark:hover:bg-zinc-700",title:"Switch to "+(t==="dark"?"light":"dark")+" mode",children:t==="dark"?f.jsx(QO,{size:20}):f.jsx(OO,{size:20})}),f.jsxs("span",{className:"text-[10px] bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 px-2 py-1 rounded font-mono hidden sm:inline-block",children:[i.length," POSTS"]}),f.jsx("button",{onClick:()=>on(!1),className:"w-10 h-10 flex items-center justify-center p-0 md:hidden text-zinc-500 dark:text-zinc-400 hover:text-zinc-900 dark:hover:text-white bg-zinc-100 dark:bg-zinc-800/50 hover:bg-zinc-200 dark:hover:bg-zinc-800 rounded-lg transition-colors",children:f.jsx(xu,{size:20})}),!ye&&f.jsx("button",{onClick:P1,className:"w-10 h-10 flex items-center justify-center p-0 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-500 rounded-lg transition-colors border border-emerald-500/20",title:"New Post",children:f.jsx(bs,{size:20})})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex gap-2",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx("input",{type:"text",placeholder:"Search posts...",value:nl,onChange:z=>zp(z.target.value),className:"w-full bg-zinc-100 dark:bg-zinc-800 border border-zinc-300 dark:border-zinc-700 rounded-lg py-2 pl-3 pr-10 text-sm focus:outline-none focus:border-white transition-colors"}),nl&&f.jsx("button",{onClick:()=>zp(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white",children:f.jsx(Si,{size:14})})]}),f.jsxs("button",{onClick:()=>tl(!Ns),className:`w-10 h-10 flex items-center justify-center p-0 rounded-lg border transition-all ${Ns||Ft.length>0||ln.length>0||kn.start||Vr.start?"bg-emerald-500/10 border-emerald-500/50 text-emerald-500":"bg-zinc-100 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700 text-zinc-500 dark:text-zinc-400 hover:border-white"}`,title:"Toggle Filters",children:[f.jsx(kp,{size:16}),(Ft.length>0||ln.length>0||kn.start||Vr.start)&&f.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"})]})]}),Ns&&f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-xl p-4 space-y-4 shadow-xl max-h-[60vh] overflow-y-auto custom-scrollbar",children:[f.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-zinc-200 dark:border-zinc-800",children:[f.jsx("span",{className:"text-xs font-bold text-zinc-500 dark:text-zinc-400 uppercase tracking-widest",children:"Advanced Filters"}),f.jsxs("button",{onClick:Tp,className:"text-[10px] text-zinc-400 dark:text-zinc-500 hover:text-red-400 transition-colors uppercase font-bold tracking-wide flex items-center gap-1",children:[f.jsx(Ia,{size:10}),"Clear All"]})]}),!ye&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-400 dark:text-zinc-500 ml-1",children:"Status"}),f.jsx("div",{className:"flex p-1 bg-zinc-50 dark:bg-zinc-900 rounded-lg border border-zinc-300 dark:border-zinc-700",children:["all","drafts","unpublished"].map(z=>f.jsx("button",{onClick:()=>Gn(z),className:`flex-1 py-1.5 text-xs font-bold uppercase tracking-wide rounded-md transition-all ${Mt===z?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-700 dark:hover:text-zinc-300"}`,children:z},z))})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(j0,{label:"Tags",options:Mp,selected:Ft,onChange:Br}),f.jsx(j0,{label:"Categories",options:Ep,selected:ln,onChange:Fr})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(A0,{label:"Created Date Range",range:kn,onChange:Zo}),f.jsx(A0,{label:"Modified Date Range",range:Vr,onChange:el})]}),(Ft.length>0||ln.length>0||kn.start||Vr.start||Mt!=="all"&&!ye)&&f.jsx("button",{onClick:Tp,className:"w-full py-2 bg-zinc-100 dark:bg-zinc-800 hover:bg-zinc-700 border border-zinc-300 dark:border-zinc-700 text-zinc-700 dark:text-zinc-300 text-xs font-bold uppercase tracking-wider rounded-lg transition-all",children:"Reset Filters"})]}),f.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-zinc-200 dark:border-zinc-800/50",children:[f.jsxs("div",{className:"flex justify-between items-center px-1",children:[f.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-400 dark:text-zinc-500",children:"Sort by"}),f.jsx("span",{className:"text-[10px] text-zinc-600 font-mono",children:Es.toUpperCase()})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(SD,{value:Np,onChange:L1,options:[{value:"created",label:"Date Created"},{value:"modified",label:"Date Modified"},{value:"title",label:"Post Title"},{value:"filename",label:"Filename"},!ye&&{value:"status",label:"Draft Status"}].filter(Boolean)}),f.jsx("button",{onClick:()=>_1(z=>z==="asc"?"desc":"asc"),className:`w-10 flex items-center justify-center p-0 rounded-lg border transition-all ${Es==="asc"?"bg-zinc-100 dark:bg-zinc-800 border-zinc-300 dark:border-zinc-700":"bg-emerald-500/10 border-emerald-500/50 text-emerald-500"} hover:border-white`,title:`Switch to ${Es==="asc"?"Descending":"Ascending"}`,children:Es==="asc"?f.jsx(FT,{size:14}):f.jsx($T,{size:14})})]})]})]})]}),f.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:$1.map(z=>f.jsxs("button",{onClick:()=>yc(z.filename),className:`w-full text-left p-3 rounded-lg transition-all flex items-start gap-3 relative group ${x===z.filename?"bg-zinc-100 dark:bg-zinc-800 shadow-lg border border-zinc-300 dark:border-zinc-700":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50 border border-transparent"}`,title:z.title,children:[f.jsx(T0,{size:18,className:"text-zinc-400 dark:text-zinc-500 mt-1 flex-shrink-0"}),!ye&&(E&&x===z.filename||z.hasDraft)&&f.jsx("div",{className:`absolute top-3 right-3 w-2 h-2 rounded-full shadow-[0_0_8px_currentColor] ${z.isUnpublished?"bg-purple-400 text-purple-400":"bg-yellow-400 text-yellow-400"}`,title:z.isUnpublished?"Unpublished Draft":"Unsaved changes (Draft)"}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("div",{className:"text-sm font-medium truncate",children:z.title}),f.jsxs("div",{className:"flex items-center gap-3 mt-1.5 opacity-60",children:[f.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-zinc-500 dark:text-zinc-400 font-mono",title:`Created: ${new Date(z.created).toLocaleString()}`,children:[f.jsx(WT,{size:10}),f.jsx("span",{children:new Date(z.created).toLocaleDateString()})]}),f.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-zinc-500 dark:text-zinc-400 font-mono",title:`Modified: ${new Date(z.modified).toLocaleString()}`,children:[f.jsx(vu,{size:10}),f.jsx("span",{children:new Date(z.modified).toLocaleDateString()})]})]})]})]},z.filename))}),(nr||!ye)&&f.jsx("div",{className:"p-2 border-t border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/30",children:nr?f.jsxs("button",{onClick:()=>yc(nr.filename),className:`w-full text-left p-3 rounded-lg transition-all flex items-start gap-3 relative group border-2 ${x===nr.filename?"bg-zinc-100 dark:bg-zinc-800 shadow-md border-emerald-500/50":"hover:bg-zinc-100 dark:hover:bg-zinc-800/50 border-emerald-500/20 hover:border-emerald-500/40"}`,title:nr.title,children:[f.jsx("div",{className:"text-emerald-500 mt-1 flex-shrink-0",children:f.jsx(D0,{size:18,fill:"currentColor",className:"opacity-80"})}),!ye&&(E&&x===nr.filename||nr.hasDraft)&&f.jsx("div",{className:"absolute top-3 right-3 w-2 h-2 rounded-full bg-yellow-400 shadow-[0_0_8px_currentColor]",title:"Unsaved changes"}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("div",{className:"text-sm font-bold truncate text-emerald-100",children:nr.title}),f.jsx("div",{className:"flex items-center gap-2 mt-1.5 opacity-60",children:f.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider text-emerald-500",children:"Introduction"})})]})]}):f.jsxs("button",{onClick:()=>Cp("Introduction",{type:"introduction"}),className:"w-full text-left p-3 rounded-lg transition-all flex items-center gap-3 border-2 border-dashed border-zinc-200 dark:border-zinc-800 hover:border-emerald-500/50 hover:bg-zinc-100 dark:hover:bg-zinc-800/50 group text-zinc-400 dark:text-zinc-500 hover:text-emerald-500",title:"Create Introduction Post",children:[f.jsx("div",{className:"mt-0.5 flex-shrink-0",children:f.jsx(D0,{size:18,className:"opacity-50 group-hover:opacity-100"})}),f.jsxs("div",{className:"min-w-0 flex-1",children:[f.jsx("div",{className:"text-sm font-medium",children:"Create Introduction"}),f.jsx("div",{className:"text-[10px] mt-0.5 opacity-60",children:"Pinned Recommendation"})]}),f.jsx(bs,{size:16,className:"opacity-50 group-hover:opacity-100"})]})}),f.jsx("div",{onMouseDown:mc,className:"absolute right-0 translate-x-1/2 top-0 bottom-0 w-4 bg-transparent hover:bg-emerald-500/50 cursor-col-resize z-50 transition-colors"})]}),f.jsx("div",{className:"flex-1 flex flex-col bg-white dark:bg-zinc-950 overflow-hidden relative",children:x?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"h-16 border-b border-zinc-200 dark:border-zinc-800 px-4 md:px-8 flex items-center justify-between bg-zinc-50 dark:bg-zinc-900/80 backdrop-blur-xl sticky top-0 z-20",children:[f.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0 mr-2 md:mr-4",children:[f.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:[f.jsx("button",{onClick:()=>on(!gt),className:"w-10 h-10 flex items-center justify-center p-0 rounded-lg transition-colors text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800/50",title:gt?"Collapse Sidebar":"Expand Sidebar",children:gt?f.jsx(xu,{size:20}):f.jsx(O0,{size:20})}),f.jsx("div",{className:`h-6 w-px bg-zinc-100 dark:bg-zinc-800 ${!gt&&"hidden"}`}),ye?f.jsx("h1",{className:"text-lg md:text-xl font-bold w-full truncate mb-0 flex justify-between items-center",children:u}):f.jsx("input",{ref:oe,type:"text",value:u,onChange:z=>d(z.target.value),className:"bg-transparent text-lg md:text-xl font-bold outline-none w-full min-w-0 mb-0",placeholder:"Post Title"})]}),f.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end",children:[ie==="saving"&&f.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-zinc-100 dark:bg-zinc-800 rounded text-zinc-500 dark:text-zinc-400 text-[10px] font-bold uppercase tracking-wider animate-pulse",children:[f.jsx("div",{className:"w-2 h-2 border-2 border-current border-t-transparent rounded-full animate-spin"}),f.jsx("span",{className:"hidden md:inline",children:"Saving"})]}),ie==="success"&&f.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-500/10 text-emerald-500 text-[10px] font-bold uppercase tracking-wider rounded border border-emerald-500/20",children:[f.jsx(is,{size:10}),f.jsx("span",{className:"hidden md:inline",children:"Saved"})]}),ie==="error"&&f.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-red-900/20 text-red-400 text-[10px] font-bold uppercase tracking-wider rounded border border-red-900/30",children:[f.jsx(p1,{size:10}),f.jsx("span",{className:"hidden md:inline",children:"Error"})]})]})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsx("button",{onClick:async()=>{const z=new URL(window.location);z.searchParams.set("post",x.replace(".md",""));const P=z.toString();if(navigator.share)try{await navigator.share({title:`${u} | ${r}`,text:`Check out "${u}"`,url:P});return}catch{console.log("Share cancelled/failed, falling back to copy")}try{await navigator.clipboard.writeText(P),l(!0),setTimeout(()=>l(!1),2e3)}catch(R){console.error("Failed to copy",R)}},className:`w-10 h-10 flex items-center justify-center p-0 rounded-lg transition-colors mr-2 ${o?"text-emerald-500 bg-emerald-500/10":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800/50"}`,title:o?"Link Copied!":"Share Link",children:o?f.jsx(is,{size:20}):f.jsx(UO,{size:20})})}),!ye&&f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex items-center gap-1 md:mr-4 bg-zinc-50 dark:bg-zinc-900 p-1 rounded-lg border border-zinc-200 dark:border-zinc-800",children:[f.jsxs("button",{onClick:()=>Y(!1),className:`p-2 md:px-3 md:py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-2 ${U?"text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white":"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm"}`,title:"Editor View",children:[f.jsx(vu,{size:16,className:"md:hidden"}),f.jsx("span",{className:"hidden md:inline",children:"Editor"})]}),f.jsxs("button",{onClick:()=>Y(!0),className:`p-2 md:px-3 md:py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-2 ${U?"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 shadow-sm":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white"}`,title:"Version History",children:[f.jsx(tO,{size:16,className:"md:hidden"}),f.jsx("span",{className:"hidden md:inline",children:"History"})]})]}),f.jsx("button",{onClick:D1,disabled:!(a!=null&&a.hasDraft),className:`w-10 h-10 flex items-center justify-center p-0 transition-colors rounded-lg ${a!=null&&a.hasDraft?"text-zinc-400 dark:text-zinc-500 hover:text-red-400 hover:bg-red-400/10":"text-zinc-700 cursor-not-allowed"}`,title:a!=null&&a.hasDraft?"Discard Draft":"No Draft to Discard",children:f.jsx(Ia,{size:20})}),f.jsx("button",{onClick:O1,className:"w-10 h-10 flex items-center justify-center p-0 text-red-900 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors group",title:"Delete Post",children:f.jsx(z1,{size:20})}),f.jsx(ND,{isSaving:ie==="saving",isDirty:E||!!Et,deployStatus:Et,onSave:j1,onAction:A1})]})]}),!ye&&!U&&f.jsx(wD,{editor:X,onHistoryUndo:()=>{if(q>0){we.current&&clearTimeout(we.current);const z=q-1;xc(z)}},onHistoryRedo:()=>{if(q<J.length-1){we.current&&clearTimeout(we.current);const z=q+1;xc(z)}},canUndo:q>0,canRedo:q<J.length-1,showMetadataModal:()=>Zn(!0),hasMetadata:p.length>0||m.length>0,showMetadataActive:Xn,onShowMediaLibrary:()=>{S(!0),wp()},onAddYoutube:()=>er(!0)}),f.jsx("div",{className:"flex-1 overflow-y-auto relative bg-white dark:bg-zinc-950",children:U?f.jsx(OD,{history:J,originalHtml:N.html,originalTitle:N.title,originalTags:N.tags,originalCategories:N.categories,current:X.getHTML(),currentIndex:q,onSelect:z=>{xc(z),Y(!1)}}):f.jsxs("div",{className:"max-w-6xl mx-auto px-2 py-3 md:px-8 md:py-12",children:[X&&f.jsx(gE,{editor:X,shouldShow:({editor:z})=>!ye&&!z.state.selection.empty&&!z.isActive("image"),tippyOptions:{duration:100,zIndex:9999,maxWidth:"98vw",interactive:!0},children:f.jsxs("div",{className:"bg-zinc-50 dark:bg-zinc-900 border border-zinc-300 dark:border-zinc-700 rounded-lg shadow-xl flex items-center p-1 gap-1 flex-wrap overflow-visible max-w-[90vw] custom-scrollbar",children:[f.jsx("button",{onClick:()=>X.chain().focus().toggleBold().run(),className:`w-[38px] h-[38px] flex items-center justify-center rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ${X.isActive("bold")?"text-yellow-400 bg-zinc-100 dark:bg-zinc-800":"text-zinc-700 dark:text-zinc-300"}`,title:"Bold",children:f.jsx(u1,{size:16})}),f.jsx("button",{onClick:()=>X.chain().focus().toggleItalic().run(),className:`w-[38px] h-[38px] flex items-center justify-center rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ${X.isActive("italic")?"text-yellow-400 bg-zinc-100 dark:bg-zinc-800":"text-zinc-700 dark:text-zinc-300"}`,title:"Italic",children:f.jsx(k1,{size:16})}),f.jsx("div",{className:"w-px h-4 bg-zinc-100 dark:bg-zinc-800 mx-1"}),f.jsx(M1,{editor:X}),f.jsx("div",{className:"w-px h-4 bg-zinc-100 dark:bg-zinc-800 mx-1"}),f.jsx(La,{icon:x1,title:"Highlight",activeColor:X.getAttributes("highlight").color,onChange:z=>X.chain().focus().toggleHighlight({color:z}).run(),onRemove:()=>X.chain().focus().unsetHighlight().run(),presets:["#fef08a","#bbf7d0","#bfdbfe","#fbcfe8","#e9d5ff","#fed7aa","#fecaca"],variant:"highlight"}),f.jsx(La,{icon:b1,title:"Text Color",activeColor:X.getAttributes("textStyle").color,onChange:z=>X.chain().focus().setColor(z).run(),onRemove:()=>X.chain().focus().unsetColor().run(),presets:["#000000","#2563eb","#dc2626","#16a34a","#d97706","#9333ea","#71717a"],variant:"text"}),f.jsx("div",{className:"w-px h-4 bg-zinc-100 dark:bg-zinc-800 mx-1"}),f.jsx("button",{onClick:()=>X.chain().focus().toggleCodeBlock().run(),className:`w-[38px] h-[38px] flex items-center justify-center rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ${X.isActive("codeBlock")?"text-yellow-400 bg-zinc-100 dark:bg-zinc-800":"text-zinc-700 dark:text-zinc-300"}`,title:"Code Block",children:f.jsx(m1,{size:16})}),f.jsx("button",{onClick:()=>X.chain().focus().toggleBlockquote().run(),className:`w-[38px] h-[38px] flex items-center justify-center rounded hover:bg-zinc-100 dark:hover:bg-zinc-800 transition-colors ${X.isActive("blockquote")?"text-yellow-400 bg-zinc-100 dark:bg-zinc-800":"text-zinc-700 dark:text-zinc-300"}`,title:"Quote",children:f.jsx(w1,{size:16})})]})}),f.jsx(iE,{editor:X})]})})]}):f.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[f.jsxs("div",{className:"h-16 border-b border-zinc-200 dark:border-zinc-800 px-8 flex items-center bg-zinc-50 dark:bg-zinc-900/80 backdrop-blur-xl sticky top-0 z-20",children:[f.jsx("button",{onClick:()=>on(!gt),className:"p-2 rounded-lg transition-colors text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:bg-zinc-100 dark:hover:bg-zinc-800/50 mr-4",title:gt?"Collapse Sidebar":"Expand Sidebar",children:gt?f.jsx(xu,{size:20}):f.jsx(O0,{size:20})}),f.jsx("h1",{className:"text-xl font-bold text-zinc-400 dark:text-zinc-500"})]}),f.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-400 dark:text-zinc-500 gap-4 p-4 text-center",children:[f.jsx(T0,{size:64,className:"opacity-20"}),f.jsxs("p",{className:"text-lg",children:["Select a post to start ",ye?"reading":"editing"]})]})]})}),f.jsx("button",{onClick:()=>We(!be),className:`fixed bottom-4 right-4 z-[110] w-10 h-10 flex items-center justify-center rounded-lg border transition-all duration-300 ${be?"bg-zinc-100 border-zinc-200 text-zinc-900 shadow-xl scale-110":"bg-zinc-50 dark:bg-zinc-900/80 backdrop-blur-md border-zinc-200 dark:border-zinc-800 text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white hover:border-zinc-300 dark:hover:border-zinc-700"}`,title:"Mission Control Debugger",children:be?f.jsx(Si,{size:18}):f.jsx(HO,{size:18})}),be&&!gc&&f.jsxs("div",{className:"fixed bottom-16 right-4 z-[100] bg-white dark:bg-zinc-950/95 backdrop-blur-xl border border-zinc-200 dark:border-zinc-800 rounded-2xl w-80 shadow-2xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-300 flex flex-col max-h-[80vh]",children:[f.jsxs("div",{className:"px-5 py-4 border-b border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(LT,{size:16,className:"text-emerald-500"}),f.jsx("h3",{className:"text-sm font-bold text-zinc-900 dark:text-white tracking-tight",children:"Debug Dashboard"})]}),f.jsx("span",{className:"text-[10px] bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500 px-2 py-0.5 rounded font-mono",children:"v2.4.0"})]}),f.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5 space-y-6",children:[f.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl relative overflow-hidden group",children:[f.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:f.jsx(EO,{size:48})}),f.jsxs("div",{className:"flex gap-3 relative z-10",children:[f.jsx(bO,{className:"text-blue-500 shrink-0",size:18}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-blue-200 mb-1",children:"Visualization Tip"}),f.jsxs("p",{className:"text-[10px] text-blue-200/70 leading-relaxed",children:["The ",f.jsx("code",{className:"bg-blue-500/20 px-1 rounded text-blue-300",children:"readonly=true"})," parameter helps you see exactly how the app looks when published."]})]})]})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[f.jsx(IO,{size:12})," Interactive Controls"]}),f.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-50 dark:bg-zinc-900/50 rounded-xl border border-zinc-200 dark:border-zinc-800 hover:border-zinc-300 dark:hover:border-zinc-700 transition-colors group",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`p-2 rounded-lg transition-colors ${Ti?"bg-emerald-500/10 text-emerald-500":"bg-zinc-100 dark:bg-zinc-800 text-zinc-400 dark:text-zinc-500"}`,children:Ti?f.jsx(cO,{size:16}):f.jsx(vu,{size:16})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-zinc-200",children:"Readonly Mode"}),f.jsx("p",{className:"text-[10px] text-zinc-400 dark:text-zinc-500",children:"Hide editing tools"})]})]}),f.jsx("button",{onClick:()=>{const z=new URL(window.location),P=!Ti;P?z.searchParams.set("readonly","true"):z.searchParams.delete("readonly"),window.history.replaceState({},"",z),E1(P)},className:`w-10 h-5 rounded-full relative transition-colors duration-300 ${Ti?"bg-emerald-500":"bg-zinc-700"}`,children:f.jsx("div",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform duration-300 ${Ti?"translate-x-5":""}`})})]})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[f.jsx(sO,{size:12})," Live Engine State"]}),f.jsxs("div",{className:"space-y-2 font-mono text-[11px]",children:[f.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"isDirty"}),f.jsx("span",{className:E?"text-yellow-400 font-bold":"text-emerald-400",children:E?"YES":"NO"})]}),f.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"title"}),f.jsx("span",{className:"text-zinc-700 dark:text-zinc-300 truncate ml-4",title:u,children:u||"EMPTY"})]}),f.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"filename"}),f.jsx("span",{className:"text-zinc-700 dark:text-zinc-300 truncate ml-4",title:x,children:x||"none"})]}),f.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"saveStatus"}),f.jsx("span",{className:"text-blue-400",children:ie||"idle"})]}),f.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"historyPtr"}),f.jsxs("span",{className:"text-zinc-700 dark:text-zinc-300",children:[q," / ",J.length]})]}),f.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-50 dark:bg-zinc-900/30 rounded-lg",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"tokens"}),f.jsxs("span",{className:"text-zinc-700 dark:text-zinc-300",children:[X?X.getText().length:0," chars"]})]})]})]}),f.jsxs("div",{children:[f.jsxs("h4",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[f.jsx(lO,{size:12})," Configuration"]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mb-1",children:"Site Configuration"}),f.jsx("div",{className:"space-y-1",children:f.jsxs("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800/50 rounded-lg flex flex-col gap-1",children:[f.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"Title"}),f.jsx("span",{className:"text-zinc-700 dark:text-zinc-300 truncate ml-2",children:r})]}),f.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"URL"}),f.jsx("span",{className:"text-zinc-700 dark:text-zinc-300 truncate ml-2",children:"https://blog.harshankur.com"})]}),f.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"Port"}),f.jsx("span",{className:"text-zinc-700 dark:text-zinc-300 font-mono",children:"2221"})]}),f.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500",children:"Favicon"}),f.jsx("span",{className:"text-zinc-700 dark:text-zinc-300 truncate ml-2",children:"../favicon.png"})]})]})})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mb-1",children:"Filesystem Paths"}),f.jsx("div",{className:"space-y-1.5 font-mono text-[9px]",children:f.jsxs("div",{className:"p-2 bg-zinc-50 dark:bg-zinc-900/30 border border-zinc-200 dark:border-zinc-800/50 rounded-lg space-y-2",children:[f.jsxs("div",{children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500 block mb-0.5",children:"Content"}),f.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 break-all leading-tight",children:"../content"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500 block mb-0.5",children:"Static"}),f.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 break-all leading-tight",children:"../static"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500 block mb-0.5",children:"Drafts"}),f.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 break-all leading-tight",children:"../drafts"})]}),f.jsxs("div",{children:[f.jsx("span",{className:"text-zinc-400 dark:text-zinc-500 block mb-0.5",children:"Dist"}),f.jsx("span",{className:"text-zinc-500 dark:text-zinc-400 break-all leading-tight",children:"../dist"})]})]})})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-zinc-400 dark:text-zinc-500 mb-1",children:"Git Permissions"}),f.jsxs("div",{className:"p-2 rounded-lg text-[10px] font-bold flex items-center gap-2 bg-emerald-500/10 text-emerald-500",children:[f.jsx(is,{size:12}),"ALLOW_PUSH: ENABLED"]})]})]})]})]}),f.jsx("div",{className:"p-4 border-t border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/30 text-center",children:f.jsx("p",{className:"text-[9px] text-zinc-600 uppercase tracking-tighter",children:"Mission Control Debugger  2026"})})]})]})},P0=t=>new DOMParser().parseFromString(t,"text/html").body.textContent||"",OD=({history:t,originalHtml:e,originalTitle:n,originalTags:r=[],originalCategories:i=[],current:s,currentIndex:o,onSelect:l})=>{const[a,c]=T.useState(o),[u,d]=T.useState("visual"),p=G.useRef(null),h=G.useRef(null),m=G.useRef(null),y=G.useRef(!1);G.useEffect(()=>{m.current&&m.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[a]);const x=E=>I=>{if(y.current)return;y.current=!0;const U=E==="left"?h.current:p.current;if(U){const Y=I.target.scrollTop/(I.target.scrollHeight-I.target.clientHeight);Number.isFinite(Y)&&(U.scrollTop=Y*(U.scrollHeight-U.clientHeight))}setTimeout(()=>{y.current=!1},50)},g=t[a]||{},v=g.html||"",k=G.useMemo(()=>u==="visual"?null:u==="source"?MT(e||"",v):u==="text"?N0(P0(e||""),P0(v)):null,[e,v,u]),b=G.useMemo(()=>{if(u==="visual")return null;const E=typeof n=="string"?n:"",I=g.title||"";return N0(E,I)},[n,g.title,u]),S=(E=[],I=[])=>{const U=I.filter(se=>!E.includes(se)),Y=E.filter(se=>!I.includes(se)),J=E.filter(se=>I.includes(se));return{added:U,removed:Y,unchanged:J}},w=G.useMemo(()=>S(r,g.tags),[r,g.tags]),C=G.useMemo(()=>S(i,g.categories),[i,g.categories]),N=(E,I,U)=>{if(!E)return null;const{added:Y,removed:J,unchanged:se}=E;return Y.length===0&&J.length===0&&se.length===0?null:f.jsxs("div",{className:"mb-4",children:[f.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-wider mb-1.5",children:I}),f.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[se.map(q=>f.jsx("span",{className:"px-2 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-500 dark:text-zinc-400 text-xs border border-zinc-300 dark:border-zinc-700",children:q},q)),U?J.map(q=>f.jsx("span",{className:"px-2 py-0.5 rounded bg-red-900/20 text-red-400 text-xs border border-red-900/30 line-through decoration-red-400/50",title:"Removed",children:q},q)):Y.map(q=>f.jsxs("span",{className:"px-2 py-0.5 rounded bg-emerald-900/20 text-emerald-400 text-xs border border-emerald-900/30 font-bold",title:"Added",children:["+ ",q]},q))]})]})},D=(E=[],I)=>!E||E.length===0?null:f.jsxs("div",{className:"mb-4",children:[f.jsx("div",{className:"text-[10px] font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-wider mb-1.5",children:I}),f.jsx("div",{className:"flex flex-wrap gap-1.5",children:E.map(U=>f.jsx("span",{className:"px-2 py-0.5 rounded bg-zinc-100 dark:bg-zinc-800 text-zinc-700 dark:text-zinc-300 text-xs border border-zinc-300 dark:border-zinc-700",children:U},U))})]});return f.jsxs("div",{className:"flex flex-col md:flex-row h-full bg-white dark:bg-zinc-950",children:[f.jsxs("div",{className:"w-full md:w-64 h-56 md:h-auto bg-white dark:bg-zinc-950 border-b md:border-b-0 md:border-r border-zinc-200 dark:border-zinc-800 flex flex-col flex-shrink-0",children:[f.jsx("div",{className:"h-10 md:h-16 flex items-center px-4 md:px-6 border-b border-zinc-200 dark:border-zinc-800",children:f.jsx("span",{className:"font-bold text-zinc-500 dark:text-zinc-400 text-xs uppercase tracking-wider",children:"Version History"})}),f.jsx("div",{className:"flex-1 overflow-y-auto bg-zinc-50 dark:bg-zinc-900/30",children:t.map((E,I)=>{const U=I===o,Y=I===0,J=a===I;return f.jsxs("button",{ref:J?m:null,onClick:()=>c(I),className:`w-full text-left px-4 md:px-6 py-3 md:py-4 border-b border-zinc-200 dark:border-zinc-800/50 flex flex-col gap-1 transition-all ${J?"bg-zinc-50 dark:bg-zinc-900 border-l-2 border-l-emerald-500":"hover:bg-zinc-50 dark:hover:bg-zinc-900/50 border-l-2 border-l-transparent"}`,children:[f.jsxs("div",{className:"flex justify-between items-center mb-1",children:[f.jsx("span",{className:`text-sm font-bold ${Y?"text-blue-400":"text-zinc-700 dark:text-zinc-300"}`,children:Y?"Original":`Version ${I}`}),U&&f.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-500 px-1.5 py-0.5 rounded uppercase font-bold tracking-wider",children:"Active"})]}),f.jsx("span",{className:"text-[10px] font-mono text-zinc-400 dark:text-zinc-500",children:new Date(E.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},I)})}),f.jsx("div",{className:"p-2 md:p-4 border-t border-zinc-200 dark:border-zinc-800 bg-zinc-50 dark:bg-zinc-900/50",children:f.jsxs("button",{onClick:()=>l(a),className:"w-full py-2 md:py-2.5 bg-zinc-100 hover:bg-white text-black font-bold rounded-lg text-xs uppercase tracking-wide transition-colors shadow-lg flex items-center justify-center gap-2",children:[f.jsx("span",{className:"md:hidden",children:f.jsx(S1,{size:14})}),"Restore Version"]})})]}),f.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[f.jsxs("div",{className:"p-2 min-h-12 md:min-h-16 md:p-3 bg-zinc-50 dark:bg-zinc-900/50 border-b border-zinc-200 dark:border-zinc-800 flex justify-between items-center sticky top-0 bg-white dark:bg-zinc-950/95 backdrop-blur z-20",children:[f.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-zinc-400 dark:text-zinc-500 pl-1 md:pl-2",children:"Original (Reference)"}),f.jsxs("div",{className:"flex bg-zinc-50 dark:bg-zinc-900 border border-zinc-200 dark:border-zinc-800 rounded-lg p-0.5 shadow-sm",children:[f.jsx("button",{onClick:()=>d("visual"),className:`px-2 py-1 text-[10px] font-bold rounded transition-all ${u==="visual"?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white"}`,children:"Preview"}),f.jsx("button",{onClick:()=>d("text"),className:`px-2 py-1 text-[10px] font-bold rounded transition-all ${u==="text"?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white"}`,children:"Text"}),f.jsx("button",{onClick:()=>d("source"),className:`px-2 py-1 text-[10px] font-bold rounded transition-all ${u==="source"?"bg-zinc-100 dark:bg-zinc-800 text-zinc-900 dark:text-white shadow-sm":"text-zinc-400 dark:text-zinc-500 hover:text-zinc-900 dark:hover:text-white"}`,children:"Source"})]})]}),f.jsxs("div",{ref:p,onScroll:x("left"),className:"flex-1 overflow-y-auto custom-scrollbar",children:[f.jsxs("div",{className:"px-4 md:px-8 pt-4 md:pt-6 pb-2 border-b border-zinc-200 dark:border-zinc-800/50",children:[f.jsx("div",{className:"text-xs font-bold text-zinc-400 dark:text-zinc-500 uppercase tracking-wider mb-2",children:"Title"}),u==="visual"?f.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-500 dark:text-zinc-400 mb-4 md:mb-6 break-words",children:n}):f.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-500 dark:text-zinc-400 font-mono mb-4 md:mb-6 break-words",children:b?b.map((E,I)=>!E.added&&f.jsx("span",{style:E.removed?{backgroundColor:"rgba(127,29,29,0.4)",textDecoration:"line-through"}:{},children:E.value},I)):n}),u!=="visual"?f.jsxs(f.Fragment,{children:[N(w,"Tags",!0),N(C,"Categories",!0)]}):f.jsxs(f.Fragment,{children:[D(r,"Tags"),D(i,"Categories")]})]}),f.jsx("div",{className:"p-4 md:p-8",children:u==="visual"?f.jsx("div",{className:"prose prose-invert max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:e}}):f.jsx("pre",{className:"font-mono text-xs text-zinc-500 dark:text-zinc-400 whitespace-pre-wrap",children:k&&k.map((E,I)=>!E.added&&f.jsx("span",{style:E.removed?{backgroundColor:"rgba(127,29,29,0.4)",textDecoration:"line-through"}:{},children:E.value},I))})})]})]}),f.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden bg-zinc-50 dark:bg-zinc-900/20",children:[f.jsxs("div",{className:"p-2 min-h-12 md:min-h-16 md:p-3 bg-zinc-50 dark:bg-zinc-900/50 border-b border-zinc-200 dark:border-zinc-800 flex justify-between items-center text-[10px] font-bold uppercase tracking-widest text-emerald-500 sticky top-0 bg-white dark:bg-zinc-950/95 backdrop-blur z-10",children:["Selected Version (",a,")"]}),f.jsxs("div",{ref:h,onScroll:x("right"),className:"flex-1 overflow-y-auto custom-scrollbar",children:[f.jsxs("div",{className:"px-4 md:px-8 pt-4 md:pt-6 pb-2 border-b border-zinc-200 dark:border-zinc-800/50 shrink-0",children:[f.jsx("div",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2",children:"Title"}),u==="visual"?f.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-200 mb-4 md:mb-6 break-words",children:g.title}):f.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-200 font-mono mb-4 md:mb-6 break-words",children:b?b.map((E,I)=>!E.removed&&f.jsx("span",{style:E.added?{backgroundColor:"rgba(6,78,59,0.4)"}:{},children:E.value},I)):g.title}),u!=="visual"?f.jsxs(f.Fragment,{children:[N(w,"Tags",!1),N(C,"Categories",!1)]}):f.jsxs(f.Fragment,{children:[D(g.tags,"Tags"),D(g.categories,"Categories")]})]}),f.jsx("div",{className:"p-4 md:p-8",children:u==="visual"?f.jsx("div",{className:"prose prose-invert max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:v}}):f.jsx("pre",{className:"font-mono text-xs text-zinc-300 whitespace-pre-wrap",children:k&&k.map((E,I)=>!E.removed&&f.jsx("span",{style:E.added?{backgroundColor:"rgba(6,78,59,0.4)"}:{},children:E.value},I))})})]})]})]})},DD=TD;ku.createRoot(document.getElementById("root")).render(f.jsx(G.StrictMode,{children:f.jsx(DD,{})}));
