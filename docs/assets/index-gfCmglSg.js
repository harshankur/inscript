(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function jg(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ag={exports:{}},Ra={},Pg={exports:{}},te={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vo=Symbol.for("react.element"),L1=Symbol.for("react.portal"),_1=Symbol.for("react.fragment"),$1=Symbol.for("react.strict_mode"),B1=Symbol.for("react.profiler"),F1=Symbol.for("react.provider"),V1=Symbol.for("react.context"),H1=Symbol.for("react.forward_ref"),W1=Symbol.for("react.suspense"),U1=Symbol.for("react.memo"),q1=Symbol.for("react.lazy"),Dp=Symbol.iterator;function K1(t){return t===null||typeof t!="object"?null:(t=Dp&&t[Dp]||t["@@iterator"],typeof t=="function"?t:null)}var Ig={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Rg=Object.assign,Lg={};function bs(t,e,n){this.props=t,this.context=e,this.refs=Lg,this.updater=n||Ig}bs.prototype.isReactComponent={};bs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};bs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _g(){}_g.prototype=bs.prototype;function $d(t,e,n){this.props=t,this.context=e,this.refs=Lg,this.updater=n||Ig}var Bd=$d.prototype=new _g;Bd.constructor=$d;Rg(Bd,bs.prototype);Bd.isPureReactComponent=!0;var jp=Array.isArray,$g=Object.prototype.hasOwnProperty,Fd={current:null},Bg={key:!0,ref:!0,__self:!0,__source:!0};function Fg(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)$g.call(e,r)&&!Bg.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Vo,type:t,key:s,ref:o,props:i,_owner:Fd.current}}function J1(t,e){return{$$typeof:Vo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Vd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Vo}function Y1(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Ap=/\/+/g;function gc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Y1(""+t.key):e.toString(36)}function zl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Vo:case L1:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+gc(o,0):r,jp(i)?(n="",t!=null&&(n=t.replace(Ap,"$&/")+"/"),zl(i,e,n,"",function(c){return c})):i!=null&&(Vd(i)&&(i=J1(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Ap,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",jp(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+gc(s,l);o+=zl(s,e,n,a,i)}else if(a=K1(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+gc(s,l++),o+=zl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function tl(t,e,n){if(t==null)return t;var r=[],i=0;return zl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function G1(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},Dl={transition:null},Q1={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:Dl,ReactCurrentOwner:Fd};function Vg(){throw Error("act(...) is not supported in production builds of React.")}te.Children={map:tl,forEach:function(t,e,n){tl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return tl(t,function(){e++}),e},toArray:function(t){return tl(t,function(e){return e})||[]},only:function(t){if(!Vd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};te.Component=bs;te.Fragment=_1;te.Profiler=B1;te.PureComponent=$d;te.StrictMode=$1;te.Suspense=W1;te.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Q1;te.act=Vg;te.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Rg({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Fd.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)$g.call(e,a)&&!Bg.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Vo,type:t.type,key:i,ref:s,props:r,_owner:o}};te.createContext=function(t){return t={$$typeof:V1,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:F1,_context:t},t.Consumer=t};te.createElement=Fg;te.createFactory=function(t){var e=Fg.bind(null,t);return e.type=t,e};te.createRef=function(){return{current:null}};te.forwardRef=function(t){return{$$typeof:H1,render:t}};te.isValidElement=Vd;te.lazy=function(t){return{$$typeof:q1,_payload:{_status:-1,_result:t},_init:G1}};te.memo=function(t,e){return{$$typeof:U1,type:t,compare:e===void 0?null:e}};te.startTransition=function(t){var e=Dl.transition;Dl.transition={};try{t()}finally{Dl.transition=e}};te.unstable_act=Vg;te.useCallback=function(t,e){return ft.current.useCallback(t,e)};te.useContext=function(t){return ft.current.useContext(t)};te.useDebugValue=function(){};te.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};te.useEffect=function(t,e){return ft.current.useEffect(t,e)};te.useId=function(){return ft.current.useId()};te.useImperativeHandle=function(t,e,n){return ft.current.useImperativeHandle(t,e,n)};te.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};te.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};te.useMemo=function(t,e){return ft.current.useMemo(t,e)};te.useReducer=function(t,e,n){return ft.current.useReducer(t,e,n)};te.useRef=function(t){return ft.current.useRef(t)};te.useState=function(t){return ft.current.useState(t)};te.useSyncExternalStore=function(t,e,n){return ft.current.useSyncExternalStore(t,e,n)};te.useTransition=function(){return ft.current.useTransition()};te.version="18.3.1";Pg.exports=te;var O=Pg.exports;const J=jg(O);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X1=O,Z1=Symbol.for("react.element"),ew=Symbol.for("react.fragment"),tw=Object.prototype.hasOwnProperty,nw=X1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,rw={key:!0,ref:!0,__self:!0,__source:!0};function Hg(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)tw.call(e,r)&&!rw.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Z1,type:t,key:s,ref:o,props:i,_owner:nw.current}}Ra.Fragment=ew;Ra.jsx=Hg;Ra.jsxs=Hg;Ag.exports=Ra;var p=Ag.exports,yu={},Wg={exports:{}},Rt={},Ug={exports:{}},qg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(A,L){var U=A.length;A.push(L);e:for(;0<U;){var oe=U-1>>>1,le=A[oe];if(0<i(le,L))A[oe]=L,A[U]=le,U=oe;else break e}}function n(A){return A.length===0?null:A[0]}function r(A){if(A.length===0)return null;var L=A[0],U=A.pop();if(U!==L){A[0]=U;e:for(var oe=0,le=A.length,Nt=le>>>1;oe<Nt;){var Oe=2*(oe+1)-1,Se=A[Oe],ve=Oe+1,Mt=A[ve];if(0>i(Se,U))ve<le&&0>i(Mt,Se)?(A[oe]=Mt,A[ve]=U,oe=ve):(A[oe]=Se,A[Oe]=U,oe=Oe);else if(ve<le&&0>i(Mt,U))A[oe]=Mt,A[ve]=U,oe=ve;else break e}}return L}function i(A,L){var U=A.sortIndex-L.sortIndex;return U!==0?U:A.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,f=3,h=!1,m=!1,y=!1,k=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,x=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(A){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=A)r(c),L.sortIndex=L.expirationTime,e(a,L);else break;L=n(c)}}function v(A){if(y=!1,w(A),!m)if(n(a)!==null)m=!0,se(S);else{var L=n(c);L!==null&&be(v,L.startTime-A)}}function S(A,L){m=!1,y&&(y=!1,g(M),M=-1),h=!0;var U=f;try{for(w(L),d=n(a);d!==null&&(!(d.expirationTime>L)||A&&!I());){var oe=d.callback;if(typeof oe=="function"){d.callback=null,f=d.priorityLevel;var le=oe(d.expirationTime<=L);L=t.unstable_now(),typeof le=="function"?d.callback=le:d===n(a)&&r(a),w(L)}else r(a);d=n(a)}if(d!==null)var Nt=!0;else{var Oe=n(c);Oe!==null&&be(v,Oe.startTime-L),Nt=!1}return Nt}finally{d=null,f=U,h=!1}}var b=!1,C=null,M=-1,D=5,E=-1;function I(){return!(t.unstable_now()-E<D)}function $(){if(C!==null){var A=t.unstable_now();E=A;var L=!0;try{L=C(!0,A)}finally{L?K():(b=!1,C=null)}}else b=!1}var K;if(typeof x=="function")K=function(){x($)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,ie=ue.port2;ue.port1.onmessage=$,K=function(){ie.postMessage(null)}}else K=function(){k($,0)};function se(A){C=A,b||(b=!0,K())}function be(A,L){M=k(function(){A(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(A){A.callback=null},t.unstable_continueExecution=function(){m||h||(m=!0,se(S))},t.unstable_forceFrameRate=function(A){0>A||125<A?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<A?Math.floor(1e3/A):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(A){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var U=f;f=L;try{return A()}finally{f=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(A,L){switch(A){case 1:case 2:case 3:case 4:case 5:break;default:A=3}var U=f;f=A;try{return L()}finally{f=U}},t.unstable_scheduleCallback=function(A,L,U){var oe=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?oe+U:oe):U=oe,A){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=U+le,A={id:u++,callback:L,priorityLevel:A,startTime:U,expirationTime:le,sortIndex:-1},U>oe?(A.sortIndex=U,e(c,A),n(a)===null&&A===n(c)&&(y?(g(M),M=-1):y=!0,be(v,U-oe))):(A.sortIndex=le,e(a,A),m||h||(m=!0,se(S))),A},t.unstable_shouldYield=I,t.unstable_wrapCallback=function(A){var L=f;return function(){var U=f;f=L;try{return A.apply(this,arguments)}finally{f=U}}}})(qg);Ug.exports=qg;var iw=Ug.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sw=O,At=iw;function j(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Kg=new Set,po={};function Ni(t,e){ss(t,e),ss(t+"Capture",e)}function ss(t,e){for(po[t]=e,t=0;t<e.length;t++)Kg.add(e[t])}var Kn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),xu=Object.prototype.hasOwnProperty,ow=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Pp={},Ip={};function lw(t){return xu.call(Ip,t)?!0:xu.call(Pp,t)?!1:ow.test(t)?Ip[t]=!0:(Pp[t]=!0,!1)}function aw(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function cw(t,e,n,r){if(e===null||typeof e>"u"||aw(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function pt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ge={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ge[t]=new pt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ge[e]=new pt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ge[t]=new pt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ge[t]=new pt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ge[t]=new pt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ge[t]=new pt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ge[t]=new pt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ge[t]=new pt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ge[t]=new pt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hd=/[\-:]([a-z])/g;function Wd(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hd,Wd);Ge[e]=new pt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hd,Wd);Ge[e]=new pt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hd,Wd);Ge[e]=new pt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ge[t]=new pt(t,1,!1,t.toLowerCase(),null,!1,!1)});Ge.xlinkHref=new pt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ge[t]=new pt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Ud(t,e,n,r){var i=Ge.hasOwnProperty(e)?Ge[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(cw(e,n,i,r)&&(n=null),r||i===null?lw(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Xn=sw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,nl=Symbol.for("react.element"),Ri=Symbol.for("react.portal"),Li=Symbol.for("react.fragment"),qd=Symbol.for("react.strict_mode"),vu=Symbol.for("react.profiler"),Jg=Symbol.for("react.provider"),Yg=Symbol.for("react.context"),Kd=Symbol.for("react.forward_ref"),wu=Symbol.for("react.suspense"),ku=Symbol.for("react.suspense_list"),Jd=Symbol.for("react.memo"),cr=Symbol.for("react.lazy"),Gg=Symbol.for("react.offscreen"),Rp=Symbol.iterator;function zs(t){return t===null||typeof t!="object"?null:(t=Rp&&t[Rp]||t["@@iterator"],typeof t=="function"?t:null)}var xe=Object.assign,yc;function Vs(t){if(yc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);yc=e&&e[1]||""}return`
`+yc+t}var xc=!1;function vc(t,e){if(!t||xc)return"";xc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{xc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Vs(t):""}function uw(t){switch(t.tag){case 5:return Vs(t.type);case 16:return Vs("Lazy");case 13:return Vs("Suspense");case 19:return Vs("SuspenseList");case 0:case 2:case 15:return t=vc(t.type,!1),t;case 11:return t=vc(t.type.render,!1),t;case 1:return t=vc(t.type,!0),t;default:return""}}function bu(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Li:return"Fragment";case Ri:return"Portal";case vu:return"Profiler";case qd:return"StrictMode";case wu:return"Suspense";case ku:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Yg:return(t.displayName||"Context")+".Consumer";case Jg:return(t._context.displayName||"Context")+".Provider";case Kd:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jd:return e=t.displayName||null,e!==null?e:bu(t.type)||"Memo";case cr:e=t._payload,t=t._init;try{return bu(t(e))}catch{}}return null}function dw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return bu(e);case 8:return e===qd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ar(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Qg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function fw(t){var e=Qg(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function rl(t){t._valueTracker||(t._valueTracker=fw(t))}function Xg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Qg(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Su(t,e){var n=e.checked;return xe({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Lp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ar(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Zg(t,e){e=e.checked,e!=null&&Ud(t,"checked",e,!1)}function Cu(t,e){Zg(t,e);var n=Ar(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Nu(t,e.type,n):e.hasOwnProperty("defaultValue")&&Nu(t,e.type,Ar(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _p(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Nu(t,e,n){(e!=="number"||Kl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Hs=Array.isArray;function Gi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ar(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function Mu(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(j(91));return xe({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function $p(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(j(92));if(Hs(n)){if(1<n.length)throw Error(j(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ar(n)}}function e0(t,e){var n=Ar(e.value),r=Ar(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Bp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function t0(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Eu(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?t0(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var il,n0=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(il=il||document.createElement("div"),il.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=il.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ys={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pw=["Webkit","ms","Moz","O"];Object.keys(Ys).forEach(function(t){pw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ys[e]=Ys[t]})});function r0(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ys.hasOwnProperty(t)&&Ys[t]?(""+e).trim():e+"px"}function i0(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=r0(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var hw=xe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Tu(t,e){if(e){if(hw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(j(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(j(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(j(61))}if(e.style!=null&&typeof e.style!="object")throw Error(j(62))}}function Ou(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zu=null;function Yd(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Du=null,Qi=null,Xi=null;function Fp(t){if(t=Uo(t)){if(typeof Du!="function")throw Error(j(280));var e=t.stateNode;e&&(e=Fa(e),Du(t.stateNode,t.type,e))}}function s0(t){Qi?Xi?Xi.push(t):Xi=[t]:Qi=t}function o0(){if(Qi){var t=Qi,e=Xi;if(Xi=Qi=null,Fp(t),e)for(t=0;t<e.length;t++)Fp(e[t])}}function l0(t,e){return t(e)}function a0(){}var wc=!1;function c0(t,e,n){if(wc)return t(e,n);wc=!0;try{return l0(t,e,n)}finally{wc=!1,(Qi!==null||Xi!==null)&&(a0(),o0())}}function mo(t,e){var n=t.stateNode;if(n===null)return null;var r=Fa(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(j(231,e,typeof n));return n}var ju=!1;if(Kn)try{var Ds={};Object.defineProperty(Ds,"passive",{get:function(){ju=!0}}),window.addEventListener("test",Ds,Ds),window.removeEventListener("test",Ds,Ds)}catch{ju=!1}function mw(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Gs=!1,Jl=null,Yl=!1,Au=null,gw={onError:function(t){Gs=!0,Jl=t}};function yw(t,e,n,r,i,s,o,l,a){Gs=!1,Jl=null,mw.apply(gw,arguments)}function xw(t,e,n,r,i,s,o,l,a){if(yw.apply(this,arguments),Gs){if(Gs){var c=Jl;Gs=!1,Jl=null}else throw Error(j(198));Yl||(Yl=!0,Au=c)}}function Mi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function u0(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Vp(t){if(Mi(t)!==t)throw Error(j(188))}function vw(t){var e=t.alternate;if(!e){if(e=Mi(t),e===null)throw Error(j(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Vp(i),t;if(s===r)return Vp(i),e;s=s.sibling}throw Error(j(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(j(189))}}if(n.alternate!==r)throw Error(j(190))}if(n.tag!==3)throw Error(j(188));return n.stateNode.current===n?t:e}function d0(t){return t=vw(t),t!==null?f0(t):null}function f0(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f0(t);if(e!==null)return e;t=t.sibling}return null}var p0=At.unstable_scheduleCallback,Hp=At.unstable_cancelCallback,ww=At.unstable_shouldYield,kw=At.unstable_requestPaint,Ce=At.unstable_now,bw=At.unstable_getCurrentPriorityLevel,Gd=At.unstable_ImmediatePriority,h0=At.unstable_UserBlockingPriority,Gl=At.unstable_NormalPriority,Sw=At.unstable_LowPriority,m0=At.unstable_IdlePriority,La=null,Mn=null;function Cw(t){if(Mn&&typeof Mn.onCommitFiberRoot=="function")try{Mn.onCommitFiberRoot(La,t,void 0,(t.current.flags&128)===128)}catch{}}var dn=Math.clz32?Math.clz32:Ew,Nw=Math.log,Mw=Math.LN2;function Ew(t){return t>>>=0,t===0?32:31-(Nw(t)/Mw|0)|0}var sl=64,ol=4194304;function Ws(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ql(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ws(l):(s&=o,s!==0&&(r=Ws(s)))}else o=n&~i,o!==0?r=Ws(o):s!==0&&(r=Ws(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-dn(e),i=1<<n,r|=t[n],e&=~i;return r}function Tw(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ow(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-dn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=Tw(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Pu(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function g0(){var t=sl;return sl<<=1,!(sl&4194240)&&(sl=64),t}function kc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Ho(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-dn(e),t[e]=n}function zw(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-dn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Qd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-dn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function y0(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var x0,Xd,v0,w0,k0,Iu=!1,ll=[],kr=null,br=null,Sr=null,go=new Map,yo=new Map,pr=[],Dw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Wp(t,e){switch(t){case"focusin":case"focusout":kr=null;break;case"dragenter":case"dragleave":br=null;break;case"mouseover":case"mouseout":Sr=null;break;case"pointerover":case"pointerout":go.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yo.delete(e.pointerId)}}function js(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Uo(e),e!==null&&Xd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function jw(t,e,n,r,i){switch(e){case"focusin":return kr=js(kr,t,e,n,r,i),!0;case"dragenter":return br=js(br,t,e,n,r,i),!0;case"mouseover":return Sr=js(Sr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return go.set(s,js(go.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yo.set(s,js(yo.get(s)||null,t,e,n,r,i)),!0}return!1}function b0(t){var e=Zr(t.target);if(e!==null){var n=Mi(e);if(n!==null){if(e=n.tag,e===13){if(e=u0(n),e!==null){t.blockedOn=e,k0(t.priority,function(){v0(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ru(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);zu=r,n.target.dispatchEvent(r),zu=null}else return e=Uo(n),e!==null&&Xd(e),t.blockedOn=n,!1;e.shift()}return!0}function Up(t,e,n){jl(t)&&n.delete(e)}function Aw(){Iu=!1,kr!==null&&jl(kr)&&(kr=null),br!==null&&jl(br)&&(br=null),Sr!==null&&jl(Sr)&&(Sr=null),go.forEach(Up),yo.forEach(Up)}function As(t,e){t.blockedOn===e&&(t.blockedOn=null,Iu||(Iu=!0,At.unstable_scheduleCallback(At.unstable_NormalPriority,Aw)))}function xo(t){function e(i){return As(i,t)}if(0<ll.length){As(ll[0],t);for(var n=1;n<ll.length;n++){var r=ll[n];r.blockedOn===t&&(r.blockedOn=null)}}for(kr!==null&&As(kr,t),br!==null&&As(br,t),Sr!==null&&As(Sr,t),go.forEach(e),yo.forEach(e),n=0;n<pr.length;n++)r=pr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<pr.length&&(n=pr[0],n.blockedOn===null);)b0(n),n.blockedOn===null&&pr.shift()}var Zi=Xn.ReactCurrentBatchConfig,Xl=!0;function Pw(t,e,n,r){var i=ae,s=Zi.transition;Zi.transition=null;try{ae=1,Zd(t,e,n,r)}finally{ae=i,Zi.transition=s}}function Iw(t,e,n,r){var i=ae,s=Zi.transition;Zi.transition=null;try{ae=4,Zd(t,e,n,r)}finally{ae=i,Zi.transition=s}}function Zd(t,e,n,r){if(Xl){var i=Ru(t,e,n,r);if(i===null)Dc(t,e,r,Zl,n),Wp(t,r);else if(jw(i,t,e,n,r))r.stopPropagation();else if(Wp(t,r),e&4&&-1<Dw.indexOf(t)){for(;i!==null;){var s=Uo(i);if(s!==null&&x0(s),s=Ru(t,e,n,r),s===null&&Dc(t,e,r,Zl,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Dc(t,e,r,null,n)}}var Zl=null;function Ru(t,e,n,r){if(Zl=null,t=Yd(r),t=Zr(t),t!==null)if(e=Mi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=u0(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Zl=t,null}function S0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(bw()){case Gd:return 1;case h0:return 4;case Gl:case Sw:return 16;case m0:return 536870912;default:return 16}default:return 16}}var gr=null,ef=null,Al=null;function C0(){if(Al)return Al;var t,e=ef,n=e.length,r,i="value"in gr?gr.value:gr.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Al=i.slice(t,1<r?1-r:void 0)}function Pl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function al(){return!0}function qp(){return!1}function Lt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?al:qp,this.isPropagationStopped=qp,this}return xe(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=al)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=al)},persist:function(){},isPersistent:al}),e}var Ss={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tf=Lt(Ss),Wo=xe({},Ss,{view:0,detail:0}),Rw=Lt(Wo),bc,Sc,Ps,_a=xe({},Wo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nf,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ps&&(Ps&&t.type==="mousemove"?(bc=t.screenX-Ps.screenX,Sc=t.screenY-Ps.screenY):Sc=bc=0,Ps=t),bc)},movementY:function(t){return"movementY"in t?t.movementY:Sc}}),Kp=Lt(_a),Lw=xe({},_a,{dataTransfer:0}),_w=Lt(Lw),$w=xe({},Wo,{relatedTarget:0}),Cc=Lt($w),Bw=xe({},Ss,{animationName:0,elapsedTime:0,pseudoElement:0}),Fw=Lt(Bw),Vw=xe({},Ss,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Hw=Lt(Vw),Ww=xe({},Ss,{data:0}),Jp=Lt(Ww),Uw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},qw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Kw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Jw(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Kw[t])?!!e[t]:!1}function nf(){return Jw}var Yw=xe({},Wo,{key:function(t){if(t.key){var e=Uw[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?qw[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nf,charCode:function(t){return t.type==="keypress"?Pl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Gw=Lt(Yw),Qw=xe({},_a,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yp=Lt(Qw),Xw=xe({},Wo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nf}),Zw=Lt(Xw),ek=xe({},Ss,{propertyName:0,elapsedTime:0,pseudoElement:0}),tk=Lt(ek),nk=xe({},_a,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),rk=Lt(nk),ik=[9,13,27,32],rf=Kn&&"CompositionEvent"in window,Qs=null;Kn&&"documentMode"in document&&(Qs=document.documentMode);var sk=Kn&&"TextEvent"in window&&!Qs,N0=Kn&&(!rf||Qs&&8<Qs&&11>=Qs),Gp=" ",Qp=!1;function M0(t,e){switch(t){case"keyup":return ik.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function E0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var _i=!1;function ok(t,e){switch(t){case"compositionend":return E0(e);case"keypress":return e.which!==32?null:(Qp=!0,Gp);case"textInput":return t=e.data,t===Gp&&Qp?null:t;default:return null}}function lk(t,e){if(_i)return t==="compositionend"||!rf&&M0(t,e)?(t=C0(),Al=ef=gr=null,_i=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return N0&&e.locale!=="ko"?null:e.data;default:return null}}var ak={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ak[t.type]:e==="textarea"}function T0(t,e,n,r){s0(r),e=ea(e,"onChange"),0<e.length&&(n=new tf("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Xs=null,vo=null;function ck(t){$0(t,0)}function $a(t){var e=Fi(t);if(Xg(e))return t}function uk(t,e){if(t==="change")return e}var O0=!1;if(Kn){var Nc;if(Kn){var Mc="oninput"in document;if(!Mc){var Zp=document.createElement("div");Zp.setAttribute("oninput","return;"),Mc=typeof Zp.oninput=="function"}Nc=Mc}else Nc=!1;O0=Nc&&(!document.documentMode||9<document.documentMode)}function eh(){Xs&&(Xs.detachEvent("onpropertychange",z0),vo=Xs=null)}function z0(t){if(t.propertyName==="value"&&$a(vo)){var e=[];T0(e,vo,t,Yd(t)),c0(ck,e)}}function dk(t,e,n){t==="focusin"?(eh(),Xs=e,vo=n,Xs.attachEvent("onpropertychange",z0)):t==="focusout"&&eh()}function fk(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return $a(vo)}function pk(t,e){if(t==="click")return $a(e)}function hk(t,e){if(t==="input"||t==="change")return $a(e)}function mk(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var pn=typeof Object.is=="function"?Object.is:mk;function wo(t,e){if(pn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!xu.call(e,i)||!pn(t[i],e[i]))return!1}return!0}function th(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function nh(t,e){var n=th(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=th(n)}}function D0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function j0(){for(var t=window,e=Kl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kl(t.document)}return e}function sf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function gk(t){var e=j0(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D0(n.ownerDocument.documentElement,n)){if(r!==null&&sf(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=nh(n,s);var o=nh(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var yk=Kn&&"documentMode"in document&&11>=document.documentMode,$i=null,Lu=null,Zs=null,_u=!1;function rh(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_u||$i==null||$i!==Kl(r)||(r=$i,"selectionStart"in r&&sf(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Zs&&wo(Zs,r)||(Zs=r,r=ea(Lu,"onSelect"),0<r.length&&(e=new tf("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=$i)))}function cl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Bi={animationend:cl("Animation","AnimationEnd"),animationiteration:cl("Animation","AnimationIteration"),animationstart:cl("Animation","AnimationStart"),transitionend:cl("Transition","TransitionEnd")},Ec={},A0={};Kn&&(A0=document.createElement("div").style,"AnimationEvent"in window||(delete Bi.animationend.animation,delete Bi.animationiteration.animation,delete Bi.animationstart.animation),"TransitionEvent"in window||delete Bi.transitionend.transition);function Ba(t){if(Ec[t])return Ec[t];if(!Bi[t])return t;var e=Bi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in A0)return Ec[t]=e[n];return t}var P0=Ba("animationend"),I0=Ba("animationiteration"),R0=Ba("animationstart"),L0=Ba("transitionend"),_0=new Map,ih="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Rr(t,e){_0.set(t,e),Ni(e,[t])}for(var Tc=0;Tc<ih.length;Tc++){var Oc=ih[Tc],xk=Oc.toLowerCase(),vk=Oc[0].toUpperCase()+Oc.slice(1);Rr(xk,"on"+vk)}Rr(P0,"onAnimationEnd");Rr(I0,"onAnimationIteration");Rr(R0,"onAnimationStart");Rr("dblclick","onDoubleClick");Rr("focusin","onFocus");Rr("focusout","onBlur");Rr(L0,"onTransitionEnd");ss("onMouseEnter",["mouseout","mouseover"]);ss("onMouseLeave",["mouseout","mouseover"]);ss("onPointerEnter",["pointerout","pointerover"]);ss("onPointerLeave",["pointerout","pointerover"]);Ni("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ni("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ni("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ni("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ni("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Us="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Us));function sh(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,xw(r,e,void 0,t),t.currentTarget=null}function $0(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;sh(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;sh(i,l,c),s=a}}}if(Yl)throw t=Au,Yl=!1,Au=null,t}function pe(t,e){var n=e[Hu];n===void 0&&(n=e[Hu]=new Set);var r=t+"__bubble";n.has(r)||(B0(e,t,2,!1),n.add(r))}function zc(t,e,n){var r=0;e&&(r|=4),B0(n,t,r,e)}var ul="_reactListening"+Math.random().toString(36).slice(2);function ko(t){if(!t[ul]){t[ul]=!0,Kg.forEach(function(n){n!=="selectionchange"&&(wk.has(n)||zc(n,!1,t),zc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ul]||(e[ul]=!0,zc("selectionchange",!1,e))}}function B0(t,e,n,r){switch(S0(e)){case 1:var i=Pw;break;case 4:i=Iw;break;default:i=Zd}n=i.bind(null,e,n,t),i=void 0,!ju||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Dc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Zr(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}c0(function(){var c=s,u=Yd(n),d=[];e:{var f=_0.get(t);if(f!==void 0){var h=tf,m=t;switch(t){case"keypress":if(Pl(n)===0)break e;case"keydown":case"keyup":h=Gw;break;case"focusin":m="focus",h=Cc;break;case"focusout":m="blur",h=Cc;break;case"beforeblur":case"afterblur":h=Cc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Kp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=_w;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=Zw;break;case P0:case I0:case R0:h=Fw;break;case L0:h=tk;break;case"scroll":h=Rw;break;case"wheel":h=rk;break;case"copy":case"cut":case"paste":h=Hw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=Yp}var y=(e&4)!==0,k=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var x=c,w;x!==null;){w=x;var v=w.stateNode;if(w.tag===5&&v!==null&&(w=v,g!==null&&(v=mo(x,g),v!=null&&y.push(bo(x,v,w)))),k)break;x=x.return}0<y.length&&(f=new h(f,m,null,n,u),d.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",h=t==="mouseout"||t==="pointerout",f&&n!==zu&&(m=n.relatedTarget||n.fromElement)&&(Zr(m)||m[Jn]))break e;if((h||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,h?(m=n.relatedTarget||n.toElement,h=c,m=m?Zr(m):null,m!==null&&(k=Mi(m),m!==k||m.tag!==5&&m.tag!==6)&&(m=null)):(h=null,m=c),h!==m)){if(y=Kp,v="onMouseLeave",g="onMouseEnter",x="mouse",(t==="pointerout"||t==="pointerover")&&(y=Yp,v="onPointerLeave",g="onPointerEnter",x="pointer"),k=h==null?f:Fi(h),w=m==null?f:Fi(m),f=new y(v,x+"leave",h,n,u),f.target=k,f.relatedTarget=w,v=null,Zr(u)===c&&(y=new y(g,x+"enter",m,n,u),y.target=w,y.relatedTarget=k,v=y),k=v,h&&m)t:{for(y=h,g=m,x=0,w=y;w;w=zi(w))x++;for(w=0,v=g;v;v=zi(v))w++;for(;0<x-w;)y=zi(y),x--;for(;0<w-x;)g=zi(g),w--;for(;x--;){if(y===g||g!==null&&y===g.alternate)break t;y=zi(y),g=zi(g)}y=null}else y=null;h!==null&&oh(d,f,h,y,!1),m!==null&&k!==null&&oh(d,k,m,y,!0)}}e:{if(f=c?Fi(c):window,h=f.nodeName&&f.nodeName.toLowerCase(),h==="select"||h==="input"&&f.type==="file")var S=uk;else if(Xp(f))if(O0)S=hk;else{S=fk;var b=dk}else(h=f.nodeName)&&h.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(S=pk);if(S&&(S=S(t,c))){T0(d,S,n,u);break e}b&&b(t,f,c),t==="focusout"&&(b=f._wrapperState)&&b.controlled&&f.type==="number"&&Nu(f,"number",f.value)}switch(b=c?Fi(c):window,t){case"focusin":(Xp(b)||b.contentEditable==="true")&&($i=b,Lu=c,Zs=null);break;case"focusout":Zs=Lu=$i=null;break;case"mousedown":_u=!0;break;case"contextmenu":case"mouseup":case"dragend":_u=!1,rh(d,n,u);break;case"selectionchange":if(yk)break;case"keydown":case"keyup":rh(d,n,u)}var C;if(rf)e:{switch(t){case"compositionstart":var M="onCompositionStart";break e;case"compositionend":M="onCompositionEnd";break e;case"compositionupdate":M="onCompositionUpdate";break e}M=void 0}else _i?M0(t,n)&&(M="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(M="onCompositionStart");M&&(N0&&n.locale!=="ko"&&(_i||M!=="onCompositionStart"?M==="onCompositionEnd"&&_i&&(C=C0()):(gr=u,ef="value"in gr?gr.value:gr.textContent,_i=!0)),b=ea(c,M),0<b.length&&(M=new Jp(M,t,null,n,u),d.push({event:M,listeners:b}),C?M.data=C:(C=E0(n),C!==null&&(M.data=C)))),(C=sk?ok(t,n):lk(t,n))&&(c=ea(c,"onBeforeInput"),0<c.length&&(u=new Jp("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=C))}$0(d,e)})}function bo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ea(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=mo(t,n),s!=null&&r.unshift(bo(t,s,i)),s=mo(t,e),s!=null&&r.push(bo(t,s,i))),t=t.return}return r}function zi(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function oh(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=mo(n,s),a!=null&&o.unshift(bo(n,a,l))):i||(a=mo(n,s),a!=null&&o.push(bo(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var kk=/\r\n?/g,bk=/\u0000|\uFFFD/g;function lh(t){return(typeof t=="string"?t:""+t).replace(kk,`
`).replace(bk,"")}function dl(t,e,n){if(e=lh(e),lh(t)!==e&&n)throw Error(j(425))}function ta(){}var $u=null,Bu=null;function Fu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Vu=typeof setTimeout=="function"?setTimeout:void 0,Sk=typeof clearTimeout=="function"?clearTimeout:void 0,ah=typeof Promise=="function"?Promise:void 0,Ck=typeof queueMicrotask=="function"?queueMicrotask:typeof ah<"u"?function(t){return ah.resolve(null).then(t).catch(Nk)}:Vu;function Nk(t){setTimeout(function(){throw t})}function jc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),xo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);xo(e)}function Cr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ch(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Cs=Math.random().toString(36).slice(2),Cn="__reactFiber$"+Cs,So="__reactProps$"+Cs,Jn="__reactContainer$"+Cs,Hu="__reactEvents$"+Cs,Mk="__reactListeners$"+Cs,Ek="__reactHandles$"+Cs;function Zr(t){var e=t[Cn];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Jn]||n[Cn]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ch(t);t!==null;){if(n=t[Cn])return n;t=ch(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[Cn]||t[Jn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Fi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(j(33))}function Fa(t){return t[So]||null}var Wu=[],Vi=-1;function Lr(t){return{current:t}}function he(t){0>Vi||(t.current=Wu[Vi],Wu[Vi]=null,Vi--)}function fe(t,e){Vi++,Wu[Vi]=t.current,t.current=e}var Pr={},rt=Lr(Pr),vt=Lr(!1),fi=Pr;function ls(t,e){var n=t.type.contextTypes;if(!n)return Pr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function wt(t){return t=t.childContextTypes,t!=null}function na(){he(vt),he(rt)}function uh(t,e,n){if(rt.current!==Pr)throw Error(j(168));fe(rt,e),fe(vt,n)}function F0(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(j(108,dw(t)||"Unknown",i));return xe({},n,r)}function ra(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pr,fi=rt.current,fe(rt,t),fe(vt,vt.current),!0}function dh(t,e,n){var r=t.stateNode;if(!r)throw Error(j(169));n?(t=F0(t,e,fi),r.__reactInternalMemoizedMergedChildContext=t,he(vt),he(rt),fe(rt,t)):he(vt),fe(vt,n)}var $n=null,Va=!1,Ac=!1;function V0(t){$n===null?$n=[t]:$n.push(t)}function Tk(t){Va=!0,V0(t)}function _r(){if(!Ac&&$n!==null){Ac=!0;var t=0,e=ae;try{var n=$n;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}$n=null,Va=!1}catch(i){throw $n!==null&&($n=$n.slice(t+1)),p0(Gd,_r),i}finally{ae=e,Ac=!1}}return null}var Hi=[],Wi=0,ia=null,sa=0,Vt=[],Ht=0,pi=null,Bn=1,Fn="";function Jr(t,e){Hi[Wi++]=sa,Hi[Wi++]=ia,ia=t,sa=e}function H0(t,e,n){Vt[Ht++]=Bn,Vt[Ht++]=Fn,Vt[Ht++]=pi,pi=t;var r=Bn;t=Fn;var i=32-dn(r)-1;r&=~(1<<i),n+=1;var s=32-dn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bn=1<<32-dn(e)+i|n<<i|r,Fn=s+t}else Bn=1<<s|n<<i|r,Fn=t}function of(t){t.return!==null&&(Jr(t,1),H0(t,1,0))}function lf(t){for(;t===ia;)ia=Hi[--Wi],Hi[Wi]=null,sa=Hi[--Wi],Hi[Wi]=null;for(;t===pi;)pi=Vt[--Ht],Vt[Ht]=null,Fn=Vt[--Ht],Vt[Ht]=null,Bn=Vt[--Ht],Vt[Ht]=null}var Dt=null,zt=null,me=!1,an=null;function W0(t,e){var n=Ut(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function fh(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Dt=t,zt=Cr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Dt=t,zt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=pi!==null?{id:Bn,overflow:Fn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ut(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Dt=t,zt=null,!0):!1;default:return!1}}function Uu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function qu(t){if(me){var e=zt;if(e){var n=e;if(!fh(t,e)){if(Uu(t))throw Error(j(418));e=Cr(n.nextSibling);var r=Dt;e&&fh(t,e)?W0(r,n):(t.flags=t.flags&-4097|2,me=!1,Dt=t)}}else{if(Uu(t))throw Error(j(418));t.flags=t.flags&-4097|2,me=!1,Dt=t}}}function ph(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Dt=t}function fl(t){if(t!==Dt)return!1;if(!me)return ph(t),me=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Fu(t.type,t.memoizedProps)),e&&(e=zt)){if(Uu(t))throw U0(),Error(j(418));for(;e;)W0(t,e),e=Cr(e.nextSibling)}if(ph(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(j(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){zt=Cr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}zt=null}}else zt=Dt?Cr(t.stateNode.nextSibling):null;return!0}function U0(){for(var t=zt;t;)t=Cr(t.nextSibling)}function as(){zt=Dt=null,me=!1}function af(t){an===null?an=[t]:an.push(t)}var Ok=Xn.ReactCurrentBatchConfig;function Is(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(j(309));var r=n.stateNode}if(!r)throw Error(j(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(j(284));if(!n._owner)throw Error(j(290,t))}return t}function pl(t,e){throw t=Object.prototype.toString.call(e),Error(j(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function hh(t){var e=t._init;return e(t._payload)}function q0(t){function e(g,x){if(t){var w=g.deletions;w===null?(g.deletions=[x],g.flags|=16):w.push(x)}}function n(g,x){if(!t)return null;for(;x!==null;)e(g,x),x=x.sibling;return null}function r(g,x){for(g=new Map;x!==null;)x.key!==null?g.set(x.key,x):g.set(x.index,x),x=x.sibling;return g}function i(g,x){return g=Tr(g,x),g.index=0,g.sibling=null,g}function s(g,x,w){return g.index=w,t?(w=g.alternate,w!==null?(w=w.index,w<x?(g.flags|=2,x):w):(g.flags|=2,x)):(g.flags|=1048576,x)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,x,w,v){return x===null||x.tag!==6?(x=Bc(w,g.mode,v),x.return=g,x):(x=i(x,w),x.return=g,x)}function a(g,x,w,v){var S=w.type;return S===Li?u(g,x,w.props.children,v,w.key):x!==null&&(x.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===cr&&hh(S)===x.type)?(v=i(x,w.props),v.ref=Is(g,x,w),v.return=g,v):(v=Fl(w.type,w.key,w.props,null,g.mode,v),v.ref=Is(g,x,w),v.return=g,v)}function c(g,x,w,v){return x===null||x.tag!==4||x.stateNode.containerInfo!==w.containerInfo||x.stateNode.implementation!==w.implementation?(x=Fc(w,g.mode,v),x.return=g,x):(x=i(x,w.children||[]),x.return=g,x)}function u(g,x,w,v,S){return x===null||x.tag!==7?(x=si(w,g.mode,v,S),x.return=g,x):(x=i(x,w),x.return=g,x)}function d(g,x,w){if(typeof x=="string"&&x!==""||typeof x=="number")return x=Bc(""+x,g.mode,w),x.return=g,x;if(typeof x=="object"&&x!==null){switch(x.$$typeof){case nl:return w=Fl(x.type,x.key,x.props,null,g.mode,w),w.ref=Is(g,null,x),w.return=g,w;case Ri:return x=Fc(x,g.mode,w),x.return=g,x;case cr:var v=x._init;return d(g,v(x._payload),w)}if(Hs(x)||zs(x))return x=si(x,g.mode,w,null),x.return=g,x;pl(g,x)}return null}function f(g,x,w,v){var S=x!==null?x.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return S!==null?null:l(g,x,""+w,v);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case nl:return w.key===S?a(g,x,w,v):null;case Ri:return w.key===S?c(g,x,w,v):null;case cr:return S=w._init,f(g,x,S(w._payload),v)}if(Hs(w)||zs(w))return S!==null?null:u(g,x,w,v,null);pl(g,w)}return null}function h(g,x,w,v,S){if(typeof v=="string"&&v!==""||typeof v=="number")return g=g.get(w)||null,l(x,g,""+v,S);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case nl:return g=g.get(v.key===null?w:v.key)||null,a(x,g,v,S);case Ri:return g=g.get(v.key===null?w:v.key)||null,c(x,g,v,S);case cr:var b=v._init;return h(g,x,w,b(v._payload),S)}if(Hs(v)||zs(v))return g=g.get(w)||null,u(x,g,v,S,null);pl(x,v)}return null}function m(g,x,w,v){for(var S=null,b=null,C=x,M=x=0,D=null;C!==null&&M<w.length;M++){C.index>M?(D=C,C=null):D=C.sibling;var E=f(g,C,w[M],v);if(E===null){C===null&&(C=D);break}t&&C&&E.alternate===null&&e(g,C),x=s(E,x,M),b===null?S=E:b.sibling=E,b=E,C=D}if(M===w.length)return n(g,C),me&&Jr(g,M),S;if(C===null){for(;M<w.length;M++)C=d(g,w[M],v),C!==null&&(x=s(C,x,M),b===null?S=C:b.sibling=C,b=C);return me&&Jr(g,M),S}for(C=r(g,C);M<w.length;M++)D=h(C,g,M,w[M],v),D!==null&&(t&&D.alternate!==null&&C.delete(D.key===null?M:D.key),x=s(D,x,M),b===null?S=D:b.sibling=D,b=D);return t&&C.forEach(function(I){return e(g,I)}),me&&Jr(g,M),S}function y(g,x,w,v){var S=zs(w);if(typeof S!="function")throw Error(j(150));if(w=S.call(w),w==null)throw Error(j(151));for(var b=S=null,C=x,M=x=0,D=null,E=w.next();C!==null&&!E.done;M++,E=w.next()){C.index>M?(D=C,C=null):D=C.sibling;var I=f(g,C,E.value,v);if(I===null){C===null&&(C=D);break}t&&C&&I.alternate===null&&e(g,C),x=s(I,x,M),b===null?S=I:b.sibling=I,b=I,C=D}if(E.done)return n(g,C),me&&Jr(g,M),S;if(C===null){for(;!E.done;M++,E=w.next())E=d(g,E.value,v),E!==null&&(x=s(E,x,M),b===null?S=E:b.sibling=E,b=E);return me&&Jr(g,M),S}for(C=r(g,C);!E.done;M++,E=w.next())E=h(C,g,M,E.value,v),E!==null&&(t&&E.alternate!==null&&C.delete(E.key===null?M:E.key),x=s(E,x,M),b===null?S=E:b.sibling=E,b=E);return t&&C.forEach(function($){return e(g,$)}),me&&Jr(g,M),S}function k(g,x,w,v){if(typeof w=="object"&&w!==null&&w.type===Li&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case nl:e:{for(var S=w.key,b=x;b!==null;){if(b.key===S){if(S=w.type,S===Li){if(b.tag===7){n(g,b.sibling),x=i(b,w.props.children),x.return=g,g=x;break e}}else if(b.elementType===S||typeof S=="object"&&S!==null&&S.$$typeof===cr&&hh(S)===b.type){n(g,b.sibling),x=i(b,w.props),x.ref=Is(g,b,w),x.return=g,g=x;break e}n(g,b);break}else e(g,b);b=b.sibling}w.type===Li?(x=si(w.props.children,g.mode,v,w.key),x.return=g,g=x):(v=Fl(w.type,w.key,w.props,null,g.mode,v),v.ref=Is(g,x,w),v.return=g,g=v)}return o(g);case Ri:e:{for(b=w.key;x!==null;){if(x.key===b)if(x.tag===4&&x.stateNode.containerInfo===w.containerInfo&&x.stateNode.implementation===w.implementation){n(g,x.sibling),x=i(x,w.children||[]),x.return=g,g=x;break e}else{n(g,x);break}else e(g,x);x=x.sibling}x=Fc(w,g.mode,v),x.return=g,g=x}return o(g);case cr:return b=w._init,k(g,x,b(w._payload),v)}if(Hs(w))return m(g,x,w,v);if(zs(w))return y(g,x,w,v);pl(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,x!==null&&x.tag===6?(n(g,x.sibling),x=i(x,w),x.return=g,g=x):(n(g,x),x=Bc(w,g.mode,v),x.return=g,g=x),o(g)):n(g,x)}return k}var cs=q0(!0),K0=q0(!1),oa=Lr(null),la=null,Ui=null,cf=null;function uf(){cf=Ui=la=null}function df(t){var e=oa.current;he(oa),t._currentValue=e}function Ku(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function es(t,e){la=t,cf=Ui=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(xt=!0),t.firstContext=null)}function Qt(t){var e=t._currentValue;if(cf!==t)if(t={context:t,memoizedValue:e,next:null},Ui===null){if(la===null)throw Error(j(308));Ui=t,la.dependencies={lanes:0,firstContext:t}}else Ui=Ui.next=t;return e}var ei=null;function ff(t){ei===null?ei=[t]:ei.push(t)}function J0(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,ff(e)):(n.next=i.next,i.next=n),e.interleaved=n,Yn(t,r)}function Yn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ur=!1;function pf(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Y0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Wn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Nr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,re&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Yn(t,n)}return i=r.interleaved,i===null?(e.next=e,ff(r)):(e.next=i.next,i.next=e),r.interleaved=e,Yn(t,n)}function Il(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qd(t,n)}}function mh(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function aa(t,e,n,r){var i=t.updateQueue;ur=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,u=c=a=null,l=s;do{var f=l.lane,h=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:h,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var m=t,y=l;switch(f=e,h=n,y.tag){case 1:if(m=y.payload,typeof m=="function"){d=m.call(h,d,f);break e}d=m;break e;case 3:m.flags=m.flags&-65537|128;case 0:if(m=y.payload,f=typeof m=="function"?m.call(h,d,f):m,f==null)break e;d=xe({},d,f);break e;case 2:ur=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else h={eventTime:h,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=h,a=d):u=u.next=h,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(u===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);mi|=o,t.lanes=o,t.memoizedState=d}}function gh(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(j(191,i));i.call(r)}}}var qo={},En=Lr(qo),Co=Lr(qo),No=Lr(qo);function ti(t){if(t===qo)throw Error(j(174));return t}function hf(t,e){switch(fe(No,e),fe(Co,t),fe(En,qo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Eu(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Eu(e,t)}he(En),fe(En,e)}function us(){he(En),he(Co),he(No)}function G0(t){ti(No.current);var e=ti(En.current),n=Eu(e,t.type);e!==n&&(fe(Co,t),fe(En,n))}function mf(t){Co.current===t&&(he(En),he(Co))}var ge=Lr(0);function ca(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Pc=[];function gf(){for(var t=0;t<Pc.length;t++)Pc[t]._workInProgressVersionPrimary=null;Pc.length=0}var Rl=Xn.ReactCurrentDispatcher,Ic=Xn.ReactCurrentBatchConfig,hi=0,ye=null,je=null,Le=null,ua=!1,eo=!1,Mo=0,zk=0;function Ze(){throw Error(j(321))}function yf(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!pn(t[n],e[n]))return!1;return!0}function xf(t,e,n,r,i,s){if(hi=s,ye=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Rl.current=t===null||t.memoizedState===null?Pk:Ik,t=n(r,i),eo){s=0;do{if(eo=!1,Mo=0,25<=s)throw Error(j(301));s+=1,Le=je=null,e.updateQueue=null,Rl.current=Rk,t=n(r,i)}while(eo)}if(Rl.current=da,e=je!==null&&je.next!==null,hi=0,Le=je=ye=null,ua=!1,e)throw Error(j(300));return t}function vf(){var t=Mo!==0;return Mo=0,t}function kn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Le===null?ye.memoizedState=Le=t:Le=Le.next=t,Le}function Xt(){if(je===null){var t=ye.alternate;t=t!==null?t.memoizedState:null}else t=je.next;var e=Le===null?ye.memoizedState:Le.next;if(e!==null)Le=e,je=t;else{if(t===null)throw Error(j(310));je=t,t={memoizedState:je.memoizedState,baseState:je.baseState,baseQueue:je.baseQueue,queue:je.queue,next:null},Le===null?ye.memoizedState=Le=t:Le=Le.next=t}return Le}function Eo(t,e){return typeof e=="function"?e(t):e}function Rc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((hi&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ye.lanes|=u,mi|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,pn(r,e.memoizedState)||(xt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ye.lanes|=s,mi|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Lc(t){var e=Xt(),n=e.queue;if(n===null)throw Error(j(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);pn(s,e.memoizedState)||(xt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Q0(){}function X0(t,e){var n=ye,r=Xt(),i=e(),s=!pn(r.memoizedState,i);if(s&&(r.memoizedState=i,xt=!0),r=r.queue,wf(ty.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Le!==null&&Le.memoizedState.tag&1){if(n.flags|=2048,To(9,ey.bind(null,n,r,i,e),void 0,null),Be===null)throw Error(j(349));hi&30||Z0(n,e,i)}return i}function Z0(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function ey(t,e,n,r){e.value=n,e.getSnapshot=r,ny(e)&&ry(t)}function ty(t,e,n){return n(function(){ny(e)&&ry(t)})}function ny(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!pn(t,n)}catch{return!0}}function ry(t){var e=Yn(t,1);e!==null&&fn(e,t,1,-1)}function yh(t){var e=kn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Eo,lastRenderedState:t},e.queue=t,t=t.dispatch=Ak.bind(null,ye,t),[e.memoizedState,t]}function To(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ye.updateQueue,e===null?(e={lastEffect:null,stores:null},ye.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function iy(){return Xt().memoizedState}function Ll(t,e,n,r){var i=kn();ye.flags|=t,i.memoizedState=To(1|e,n,void 0,r===void 0?null:r)}function Ha(t,e,n,r){var i=Xt();r=r===void 0?null:r;var s=void 0;if(je!==null){var o=je.memoizedState;if(s=o.destroy,r!==null&&yf(r,o.deps)){i.memoizedState=To(e,n,s,r);return}}ye.flags|=t,i.memoizedState=To(1|e,n,s,r)}function xh(t,e){return Ll(8390656,8,t,e)}function wf(t,e){return Ha(2048,8,t,e)}function sy(t,e){return Ha(4,2,t,e)}function oy(t,e){return Ha(4,4,t,e)}function ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ay(t,e,n){return n=n!=null?n.concat([t]):null,Ha(4,4,ly.bind(null,e,t),n)}function kf(){}function cy(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yf(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function uy(t,e){var n=Xt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&yf(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function dy(t,e,n){return hi&21?(pn(n,e)||(n=g0(),ye.lanes|=n,mi|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,xt=!0),t.memoizedState=n)}function Dk(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=Ic.transition;Ic.transition={};try{t(!1),e()}finally{ae=n,Ic.transition=r}}function fy(){return Xt().memoizedState}function jk(t,e,n){var r=Er(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},py(t))hy(e,n);else if(n=J0(t,e,n,r),n!==null){var i=ct();fn(n,t,r,i),my(n,e,r)}}function Ak(t,e,n){var r=Er(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(py(t))hy(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,pn(l,o)){var a=e.interleaved;a===null?(i.next=i,ff(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=J0(t,e,i,r),n!==null&&(i=ct(),fn(n,t,r,i),my(n,e,r))}}function py(t){var e=t.alternate;return t===ye||e!==null&&e===ye}function hy(t,e){eo=ua=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function my(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Qd(t,n)}}var da={readContext:Qt,useCallback:Ze,useContext:Ze,useEffect:Ze,useImperativeHandle:Ze,useInsertionEffect:Ze,useLayoutEffect:Ze,useMemo:Ze,useReducer:Ze,useRef:Ze,useState:Ze,useDebugValue:Ze,useDeferredValue:Ze,useTransition:Ze,useMutableSource:Ze,useSyncExternalStore:Ze,useId:Ze,unstable_isNewReconciler:!1},Pk={readContext:Qt,useCallback:function(t,e){return kn().memoizedState=[t,e===void 0?null:e],t},useContext:Qt,useEffect:xh,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ll(4194308,4,ly.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ll(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ll(4,2,t,e)},useMemo:function(t,e){var n=kn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=kn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=jk.bind(null,ye,t),[r.memoizedState,t]},useRef:function(t){var e=kn();return t={current:t},e.memoizedState=t},useState:yh,useDebugValue:kf,useDeferredValue:function(t){return kn().memoizedState=t},useTransition:function(){var t=yh(!1),e=t[0];return t=Dk.bind(null,t[1]),kn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ye,i=kn();if(me){if(n===void 0)throw Error(j(407));n=n()}else{if(n=e(),Be===null)throw Error(j(349));hi&30||Z0(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,xh(ty.bind(null,r,s,t),[t]),r.flags|=2048,To(9,ey.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=kn(),e=Be.identifierPrefix;if(me){var n=Fn,r=Bn;n=(r&~(1<<32-dn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Mo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=zk++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Ik={readContext:Qt,useCallback:cy,useContext:Qt,useEffect:wf,useImperativeHandle:ay,useInsertionEffect:sy,useLayoutEffect:oy,useMemo:uy,useReducer:Rc,useRef:iy,useState:function(){return Rc(Eo)},useDebugValue:kf,useDeferredValue:function(t){var e=Xt();return dy(e,je.memoizedState,t)},useTransition:function(){var t=Rc(Eo)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:X0,useId:fy,unstable_isNewReconciler:!1},Rk={readContext:Qt,useCallback:cy,useContext:Qt,useEffect:wf,useImperativeHandle:ay,useInsertionEffect:sy,useLayoutEffect:oy,useMemo:uy,useReducer:Lc,useRef:iy,useState:function(){return Lc(Eo)},useDebugValue:kf,useDeferredValue:function(t){var e=Xt();return je===null?e.memoizedState=t:dy(e,je.memoizedState,t)},useTransition:function(){var t=Lc(Eo)[0],e=Xt().memoizedState;return[t,e]},useMutableSource:Q0,useSyncExternalStore:X0,useId:fy,unstable_isNewReconciler:!1};function on(t,e){if(t&&t.defaultProps){e=xe({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ju(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:xe({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wa={isMounted:function(t){return(t=t._reactInternals)?Mi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=ct(),i=Er(t),s=Wn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Nr(t,s,i),e!==null&&(fn(e,t,i,r),Il(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=ct(),i=Er(t),s=Wn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Nr(t,s,i),e!==null&&(fn(e,t,i,r),Il(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=ct(),r=Er(t),i=Wn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Nr(t,i,r),e!==null&&(fn(e,t,r,n),Il(e,t,r))}};function vh(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wo(n,r)||!wo(i,s):!0}function gy(t,e,n){var r=!1,i=Pr,s=e.contextType;return typeof s=="object"&&s!==null?s=Qt(s):(i=wt(e)?fi:rt.current,r=e.contextTypes,s=(r=r!=null)?ls(t,i):Pr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wa,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function wh(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wa.enqueueReplaceState(e,e.state,null)}function Yu(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pf(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Qt(s):(s=wt(e)?fi:rt.current,i.context=ls(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ju(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wa.enqueueReplaceState(i,i.state,null),aa(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function ds(t,e){try{var n="",r=e;do n+=uw(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function _c(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Gu(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Lk=typeof WeakMap=="function"?WeakMap:Map;function yy(t,e,n){n=Wn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pa||(pa=!0,od=r),Gu(t,e)},n}function xy(t,e,n){n=Wn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Gu(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Gu(t,e),typeof r!="function"&&(Mr===null?Mr=new Set([this]):Mr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function kh(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new Lk;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Qk.bind(null,t,e,n),e.then(t,t))}function bh(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Sh(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Wn(-1,1),e.tag=2,Nr(n,e,1))),n.lanes|=1),t)}var _k=Xn.ReactCurrentOwner,xt=!1;function at(t,e,n,r){e.child=t===null?K0(e,null,n,r):cs(e,t.child,n,r)}function Ch(t,e,n,r,i){n=n.render;var s=e.ref;return es(e,i),r=xf(t,e,n,r,s,i),n=vf(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gn(t,e,i)):(me&&n&&of(e),e.flags|=1,at(t,e,r,i),e.child)}function Nh(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Of(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,vy(t,e,s,r,i)):(t=Fl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wo,n(o,r)&&t.ref===e.ref)return Gn(t,e,i)}return e.flags|=1,t=Tr(s,r),t.ref=e.ref,t.return=e,e.child=t}function vy(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wo(s,r)&&t.ref===e.ref)if(xt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(xt=!0);else return e.lanes=t.lanes,Gn(t,e,i)}return Qu(t,e,n,r,i)}function wy(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},fe(Ki,Tt),Tt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,fe(Ki,Tt),Tt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,fe(Ki,Tt),Tt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,fe(Ki,Tt),Tt|=r;return at(t,e,i,n),e.child}function ky(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Qu(t,e,n,r,i){var s=wt(n)?fi:rt.current;return s=ls(e,s),es(e,i),n=xf(t,e,n,r,s,i),r=vf(),t!==null&&!xt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Gn(t,e,i)):(me&&r&&of(e),e.flags|=1,at(t,e,n,i),e.child)}function Mh(t,e,n,r,i){if(wt(n)){var s=!0;ra(e)}else s=!1;if(es(e,i),e.stateNode===null)_l(t,e),gy(e,n,r),Yu(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=Qt(c):(c=wt(n)?fi:rt.current,c=ls(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&wh(e,o,r,c),ur=!1;var f=e.memoizedState;o.state=f,aa(e,r,o,i),a=e.memoizedState,l!==r||f!==a||vt.current||ur?(typeof u=="function"&&(Ju(e,n,u,r),a=e.memoizedState),(l=ur||vh(e,n,l,r,f,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Y0(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:on(e.type,l),o.props=c,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=Qt(a):(a=wt(n)?fi:rt.current,a=ls(e,a));var h=n.getDerivedStateFromProps;(u=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&wh(e,o,r,a),ur=!1,f=e.memoizedState,o.state=f,aa(e,r,o,i);var m=e.memoizedState;l!==d||f!==m||vt.current||ur?(typeof h=="function"&&(Ju(e,n,h,r),m=e.memoizedState),(c=ur||vh(e,n,c,r,f,m,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,m,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,m,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=m),o.props=r,o.state=m,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Xu(t,e,n,r,s,i)}function Xu(t,e,n,r,i,s){ky(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&dh(e,n,!1),Gn(t,e,s);r=e.stateNode,_k.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=cs(e,t.child,null,s),e.child=cs(e,null,l,s)):at(t,e,l,s),e.memoizedState=r.state,i&&dh(e,n,!0),e.child}function by(t){var e=t.stateNode;e.pendingContext?uh(t,e.pendingContext,e.pendingContext!==e.context):e.context&&uh(t,e.context,!1),hf(t,e.containerInfo)}function Eh(t,e,n,r,i){return as(),af(i),e.flags|=256,at(t,e,n,r),e.child}var Zu={dehydrated:null,treeContext:null,retryLane:0};function ed(t){return{baseLanes:t,cachePool:null,transitions:null}}function Sy(t,e,n){var r=e.pendingProps,i=ge.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),fe(ge,i&1),t===null)return qu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ka(o,r,0,null),t=si(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ed(n),e.memoizedState=Zu,t):bf(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return $k(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Tr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Tr(l,s):(s=si(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ed(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Zu,r}return s=t.child,t=s.sibling,r=Tr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function bf(t,e){return e=Ka({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hl(t,e,n,r){return r!==null&&af(r),cs(e,t.child,null,n),t=bf(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function $k(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=_c(Error(j(422))),hl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ka({mode:"visible",children:r.children},i,0,null),s=si(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&cs(e,t.child,null,o),e.child.memoizedState=ed(o),e.memoizedState=Zu,s);if(!(e.mode&1))return hl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(j(419)),r=_c(s,r,void 0),hl(t,e,o,r)}if(l=(o&t.childLanes)!==0,xt||l){if(r=Be,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Yn(t,i),fn(r,t,i,-1))}return Tf(),r=_c(Error(j(421))),hl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Xk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,zt=Cr(i.nextSibling),Dt=e,me=!0,an=null,t!==null&&(Vt[Ht++]=Bn,Vt[Ht++]=Fn,Vt[Ht++]=pi,Bn=t.id,Fn=t.overflow,pi=e),e=bf(e,r.children),e.flags|=4096,e)}function Th(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ku(t.return,e,n)}function $c(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Cy(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(at(t,e,r.children,n),r=ge.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Th(t,n,e);else if(t.tag===19)Th(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(fe(ge,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&ca(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),$c(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&ca(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}$c(e,!0,n,null,s);break;case"together":$c(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Gn(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),mi|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(j(153));if(e.child!==null){for(t=e.child,n=Tr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Tr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Bk(t,e,n){switch(e.tag){case 3:by(e),as();break;case 5:G0(e);break;case 1:wt(e.type)&&ra(e);break;case 4:hf(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;fe(oa,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(fe(ge,ge.current&1),e.flags|=128,null):n&e.child.childLanes?Sy(t,e,n):(fe(ge,ge.current&1),t=Gn(t,e,n),t!==null?t.sibling:null);fe(ge,ge.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return Cy(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),fe(ge,ge.current),r)break;return null;case 22:case 23:return e.lanes=0,wy(t,e,n)}return Gn(t,e,n)}var Ny,td,My,Ey;Ny=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};td=function(){};My=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ti(En.current);var s=null;switch(n){case"input":i=Su(t,i),r=Su(t,r),s=[];break;case"select":i=xe({},i,{value:void 0}),r=xe({},r,{value:void 0}),s=[];break;case"textarea":i=Mu(t,i),r=Mu(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ta)}Tu(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(po.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(po.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&pe("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};Ey=function(t,e,n,r){n!==r&&(e.flags|=4)};function Rs(t,e){if(!me)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function et(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Fk(t,e,n){var r=e.pendingProps;switch(lf(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return et(e),null;case 1:return wt(e.type)&&na(),et(e),null;case 3:return r=e.stateNode,us(),he(vt),he(rt),gf(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(fl(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,an!==null&&(cd(an),an=null))),td(t,e),et(e),null;case 5:mf(e);var i=ti(No.current);if(n=e.type,t!==null&&e.stateNode!=null)My(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(j(166));return et(e),null}if(t=ti(En.current),fl(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Cn]=e,r[So]=s,t=(e.mode&1)!==0,n){case"dialog":pe("cancel",r),pe("close",r);break;case"iframe":case"object":case"embed":pe("load",r);break;case"video":case"audio":for(i=0;i<Us.length;i++)pe(Us[i],r);break;case"source":pe("error",r);break;case"img":case"image":case"link":pe("error",r),pe("load",r);break;case"details":pe("toggle",r);break;case"input":Lp(r,s),pe("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},pe("invalid",r);break;case"textarea":$p(r,s),pe("invalid",r)}Tu(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&dl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&dl(r.textContent,l,t),i=["children",""+l]):po.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&pe("scroll",r)}switch(n){case"input":rl(r),_p(r,s,!0);break;case"textarea":rl(r),Bp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ta)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=t0(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Cn]=e,t[So]=r,Ny(t,e,!1,!1),e.stateNode=t;e:{switch(o=Ou(n,r),n){case"dialog":pe("cancel",t),pe("close",t),i=r;break;case"iframe":case"object":case"embed":pe("load",t),i=r;break;case"video":case"audio":for(i=0;i<Us.length;i++)pe(Us[i],t);i=r;break;case"source":pe("error",t),i=r;break;case"img":case"image":case"link":pe("error",t),pe("load",t),i=r;break;case"details":pe("toggle",t),i=r;break;case"input":Lp(t,r),i=Su(t,r),pe("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=xe({},r,{value:void 0}),pe("invalid",t);break;case"textarea":$p(t,r),i=Mu(t,r),pe("invalid",t);break;default:i=r}Tu(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?i0(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&n0(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&ho(t,a):typeof a=="number"&&ho(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(po.hasOwnProperty(s)?a!=null&&s==="onScroll"&&pe("scroll",t):a!=null&&Ud(t,s,a,o))}switch(n){case"input":rl(t),_p(t,r,!1);break;case"textarea":rl(t),Bp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ar(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Gi(t,!!r.multiple,s,!1):r.defaultValue!=null&&Gi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ta)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return et(e),null;case 6:if(t&&e.stateNode!=null)Ey(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(j(166));if(n=ti(No.current),ti(En.current),fl(e)){if(r=e.stateNode,n=e.memoizedProps,r[Cn]=e,(s=r.nodeValue!==n)&&(t=Dt,t!==null))switch(t.tag){case 3:dl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&dl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Cn]=e,e.stateNode=r}return et(e),null;case 13:if(he(ge),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(me&&zt!==null&&e.mode&1&&!(e.flags&128))U0(),as(),e.flags|=98560,s=!1;else if(s=fl(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(j(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(j(317));s[Cn]=e}else as(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;et(e),s=!1}else an!==null&&(cd(an),an=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ge.current&1?Pe===0&&(Pe=3):Tf())),e.updateQueue!==null&&(e.flags|=4),et(e),null);case 4:return us(),td(t,e),t===null&&ko(e.stateNode.containerInfo),et(e),null;case 10:return df(e.type._context),et(e),null;case 17:return wt(e.type)&&na(),et(e),null;case 19:if(he(ge),s=e.memoizedState,s===null)return et(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Rs(s,!1);else{if(Pe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=ca(t),o!==null){for(e.flags|=128,Rs(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return fe(ge,ge.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ce()>fs&&(e.flags|=128,r=!0,Rs(s,!1),e.lanes=4194304)}else{if(!r)if(t=ca(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Rs(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!me)return et(e),null}else 2*Ce()-s.renderingStartTime>fs&&n!==1073741824&&(e.flags|=128,r=!0,Rs(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ce(),e.sibling=null,n=ge.current,fe(ge,r?n&1|2:n&1),e):(et(e),null);case 22:case 23:return Ef(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?Tt&1073741824&&(et(e),e.subtreeFlags&6&&(e.flags|=8192)):et(e),null;case 24:return null;case 25:return null}throw Error(j(156,e.tag))}function Vk(t,e){switch(lf(e),e.tag){case 1:return wt(e.type)&&na(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return us(),he(vt),he(rt),gf(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mf(e),null;case 13:if(he(ge),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(j(340));as()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return he(ge),null;case 4:return us(),null;case 10:return df(e.type._context),null;case 22:case 23:return Ef(),null;case 24:return null;default:return null}}var ml=!1,nt=!1,Hk=typeof WeakSet=="function"?WeakSet:Set,B=null;function qi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){we(t,e,r)}else n.current=null}function nd(t,e,n){try{n()}catch(r){we(t,e,r)}}var Oh=!1;function Wk(t,e){if($u=Xl,t=j0(),sf(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var h;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(h=d.firstChild)!==null;)f=d,d=h;for(;;){if(d===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++u===r&&(a=o),(h=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=h}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Bu={focusedElem:t,selectionRange:n},Xl=!1,B=e;B!==null;)if(e=B,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,B=t;else for(;B!==null;){e=B;try{var m=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(m!==null){var y=m.memoizedProps,k=m.memoizedState,g=e.stateNode,x=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:on(e.type,y),k);g.__reactInternalSnapshotBeforeUpdate=x}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(j(163))}}catch(v){we(e,e.return,v)}if(t=e.sibling,t!==null){t.return=e.return,B=t;break}B=e.return}return m=Oh,Oh=!1,m}function to(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&nd(e,n,s)}i=i.next}while(i!==r)}}function Ua(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function rd(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Ty(t){var e=t.alternate;e!==null&&(t.alternate=null,Ty(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Cn],delete e[So],delete e[Hu],delete e[Mk],delete e[Ek])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Oy(t){return t.tag===5||t.tag===3||t.tag===4}function zh(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Oy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function id(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ta));else if(r!==4&&(t=t.child,t!==null))for(id(t,e,n),t=t.sibling;t!==null;)id(t,e,n),t=t.sibling}function sd(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(sd(t,e,n),t=t.sibling;t!==null;)sd(t,e,n),t=t.sibling}var Ue=null,ln=!1;function or(t,e,n){for(n=n.child;n!==null;)zy(t,e,n),n=n.sibling}function zy(t,e,n){if(Mn&&typeof Mn.onCommitFiberUnmount=="function")try{Mn.onCommitFiberUnmount(La,n)}catch{}switch(n.tag){case 5:nt||qi(n,e);case 6:var r=Ue,i=ln;Ue=null,or(t,e,n),Ue=r,ln=i,Ue!==null&&(ln?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(ln?(t=Ue,n=n.stateNode,t.nodeType===8?jc(t.parentNode,n):t.nodeType===1&&jc(t,n),xo(t)):jc(Ue,n.stateNode));break;case 4:r=Ue,i=ln,Ue=n.stateNode.containerInfo,ln=!0,or(t,e,n),Ue=r,ln=i;break;case 0:case 11:case 14:case 15:if(!nt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&nd(n,e,o),i=i.next}while(i!==r)}or(t,e,n);break;case 1:if(!nt&&(qi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){we(n,e,l)}or(t,e,n);break;case 21:or(t,e,n);break;case 22:n.mode&1?(nt=(r=nt)||n.memoizedState!==null,or(t,e,n),nt=r):or(t,e,n);break;default:or(t,e,n)}}function Dh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hk),e.forEach(function(r){var i=Zk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function sn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,ln=!1;break e;case 3:Ue=l.stateNode.containerInfo,ln=!0;break e;case 4:Ue=l.stateNode.containerInfo,ln=!0;break e}l=l.return}if(Ue===null)throw Error(j(160));zy(s,o,i),Ue=null,ln=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){we(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Dy(e,t),e=e.sibling}function Dy(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(sn(e,t),wn(t),r&4){try{to(3,t,t.return),Ua(3,t)}catch(y){we(t,t.return,y)}try{to(5,t,t.return)}catch(y){we(t,t.return,y)}}break;case 1:sn(e,t),wn(t),r&512&&n!==null&&qi(n,n.return);break;case 5:if(sn(e,t),wn(t),r&512&&n!==null&&qi(n,n.return),t.flags&32){var i=t.stateNode;try{ho(i,"")}catch(y){we(t,t.return,y)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Zg(i,s),Ou(l,o);var c=Ou(l,s);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?i0(i,d):u==="dangerouslySetInnerHTML"?n0(i,d):u==="children"?ho(i,d):Ud(i,u,d,c)}switch(l){case"input":Cu(i,s);break;case"textarea":e0(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Gi(i,!!s.multiple,h,!1):f!==!!s.multiple&&(s.defaultValue!=null?Gi(i,!!s.multiple,s.defaultValue,!0):Gi(i,!!s.multiple,s.multiple?[]:"",!1))}i[So]=s}catch(y){we(t,t.return,y)}}break;case 6:if(sn(e,t),wn(t),r&4){if(t.stateNode===null)throw Error(j(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(y){we(t,t.return,y)}}break;case 3:if(sn(e,t),wn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{xo(e.containerInfo)}catch(y){we(t,t.return,y)}break;case 4:sn(e,t),wn(t);break;case 13:sn(e,t),wn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Nf=Ce())),r&4&&Dh(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(nt=(c=nt)||u,sn(e,t),nt=c):sn(e,t),wn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(B=t,u=t.child;u!==null;){for(d=B=u;B!==null;){switch(f=B,h=f.child,f.tag){case 0:case 11:case 14:case 15:to(4,f,f.return);break;case 1:qi(f,f.return);var m=f.stateNode;if(typeof m.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,m.props=e.memoizedProps,m.state=e.memoizedState,m.componentWillUnmount()}catch(y){we(r,n,y)}}break;case 5:qi(f,f.return);break;case 22:if(f.memoizedState!==null){Ah(d);continue}}h!==null?(h.return=f,B=h):Ah(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=r0("display",o))}catch(y){we(t,t.return,y)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(y){we(t,t.return,y)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:sn(e,t),wn(t),r&4&&Dh(t);break;case 21:break;default:sn(e,t),wn(t)}}function wn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Oy(n)){var r=n;break e}n=n.return}throw Error(j(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(ho(i,""),r.flags&=-33);var s=zh(t);sd(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=zh(t);id(t,l,o);break;default:throw Error(j(161))}}catch(a){we(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Uk(t,e,n){B=t,jy(t)}function jy(t,e,n){for(var r=(t.mode&1)!==0;B!==null;){var i=B,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||ml;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||nt;l=ml;var c=nt;if(ml=o,(nt=a)&&!c)for(B=i;B!==null;)o=B,a=o.child,o.tag===22&&o.memoizedState!==null?Ph(i):a!==null?(a.return=o,B=a):Ph(i);for(;s!==null;)B=s,jy(s),s=s.sibling;B=i,ml=l,nt=c}jh(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,B=s):jh(t)}}function jh(t){for(;B!==null;){var e=B;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:nt||Ua(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!nt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:on(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&gh(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}gh(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&xo(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(j(163))}nt||e.flags&512&&rd(e)}catch(f){we(e,e.return,f)}}if(e===t){B=null;break}if(n=e.sibling,n!==null){n.return=e.return,B=n;break}B=e.return}}function Ah(t){for(;B!==null;){var e=B;if(e===t){B=null;break}var n=e.sibling;if(n!==null){n.return=e.return,B=n;break}B=e.return}}function Ph(t){for(;B!==null;){var e=B;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Ua(4,e)}catch(a){we(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){we(e,i,a)}}var s=e.return;try{rd(e)}catch(a){we(e,s,a)}break;case 5:var o=e.return;try{rd(e)}catch(a){we(e,o,a)}}}catch(a){we(e,e.return,a)}if(e===t){B=null;break}var l=e.sibling;if(l!==null){l.return=e.return,B=l;break}B=e.return}}var qk=Math.ceil,fa=Xn.ReactCurrentDispatcher,Sf=Xn.ReactCurrentOwner,Kt=Xn.ReactCurrentBatchConfig,re=0,Be=null,Ee=null,Ye=0,Tt=0,Ki=Lr(0),Pe=0,Oo=null,mi=0,qa=0,Cf=0,no=null,yt=null,Nf=0,fs=1/0,Ln=null,pa=!1,od=null,Mr=null,gl=!1,yr=null,ha=0,ro=0,ld=null,$l=-1,Bl=0;function ct(){return re&6?Ce():$l!==-1?$l:$l=Ce()}function Er(t){return t.mode&1?re&2&&Ye!==0?Ye&-Ye:Ok.transition!==null?(Bl===0&&(Bl=g0()),Bl):(t=ae,t!==0||(t=window.event,t=t===void 0?16:S0(t.type)),t):1}function fn(t,e,n,r){if(50<ro)throw ro=0,ld=null,Error(j(185));Ho(t,n,r),(!(re&2)||t!==Be)&&(t===Be&&(!(re&2)&&(qa|=n),Pe===4&&hr(t,Ye)),kt(t,r),n===1&&re===0&&!(e.mode&1)&&(fs=Ce()+500,Va&&_r()))}function kt(t,e){var n=t.callbackNode;Ow(t,e);var r=Ql(t,t===Be?Ye:0);if(r===0)n!==null&&Hp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Hp(n),e===1)t.tag===0?Tk(Ih.bind(null,t)):V0(Ih.bind(null,t)),Ck(function(){!(re&6)&&_r()}),n=null;else{switch(y0(r)){case 1:n=Gd;break;case 4:n=h0;break;case 16:n=Gl;break;case 536870912:n=m0;break;default:n=Gl}n=By(n,Ay.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Ay(t,e){if($l=-1,Bl=0,re&6)throw Error(j(327));var n=t.callbackNode;if(ts()&&t.callbackNode!==n)return null;var r=Ql(t,t===Be?Ye:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=ma(t,r);else{e=r;var i=re;re|=2;var s=Iy();(Be!==t||Ye!==e)&&(Ln=null,fs=Ce()+500,ii(t,e));do try{Yk();break}catch(l){Py(t,l)}while(!0);uf(),fa.current=s,re=i,Ee!==null?e=0:(Be=null,Ye=0,e=Pe)}if(e!==0){if(e===2&&(i=Pu(t),i!==0&&(r=i,e=ad(t,i))),e===1)throw n=Oo,ii(t,0),hr(t,r),kt(t,Ce()),n;if(e===6)hr(t,r);else{if(i=t.current.alternate,!(r&30)&&!Kk(i)&&(e=ma(t,r),e===2&&(s=Pu(t),s!==0&&(r=s,e=ad(t,s))),e===1))throw n=Oo,ii(t,0),hr(t,r),kt(t,Ce()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(j(345));case 2:Yr(t,yt,Ln);break;case 3:if(hr(t,r),(r&130023424)===r&&(e=Nf+500-Ce(),10<e)){if(Ql(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){ct(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Vu(Yr.bind(null,t,yt,Ln),e);break}Yr(t,yt,Ln);break;case 4:if(hr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-dn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ce()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*qk(r/1960))-r,10<r){t.timeoutHandle=Vu(Yr.bind(null,t,yt,Ln),r);break}Yr(t,yt,Ln);break;case 5:Yr(t,yt,Ln);break;default:throw Error(j(329))}}}return kt(t,Ce()),t.callbackNode===n?Ay.bind(null,t):null}function ad(t,e){var n=no;return t.current.memoizedState.isDehydrated&&(ii(t,e).flags|=256),t=ma(t,e),t!==2&&(e=yt,yt=n,e!==null&&cd(e)),t}function cd(t){yt===null?yt=t:yt.push.apply(yt,t)}function Kk(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!pn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function hr(t,e){for(e&=~Cf,e&=~qa,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-dn(e),r=1<<n;t[n]=-1,e&=~r}}function Ih(t){if(re&6)throw Error(j(327));ts();var e=Ql(t,0);if(!(e&1))return kt(t,Ce()),null;var n=ma(t,e);if(t.tag!==0&&n===2){var r=Pu(t);r!==0&&(e=r,n=ad(t,r))}if(n===1)throw n=Oo,ii(t,0),hr(t,e),kt(t,Ce()),n;if(n===6)throw Error(j(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yr(t,yt,Ln),kt(t,Ce()),null}function Mf(t,e){var n=re;re|=1;try{return t(e)}finally{re=n,re===0&&(fs=Ce()+500,Va&&_r())}}function gi(t){yr!==null&&yr.tag===0&&!(re&6)&&ts();var e=re;re|=1;var n=Kt.transition,r=ae;try{if(Kt.transition=null,ae=1,t)return t()}finally{ae=r,Kt.transition=n,re=e,!(re&6)&&_r()}}function Ef(){Tt=Ki.current,he(Ki)}function ii(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,Sk(n)),Ee!==null)for(n=Ee.return;n!==null;){var r=n;switch(lf(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&na();break;case 3:us(),he(vt),he(rt),gf();break;case 5:mf(r);break;case 4:us();break;case 13:he(ge);break;case 19:he(ge);break;case 10:df(r.type._context);break;case 22:case 23:Ef()}n=n.return}if(Be=t,Ee=t=Tr(t.current,null),Ye=Tt=e,Pe=0,Oo=null,Cf=qa=mi=0,yt=no=null,ei!==null){for(e=0;e<ei.length;e++)if(n=ei[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}ei=null}return t}function Py(t,e){do{var n=Ee;try{if(uf(),Rl.current=da,ua){for(var r=ye.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ua=!1}if(hi=0,Le=je=ye=null,eo=!1,Mo=0,Sf.current=null,n===null||n.return===null){Pe=1,Oo=e,Ee=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ye,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var h=bh(o);if(h!==null){h.flags&=-257,Sh(h,o,l,s,e),h.mode&1&&kh(s,c,e),e=h,a=c;var m=e.updateQueue;if(m===null){var y=new Set;y.add(a),e.updateQueue=y}else m.add(a);break e}else{if(!(e&1)){kh(s,c,e),Tf();break e}a=Error(j(426))}}else if(me&&l.mode&1){var k=bh(o);if(k!==null){!(k.flags&65536)&&(k.flags|=256),Sh(k,o,l,s,e),af(ds(a,l));break e}}s=a=ds(a,l),Pe!==4&&(Pe=2),no===null?no=[s]:no.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=yy(s,a,e);mh(s,g);break e;case 1:l=a;var x=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof x.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Mr===null||!Mr.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var v=xy(s,l,e);mh(s,v);break e}}s=s.return}while(s!==null)}Ly(n)}catch(S){e=S,Ee===n&&n!==null&&(Ee=n=n.return);continue}break}while(!0)}function Iy(){var t=fa.current;return fa.current=da,t===null?da:t}function Tf(){(Pe===0||Pe===3||Pe===2)&&(Pe=4),Be===null||!(mi&268435455)&&!(qa&268435455)||hr(Be,Ye)}function ma(t,e){var n=re;re|=2;var r=Iy();(Be!==t||Ye!==e)&&(Ln=null,ii(t,e));do try{Jk();break}catch(i){Py(t,i)}while(!0);if(uf(),re=n,fa.current=r,Ee!==null)throw Error(j(261));return Be=null,Ye=0,Pe}function Jk(){for(;Ee!==null;)Ry(Ee)}function Yk(){for(;Ee!==null&&!ww();)Ry(Ee)}function Ry(t){var e=$y(t.alternate,t,Tt);t.memoizedProps=t.pendingProps,e===null?Ly(t):Ee=e,Sf.current=null}function Ly(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Vk(n,e),n!==null){n.flags&=32767,Ee=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Pe=6,Ee=null;return}}else if(n=Fk(n,e,Tt),n!==null){Ee=n;return}if(e=e.sibling,e!==null){Ee=e;return}Ee=e=t}while(e!==null);Pe===0&&(Pe=5)}function Yr(t,e,n){var r=ae,i=Kt.transition;try{Kt.transition=null,ae=1,Gk(t,e,n,r)}finally{Kt.transition=i,ae=r}return null}function Gk(t,e,n,r){do ts();while(yr!==null);if(re&6)throw Error(j(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(j(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(zw(t,s),t===Be&&(Ee=Be=null,Ye=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||gl||(gl=!0,By(Gl,function(){return ts(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Kt.transition,Kt.transition=null;var o=ae;ae=1;var l=re;re|=4,Sf.current=null,Wk(t,n),Dy(n,t),gk(Bu),Xl=!!$u,Bu=$u=null,t.current=n,Uk(n),kw(),re=l,ae=o,Kt.transition=s}else t.current=n;if(gl&&(gl=!1,yr=t,ha=i),s=t.pendingLanes,s===0&&(Mr=null),Cw(n.stateNode),kt(t,Ce()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pa)throw pa=!1,t=od,od=null,t;return ha&1&&t.tag!==0&&ts(),s=t.pendingLanes,s&1?t===ld?ro++:(ro=0,ld=t):ro=0,_r(),null}function ts(){if(yr!==null){var t=y0(ha),e=Kt.transition,n=ae;try{if(Kt.transition=null,ae=16>t?16:t,yr===null)var r=!1;else{if(t=yr,yr=null,ha=0,re&6)throw Error(j(331));var i=re;for(re|=4,B=t.current;B!==null;){var s=B,o=s.child;if(B.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(B=c;B!==null;){var u=B;switch(u.tag){case 0:case 11:case 15:to(8,u,s)}var d=u.child;if(d!==null)d.return=u,B=d;else for(;B!==null;){u=B;var f=u.sibling,h=u.return;if(Ty(u),u===c){B=null;break}if(f!==null){f.return=h,B=f;break}B=h}}}var m=s.alternate;if(m!==null){var y=m.child;if(y!==null){m.child=null;do{var k=y.sibling;y.sibling=null,y=k}while(y!==null)}}B=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,B=o;else e:for(;B!==null;){if(s=B,s.flags&2048)switch(s.tag){case 0:case 11:case 15:to(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,B=g;break e}B=s.return}}var x=t.current;for(B=x;B!==null;){o=B;var w=o.child;if(o.subtreeFlags&2064&&w!==null)w.return=o,B=w;else e:for(o=x;B!==null;){if(l=B,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ua(9,l)}}catch(S){we(l,l.return,S)}if(l===o){B=null;break e}var v=l.sibling;if(v!==null){v.return=l.return,B=v;break e}B=l.return}}if(re=i,_r(),Mn&&typeof Mn.onPostCommitFiberRoot=="function")try{Mn.onPostCommitFiberRoot(La,t)}catch{}r=!0}return r}finally{ae=n,Kt.transition=e}}return!1}function Rh(t,e,n){e=ds(n,e),e=yy(t,e,1),t=Nr(t,e,1),e=ct(),t!==null&&(Ho(t,1,e),kt(t,e))}function we(t,e,n){if(t.tag===3)Rh(t,t,n);else for(;e!==null;){if(e.tag===3){Rh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Mr===null||!Mr.has(r))){t=ds(n,t),t=xy(e,t,1),e=Nr(e,t,1),t=ct(),e!==null&&(Ho(e,1,t),kt(e,t));break}}e=e.return}}function Qk(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=ct(),t.pingedLanes|=t.suspendedLanes&n,Be===t&&(Ye&n)===n&&(Pe===4||Pe===3&&(Ye&130023424)===Ye&&500>Ce()-Nf?ii(t,0):Cf|=n),kt(t,e)}function _y(t,e){e===0&&(t.mode&1?(e=ol,ol<<=1,!(ol&130023424)&&(ol=4194304)):e=1);var n=ct();t=Yn(t,e),t!==null&&(Ho(t,e,n),kt(t,n))}function Xk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),_y(t,n)}function Zk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(j(314))}r!==null&&r.delete(e),_y(t,n)}var $y;$y=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||vt.current)xt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return xt=!1,Bk(t,e,n);xt=!!(t.flags&131072)}else xt=!1,me&&e.flags&1048576&&H0(e,sa,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;_l(t,e),t=e.pendingProps;var i=ls(e,rt.current);es(e,n),i=xf(null,e,r,t,i,n);var s=vf();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,wt(r)?(s=!0,ra(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pf(e),i.updater=Wa,e.stateNode=i,i._reactInternals=e,Yu(e,r,t,n),e=Xu(null,e,r,!0,s,n)):(e.tag=0,me&&s&&of(e),at(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=tb(r),t=on(r,t),i){case 0:e=Qu(null,e,r,t,n);break e;case 1:e=Mh(null,e,r,t,n);break e;case 11:e=Ch(null,e,r,t,n);break e;case 14:e=Nh(null,e,r,on(r.type,t),n);break e}throw Error(j(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),Qu(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),Mh(t,e,r,i,n);case 3:e:{if(by(e),t===null)throw Error(j(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Y0(t,e),aa(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=ds(Error(j(423)),e),e=Eh(t,e,r,n,i);break e}else if(r!==i){i=ds(Error(j(424)),e),e=Eh(t,e,r,n,i);break e}else for(zt=Cr(e.stateNode.containerInfo.firstChild),Dt=e,me=!0,an=null,n=K0(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(as(),r===i){e=Gn(t,e,n);break e}at(t,e,r,n)}e=e.child}return e;case 5:return G0(e),t===null&&qu(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Fu(r,i)?o=null:s!==null&&Fu(r,s)&&(e.flags|=32),ky(t,e),at(t,e,o,n),e.child;case 6:return t===null&&qu(e),null;case 13:return Sy(t,e,n);case 4:return hf(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=cs(e,null,r,n):at(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),Ch(t,e,r,i,n);case 7:return at(t,e,e.pendingProps,n),e.child;case 8:return at(t,e,e.pendingProps.children,n),e.child;case 12:return at(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,fe(oa,r._currentValue),r._currentValue=o,s!==null)if(pn(s.value,o)){if(s.children===i.children&&!vt.current){e=Gn(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=Wn(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ku(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(j(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ku(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}at(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,es(e,n),i=Qt(i),r=r(i),e.flags|=1,at(t,e,r,n),e.child;case 14:return r=e.type,i=on(r,e.pendingProps),i=on(r.type,i),Nh(t,e,r,i,n);case 15:return vy(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:on(r,i),_l(t,e),e.tag=1,wt(r)?(t=!0,ra(e)):t=!1,es(e,n),gy(e,r,i),Yu(e,r,i,n),Xu(null,e,r,!0,t,n);case 19:return Cy(t,e,n);case 22:return wy(t,e,n)}throw Error(j(156,e.tag))};function By(t,e){return p0(t,e)}function eb(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ut(t,e,n,r){return new eb(t,e,n,r)}function Of(t){return t=t.prototype,!(!t||!t.isReactComponent)}function tb(t){if(typeof t=="function")return Of(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kd)return 11;if(t===Jd)return 14}return 2}function Tr(t,e){var n=t.alternate;return n===null?(n=Ut(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Of(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Li:return si(n.children,i,s,e);case qd:o=8,i|=8;break;case vu:return t=Ut(12,n,e,i|2),t.elementType=vu,t.lanes=s,t;case wu:return t=Ut(13,n,e,i),t.elementType=wu,t.lanes=s,t;case ku:return t=Ut(19,n,e,i),t.elementType=ku,t.lanes=s,t;case Gg:return Ka(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Jg:o=10;break e;case Yg:o=9;break e;case Kd:o=11;break e;case Jd:o=14;break e;case cr:o=16,r=null;break e}throw Error(j(130,t==null?t:typeof t,""))}return e=Ut(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function si(t,e,n,r){return t=Ut(7,t,r,e),t.lanes=n,t}function Ka(t,e,n,r){return t=Ut(22,t,r,e),t.elementType=Gg,t.lanes=n,t.stateNode={isHidden:!1},t}function Bc(t,e,n){return t=Ut(6,t,null,e),t.lanes=n,t}function Fc(t,e,n){return e=Ut(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function nb(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=kc(0),this.expirationTimes=kc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=kc(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zf(t,e,n,r,i,s,o,l,a){return t=new nb(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ut(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pf(s),t}function rb(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ri,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Fy(t){if(!t)return Pr;t=t._reactInternals;e:{if(Mi(t)!==t||t.tag!==1)throw Error(j(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(wt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(j(171))}if(t.tag===1){var n=t.type;if(wt(n))return F0(t,n,e)}return e}function Vy(t,e,n,r,i,s,o,l,a){return t=zf(n,r,!0,t,i,s,o,l,a),t.context=Fy(null),n=t.current,r=ct(),i=Er(n),s=Wn(r,i),s.callback=e??null,Nr(n,s,i),t.current.lanes=i,Ho(t,i,r),kt(t,r),t}function Ja(t,e,n,r){var i=e.current,s=ct(),o=Er(i);return n=Fy(n),e.context===null?e.context=n:e.pendingContext=n,e=Wn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Nr(i,e,o),t!==null&&(fn(t,i,o,s),Il(t,i,o)),o}function ga(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Lh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Df(t,e){Lh(t,e),(t=t.alternate)&&Lh(t,e)}function ib(){return null}var Hy=typeof reportError=="function"?reportError:function(t){console.error(t)};function jf(t){this._internalRoot=t}Ya.prototype.render=jf.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(j(409));Ja(t,e,null,null)};Ya.prototype.unmount=jf.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;gi(function(){Ja(null,t,null,null)}),e[Jn]=null}};function Ya(t){this._internalRoot=t}Ya.prototype.unstable_scheduleHydration=function(t){if(t){var e=w0();t={blockedOn:null,target:t,priority:e};for(var n=0;n<pr.length&&e!==0&&e<pr[n].priority;n++);pr.splice(n,0,t),n===0&&b0(t)}};function Af(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ga(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _h(){}function sb(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=ga(o);s.call(c)}}var o=Vy(e,r,t,0,null,!1,!1,"",_h);return t._reactRootContainer=o,t[Jn]=o.current,ko(t.nodeType===8?t.parentNode:t),gi(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=ga(a);l.call(c)}}var a=zf(t,0,!1,null,null,!1,!1,"",_h);return t._reactRootContainer=a,t[Jn]=a.current,ko(t.nodeType===8?t.parentNode:t),gi(function(){Ja(e,a,n,r)}),a}function Qa(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ga(o);l.call(a)}}Ja(e,o,t,i)}else o=sb(n,e,t,i,r);return ga(o)}x0=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ws(e.pendingLanes);n!==0&&(Qd(e,n|1),kt(e,Ce()),!(re&6)&&(fs=Ce()+500,_r()))}break;case 13:gi(function(){var r=Yn(t,1);if(r!==null){var i=ct();fn(r,t,1,i)}}),Df(t,1)}};Xd=function(t){if(t.tag===13){var e=Yn(t,134217728);if(e!==null){var n=ct();fn(e,t,134217728,n)}Df(t,134217728)}};v0=function(t){if(t.tag===13){var e=Er(t),n=Yn(t,e);if(n!==null){var r=ct();fn(n,t,e,r)}Df(t,e)}};w0=function(){return ae};k0=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Du=function(t,e,n){switch(e){case"input":if(Cu(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Fa(r);if(!i)throw Error(j(90));Xg(r),Cu(r,i)}}}break;case"textarea":e0(t,n);break;case"select":e=n.value,e!=null&&Gi(t,!!n.multiple,e,!1)}};l0=Mf;a0=gi;var ob={usingClientEntryPoint:!1,Events:[Uo,Fi,Fa,s0,o0,Mf]},Ls={findFiberByHostInstance:Zr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lb={bundleType:Ls.bundleType,version:Ls.version,rendererPackageName:Ls.rendererPackageName,rendererConfig:Ls.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Xn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=d0(t),t===null?null:t.stateNode},findFiberByHostInstance:Ls.findFiberByHostInstance||ib,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var yl=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!yl.isDisabled&&yl.supportsFiber)try{La=yl.inject(lb),Mn=yl}catch{}}Rt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ob;Rt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Af(e))throw Error(j(200));return rb(t,e,null,n)};Rt.createRoot=function(t,e){if(!Af(t))throw Error(j(299));var n=!1,r="",i=Hy;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zf(t,1,!1,null,null,n,!1,r,i),t[Jn]=e.current,ko(t.nodeType===8?t.parentNode:t),new jf(e)};Rt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(j(188)):(t=Object.keys(t).join(","),Error(j(268,t)));return t=d0(e),t=t===null?null:t.stateNode,t};Rt.flushSync=function(t){return gi(t)};Rt.hydrate=function(t,e,n){if(!Ga(e))throw Error(j(200));return Qa(null,t,e,!0,n)};Rt.hydrateRoot=function(t,e,n){if(!Af(t))throw Error(j(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Hy;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Vy(e,null,t,1,n??null,i,!1,s,o),t[Jn]=e.current,ko(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Ya(e)};Rt.render=function(t,e,n){if(!Ga(e))throw Error(j(200));return Qa(null,t,e,!1,n)};Rt.unmountComponentAtNode=function(t){if(!Ga(t))throw Error(j(40));return t._reactRootContainer?(gi(function(){Qa(null,null,t,!1,function(){t._reactRootContainer=null,t[Jn]=null})}),!0):!1};Rt.unstable_batchedUpdates=Mf;Rt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ga(n))throw Error(j(200));if(t==null||t._reactInternals===void 0)throw Error(j(38));return Qa(t,e,n,!1,r)};Rt.version="18.3.1-next-f1338f8080-20240426";function Wy(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wy)}catch(t){console.error(t)}}Wy(),Wg.exports=Rt;var Uy=Wg.exports;const ab=jg(Uy);var $h=Uy;yu.createRoot=$h.createRoot,yu.hydrateRoot=$h.hydrateRoot;function qe(t){this.content=t}qe.prototype={constructor:qe,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new qe(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new qe(n)},addToStart:function(t,e){return new qe([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new qe(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new qe(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=qe.from(t),t.size?new qe(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=qe.from(t),t.size?new qe(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=qe.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};qe.from=function(t){if(t instanceof qe)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new qe(e)};function qy(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=qy(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function Ky(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=t.child(--i),l=e.child(--s),a=o.nodeSize;if(o==l){n-=a,r-=a;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let c=0,u=Math.min(o.text.length,l.text.length);for(;c<u&&o.text[o.text.length-c-1]==l.text[l.text.length-c-1];)c++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let c=Ky(o.content,l.content,n-1,r-1);if(c)return c}n-=a,r-=a}}class z{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let a=this.content[o],c=l+a.nodeSize;if(c>e&&r(a,i+l,s||null,o)!==!1&&a.content.size){let u=l+1;a.nodesBetween(Math.max(0,e-u),Math.min(a.content.size,n-u),r,i+u)}l=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",o=!0;return this.nodesBetween(e,n,(l,a)=>{let c=l.isText?l.text.slice(Math.max(e,a)-a,n-a):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&c||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=c},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new z(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,o=0;o<n;s++){let l=this.content[s],a=o+l.nodeSize;a>e&&((o<e||a>n)&&(l.isText?l=l.cut(Math.max(0,e-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,e-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=a}return new z(r,i)}cutByIndex(e,n){return e==n?z.empty:e==0&&n==this.content.length?this:new z(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new z(i,s)}addToStart(e){return new z([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new z(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return qy(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return Ky(this,e,n,r)}findIndex(e){if(e==0)return xl(0,e);if(e==this.size)return xl(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?xl(n+1,s):xl(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return z.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new z(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return z.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new z(n||e,r)}static from(e){if(!e)return z.empty;if(e instanceof z)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new z([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}z.empty=new z([],0);const Vc={index:0,offset:0};function xl(t,e){return Vc.index=t,Vc.offset=e,Vc}function ya(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!ya(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!ya(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let de=class ud{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ya(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ud.none;if(e instanceof ud)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};de.none=[];class xa extends Error{}class _{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=Yy(this.content,e+this.openStart,n);return r&&new _(r,this.openStart,this.openEnd)}removeBetween(e,n){return new _(Jy(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return _.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new _(z.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new _(e,r,i)}}_.empty=new _(z.empty,0,0);function Jy(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:o,offset:l}=t.findIndex(n);if(i==e||s.isText){if(l!=n&&!t.child(o).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(Jy(s.content,e-i-1,n-i-1)))}function Yy(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),o=t.maybeChild(i);if(s==e||o.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let l=Yy(o.content,e-s-1,n,o);return l&&t.replaceChild(i,o.copy(l))}function cb(t,e,n){if(n.openStart>t.depth)throw new xa("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new xa("Inconsistent open depths");return Gy(t,e,n,0)}function Gy(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let o=Gy(t,e,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let o=t.parent,l=o.content;return li(o,l.cut(0,t.parentOffset).append(n.content).append(l.cut(e.parentOffset)))}else{let{start:o,end:l}=ub(n,t);return li(s,Xy(t,o,l,e,r))}else return li(s,va(t,e,r))}function Qy(t,e){if(!e.type.compatibleContent(t.type))throw new xa("Cannot join "+e.type.name+" onto "+t.type.name)}function dd(t,e,n){let r=t.node(n);return Qy(r,e.node(n)),r}function oi(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function io(t,e,n,r){let i=(e||t).node(n),s=0,o=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(oi(t.nodeAfter,r),s++));for(let l=s;l<o;l++)oi(i.child(l),r);e&&e.depth==n&&e.textOffset&&oi(e.nodeBefore,r)}function li(t,e){return t.type.checkContent(e),t.copy(e)}function Xy(t,e,n,r,i){let s=t.depth>i&&dd(t,e,i+1),o=r.depth>i&&dd(n,r,i+1),l=[];return io(null,t,i,l),s&&o&&e.index(i)==n.index(i)?(Qy(s,o),oi(li(s,Xy(t,e,n,r,i+1)),l)):(s&&oi(li(s,va(t,e,i+1)),l),io(e,n,i,l),o&&oi(li(o,va(n,r,i+1)),l)),io(r,null,i,l),new z(l)}function va(t,e,n){let r=[];if(io(null,t,n,r),t.depth>n){let i=dd(t,e,n+1);oi(li(i,va(t,e,n+1)),r)}return io(e,null,n,r),new z(r)}function ub(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(z.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class zo{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return de.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new wa(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=e;;){let{index:l,offset:a}=o.content.findIndex(s),c=s-a;if(r.push(o,l,i+a),!c||(o=o.child(l),o.isText))break;s=c-1,i+=a+1}return new zo(n,r,s)}static resolveCached(e,n){let r=Bh.get(e);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Bh.set(e,r=new db);let i=r.elts[r.i]=zo.resolve(e,n);return r.i=(r.i+1)%fb,i}}class db{constructor(){this.elts=[],this.i=0}}const fb=12,Bh=new WeakMap;class wa{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const pb=Object.create(null);let Or=class fd{constructor(e,n,r,i=de.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||z.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&ya(this.attrs,n||e.defaultAttrs||pb)&&de.sameSet(this.marks,r||de.none)}copy(e=null){return e==this.content?this:new fd(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new fd(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return _.empty;let i=this.resolve(e),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),c=i.node(o).content.cut(i.pos-l,s.pos-l);return new _(c,i.depth-o,s.depth-o)}replace(e,n,r){return cb(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return zo.resolveCached(this,e)}resolveNoCache(e){return zo.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),Zy(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=z.empty,i=0,s=r.childCount){let o=this.contentMatchAt(e).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let a=i;a<s;a++)if(!this.type.allowsMarks(r.child(a).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=de.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!de.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=z.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Or.prototype.text=void 0;class ka extends Or{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):Zy(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new ka(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new ka(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function Zy(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class yi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new hb(e,n);if(r.next==null)return yi.empty;let i=ex(r);r.next&&r.err("Unexpected trailing text");let s=kb(wb(i));return bb(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(o,l){let a=o.matchFragment(e,r);if(a&&(!n||a.validEnd))return z.from(l.map(c=>c.createAndFill()));for(let c=0;c<o.next.length;c++){let{type:u,next:d}=o.next[c];if(!(u.isText||u.hasRequiredAttrs())&&i.indexOf(d)==-1){i.push(d);let f=s(d,l.concat(u));if(f)return f}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:a}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||a.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+e.indexOf(r.next[o].next);return s}).join(`
`)}}yi.empty=new yi(!0);class hb{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function ex(t){let e=[];do e.push(mb(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function mb(t){let e=[];do e.push(gb(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function gb(t){let e=vb(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=yb(t,e);else break;return e}function Fh(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function yb(t,e){let n=Fh(t),r=n;return t.eat(",")&&(t.next!="}"?r=Fh(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function xb(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(e)&&i.push(o)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function vb(t){if(t.eat("(")){let e=ex(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=xb(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function wb(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(o,l,a){let c={term:a,to:l};return e[o].push(c),c}function i(o,l){o.forEach(a=>a.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((a,c)=>a.concat(s(c,l)),[]);if(o.type=="seq")for(let a=0;;a++){let c=s(o.exprs[a],l);if(a==o.exprs.length-1)return c;i(c,l=n())}else if(o.type=="star"){let a=n();return r(l,a),i(s(o.expr,a),a),[r(a)]}else if(o.type=="plus"){let a=n();return i(s(o.expr,l),a),i(s(o.expr,a),a),[r(a)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let a=l;for(let c=0;c<o.min;c++){let u=n();i(s(o.expr,a),u),a=u}if(o.max==-1)i(s(o.expr,a),a);else for(let c=o.min;c<o.max;c++){let u=n();r(a,u),i(s(o.expr,a),u),a=u}return[r(a)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function tx(t,e){return e-t}function Vh(t,e){let n=[];return r(e),n.sort(tx);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:a}=s[o];!l&&n.indexOf(a)==-1&&r(a)}}}function kb(t){let e=Object.create(null);return n(Vh(t,0));function n(r){let i=[];r.forEach(o=>{t[o].forEach(({term:l,to:a})=>{if(!l)return;let c;for(let u=0;u<i.length;u++)i[u][0]==l&&(c=i[u][1]);Vh(t,a).forEach(u=>{c||i.push([l,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let s=e[r.join(",")]=new yi(r.indexOf(t.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(tx);s.next.push({type:i[o][0],next:e[l.join(",")]||n(l)})}return s}}function bb(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:a,next:c}=i.next[l];o.push(a.name),s&&!(a.isText||a.hasRequiredAttrs())&&(s=!1),r.indexOf(c)==-1&&r.push(c)}s&&e.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function nx(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function rx(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function ix(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function sx(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new Cb(t,r,e[r]);return n}let Hh=class ox{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=sx(e,r.attrs),this.defaultAttrs=nx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==yi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:rx(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Or(this,this.computeAttrs(e),z.from(n),de.setFrom(r))}createChecked(e=null,n,r){return n=z.from(n),this.checkContent(n),new Or(this,this.computeAttrs(e),n,de.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=z.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(z.empty,!0);return s?new Or(this,e,n.append(s),de.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){ix(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:de.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,o)=>r[s]=new ox(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function Sb(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class Cb{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?Sb(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Xa{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=sx(e,i.attrs),this.excluded=null;let s=nx(this.attrs);this.instance=s?new de(this,s):null}create(e=null){return!e&&this.instance?this.instance:new de(this,rx(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,o)=>r[s]=new Xa(s,i++,n,o)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){ix(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class lx{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=qe.from(e.nodes),n.marks=qe.from(e.marks||{}),this.nodes=Hh.compile(this.spec.nodes,this),this.marks=Xa.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=yi.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?Wh(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:Wh(this,o.split(" "))}this.nodeFromJSON=i=>Or.fromJSON(this,i),this.markFromJSON=i=>de.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Hh){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new ka(r,r.defaultAttrs,e,de.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function Wh(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],o=s;if(s)n.push(s);else for(let l in t.marks){let a=t.marks[l];(i=="_"||a.spec.group&&a.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=a)}if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function Nb(t){return t.tag!=null}function Mb(t){return t.style!=null}let so=class pd{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(Nb(i))this.tags.push(i);else if(Mb(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new qh(this,n,!1);return r.addAll(e,de.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new qh(this,n,!0);return r.addAll(e,de.none,n.from,n.to),_.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(Ob(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(e);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(e)!=0||o.context&&!r.matchesContext(o.context)||l.length>e.length&&(l.charCodeAt(e.length)!=61||l.slice(e.length+1)!=n))){if(o.getAttrs){let a=o.getAttrs(n);if(a===!1)continue;o.attrs=a||void 0}return o}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Kh(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Kh(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new pd(e,pd.schemaRules(e)))}};const ax={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},Eb={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},cx={ol:!0,ul:!0},Do=1,hd=2,oo=4;function Uh(t,e,n){return e!=null?(e?Do:0)|(e==="full"?hd:0):t&&t.whitespace=="pre"?Do|hd:n&~oo}class vl{constructor(e,n,r,i,s,o){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=de.none,this.match=s||(o&oo?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(z.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Do)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=z.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(z.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!ax.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class qh{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=Uh(null,n.preserveWhitespace,0)|(r?oo:0);i?s=new vl(i.type,i.attrs,de.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new vl(null,null,de.none,!0,null,o):s=new vl(e.schema.topNodeType,null,de.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&hd?"full":this.localPreserveWS||(i.options&Do)>0,{schema:o}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(o.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(o.linebreakReplacement.create())){let l=r.split(/\r?\n|\r/);for(let a=0;a<l.length;a++)a&&this.insertNode(o.linebreakReplacement.create(),n,!0),l[a]&&this.insertNode(o.text(l[a]),n,!/\S/.test(l[a]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let l=i.content[i.content.length-1],a=e.previousSibling;(!l||a&&a.nodeName=="BR"||l.isText&&/[ \t\r\n\u000c]$/.test(l.text))&&(r=r.slice(1))}r&&this.insertNode(o.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let o=e.nodeName.toLowerCase(),l;cx.hasOwnProperty(o)&&this.parser.normalizeLists&&Tb(e);let a=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(l=this.parser.matchTag(e,this,r));e:if(a?a.ignore:Eb.hasOwnProperty(o))this.findInside(e),this.ignoreFallback(e,n);else if(!a||a.skip||a.closeParent){a&&a.closeParent?this.open=Math.max(0,this.open-1):a&&a.skip.nodeType&&(e=a.skip);let c,u=this.needsBlock;if(ax.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),c=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let d=a&&a.skip?n:this.readStyles(e,n);d&&this.addAll(e,d),c&&this.sync(s),this.needsBlock=u}else{let c=this.readStyles(e,n);c&&this.addElementByRule(e,a,c,a.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let a=this.parser.matchStyle(s,o,this,l);if(!a)break;if(a.ignore)return null;if(a.clearMark?n=n.filter(c=>!a.clearMark(c)):n=n.concat(this.parser.schema.marks[a.mark].create(a.attrs)),a.consuming===!1)l=a;else break}}return n}addElementByRule(e,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let a=this.enter(o,n.attrs||null,r,n.preserveWhitespace);a&&(s=!0,r=a)}else{let a=this.parser.schema.marks[n.mark];r=r.concat(a.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(a=>this.insertNode(a,r,!1));else{let a=e;typeof n.contentElement=="string"?a=e.querySelector(n.contentElement):typeof n.contentElement=="function"?a=n.contentElement(e):n.contentElement&&(a=n.contentElement),this.findAround(e,a,!0),this.addAll(a,r),this.findAround(e,a,!1)}s&&this.sync(l)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let o=r?e.childNodes[r]:e.firstChild,l=i==null?null:e.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(o,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let a=this.nodes[o],c=a.findWrapping(e);if(c&&(!i||i.length>c.length+l)&&(i=c,s=a,!c.length))break;if(a.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let o=de.none;for(let l of i.concat(e.marks))(s.type?s.type.allowsMarkType(l.type):Jh(l.type,e.type))&&(o=l.addToSet(o));return s.content.push(e.mark(o)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(e);let l=Uh(e,s,o.options);o.options&oo&&o.content.length==0&&(l|=oo);let a=de.none;return r=r.filter(c=>(o.type?o.type.allowsMarkType(c.type):Jh(c.type,e))?(a=c.addToSet(a),!1):!0),this.nodes.push(new vl(e,n,a,i,null,l)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Do)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,a)=>{for(;l>=0;l--){let c=n[l];if(c==""){if(l==n.length-1||l==0)continue;for(;a>=s;a--)if(o(l-1,a))return!0;return!1}else{let u=a>0||a==0&&i?this.nodes[a].type:r&&a>=s?r.node(a-s).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;a--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function Tb(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&cx.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function Ob(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function Kh(t){let e={};for(let n in t)e[n]=t[n];return e}function Jh(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],o=l=>{s.push(l);for(let a=0;a<l.edgeCount;a++){let{type:c,next:u}=l.edge(a);if(c==e||s.indexOf(u)<0&&o(u))return!0}};if(o(i.contentMatch))return!0}}class Ei{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=Hc(n).createDocumentFragment());let i=r,s=[];return e.forEach(o=>{if(s.length||o.marks.length){let l=0,a=0;for(;l<s.length&&a<o.marks.length;){let c=o.marks[a];if(!this.marks[c.type.name]){a++;continue}if(!c.eq(s[l][0])||c.type.spec.spanning===!1)break;l++,a++}for(;l<s.length;)i=s.pop()[1];for(;a<o.marks.length;){let c=o.marks[a++],u=this.serializeMark(c,o.isInline,n);u&&(s.push([c,i]),i.appendChild(u.dom),i=u.contentDOM||u.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Vl(Hc(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Vl(Hc(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Vl(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ei(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=Yh(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return Yh(e.marks)}}function Yh(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function Hc(t){return t.document||window.document}const Gh=new WeakMap;function zb(t){let e=Gh.get(t);return e===void 0&&Gh.set(t,e=Db(t)),e}function Db(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Vl(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=zb(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,a=n?t.createElementNS(n,i):t.createElement(i),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let f=d.indexOf(" ");f>0?a.setAttributeNS(d.slice(0,f),d.slice(f+1),c[d]):d=="style"&&a.style?a.style.cssText=c[d]:a.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let f=e[d];if(f===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:a,contentDOM:a}}else{let{dom:h,contentDOM:m}=Vl(t,f,n,r);if(a.appendChild(h),m){if(l)throw new RangeError("Multiple content holes");l=m}}}return{dom:a,contentDOM:l}}const ux=65535,dx=Math.pow(2,16);function jb(t,e){return t+e*dx}function Qh(t){return t&ux}function Ab(t){return(t-(t&ux))/dx}const fx=1,px=2,Hl=4,hx=8;class md{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&hx)>0}get deletedBefore(){return(this.delInfo&(fx|Hl))>0}get deletedAfter(){return(this.delInfo&(px|Hl))>0}get deletedAcross(){return(this.delInfo&Hl)>0}}class Ot{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Ot.empty)return Ot.empty}recover(e){let n=0,r=Qh(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+Ab(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?i:0);if(a>e)break;let c=this.ranges[l+s],u=this.ranges[l+o],d=a+c;if(e<=d){let f=c?e==a?-1:e==d?1:n:n,h=a+i+(f<0?0:u);if(r)return h;let m=e==(n<0?a:d)?null:jb(l/3,e-a),y=e==a?px:e==d?fx:Hl;return(n<0?e!=a:e!=d)&&(y|=hx),new md(h,y,m)}i+=u-c}return r?e+i:new md(e+i,0,null)}touches(e,n){let r=0,i=Qh(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let a=this.ranges[l]-(this.inverted?r:0);if(a>e)break;let c=this.ranges[l+s],u=a+c;if(e<=u&&l==i*3)return!0;r+=this.ranges[l+o]-c}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),a=o+(this.inverted?0:s),c=this.ranges[i+n],u=this.ranges[i+r];e(l,l+c,a,a+u),s+=u-c}}invert(){return new Ot(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Ot.empty:new Ot(e<0?[0,-e,0]:[0,0,e])}}Ot.empty=new Ot([]);class jo{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new jo(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new jo;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(e,n);if(l.recover!=null){let a=this.getMirror(s);if(a!=null&&a>s&&a<this.to){s=a,e=this._maps[a].recover(l.recover);continue}}i|=l.delInfo,e=l.pos}return r?e:new md(e,i,null)}}const Wc=Object.create(null);class ot{getMap(){return Ot.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Wc[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Wc)throw new RangeError("Duplicate use of step JSON ID "+e);return Wc[e]=n,n.prototype.jsonID=e,n}}class Te{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Te(e,null)}static fail(e){return new Te(null,e)}static fromReplace(e,n,r,i){try{return Te.ok(e.replace(n,r,i))}catch(s){if(s instanceof xa)return Te.fail(s.message);throw s}}}function Pf(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Pf(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return z.fromArray(r)}class xr extends ot{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new _(Pf(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,s)}invert(){return new Nn(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new xr(n.pos,r.pos,this.mark)}merge(e){return e instanceof xr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new xr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new xr(n.from,n.to,e.markFromJSON(n.mark))}}ot.jsonID("addMark",xr);class Nn extends ot{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new _(Pf(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Te.fromReplace(e,this.from,this.to,r)}invert(){return new xr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Nn(n.pos,r.pos,this.mark)}merge(e){return e instanceof Nn&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Nn(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Nn(n.from,n.to,e.markFromJSON(n.mark))}}ot.jsonID("removeMark",Nn);class vr extends ot{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new _(z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new vr(this.pos,n.marks[i]);return new vr(this.pos,this.mark)}}return new xi(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new vr(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new vr(n.pos,e.markFromJSON(n.mark))}}ot.jsonID("addNodeMark",vr);class xi extends ot{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Te.fromReplace(e,this.pos,this.pos+1,new _(z.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new vr(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new xi(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new xi(n.pos,e.markFromJSON(n.mark))}}ot.jsonID("removeNodeMark",xi);class _e extends ot{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&gd(e,this.from,this.to)?Te.fail("Structure replace would overwrite content"):Te.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Ot([this.from,this.to-this.from,this.slice.size])}invert(e){return new _e(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new _e(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof _e)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?_.empty:new _(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new _e(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?_.empty:new _(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new _e(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new _e(n.from,n.to,_.fromJSON(e,n.slice),!!n.structure)}}ot.jsonID("replace",_e);class Fe extends ot{constructor(e,n,r,i,s,o,l=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(e){if(this.structure&&(gd(e,this.from,this.gapFrom)||gd(e,this.gapTo,this.to)))return Te.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Te.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Te.fromReplace(e,this.from,this.to,r):Te.fail("Content does not fit in gap")}getMap(){return new Ot([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Fe(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Fe(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Fe(n.from,n.to,n.gapFrom,n.gapTo,_.fromJSON(e,n.slice),n.insert,!!n.structure)}}ot.jsonID("replaceAround",Fe);function gd(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function Pb(t,e,n,r){let i=[],s=[],o,l;t.doc.nodesBetween(e,n,(a,c,u)=>{if(!a.isInline)return;let d=a.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let f=Math.max(c,e),h=Math.min(c+a.nodeSize,n),m=r.addToSet(d);for(let y=0;y<d.length;y++)d[y].isInSet(m)||(o&&o.to==f&&o.mark.eq(d[y])?o.to=h:i.push(o=new Nn(f,h,d[y])));l&&l.to==f?l.to=h:s.push(l=new xr(f,h,r))}}),i.forEach(a=>t.step(a)),s.forEach(a=>t.step(a))}function Ib(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(o,l)=>{if(!o.isInline)return;s++;let a=null;if(r instanceof Xa){let c=o.marks,u;for(;u=r.isInSet(c);)(a||(a=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(o.marks)&&(a=[r]):a=o.marks;if(a&&a.length){let c=Math.min(l+o.nodeSize,n);for(let u=0;u<a.length;u++){let d=a[u],f;for(let h=0;h<i.length;h++){let m=i[h];m.step==s-1&&d.eq(i[h].style)&&(f=m)}f?(f.to=c,f.step=s):i.push({style:d,from:Math.max(l,e),to:c,step:s})}}}),i.forEach(o=>t.step(new Nn(o.from,o.to,o.style)))}function If(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),o=[],l=e+1;for(let a=0;a<s.childCount;a++){let c=s.child(a),u=l+c.nodeSize,d=r.matchType(c.type);if(!d)o.push(new _e(l,u,_.empty));else{r=d;for(let f=0;f<c.marks.length;f++)n.allowsMarkType(c.marks[f].type)||t.step(new Nn(l,u,c.marks[f]));if(i&&c.isText&&n.whitespace!="pre"){let f,h=/\r?\n|\r/g,m;for(;f=h.exec(c.text);)m||(m=new _(z.from(n.schema.text(" ",n.allowedMarks(c.marks))),0,0)),o.push(new _e(l+f.index,l+f.index+f[0].length,m))}}l=u}if(!r.validEnd){let a=r.fillBefore(z.empty,!0);t.replace(l,l,new _(a,0,0))}for(let a=o.length-1;a>=0;a--)t.step(o[a])}function Rb(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ns(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let o=t.$from.node(r),l=t.$from.index(r)+i,a=t.$to.indexAfter(r)-s;if(r<t.depth&&o.canReplace(l,a,n))return r;if(r==0||o.type.spec.isolating||!Rb(o,l,a))break;l&&(i=1),a<o.childCount&&(s=1)}return null}function Lb(t,e,n){let{$from:r,$to:i,depth:s}=e,o=r.before(s+1),l=i.after(s+1),a=o,c=l,u=z.empty,d=0;for(let m=s,y=!1;m>n;m--)y||r.index(m)>0?(y=!0,u=z.from(r.node(m).copy(u)),d++):a--;let f=z.empty,h=0;for(let m=s,y=!1;m>n;m--)y||i.after(m+1)<i.end(m)?(y=!0,f=z.from(i.node(m).copy(f)),h++):c++;t.step(new Fe(a,c,o,l,new _(u.append(f),d,h),u.size-d,!0))}function Rf(t,e,n=null,r=t){let i=_b(t,e),s=i&&$b(r,e);return s?i.map(Xh).concat({type:e,attrs:n}).concat(s.map(Xh)):null}function Xh(t){return{type:t,attrs:null}}function _b(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let o=s.length?s[0]:e;return n.canReplaceWith(r,i,o)?s:null}function $b(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),o=e.contentMatch.findWrapping(s.type);if(!o)return null;let a=(o.length?o[o.length-1]:e).contentMatch;for(let c=r;a&&c<i;c++)a=a.matchType(n.child(c).type);return!a||!a.validEnd?null:o}function Bb(t,e,n){let r=z.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=z.from(n[o].type.create(n[o].attrs,r))}let i=e.start,s=e.end;t.step(new Fe(i,s,i,s,new _(r,0,0),n.length,!0))}function Fb(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(o,l)=>{let a=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,a)&&Vb(t.doc,t.mapping.slice(s).map(l),r)){let c=null;if(r.schema.linebreakReplacement){let h=r.whitespace=="pre",m=!!r.contentMatch.matchType(r.schema.linebreakReplacement);h&&!m?c=!1:!h&&m&&(c=!0)}c===!1&&gx(t,o,l,s),If(t,t.mapping.slice(s).map(l,1),r,void 0,c===null);let u=t.mapping.slice(s),d=u.map(l,1),f=u.map(l+o.nodeSize,1);return t.step(new Fe(d,f,d+1,f-1,new _(z.from(r.create(a,null,o.marks)),0,0),1,!0)),c===!0&&mx(t,o,l,s),!1}})}function mx(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let a=t.mapping.slice(r).map(n+1+s+o.index);t.replaceWith(a,a+1,e.type.schema.linebreakReplacement.create())}}})}function gx(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=t.mapping.slice(r).map(n+1+s);t.replaceWith(o,o+1,e.type.schema.text(`
`))}})}function Vb(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function Hb(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Fe(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new _(z.from(o),0,0),1,!0))}function Un(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let c=i.depth-1,u=n-2;c>s;c--,u--){let d=i.node(c),f=i.index(c);if(d.type.spec.isolating)return!1;let h=d.content.cutByIndex(f,d.childCount),m=r&&r[u+1];m&&(h=h.replaceChild(0,m.type.create(m.attrs)));let y=r&&r[u]||d;if(!d.canReplace(f+1,d.childCount)||!y.type.validContent(h))return!1}let l=i.indexAfter(s),a=r&&r[0];return i.node(s).canReplaceWith(l,l,a?a.type:i.node(s+1).type)}function Wb(t,e,n=1,r){let i=t.doc.resolve(e),s=z.empty,o=z.empty;for(let l=i.depth,a=i.depth-n,c=n-1;l>a;l--,c--){s=z.from(i.node(l).copy(s));let u=r&&r[c];o=z.from(u?u.type.create(u.attrs,o):i.node(l).copy(o))}t.step(new _e(e,e,new _(s.append(o),n,n),!0))}function $r(t,e){let n=t.resolve(e),r=n.index();return yx(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function Ub(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),o=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function yx(t,e){return!!(t&&e&&!t.isLeaf&&Ub(t,e))}function Za(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&yx(s,o)&&r.node(i).canReplace(l,l+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function qb(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),o=s.node().type;if(i&&o.inlineContent){let u=o.whitespace=="pre",d=!!o.contentMatch.matchType(i);u&&!d?r=!1:!u&&d&&(r=!0)}let l=t.steps.length;if(r===!1){let u=t.doc.resolve(e+n);gx(t,u.node(),u.before(),l)}o.inlineContent&&If(t,e+n-1,o,s.node().contentMatchAt(s.index()),r==null);let a=t.mapping.slice(l),c=a.map(e-n);if(t.step(new _e(c,a.map(e+n,-1),_.empty,!0)),r===!0){let u=t.doc.resolve(c);mx(t,u.node(),u.before(),t.steps.length)}return t}function Kb(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function xx(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,a=r.index(o)+(l>0?1:0),c=r.node(o),u=!1;if(s==1)u=c.canReplace(a,a,i);else{let d=c.contentMatchAt(a).findWrapping(i.firstChild.type);u=d&&c.canReplaceWith(a,a,d[0])}if(u)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function ec(t,e,n=e,r=_.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return vx(i,s,r)?new _e(e,n,r):new Jb(i,s,r).fit()}function vx(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class Jb{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=z.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=z.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let a=new _(s,o,l);return e>-1?new Fe(r.pos,e,this.$to.pos,this.$to.end(),a,n):a.size||r.pos!=this.$to.pos?new _e(r.pos,i.pos,a):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=Uc(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:a,match:c}=this.frontier[l],u,d=null;if(n==1&&(o?c.matchType(o.type)||(d=c.fillBefore(z.from(o),!1)):s&&a.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:d};if(n==2&&o&&(u=c.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:u};if(s&&c.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Uc(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new _(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=Uc(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new _(qs(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new _(qs(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let y=0;y<s.length;y++)this.openFrontierNode(s[y]);let o=this.unplaced,l=r?r.content:o.content,a=o.openStart-e,c=0,u=[],{match:d,type:f}=this.frontier[n];if(i){for(let y=0;y<i.childCount;y++)u.push(i.child(y));d=d.matchFragment(i)}let h=l.size+e-(o.content.size-o.openEnd);for(;c<l.childCount;){let y=l.child(c),k=d.matchType(y.type);if(!k)break;c++,(c>1||a==0||y.content.size)&&(d=k,u.push(wx(y.mark(f.allowedMarks(y.marks)),c==1?a:0,c==l.childCount?h:-1)))}let m=c==l.childCount;m||(h=-1),this.placed=Ks(this.placed,n,z.from(u)),this.frontier[n].match=d,m&&h<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let y=0,k=l;y<h;y++){let g=k.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),k=g.content}this.unplaced=m?e==0?_.empty:new _(qs(o.content,e-1,1),e-1,h<0?o.openEnd:e-1):new _(qs(o.content,e,c),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!qc(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),o=qc(e,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:a,type:c}=this.frontier[l],u=qc(e,l,c,a,!0);if(!u||u.childCount)continue e}return{depth:n,fit:o,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ks(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=Ks(this.placed,this.depth,z.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(z.empty,!0);n.childCount&&(this.placed=Ks(this.placed,this.frontier.length,n))}}function qs(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(qs(t.firstChild.content,e-1,n)))}function Ks(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Ks(t.lastChild.content,e-1,n)))}function Uc(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function wx(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,wx(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(z.empty,!0)))),t.copy(r)}function qc(t,e,n,r,i){let s=t.node(e),o=i?t.indexAfter(e):t.index(e);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!Yb(n,s.content,o)?l:null}function Yb(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function Gb(t){return t.spec.defining||t.spec.definingForContent}function Qb(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(vx(i,s,r))return t.step(new _e(e,n,r));let o=bx(i,s);o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let f=i.depth,h=i.pos-1;f>0;f--,h--){let m=i.node(f).type.spec;if(m.defining||m.definingAsContext||m.isolating)break;o.indexOf(f)>-1?l=f:i.before(f)==h&&o.splice(1,0,-f)}let a=o.indexOf(l),c=[],u=r.openStart;for(let f=r.content,h=0;;h++){let m=f.firstChild;if(c.push(m),h==r.openStart)break;f=m.content}for(let f=u-1;f>=0;f--){let h=c[f],m=Gb(h.type);if(m&&!h.sameMarkup(i.node(Math.abs(l)-1)))u=f;else if(m||!h.type.isTextblock)break}for(let f=r.openStart;f>=0;f--){let h=(f+u+1)%(r.openStart+1),m=c[h];if(m)for(let y=0;y<o.length;y++){let k=o[(y+a)%o.length],g=!0;k<0&&(g=!1,k=-k);let x=i.node(k-1),w=i.index(k-1);if(x.canReplaceWith(w,w,m.type,m.marks))return t.replace(i.before(k),g?s.after(k):n,new _(kx(r.content,0,r.openStart,h),h,r.openEnd))}}let d=t.steps.length;for(let f=o.length-1;f>=0&&(t.replace(e,n,r),!(t.steps.length>d));f--){let h=o[f];h<0||(e=i.before(h),n=s.after(h))}}function kx(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(kx(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),o=s.fillBefore(t).append(t);t=o.append(s.matchFragment(o).fillBefore(z.empty,!0))}return t}function Xb(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=Kb(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new _(z.from(r),0,0))}function Zb(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=bx(r,i);for(let o=0;o<s.length;o++){let l=s[o],a=o==s.length-1;if(a&&l==0||r.node(l).type.contentMatch.validEnd)return t.delete(r.start(l),i.end(l));if(l>0&&(a||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return t.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(e-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return t.delete(r.before(o),n);t.delete(e,n)}function bx(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class ns extends ot{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Te.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Te.fromReplace(e,this.pos,this.pos+1,new _(z.from(i),0,n.isLeaf?0:1))}getMap(){return Ot.empty}invert(e){return new ns(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ns(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ns(n.pos,n.attr,n.value)}}ot.jsonID("attr",ns);class Ao extends ot{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Te.ok(r)}getMap(){return Ot.empty}invert(e){return new Ao(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ao(n.attr,n.value)}}ot.jsonID("docAttr",Ao);let ps=class extends Error{};ps=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ps.prototype=Object.create(Error.prototype);ps.prototype.constructor=ps;ps.prototype.name="TransformError";class eS{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new jo}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ps(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=_.empty){let i=ec(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new _(z.from(r),0,0))}delete(e,n){return this.replace(e,n,_.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return Qb(this,e,n,r),this}replaceRangeWith(e,n,r){return Xb(this,e,n,r),this}deleteRange(e,n){return Zb(this,e,n),this}lift(e,n){return Lb(this,e,n),this}join(e,n=1){return qb(this,e,n),this}wrap(e,n){return Bb(this,e,n),this}setBlockType(e,n=e,r,i=null){return Fb(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return Hb(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new ns(e,n,r)),this}setDocAttribute(e,n){return this.step(new Ao(e,n)),this}addNodeMark(e,n){return this.step(new vr(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof de)n.isInSet(r.marks)&&this.step(new xi(e,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new xi(e,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(e,n=1,r){return Wb(this,e,n,r),this}addMark(e,n,r){return Pb(this,e,n,r),this}removeMark(e,n,r){return Ib(this,e,n,r),this}clearIncompatible(e,n,r){return If(this,e,n,r),this}}const Kc=Object.create(null);class Q{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new tS(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=_.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=e.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:a,$to:c}=o[l],u=e.mapping.slice(s);e.replaceRange(u.map(a.pos),u.map(c.pos),l?_.empty:n),l==0&&tm(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],a=e.mapping.slice(r),c=a.map(o.pos),u=a.map(l.pos);s?e.deleteRange(c,u):(e.replaceRangeWith(c,u,n),tm(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Y(e):Ai(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let o=n<0?Ai(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):Ai(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(o)return o}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new jt(e.node(0))}static atStart(e){return Ai(e,e,0,0,1)||new jt(e)}static atEnd(e){return Ai(e,e,e.content.size,e.childCount,-1)||new jt(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Kc[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Kc)throw new RangeError("Duplicate use of selection JSON ID "+e);return Kc[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Y.between(this.$anchor,this.$head).getBookmark()}}Q.prototype.visible=!0;class tS{constructor(e,n){this.$from=e,this.$to=n}}let Zh=!1;function em(t){!Zh&&!t.parent.inlineContent&&(Zh=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Y extends Q{constructor(e,n=e){em(e),em(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Q.near(r);let i=e.resolve(n.map(this.anchor));return new Y(i.parent.inlineContent?i:r,r)}replace(e,n=_.empty){if(super.replace(e,n),n==_.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Y&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new tc(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Y(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Q.findFrom(n,r,!0)||Q.findFrom(n,-r,!0);if(s)n=s.$head;else return Q.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(Q.findFrom(e,-r,!0)||Q.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Y(e,n)}}Q.jsonID("text",Y);class tc{constructor(e,n){this.anchor=e,this.head=n}map(e){return new tc(e.map(this.anchor),e.map(this.head))}resolve(e){return Y.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends Q{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?Q.near(s):new q(s)}content(){return new _(z.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Lf(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(n.anchor))}static create(e,n){return new q(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;Q.jsonID("node",q);class Lf{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new tc(r,r):new Lf(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&q.isSelectable(r)?new q(n):Q.near(n)}}class jt extends Q{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=_.empty){if(n==_.empty){e.delete(0,e.doc.content.size);let r=Q.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new jt(e)}map(e){return new jt(e)}eq(e){return e instanceof jt}getBookmark(){return nS}}Q.jsonID("all",jt);const nS={map(){return this},resolve(t){return new jt(t)}};function Ai(t,e,n,r,i,s=!1){if(e.inlineContent)return Y.create(t,n);for(let o=r-(i>0?0:1);i>0?o<e.childCount:o>=0;o+=i){let l=e.child(o);if(l.isAtom){if(!s&&q.isSelectable(l))return q.create(t,n-(i<0?l.nodeSize:0))}else{let a=Ai(t,l,n+i,i<0?l.childCount:0,i,s);if(a)return a}n+=l.nodeSize*i}return null}function tm(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof _e||i instanceof Fe))return;let s=t.mapping.maps[r],o;s.forEach((l,a,c,u)=>{o==null&&(o=u)}),t.setSelection(Q.near(t.doc.resolve(o),n))}const nm=1,wl=2,rm=4;class rS extends eS{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|nm)&~wl,this.storedMarks=null,this}get selectionSet(){return(this.updated&nm)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=wl,this}ensureMarks(e){return de.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&wl)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~wl,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||de.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Q.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=rm,this}get scrolledIntoView(){return(this.updated&rm)>0}}function im(t,e){return!e||!t?t:t.bind(e)}class Js{constructor(e,n,r){this.name=e,this.init=im(n.init,r),this.apply=im(n.apply,r)}}const iS=[new Js("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Js("selection",{init(t,e){return t.selection||Q.atStart(e.doc)},apply(t){return t.selection}}),new Js("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new Js("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Jc{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=iS.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Js(r.key,r.spec.state,r))})}}class Ji{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let a=i?i[o].n:0,c=i?i[o].state:this,u=a<n.length&&l.spec.appendTransaction.call(l,a?n.slice(a):n,c,r);if(u&&r.filterTransaction(u,o)){if(u.setMeta("appendedTransaction",e),!i){i=[];for(let d=0;d<this.config.plugins.length;d++)i.push(d<o?{state:r,n:n.length}:{state:this,n:0})}n.push(u),r=r.applyInner(u),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Ji(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new rS(this)}static create(e){let n=new Jc(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Ji(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new Jc(this.schema,e.plugins),r=n.fields,i=new Ji(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new Jc(e.schema,e.plugins),s=new Ji(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Or.fromJSON(e.schema,n.doc);else if(o.name=="selection")s.selection=Q.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let l in r){let a=r[l],c=a.spec.state;if(a.key==o.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=c.fromJSON.call(a,e,n[l],s);return}}s[o.name]=o.init(e,s)}}),s}}function Sx(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=Sx(i,e,{})),n[r]=i}return n}class ht{constructor(e){this.spec=e,this.props={},e.props&&Sx(e.props,this,this.props),this.key=e.key?e.key.key:Cx("plugin")}getState(e){return e[this.key]}}const Yc=Object.create(null);function Cx(t){return t in Yc?t+"$"+ ++Yc[t]:(Yc[t]=0,t+"$")}class hn{constructor(e="key"){this.key=Cx(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ke=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},hs=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let yd=null;const _n=function(t,e,n){let r=yd||(yd=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},sS=function(){yd=null},vi=function(t,e,n,r){return n&&(sm(t,e,n,r,-1)||sm(t,e,n,r,1))},oS=/^(img|br|input|textarea|hr)$/i;function sm(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:Wt(t))){let o=t.parentNode;if(!o||o.nodeType!=1||Ko(t)||oS.test(t.nodeName)||t.contentEditable=="false")return!1;e=Ke(t)+(i<0?0:1),t=o}else if(t.nodeType==1){let o=t.childNodes[e+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=o,e=i<0?Wt(t):0}else return!1}}function Wt(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function lS(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Wt(t)}else if(t.parentNode&&!Ko(t))e=Ke(t),t=t.parentNode;else return null}}function aS(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ko(t))e=Ke(t)+1,t=t.parentNode;else return null}}function cS(t,e,n){for(let r=e==0,i=e==Wt(t);r||i;){if(t==n)return!0;let s=Ke(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==Wt(t)}}function Ko(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const nc=function(t){return t.focusNode&&vi(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function Qr(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function uS(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function dS(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Wt(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Wt(r.startContainer),r.startOffset)}}}const On=typeof navigator<"u"?navigator:null,om=typeof document<"u"?document:null,Br=On&&On.userAgent||"",xd=/Edge\/(\d+)/.exec(Br),Nx=/MSIE \d/.exec(Br),vd=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Br),bt=!!(Nx||vd||xd),zr=Nx?document.documentMode:vd?+vd[1]:xd?+xd[1]:0,Jt=!bt&&/gecko\/(\d+)/i.test(Br);Jt&&+(/Firefox\/(\d+)/.exec(Br)||[0,0])[1];const wd=!bt&&/Chrome\/(\d+)/.exec(Br),$e=!!wd,Mx=wd?+wd[1]:0,it=!bt&&!!On&&/Apple Computer/.test(On.vendor),ms=it&&(/Mobile\/\w+/.test(Br)||!!On&&On.maxTouchPoints>2),Ft=ms||(On?/Mac/.test(On.platform):!1),Ex=On?/Win/.test(On.platform):!1,Vn=/Android \d/.test(Br),Jo=!!om&&"webkitFontSmoothing"in om.documentElement.style,fS=Jo?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function pS(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function Rn(t,e){return typeof t=="number"?t:t[e]}function hS(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function lm(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let o=n||t.dom;o;){if(o.nodeType!=1){o=hs(o);continue}let l=o,a=l==s.body,c=a?pS(s):hS(l),u=0,d=0;if(e.top<c.top+Rn(r,"top")?d=-(c.top-e.top+Rn(i,"top")):e.bottom>c.bottom-Rn(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+Rn(i,"top")-c.top:e.bottom-c.bottom+Rn(i,"bottom")),e.left<c.left+Rn(r,"left")?u=-(c.left-e.left+Rn(i,"left")):e.right>c.right-Rn(r,"right")&&(u=e.right-c.right+Rn(i,"right")),u||d)if(a)s.defaultView.scrollBy(u,d);else{let h=l.scrollLeft,m=l.scrollTop;d&&(l.scrollTop+=d),u&&(l.scrollLeft+=u);let y=l.scrollLeft-h,k=l.scrollTop-m;e={left:e.left-y,top:e.top-k,right:e.right-y,bottom:e.bottom-k}}let f=a?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(f))break;o=f=="absolute"?o.offsetParent:hs(o)}}function mS(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,o=n+1;o<Math.min(innerHeight,e.bottom);o+=5){let l=t.root.elementFromPoint(s,o);if(!l||l==t.dom||!t.dom.contains(l))continue;let a=l.getBoundingClientRect();if(a.top>=n-20){r=l,i=a.top;break}}return{refDOM:r,refTop:i,stack:Tx(t.dom)}}function Tx(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=hs(r));return e}function gS({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;Ox(n,r==0?0:r-e)}function Ox(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Di=null;function yS(t){if(t.setActive)return t.setActive();if(Di)return t.focus(Di);let e=Tx(t);t.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),Di||(Di=!1,Ox(e,0))}function zx(t,e){let n,r=2e8,i,s=0,o=e.top,l=e.top,a,c;for(let u=t.firstChild,d=0;u;u=u.nextSibling,d++){let f;if(u.nodeType==1)f=u.getClientRects();else if(u.nodeType==3)f=_n(u).getClientRects();else continue;for(let h=0;h<f.length;h++){let m=f[h];if(m.top<=o&&m.bottom>=l){o=Math.max(m.bottom,o),l=Math.min(m.top,l);let y=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(y<r){n=u,r=y,i=y&&n.nodeType==3?{left:m.right<e.left?m.right:m.left,top:e.top}:e,u.nodeType==1&&y&&(s=d+(e.left>=(m.left+m.right)/2?1:0));continue}}else m.top>e.top&&!a&&m.left<=e.left&&m.right>=e.left&&(a=u,c={left:Math.max(m.left,Math.min(m.right,e.left)),top:m.top});!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(s=d+1)}}return!n&&a&&(n=a,i=c,r=0),n&&n.nodeType==3?xS(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:zx(n,i)}function xS(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let o=ar(r,1);if(o.top!=o.bottom&&_f(e,o)){i={node:t,offset:s+(e.left>=(o.left+o.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function _f(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function vS(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function wS(t,e,n){let{node:r,offset:i}=zx(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function kS(t,e,n,r){let i=-1;for(let s=e,o=!1;s!=t.dom;){let l=t.docView.nearestDesc(s,!0),a;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((a=l.dom.getBoundingClientRect()).width||a.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&a.left>r.left||a.top>r.top?i=l.posBefore:(!o&&a.right<r.left||a.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(a.top+a.bottom)/2:r.left<(a.left+a.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function Dx(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=t.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let a=0;a<l.length;a++){let c=l[a];if(_f(e,c))return Dx(o,e,c)}}if((s=(s+1)%r)==i)break}return t}function bS(t,e){let n=t.dom.ownerDocument,r,i=0,s=dS(n,e.left,e.top);s&&({node:r,offset:i}=s);let o=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),l;if(!o||!t.dom.contains(o.nodeType!=1?o.parentNode:o)){let c=t.dom.getBoundingClientRect();if(!_f(e,c)||(o=Dx(t.dom,e,c),!o))return null}if(it)for(let c=o;r&&c;c=hs(c))c.draggable&&(r=void 0);if(o=vS(o,e),r){if(Jt&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let u=r.childNodes[i],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&i++}let c;Jo&&i&&r.nodeType==1&&(c=r.childNodes[i-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?l=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=kS(t,r,i,e))}l==null&&(l=wS(t,o,e));let a=t.docView.nearestDesc(o,!0);return{pos:l,inside:a?a.posAtStart-a.border:-1}}function am(t){return t.top<t.bottom||t.left<t.right}function ar(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(am(r))return r}return Array.prototype.find.call(n,am)||t.getBoundingClientRect()}const SS=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function jx(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),o=Jo||Jt;if(r.nodeType==3)if(o&&(SS.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let a=ar(_n(r,i,i),n);if(Jt&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let c=ar(_n(r,i-1,i-1),-1);if(c.top==a.top){let u=ar(_n(r,i,i+1),-1);if(u.top!=a.top)return _s(u,u.left<c.left)}}return a}else{let a=i,c=i,u=n<0?1:-1;return n<0&&!i?(c++,u=-1):n>=0&&i==r.nodeValue.length?(a--,u=1):n<0?a--:c++,_s(ar(_n(r,a,c),u),u<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Wt(r))){let a=r.childNodes[i-1];if(a.nodeType==1)return Gc(a.getBoundingClientRect(),!1)}if(s==null&&i<Wt(r)){let a=r.childNodes[i];if(a.nodeType==1)return Gc(a.getBoundingClientRect(),!0)}return Gc(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Wt(r))){let a=r.childNodes[i-1],c=a.nodeType==3?_n(a,Wt(a)-(o?0:1)):a.nodeType==1&&(a.nodeName!="BR"||!a.nextSibling)?a:null;if(c)return _s(ar(c,1),!1)}if(s==null&&i<Wt(r)){let a=r.childNodes[i];for(;a.pmViewDesc&&a.pmViewDesc.ignoreForCoords;)a=a.nextSibling;let c=a?a.nodeType==3?_n(a,0,o?0:1):a.nodeType==1?a:null:null;if(c)return _s(ar(c,-1),!0)}return _s(ar(r.nodeType==3?_n(r):r,-n),n>=0)}function _s(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Gc(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Ax(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function CS(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return Ax(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=t.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=jx(t,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let a;if(l.nodeType==1)a=l.getClientRects();else if(l.nodeType==3)a=_n(l,0,l.nodeValue.length).getClientRects();else continue;for(let c=0;c<a.length;c++){let u=a[c];if(u.bottom>u.top+1&&(n=="up"?o.top-u.top>(u.bottom-o.top)*2:u.bottom-o.bottom>(o.bottom-u.top)*2))return!1}}return!0})}const NS=/[\u0590-\u08ac]/;function MS(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=t.domSelection();return l?!NS.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:Ax(t,e,()=>{let{focusNode:a,focusOffset:c,anchorNode:u,anchorOffset:d}=t.domSelectionRange(),f=l.caretBidiLevel;l.modify("move",n,"character");let h=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:m,focusOffset:y}=t.domSelectionRange(),k=m&&!h.contains(m.nodeType==1?m:m.parentNode)||a==m&&c==y;try{l.collapse(u,d),a&&(a!=u||c!=d)&&l.extend&&l.extend(a,c)}catch{}return f!=null&&(l.caretBidiLevel=f),k}):r.pos==r.start()||r.pos==r.end()}let cm=null,um=null,dm=!1;function ES(t,e,n){return cm==e&&um==n?dm:(cm=e,um=n,dm=n=="up"||n=="down"?CS(t,e,n):MS(t,e,n))}const Yt=0,fm=1,ni=2,zn=3;class Yo{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Yt,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,o;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Ke(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(e.nodeType==1?e:e.parentNode):o==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>e||o instanceof Ix){i=e-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Px&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Ke(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Ke(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let a=this.children[l],c=o+a.size;if(i==-1&&e<=c){let u=o+a.border;if(e>=u&&n<=c-a.border&&a.node&&a.contentDOM&&this.contentDOM.contains(a.contentDOM))return a.parseRange(e,n,u);e=o;for(let d=l;d>0;d--){let f=this.children[d-1];if(f.size&&f.dom.parentNode==this.contentDOM&&!f.emptyChildAt(1)){i=Ke(f.dom)+1;break}e-=f.size}i==-1&&(i=0)}if(i>-1&&(c>n||l==this.children.length-1)){n=c;for(let u=l+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){s=Ke(d.dom);break}n+=d.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=c}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),o=Math.max(e,n);for(let h=0,m=0;h<this.children.length;h++){let y=this.children[h],k=m+y.size;if(s>m&&o<k)return y.setSelection(e-m-y.border,n-m-y.border,r,i);m=k}let l=this.domFromPos(e,e?-1:1),a=n==e?l:this.domFromPos(n,n?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Jt||it)&&e==n){let{node:h,offset:m}=l;if(h.nodeType==3){if(d=!!(m&&h.nodeValue[m-1]==`
`),d&&m==h.nodeValue.length)for(let y=h,k;y;y=y.parentNode){if(k=y.nextSibling){k.nodeName=="BR"&&(l=a={node:k.parentNode,offset:Ke(k)+1});break}let g=y.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let y=h.childNodes[m-1];d=y&&(y.nodeName=="BR"||y.contentEditable=="false")}}if(Jt&&u.focusNode&&u.focusNode!=a.node&&u.focusNode.nodeType==1){let h=u.focusNode.childNodes[u.focusOffset];h&&h.contentEditable=="false"&&(i=!0)}if(!(i||d&&it)&&vi(l.node,l.offset,u.anchorNode,u.anchorOffset)&&vi(a.node,a.offset,u.focusNode,u.focusOffset))return;let f=!1;if((c.extend||e==n)&&!(d&&Jt)){c.collapse(l.node,l.offset);try{e!=n&&c.extend(a.node,a.offset),f=!0}catch{}}if(!f){if(e>n){let m=l;l=a,a=m}let h=document.createRange();h.setEnd(a.node,a.offset),h.setStart(l.node,l.offset),c.removeAllRanges(),c.addRange(h)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?e<=o&&n>=r:e<o&&n>r){let l=r+s.border,a=o-s.border;if(e>=l&&n<=a){this.dirty=e==r||n==o?ni:fm,e==l&&n==a&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=zn:s.markDirty(e-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ni:zn}r=o}this.dirty=ni}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ni:fm;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class Px extends Yo{constructor(e,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(e,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Yt&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class TS extends Yo{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class wi extends Yo{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Ei.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new wi(e,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&zn||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=zn&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Yt){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Yt}}slice(e,n,r){let i=wi.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=bd(s,n,o,r)),e>0&&(s=bd(s,0,e,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Dr extends Yo{constructor(e,n,r,i,s,o,l,a,c){super(e,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(e,n,r,i,s,o){let l=s.nodeViews[n.type.name],a,c=l&&l(n,s,()=>{if(!a)return o;if(a.parent)return a.parent.posBeforeChild(a)},r,i),u=c&&c.dom,d=c&&c.contentDOM;if(n.isText){if(!u)u=document.createTextNode(n.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Ei.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!d&&!n.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),n.type.spec.draggable&&(u.draggable=!0));let f=u;return u=_x(u,r,n),c?a=new OS(e,n,r,i,u,d||null,f,c,s,o+1):n.isText?new rc(e,n,r,i,u,f,s):new Dr(e,n,r,i,u,d||null,f,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>z.empty)}return e}matchesNode(e,n,r){return this.dirty==Yt&&e.eq(this.node)&&ba(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,a=new DS(this,o&&o.node,e);PS(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?a.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&a.syncToMarks(u==this.node.childCount?de.none:this.node.child(u).marks,r,e),a.placeWidget(c,e,i)},(c,u,d,f)=>{a.syncToMarks(c.marks,r,e);let h;a.findNodeMatch(c,u,d,f)||l&&e.state.selection.from>i&&e.state.selection.to<i+c.nodeSize&&(h=a.findIndexWithChild(s.node))>-1&&a.updateNodeAt(c,u,d,h,e)||a.updateNextNode(c,u,d,e,f,i)||a.addNode(c,u,d,e,i),i+=c.nodeSize}),a.syncToMarks([],r,e),this.node.isTextblock&&a.addTextblockHacks(),a.destroyRest(),(a.changed||this.dirty==ni)&&(o&&this.protectLocalComposition(e,o),Rx(this.contentDOM,this.children,e),ms&&IS(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Y)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=RS(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new TS(this,s,n,i);e.input.compositionNodes.push(o),this.children=bd(this.children,r,r+i.length,e,o)}update(e,n,r,i){return this.dirty==zn||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Yt}updateOuterDeco(e){if(ba(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Lx(this.dom,this.nodeDOM,kd(this.outerDeco,this.node,n),kd(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function pm(t,e,n,r,i){_x(r,e,t);let s=new Dr(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class rc extends Dr{constructor(e,n,r,i,s,o,l){super(e,n,r,i,s,null,o,l,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==zn||this.dirty!=Yt&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Yt||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Yt,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new rc(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=zn)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Ix extends Yo{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Yt&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class OS extends Dr{constructor(e,n,r,i,s,o,l,a,c,u){super(e,n,r,i,s,o,l,c,u),this.spec=a}update(e,n,r,i){if(this.dirty==zn)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function Rx(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let o=e[s],l=o.dom;if(l.parentNode==t){for(;l!=r;)r=hm(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(l,r);if(o instanceof wi){let a=r?r.previousSibling:t.lastChild;Rx(o.contentDOM,o.children,n),r=a?a.nextSibling:t.firstChild}}for(;r;)r=hm(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const lo=function(t){t&&(this.nodeName=t)};lo.prototype=Object.create(null);const ri=[new lo];function kd(t,e,n){if(t.length==0)return ri;let r=n?ri[0]:new lo,i=[r];for(let s=0;s<t.length;s++){let o=t[s].type.attrs;if(o){o.nodeName&&i.push(r=new lo(o.nodeName));for(let l in o){let a=o[l];a!=null&&(n&&i.length==1&&i.push(r=new lo(e.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+a:l=="style"?r.style=(r.style?r.style+";":"")+a:l!="nodeName"&&(r[l]=a))}}}return i}function Lx(t,e,n,r){if(n==ri&&r==ri)return e;let i=e;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let a;l&&l.nodeName==o.nodeName&&i!=t&&(a=i.parentNode)&&a.nodeName.toLowerCase()==o.nodeName||(a=document.createElement(o.nodeName),a.pmIsDeco=!0,a.appendChild(i),l=ri[0]),i=a}zS(i,l||ri[0],o)}return i}function zS(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function _x(t,e,n){return Lx(t,t,ri,kd(e,n,t.nodeType!=1))}function ba(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function hm(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class DS{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=jS(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,e.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(e[i])&&e[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Yt,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<e.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let a=this.index;a<Math.min(this.index+3,this.top.children.length);a++){let c=this.top.children[a];if(c.matchesMark(e[s])&&!this.isLocked(c.dom)){l=a;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let a=wi.create(this.top,e[s],n,r);this.top.children.splice(this.index,0,a),this.top=a,this.changed=!0}this.index=0,s++}}findNodeMatch(e,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(e,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,a=Math.min(this.top.children.length,l+5);l<a;l++){let c=this.top.children[l];if(c.matchesNode(e,n,r)&&!this.preMatch.matched.has(c)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let o=this.top.children[i];return o.dirty==zn&&o.dom==o.contentDOM&&(o.dirty=ni),o.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let a=this.top.children[l];if(a instanceof Dr){let c=this.preMatch.matched.get(a);if(c!=null&&c!=s)return!1;let u=a.dom,d,f=this.isLocked(u)&&!(e.isText&&a.node&&a.node.isText&&a.nodeDOM.nodeValue==e.text&&a.dirty!=zn&&ba(n,a.outerDeco));if(!f&&a.update(e,n,r,i))return this.destroyBetween(this.index,l),a.dom!=u&&(this.changed=!0),this.index++,!0;if(!f&&(d=this.recreateWrapper(a,e,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=ni,d.updateChildren(i,o+1),d.dirty=Yt),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,o){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!ba(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let l=Dr.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=e.children,e.children=[];for(let a of l.children)a.parent=l}return e.destroy(),l}addNode(e,n,r,i,s){let o=Dr.create(this.top,e,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Px(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof wi;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof rc)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((it||$e)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new Ix(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function jS(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let c=n.children[r-1];if(c instanceof wi)n=c,r=c.children.length;else{l=c,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let a=l.node;if(a){if(a!=t.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function AS(t,e){return t.type.side-e.type.side}function PS(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let c=0;c<t.childCount;c++){let u=t.child(c);r(u,i,e.forChild(s,u),c),s+=u.nodeSize}return}let o=0,l=[],a=null;for(let c=0;;){let u,d;for(;o<i.length&&i[o].to==s;){let k=i[o++];k.widget&&(u?(d||(d=[u])).push(k):u=k)}if(u)if(d){d.sort(AS);for(let k=0;k<d.length;k++)n(d[k],c,!!a)}else n(u,c,!!a);let f,h;if(a)h=-1,f=a,a=null;else if(c<t.childCount)h=c,f=t.child(c++);else break;for(let k=0;k<l.length;k++)l[k].to<=s&&l.splice(k--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let m=s+f.nodeSize;if(f.isText){let k=m;o<i.length&&i[o].from<k&&(k=i[o].from);for(let g=0;g<l.length;g++)l[g].to<k&&(k=l[g].to);k<m&&(a=f.cut(k-s),f=f.cut(0,k-s),m=k,h=-1)}else for(;o<i.length&&i[o].to<m;)o++;let y=f.isInline&&!f.isLeaf?l.filter(k=>!k.inline):l.slice();r(f,y,e.forChild(s,f),h),s=m}}function IS(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function RS(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let o=t.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let a=o.text;for(;i<t.childCount;){let c=t.child(i++);if(s+=c.nodeSize,!c.isText)break;a+=c.text}if(s>=n){if(s>=r&&a.slice(r-e.length-l,r-l)==e)return r-e.length;let c=l<r?a.lastIndexOf(e,r-l-1):-1;if(c>=0&&c+e.length+l>=n)return l+c;if(n==r&&a.length>=r+e.length-l&&a.slice(r-l,r-l+e.length)==e)return r}}return-1}function bd(t,e,n,r,i){let s=[];for(let o=0,l=0;o<t.length;o++){let a=t[o],c=l,u=l+=a.size;c>=n||u<=e?s.push(a):(c<e&&s.push(a.slice(0,e-c,r)),i&&(s.push(i),i=void 0),u>n&&s.push(a.slice(n-c,a.size,r)))}return s}function $f(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),a,c;if(nc(n)){for(a=o;i&&!i.node;)i=i.parent;let d=i.node;if(i&&d.isAtom&&q.isSelectable(d)&&i.parent&&!(d.isInline&&cS(n.focusNode,n.focusOffset,i.dom))){let f=i.posBefore;c=new q(o==f?l:r.resolve(f))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let d=o,f=o;for(let h=0;h<n.rangeCount;h++){let m=n.getRangeAt(h);d=Math.min(d,t.docView.posFromDOM(m.startContainer,m.startOffset,1)),f=Math.max(f,t.docView.posFromDOM(m.endContainer,m.endOffset,-1))}if(d<0)return null;[a,o]=f==t.state.selection.anchor?[f,d]:[d,f],l=r.resolve(o)}else a=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(a<0)return null}let u=r.resolve(a);if(!c){let d=e=="pointer"||t.state.selection.head<l.pos&&!s?1:-1;c=Bf(t,u,l,d)}return c}function $x(t){return t.editable?t.hasFocus():Fx(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function qn(t,e=!1){let n=t.state.selection;if(Bx(t,n),!!$x(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&$e){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&vi(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)_S(t);else{let{anchor:r,head:i}=n,s,o;mm&&!(n instanceof Y)&&(n.$from.parent.inlineContent||(s=gm(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=gm(t,n.to))),t.docView.setSelection(r,i,t,e),mm&&(s&&ym(s),o&&ym(o)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&LS(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const mm=it||$e&&Mx<63;function gm(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(it&&i&&i.contentEditable=="false")return Qc(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return Qc(i);if(s)return Qc(s)}}function Qc(t){return t.contentEditable="true",it&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ym(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function LS(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!$x(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function _S(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Ke(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&bt&&zr<=11&&(n.disabled=!0,n.disabled=!1)}function Bx(t,e){if(e instanceof q){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(xm(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else xm(t)}function xm(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Bf(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Y.between(e,n,r)}function vm(t){return t.editable&&!t.hasFocus()?!1:Fx(t)}function Fx(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function $S(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return vi(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Sd(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&Q.findFrom(s,e)}function dr(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function wm(t,e,n){let r=t.state.selection;if(r instanceof Y)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return dr(t,new Y(r.$anchor,o))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Sd(t.state,e);return i&&i instanceof q?dr(t,i):!1}else if(!(Ft&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=t.docView.descAt(l))&&!o.contentDOM?q.isSelectable(s)?dr(t,new q(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Jo?dr(t,new Y(t.state.doc.resolve(e<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof q&&r.node.isInline)return dr(t,new Y(e>0?r.$to:r.$from));{let i=Sd(t.state,e);return i?dr(t,i):!1}}}function Sa(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function ao(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function ji(t,e){return e<0?BS(t):FS(t)}function BS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,o=!1;for(Jt&&n.nodeType==1&&r<Sa(n)&&ao(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(ao(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(Vx(n))break;{let l=n.previousSibling;for(;l&&ao(l,-1);)i=n.parentNode,s=Ke(l),l=l.previousSibling;if(l)n=l,r=Sa(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}o?Cd(t,n,r):i&&Cd(t,i,s)}function FS(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Sa(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(ao(l,1))s=n,o=++r;else break}else{if(Vx(n))break;{let l=n.nextSibling;for(;l&&ao(l,1);)s=l.parentNode,o=Ke(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Sa(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&Cd(t,s,o)}function Vx(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function VS(t,e){for(;t&&e==t.childNodes.length&&!Ko(t);)e=Ke(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function HS(t,e){for(;t&&!e&&!Ko(t);)e=Ke(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Cd(t,e,n){if(e.nodeType!=3){let s,o;(o=VS(e,n))?(e=o,n=0):(s=HS(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(nc(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&qn(t)},50)}function km(t,e){let n=t.state.doc.resolve(e);if(!($e||Ex)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function bm(t,e,n){let r=t.state.selection;if(r instanceof Y&&!r.empty||n.indexOf("s")>-1||Ft&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let o=Sd(t.state,e);if(o&&o instanceof q)return dr(t,o)}if(!i.parent.inlineContent){let o=e<0?i:s,l=r instanceof jt?Q.near(o,e):Q.findFrom(o,e);return l?dr(t,l):!1}return!1}function Sm(t,e){if(!(t.state.selection instanceof Y))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=t.state.tr;return e<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),t.dispatch(o),!0}return!1}function Cm(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function WS(t){if(!it||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;Cm(t,r,"true"),setTimeout(()=>Cm(t,r,"false"),20)}return!1}function US(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function qS(t,e){let n=e.keyCode,r=US(e);if(n==8||Ft&&n==72&&r=="c")return Sm(t,-1)||ji(t,-1);if(n==46&&!e.shiftKey||Ft&&n==68&&r=="c")return Sm(t,1)||ji(t,1);if(n==13||n==27)return!0;if(n==37||Ft&&n==66&&r=="c"){let i=n==37?km(t,t.state.selection.from)=="ltr"?-1:1:-1;return wm(t,i,r)||ji(t,i)}else if(n==39||Ft&&n==70&&r=="c"){let i=n==39?km(t,t.state.selection.from)=="ltr"?1:-1:1;return wm(t,i,r)||ji(t,i)}else{if(n==38||Ft&&n==80&&r=="c")return bm(t,-1,r)||ji(t,-1);if(n==40||Ft&&n==78&&r=="c")return WS(t)||bm(t,1,r)||ji(t,1);if(r==(Ft?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Ff(t,e){t.someProp("transformCopied",h=>{e=h(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let h=r.firstChild;n.push(h.type.name,h.attrs!=h.type.defaultAttrs?h.attrs:null),r=h.content}let o=t.someProp("clipboardSerializer")||Ei.fromSchema(t.state.schema),l=Jx(),a=l.createElement("div");a.appendChild(o.serializeFragment(r,{document:l}));let c=a.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=Kx[c.nodeName.toLowerCase()]);){for(let h=u.length-1;h>=0;h--){let m=l.createElement(u[h]);for(;a.firstChild;)m.appendChild(a.firstChild);a.appendChild(m),d++}c=a.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${i} ${s}${d?` -${d}`:""} ${JSON.stringify(n)}`);let f=t.someProp("clipboardTextSerializer",h=>h(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:a,text:f,slice:e}}function Hx(t,e,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!e)return null;let a=!!e&&(r||s||!n);if(a){if(t.someProp("transformPastedText",f=>{e=f(e,s||r,t)}),s)return l=new _(z.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",f=>{l=f(l,t,!0)}),l;let d=t.someProp("clipboardTextParser",f=>f(e,i,r,t));if(d)l=d;else{let f=i.marks(),{schema:h}=t.state,m=Ei.fromSchema(h);o=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(y=>{let k=o.appendChild(document.createElement("p"));y&&k.appendChild(m.serializeNode(h.text(y,f)))})}}else t.someProp("transformPastedHTML",d=>{n=d(n,t)}),o=GS(n),Jo&&QS(o);let c=o&&o.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let f=o.firstChild;for(;f&&f.nodeType!=1;)f=f.nextSibling;if(!f)break;o=f}if(l||(l=(t.someProp("clipboardParser")||t.someProp("domParser")||so.fromSchema(t.state.schema)).parseSlice(o,{preserveWhitespace:!!(a||u),context:i,ruleFromNode(f){return f.nodeName=="BR"&&!f.nextSibling&&f.parentNode&&!KS.test(f.parentNode.nodeName)?{ignore:!0}:null}})),u)l=XS(Nm(l,+u[1],+u[2]),u[4]);else if(l=_.maxOpen(JS(l.content,i),!0),l.openStart||l.openEnd){let d=0,f=0;for(let h=l.content.firstChild;d<l.openStart&&!h.type.spec.isolating;d++,h=h.firstChild);for(let h=l.content.lastChild;f<l.openEnd&&!h.type.spec.isolating;f++,h=h.lastChild);l=Nm(l,d,f)}return t.someProp("transformPasted",d=>{l=d(l,t,a)}),l}const KS=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function JS(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,o=[];if(t.forEach(l=>{if(!o)return;let a=i.findWrapping(l.type),c;if(!a)return o=null;if(c=o.length&&s.length&&Ux(a,s,l,o[o.length-1],0))o[o.length-1]=c;else{o.length&&(o[o.length-1]=qx(o[o.length-1],s.length));let u=Wx(l,a);o.push(u),i=i.matchType(u.type),s=a}}),o)return z.from(o)}return t}function Wx(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,z.from(t));return t}function Ux(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=Ux(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(z.from(Wx(n,t,i+1))))}}function qx(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,qx(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(z.empty,!0);return t.copy(n.append(r))}function Nd(t,e,n,r,i,s){let o=e<0?t.firstChild:t.lastChild,l=o.content;return t.childCount>1&&(s=0),i<r-1&&(l=Nd(l,e,n,r,i+1,s)),i>=n&&(l=e<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(z.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,o.copy(l))}function Nm(t,e,n){return e<t.openStart&&(t=new _(Nd(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new _(Nd(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const Kx={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Mm=null;function Jx(){return Mm||(Mm=document.implementation.createHTMLDocument("title"))}let Xc=null;function YS(t){let e=window.trustedTypes;return e?(Xc||(Xc=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Xc.createHTML(t)):t}function GS(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Jx().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&Kx[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=YS(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function QS(t){let e=t.querySelectorAll($e?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function XS(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:o}=t;for(let l=r.length-2;l>=0;l-=2){let a=n.nodes[r[l]];if(!a||a.hasRequiredAttrs())break;i=z.from(a.create(r[l+1],i)),s++,o++}return new _(i,s,o)}const ut={},dt={},ZS={touchstart:!0,touchmove:!0};class eC{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function tC(t){for(let e in ut){let n=ut[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{rC(t,r)&&!Vf(t,r)&&(t.editable||!(r.type in dt))&&n(t,r)},ZS[e]?{passive:!0}:void 0)}it&&t.dom.addEventListener("input",()=>null),Md(t)}function wr(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function nC(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Md(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>Vf(t,r))})}function Vf(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function rC(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function iC(t,e){!Vf(t,e)&&ut[e.type]&&(t.editable||!(e.type in dt))&&ut[e.type](t,e)}dt.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Gx(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Vn&&$e&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),ms&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,Qr(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||qS(t,n)?n.preventDefault():wr(t,"key")};dt.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};dt.keypress=(t,e)=>{let n=e;if(Gx(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Ft&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Y)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",o=>o(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function ic(t){return{left:t.clientX,top:t.clientY}}function sC(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Hf(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(t.someProp(e,l=>o>s.depth?l(t,n,s.nodeAfter,s.before(o),i,!0):l(t,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function rs(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function oC(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&q.isSelectable(r)?(rs(t,new q(n)),!0):!1}function lC(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof q&&(r=n.node);let s=t.state.doc.resolve(e);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(q.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(rs(t,q.create(t.state.doc,i)),!0):!1}function aC(t,e,n,r,i){return Hf(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?lC(t,n):oC(t,n))}function cC(t,e,n,r){return Hf(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function uC(t,e,n,r){return Hf(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||dC(t,n,r)}function dC(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(rs(t,Y.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)rs(t,Y.create(r,l+1,l+1+o.content.size));else if(q.isSelectable(o))rs(t,q.create(r,l));else continue;return!0}}function Wf(t){return Ca(t)}const Yx=Ft?"metaKey":"ctrlKey";ut.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Wf(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&sC(n,t.input.lastClick)&&!n[Yx]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=t.posAtCoords(ic(n));o&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new fC(t,o,n,!!r)):(s=="doubleClick"?cC:uC)(t,o.pos,o.inside,n)?n.preventDefault():wr(t,"pointer"))};class fC{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Yx],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),o=n.inside;else{let u=e.state.doc.resolve(n.pos);s=u.parent,o=u.depth?u.before():0}const l=i?null:r.target,a=l?e.docView.nearestDesc(l,!0):null;this.target=a&&a.nodeDOM.nodeType==1?a.nodeDOM:null;let{selection:c}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||c instanceof q&&c.from<=o&&c.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Jt&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),wr(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>qn(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(ic(e))),this.updateAllowDefault(e),this.allowDefault||!n?wr(this.view,"pointer"):aC(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||it&&this.mightDrag&&!this.mightDrag.node.isAtom||$e&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(rs(this.view,Q.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):wr(this.view,"pointer")}move(e){this.updateAllowDefault(e),wr(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}ut.touchstart=t=>{t.input.lastTouch=Date.now(),Wf(t),wr(t,"pointer")};ut.touchmove=t=>{t.input.lastTouch=Date.now(),wr(t,"pointer")};ut.contextmenu=t=>Wf(t);function Gx(t,e){return t.composing?!0:it&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const pC=Vn?5e3:-1;dt.compositionstart=dt.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Y&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||$e&&Ex&&hC(t)))t.markCursor=t.state.storedMarks||n.marks(),Ca(t,!0),t.markCursor=null;else if(Ca(t,!e.selection.empty),Jt&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=t.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}t.input.composing=!0}Qx(t,pC)};function hC(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}dt.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Qx(t,20))};function Qx(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Ca(t),e))}function Xx(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=gC());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function mC(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=lS(e.focusNode,e.focusOffset),r=aS(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function gC(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Ca(t,e=!1){if(!(Vn&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Xx(t),e||t.docView&&t.docView.dirty){let n=$f(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function yC(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Po=bt&&zr<15||ms&&fS<604;ut.copy=dt.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Po?null:n.clipboardData,o=r.content(),{dom:l,text:a}=Ff(t,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",a)):yC(t,l),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function xC(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function vC(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Io(t,r.value,null,i,e):Io(t,r.textContent,r.innerHTML,i,e)},50)}function Io(t,e,n,r,i){let s=Hx(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",a=>a(t,i,s||_.empty)))return!0;if(!s)return!1;let o=xC(s),l=o?t.state.tr.replaceSelectionWith(o,r):t.state.tr.replaceSelection(s);return t.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function Zx(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}dt.paste=(t,e)=>{let n=e;if(t.composing&&!Vn)return;let r=Po?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Io(t,Zx(r),r.getData("text/html"),i,n)?n.preventDefault():vC(t,n)};class ev{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const wC=Ft?"altKey":"ctrlKey";function tv(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[wC]}ut.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(ic(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof q?i.to-1:i.to))){if(r&&r.mightDrag)o=q.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let d=t.docView.nearestDesc(n.target,!0);d&&d.node.type.spec.draggable&&d!=t.docView&&(o=q.create(t.state.doc,d.posBefore))}}let l=(o||t.state.selection).content(),{dom:a,text:c,slice:u}=Ff(t,l);(!n.dataTransfer.files.length||!$e||Mx>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Po?"Text":"text/html",a.innerHTML),n.dataTransfer.effectAllowed="copyMove",Po||n.dataTransfer.setData("text/plain",c),t.dragging=new ev(u,tv(t,n),o)};ut.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};dt.dragover=dt.dragenter=(t,e)=>e.preventDefault();dt.drop=(t,e)=>{try{kC(t,e,t.dragging)}finally{t.dragging=null}};function kC(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(ic(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",h=>{s=h(s,t,!1)}):s=Hx(t,Zx(e.dataTransfer),Po?null:e.dataTransfer.getData("text/html"),!1,i);let o=!!(n&&tv(t,e));if(t.someProp("handleDrop",h=>h(t,e,s||_.empty,o))){e.preventDefault();return}if(!s)return;e.preventDefault();let l=s?xx(t.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let a=t.state.tr;if(o){let{node:h}=n;h?h.replace(a):a.deleteSelection()}let c=a.mapping.map(l),u=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,d=a.doc;if(u?a.replaceRangeWith(c,c,s.content.firstChild):a.replaceRange(c,c,s),a.doc.eq(d))return;let f=a.doc.resolve(c);if(u&&q.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))a.setSelection(new q(f));else{let h=a.mapping.map(l);a.mapping.maps[a.mapping.maps.length-1].forEach((m,y,k,g)=>h=g),a.setSelection(Bf(t,f,a.doc.resolve(h)))}t.focus(),t.dispatch(a.setMeta("uiEvent","drop"))}ut.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&qn(t)},20))};ut.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};ut.beforeinput=(t,e)=>{if($e&&Vn&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,Qr(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in dt)ut[t]=dt[t];function Ro(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Na{constructor(e,n){this.toDOM=e,this.spec=n||ai,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:o}=e.mapResult(n.from+i,this.side<0?-1:1);return o?null:new qt(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Na&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Ro(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class jr{constructor(e,n){this.attrs=e,this.spec=n||ai}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new qt(s,o,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof jr&&Ro(this.attrs,e.attrs)&&Ro(this.spec,e.spec)}static is(e){return e.type instanceof jr}destroy(){}}class Uf{constructor(e,n){this.attrs=e,this.spec=n||ai}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let o=e.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new qt(s.pos-r,o.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Uf&&Ro(this.attrs,e.attrs)&&Ro(this.spec,e.spec)}destroy(){}}class qt{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new qt(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new qt(e,e,new Na(n,r))}static inline(e,n,r,i){return new qt(e,n,new jr(r,i))}static node(e,n,r,i){return new qt(e,n,new Uf(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof jr}get widget(){return this.type instanceof Na}}const Pi=[],ai={};class Ae{constructor(e,n){this.local=e.length?e:Pi,this.children=n.length?n:Pi}static create(e,n){return n.length?Ma(n,e,0,ai):tt}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=e&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>e){let l=this.children[o]+1;this.children[o+2].findInner(e-l,n-l,r,i+l,s)}}map(e,n,r){return this==tt||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ai)}mapInner(e,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let a=this.local[l].map(e,r,i);a&&a.type.valid(n,a)?(o||(o=[])).push(a):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?bC(this.children,o||[],e,n,r,i,s):o?new Ae(o.sort(ci),Pi):tt}add(e,n){return n.length?this==tt?Ae.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((l,a)=>{let c=a+r,u;if(u=rv(n,l,c)){for(i||(i=this.children.slice());s<i.length&&i[s]<a;)s+=3;i[s]==a?i[s+2]=i[s+2].addInner(l,u,c+1):i.splice(s,0,a,a+l.nodeSize,Ma(u,l,c+1,ai)),s+=3}});let o=nv(s?iv(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||o.splice(l--,1);return new Ae(o.length?this.local.concat(o).sort(ci):this.local,i||this.children)}remove(e){return e.length==0||this==tt?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,a=r[s+1]+n;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>l&&d.to<a&&(e[u]=null,(o||(o=[])).push(d));if(!o)continue;r==this.children&&(r=this.children.slice());let c=r[s+2].removeInner(o,l+1);c!=tt?r[s+2]=c:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<e.length;s++)if(o=e[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ae(i,r):tt}forChild(e,n){if(this==tt)return this;if(n.isLeaf)return Ae.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=e){this.children[l]==e&&(r=this.children[l+2]);break}let s=e+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let a=this.local[l];if(a.from<o&&a.to>s&&a.type instanceof jr){let c=Math.max(s,a.from)-s,u=Math.min(o,a.to)-s;c<u&&(i||(i=[])).push(a.copy(c,u))}}if(i){let l=new Ae(i.sort(ci),Pi);return r?new mr([l,r]):l}return r||tt}eq(e){if(this==e)return!0;if(!(e instanceof Ae)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return qf(this.localsInner(e))}localsInner(e){if(this==tt)return Pi;if(e.inlineContent||!this.local.some(jr.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof jr||n.push(this.local[r]);return n}forEachSet(e){e(this)}}Ae.empty=new Ae([],[]);Ae.removeOverlap=qf;const tt=Ae.empty;class mr{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ai));return mr.from(r)}forChild(e,n){if(n.isLeaf)return Ae.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=tt&&(s instanceof mr?r=r.concat(s.members):r.push(s))}return mr.from(r)}eq(e){if(!(e instanceof mr)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?qf(r?n:n.sort(ci)):Pi}static from(e){switch(e.length){case 0:return tt;case 1:return e[0];default:return new mr(e.every(n=>n instanceof Ae)?e:e.reduce((n,r)=>n.concat(r instanceof Ae?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function bC(t,e,n,r,i,s,o){let l=t.slice();for(let c=0,u=s;c<n.maps.length;c++){let d=0;n.maps[c].forEach((f,h,m,y)=>{let k=y-m-(h-f);for(let g=0;g<l.length;g+=3){let x=l[g+1];if(x<0||f>x+u-d)continue;let w=l[g]+u-d;h>=w?l[g+1]=f<=w?-2:-1:f>=u&&k&&(l[g]+=k,l[g+1]+=k)}d+=k}),u=n.maps[c].map(u,-1)}let a=!1;for(let c=0;c<l.length;c+=3)if(l[c+1]<0){if(l[c+1]==-2){a=!0,l[c+1]=-1;continue}let u=n.map(t[c]+s),d=u-i;if(d<0||d>=r.content.size){a=!0;continue}let f=n.map(t[c+1]+s,-1),h=f-i,{index:m,offset:y}=r.content.findIndex(d),k=r.maybeChild(m);if(k&&y==d&&y+k.nodeSize==h){let g=l[c+2].mapInner(n,k,u+1,t[c]+s+1,o);g!=tt?(l[c]=d,l[c+1]=h,l[c+2]=g):(l[c+1]=-2,a=!0)}else a=!0}if(a){let c=SC(l,t,e,n,i,s,o),u=Ma(c,r,0,o);e=u.local;for(let d=0;d<l.length;d+=3)l[d+1]<0&&(l.splice(d,3),d-=3);for(let d=0,f=0;d<u.children.length;d+=3){let h=u.children[d];for(;f<l.length&&l[f]<h;)f+=3;l.splice(f,0,u.children[d],u.children[d+1],u.children[d+2])}}return new Ae(e.sort(ci),l)}function nv(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new qt(i.from+e,i.to+e,i.type))}return n}function SC(t,e,n,r,i,s,o){function l(a,c){for(let u=0;u<a.local.length;u++){let d=a.local[u].map(r,i,c);d?n.push(d):o.onRemove&&o.onRemove(a.local[u].spec)}for(let u=0;u<a.children.length;u+=3)l(a.children[u+2],a.children[u]+c+1)}for(let a=0;a<t.length;a+=3)t[a+1]==-1&&l(t[a+2],e[a]+s+1);return n}function rv(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,o;s<t.length;s++)(o=t[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),t[s]=null);return i}function iv(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ma(t,e,n,r){let i=[],s=!1;e.forEach((l,a)=>{let c=rv(t,l,a+n);if(c){s=!0;let u=Ma(c,l,n+a+1,r);u!=tt&&i.push(a,a+l.nodeSize,u)}});let o=nv(s?iv(t):t,-n).sort(ci);for(let l=0;l<o.length;l++)o[l].type.valid(e,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ae(o,i):tt}function ci(t,e){return t.from-e.from||t.to-e.to}function qf(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),Em(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),Em(e,i,r.copy(s.from,r.to)));break}}}return e}function Em(t,e,n){for(;e<t.length&&ci(n,t[e])>0;)e++;t.splice(e,0,n)}function Zc(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=tt&&e.push(r)}),t.cursorWrapper&&e.push(Ae.create(t.state.doc,[t.cursorWrapper.deco])),mr.from(e)}const CC={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},NC=bt&&zr<=11;class MC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class EC{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new MC,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);bt&&zr<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),NC&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,CC)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(vm(this.view)){if(this.suppressingSelectionUpdates)return qn(this.view);if(bt&&zr<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&vi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=hs(s))n.add(s);for(let s=e.anchorNode;s;s=hs(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&vm(e)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,a=[];if(e.editable)for(let u=0;u<n.length;u++){let d=this.registerMutation(n[u],a);d&&(s=s<0?d.from:Math.min(d.from,s),o=o<0?d.to:Math.max(d.to,o),d.typeOver&&(l=!0))}if(Jt&&a.length){let u=a.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,f]=u;d.parentNode&&d.parentNode.parentNode==f.parentNode?f.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let f of u){let h=f.parentNode;h&&h.nodeName=="LI"&&(!d||zC(e,d)!=h)&&f.remove()}}}else if(($e||it)&&a.some(u=>u.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let u of a)if(u.nodeName=="BR"&&u.parentNode){let d=u.nextSibling;d&&d.nodeType==1&&d.contentEditable=="false"&&u.parentNode.removeChild(u)}}let c=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&nc(r)&&(c=$f(e))&&c.eq(Q.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,qn(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,o),TC(e)),this.handleDOMChange(s,o,l,a),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||qn(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];n.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(bt&&zr<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:f}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(i=d),(!f||Array.prototype.indexOf.call(e.addedNodes,f)<0)&&(s=f)}let o=i&&i.parentNode==e.target?Ke(i)+1:0,l=r.localPosFromDOM(e.target,o,-1),a=s&&s.parentNode==e.target?Ke(s):e.target.childNodes.length,c=r.localPosFromDOM(e.target,a,1);return{from:l,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Tm=new WeakMap,Om=!1;function TC(t){if(!Tm.has(t)&&(Tm.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Jt,Om)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Om=!0}}function zm(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,o=t.domAtPos(t.state.selection.anchor);return vi(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function OC(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return zm(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?zm(t,n):null}function zC(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function DC(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=t.docView.parseRange(e,n),a=t.domSelectionRange(),c,u=a.anchorNode;if(u&&t.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:a.anchorOffset}],nc(a)||c.push({node:a.focusNode,offset:a.focusOffset})),$e&&t.input.lastKeyCode===8)for(let k=s;k>i;k--){let g=r.childNodes[k-1],x=g.pmViewDesc;if(g.nodeName=="BR"&&!x){s=k;break}if(!x||x.size)break}let d=t.state.doc,f=t.someProp("domParser")||so.fromSchema(t.state.schema),h=d.resolve(o),m=null,y=f.parse(r,{topNode:h.parent,topMatch:h.parent.contentMatchAt(h.index()),topOpen:!0,from:i,to:s,preserveWhitespace:h.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:jC,context:h});if(c&&c[0].pos!=null){let k=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=k),m={anchor:k+o,head:g+o}}return{doc:y,sel:m,from:o,to:l}}function jC(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(it&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||it&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const AC=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function PC(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let C=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,M=$f(t,C);if(M&&!t.state.selection.eq(M)){if($e&&Vn&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",E=>E(t,Qr(13,"Enter"))))return;let D=t.state.tr.setSelection(M);C=="pointer"?D.setMeta("pointer",!0):C=="key"&&D.scrollIntoView(),s&&D.setMeta("composition",s),t.dispatch(D)}return}let o=t.state.doc.resolve(e),l=o.sharedDepth(n);e=o.before(l+1),n=t.state.doc.resolve(n).after(l+1);let a=t.state.selection,c=DC(t,e,n),u=t.state.doc,d=u.slice(c.from,c.to),f,h;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(f=t.state.selection.to,h="end"):(f=t.state.selection.from,h="start"),t.input.lastKeyCode=null;let m=LC(d.content,c.doc.content,c.from,f,h);if(m&&t.input.domChangeCount++,(ms&&t.input.lastIOSEnter>Date.now()-225||Vn)&&i.some(C=>C.nodeType==1&&!AC.test(C.nodeName))&&(!m||m.endA>=m.endB)&&t.someProp("handleKeyDown",C=>C(t,Qr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!m)if(r&&a instanceof Y&&!a.empty&&a.$head.sameParent(a.$anchor)&&!t.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))m={start:a.from,endA:a.to,endB:a.to};else{if(c.sel){let C=Dm(t,t.state.doc,c.sel);if(C&&!C.eq(t.state.selection)){let M=t.state.tr.setSelection(C);s&&M.setMeta("composition",s),t.dispatch(M)}}return}t.state.selection.from<t.state.selection.to&&m.start==m.endB&&t.state.selection instanceof Y&&(m.start>t.state.selection.from&&m.start<=t.state.selection.from+2&&t.state.selection.from>=c.from?m.start=t.state.selection.from:m.endA<t.state.selection.to&&m.endA>=t.state.selection.to-2&&t.state.selection.to<=c.to&&(m.endB+=t.state.selection.to-m.endA,m.endA=t.state.selection.to)),bt&&zr<=11&&m.endB==m.start+1&&m.endA==m.start&&m.start>c.from&&c.doc.textBetween(m.start-c.from-1,m.start-c.from+1)==" "&&(m.start--,m.endA--,m.endB--);let y=c.doc.resolveNoCache(m.start-c.from),k=c.doc.resolveNoCache(m.endB-c.from),g=u.resolve(m.start),x=y.sameParent(k)&&y.parent.inlineContent&&g.end()>=m.endA;if((ms&&t.input.lastIOSEnter>Date.now()-225&&(!x||i.some(C=>C.nodeName=="DIV"||C.nodeName=="P"))||!x&&y.pos<c.doc.content.size&&(!y.sameParent(k)||!y.parent.inlineContent)&&y.pos<k.pos&&!/\S/.test(c.doc.textBetween(y.pos,k.pos,"","")))&&t.someProp("handleKeyDown",C=>C(t,Qr(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>m.start&&RC(u,m.start,m.endA,y,k)&&t.someProp("handleKeyDown",C=>C(t,Qr(8,"Backspace")))){Vn&&$e&&t.domObserver.suppressSelectionUpdates();return}$e&&m.endB==m.start&&(t.input.lastChromeDelete=Date.now()),Vn&&!x&&y.start()!=k.start()&&k.parentOffset==0&&y.depth==k.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==m.endA&&(m.endB-=2,k=c.doc.resolveNoCache(m.endB-c.from),setTimeout(()=>{t.someProp("handleKeyDown",function(C){return C(t,Qr(13,"Enter"))})},20));let w=m.start,v=m.endA,S=C=>{let M=C||t.state.tr.replace(w,v,c.doc.slice(m.start-c.from,m.endB-c.from));if(c.sel){let D=Dm(t,M.doc,c.sel);D&&!($e&&t.composing&&D.empty&&(m.start!=m.endB||t.input.lastChromeDelete<Date.now()-100)&&(D.head==w||D.head==M.mapping.map(v)-1)||bt&&D.empty&&D.head==w)&&M.setSelection(D)}return s&&M.setMeta("composition",s),M.scrollIntoView()},b;if(x)if(y.pos==k.pos){bt&&zr<=11&&y.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>qn(t),20));let C=S(t.state.tr.delete(w,v)),M=u.resolve(m.start).marksAcross(u.resolve(m.endA));M&&C.ensureMarks(M),t.dispatch(C)}else if(m.endA==m.endB&&(b=IC(y.parent.content.cut(y.parentOffset,k.parentOffset),g.parent.content.cut(g.parentOffset,m.endA-g.start())))){let C=S(t.state.tr);b.type=="add"?C.addMark(w,v,b.mark):C.removeMark(w,v,b.mark),t.dispatch(C)}else if(y.parent.child(y.index()).isText&&y.index()==k.index()-(k.textOffset?0:1)){let C=y.parent.textBetween(y.parentOffset,k.parentOffset),M=()=>S(t.state.tr.insertText(C,w,v));t.someProp("handleTextInput",D=>D(t,w,v,C,M))||t.dispatch(M())}else t.dispatch(S());else t.dispatch(S())}function Dm(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Bf(t,e.resolve(n.anchor),e.resolve(n.head))}function IC(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,o,l,a;for(let u=0;u<r.length;u++)i=r[u].removeFromSet(i);for(let u=0;u<n.length;u++)s=n[u].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",a=u=>u.mark(l.addToSet(u.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",a=u=>u.mark(l.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(a(e.child(u)));if(z.from(c).eq(t))return{mark:l,type:o}}function RC(t,e,n,r,i){if(n-e<=i.pos-r.pos||eu(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==e+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=t.resolve(eu(s,!0,!0));return!o.parent.isTextblock||o.pos>n||eu(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function eu(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function LC(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:o,b:l}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let a=Math.max(0,s-Math.min(o,l));r-=o+a-s}if(o<s&&t.size<e.size){let a=r<=s&&r>=o?s-r:0;s-=a,s&&s<e.size&&jm(e.textBetween(s-1,s+1))&&(s+=a?1:-1),l=s+(l-o),o=s}else if(l<s){let a=r<=s&&r>=l?s-r:0;s-=a,s&&s<t.size&&jm(t.textBetween(s-1,s+1))&&(s+=a?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function jm(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class sv{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new eC,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Lm),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Im(this),Pm(this),this.nodeViews=Rm(this),this.docView=pm(this.state.doc,Am(this),Zc(this),this.dom,this),this.domObserver=new EC(this,(r,i,s,o)=>PC(this,r,i,s,o)),this.domObserver.start(),tC(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Md(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Lm),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,o=!1;e.storedMarks&&this.composing&&(Xx(this),o=!0),this.state=e;let l=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let h=Rm(this);$C(h,this.nodeViews)&&(this.nodeViews=h,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&Md(this),this.editable=Im(this),Pm(this);let a=Zc(this),c=Am(this),u=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",d=s||!this.docView.matchesNode(e.doc,c,a);(d||!e.selection.eq(i.selection))&&(o=!0);let f=u=="preserve"&&o&&this.dom.style.overflowAnchor==null&&mS(this);if(o){this.domObserver.stop();let h=d&&(bt||$e)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&_C(i.selection,e.selection);if(d){let m=$e?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=mC(this)),(s||!this.docView.update(e.doc,c,a,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=pm(e.doc,c,a,this.dom,this)),m&&!this.trackWrites&&(h=!0)}h||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&$S(this))?qn(this,h):(Bx(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():f&&gS(f)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof q){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&lm(this,n.getBoundingClientRect(),e)}else lm(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new ev(e.slice,e.move,i<0?void 0:q.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[e];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[e];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(bt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&yS(this.dom),qn(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return bS(this,e)}coordsAtPos(e,n=1){return jx(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return ES(this,n||this.state,e)}pasteHTML(e,n){return Io(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Io(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Ff(this,e)}destroy(){this.docView&&(nC(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Zc(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,sS())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return iC(this,e)}domSelectionRange(){let e=this.domSelection();return e?it&&this.root.nodeType===11&&uS(this.dom.ownerDocument)==this.dom&&OC(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}sv.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Am(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[qt.node(0,t.state.doc.content.size,e)]}function Pm(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:qt.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Im(t){return!t.someProp("editable",e=>e(t.state)===!1)}function _C(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Rm(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function $C(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function Lm(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ir={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ea={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},BC=typeof navigator<"u"&&/Mac/.test(navigator.platform),FC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Je=0;Je<10;Je++)Ir[48+Je]=Ir[96+Je]=String(Je);for(var Je=1;Je<=24;Je++)Ir[Je+111]="F"+Je;for(var Je=65;Je<=90;Je++)Ir[Je]=String.fromCharCode(Je+32),Ea[Je]=String.fromCharCode(Je);for(var tu in Ir)Ea.hasOwnProperty(tu)||(Ea[tu]=Ir[tu]);function VC(t){var e=BC&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||FC&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Ea:Ir)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const HC=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),WC=typeof navigator<"u"&&/Win/.test(navigator.platform);function UC(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l++){let a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))HC?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+a)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function qC(t){let e=Object.create(null);for(let n in t)e[UC(n)]=t[n];return e}function nu(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function KC(t){return new ht({props:{handleKeyDown:ov(t)}})}function ov(t){let e=qC(t);return function(n,r){let i=VC(r),s,o=e[nu(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=e[nu(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(WC&&r.ctrlKey&&r.altKey)&&(s=Ir[r.keyCode])&&s!=i){let l=e[nu(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Kf=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function lv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const av=(t,e,n)=>{let r=lv(t,n);if(!r)return!1;let i=Jf(r);if(!i){let o=r.blockRange(),l=o&&Ns(o);return l==null?!1:(e&&e(t.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(yv(t,i,e,-1))return!0;if(r.parent.content.size==0&&(gs(s,"end")||q.isSelectable(s)))for(let o=r.depth;;o--){let l=ec(t.doc,r.before(o),r.after(o),_.empty);if(l&&l.slice.size<l.to-l.from){if(e){let a=t.tr.step(l);a.setSelection(gs(s,"end")?Q.findFrom(a.doc.resolve(a.mapping.map(i.pos,-1)),-1):q.create(a.doc,i.pos-s.nodeSize)),e(a.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},JC=(t,e,n)=>{let r=lv(t,n);if(!r)return!1;let i=Jf(r);return i?cv(t,i,e):!1},YC=(t,e,n)=>{let r=dv(t,n);if(!r)return!1;let i=Yf(r);return i?cv(t,i,e):!1};function cv(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let u=i.lastChild;if(!u)return!1;i=u}let o=e.nodeAfter,l=o,a=e.pos+1;for(;!l.isTextblock;a++){if(l.type.spec.isolating)return!1;let u=l.firstChild;if(!u)return!1;l=u}let c=ec(t.doc,s,a,_.empty);if(!c||c.from!=s||c instanceof _e&&c.slice.size>=a-s)return!1;if(n){let u=t.tr.step(c);u.setSelection(Y.create(u.doc,s)),n(u.scrollIntoView())}return!0}function gs(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const uv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=Jf(r)}let o=s&&s.nodeBefore;return!o||!q.isSelectable(o)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Jf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function dv(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const fv=(t,e,n)=>{let r=dv(t,n);if(!r)return!1;let i=Yf(r);if(!i)return!1;let s=i.nodeAfter;if(yv(t,i,e,1))return!0;if(r.parent.content.size==0&&(gs(s,"start")||q.isSelectable(s))){let o=ec(t.doc,r.before(),r.after(),_.empty);if(o&&o.slice.size<o.to-o.from){if(e){let l=t.tr.step(o);l.setSelection(gs(s,"start")?Q.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):q.create(l.doc,l.mapping.map(i.pos))),e(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},pv=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Yf(r)}let o=s&&s.nodeAfter;return!o||!q.isSelectable(o)?!1:(e&&e(t.tr.setSelection(q.create(t.doc,s.pos)).scrollIntoView()),!0)};function Yf(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const GC=(t,e)=>{let n=t.selection,r=n instanceof q,i;if(r){if(n.node.isTextblock||!$r(t.doc,n.from))return!1;i=n.from}else if(i=Za(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(q.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},QC=(t,e)=>{let n=t.selection,r;if(n instanceof q){if(n.node.isTextblock||!$r(t.doc,n.to))return!1;r=n.to}else if(r=Za(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},XC=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ns(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},hv=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function Gf(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const ZC=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Gf(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(e){let l=n.after(),a=t.tr.replaceWith(l,l,o.createAndFill());a.setSelection(Q.near(a.doc.resolve(l),1)),e(a.scrollIntoView())}return!0},mv=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof jt||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Gf(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=t.tr.insert(o,s.createAndFill());l.setSelection(Y.create(l.doc,o+1)),e(l.scrollIntoView())}return!0},gv=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Un(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ns(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function eN(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!r.parentOffset||!Un(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,a=!1,c=!1;for(let h=r.depth;;h--)if(r.node(h).isBlock){a=r.end(h)==r.pos+(r.depth-h),c=r.start(h)==r.pos-(r.depth-h),l=Gf(r.node(h-1).contentMatchAt(r.indexAfter(h-1))),s.unshift(a&&l?{type:l}:null),o=h;break}else{if(h==1)return!1;s.unshift(null)}let u=e.tr;(e.selection instanceof Y||e.selection instanceof jt)&&u.deleteSelection();let d=u.mapping.map(r.pos),f=Un(u.doc,d,s.length,s);if(f||(s[0]=l?{type:l}:null,f=Un(u.doc,d,s.length,s)),!f)return!1;if(u.split(d,s.length,s),!a&&c&&r.node(o).type!=l){let h=u.mapping.map(r.before(o)),m=u.doc.resolve(h);l&&r.node(o-1).canReplaceWith(m.index(),m.index()+1,l)&&u.setNodeMarkup(u.mapping.map(r.before(o)),l)}return n&&n(u.scrollIntoView()),!0}}const tN=eN(),nN=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(q.create(t.doc,i))),!0)};function rN(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||$r(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function yv(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,o,l,a=i.type.spec.isolating||s.type.spec.isolating;if(!a&&rN(t,e,n))return!0;let c=!a&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let h=e.pos+s.nodeSize,m=z.empty;for(let g=o.length-1;g>=0;g--)m=z.from(o[g].create(null,m));m=z.from(i.copy(m));let y=t.tr.step(new Fe(e.pos-1,h,e.pos,h,new _(m,1,0),o.length,!0)),k=y.doc.resolve(h+2*o.length);k.nodeAfter&&k.nodeAfter.type==i.type&&$r(y.doc,k.pos)&&y.join(k.pos),n(y.scrollIntoView())}return!0}let u=s.type.spec.isolating||r>0&&a?null:Q.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),f=d&&Ns(d);if(f!=null&&f>=e.depth)return n&&n(t.tr.lift(d,f).scrollIntoView()),!0;if(c&&gs(s,"start",!0)&&gs(i,"end")){let h=i,m=[];for(;m.push(h),!h.isTextblock;)h=h.lastChild;let y=s,k=1;for(;!y.isTextblock;y=y.firstChild)k++;if(h.canReplace(h.childCount,h.childCount,y.content)){if(n){let g=z.empty;for(let w=m.length-1;w>=0;w--)g=z.from(m[w].copy(g));let x=t.tr.step(new Fe(e.pos-m.length,e.pos+s.nodeSize,e.pos+k,e.pos+s.nodeSize-k,new _(g,m.length,0),0,!0));n(x.scrollIntoView())}return!0}}return!1}function xv(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Y.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const iN=xv(-1),sN=xv(1);function oN(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&Rf(o,t,e);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function _m(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(a,c)=>{if(i)return!1;if(!(!a.isTextblock||a.hasMarkup(t,e)))if(a.type==t)i=!0;else{let u=n.doc.resolve(c),d=u.index();i=u.parent.canReplaceWith(d,d+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:a}}=n.selection.ranges[o];s.setBlockType(l,a,t,e)}r(s.scrollIntoView())}return!0}}function Qf(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}Qf(Kf,av,uv);Qf(Kf,fv,pv);Qf(hv,mv,gv,tN);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function lN(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return aN(l,o,t,e)?(r&&r(l.scrollIntoView()),!0):!1}}function aN(t,e,n,r=null){let i=!1,s=e,o=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let a=o.resolve(e.start-2);s=new wa(a,a,e.depth),e.endIndex<e.parent.childCount&&(e=new wa(e.$from,o.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let l=Rf(s,n,r,e);return l?(t&&cN(t,e,l,i,n),!0):!1}function cN(t,e,n,r,i){let s=z.empty;for(let u=n.length-1;u>=0;u--)s=z.from(n[u].type.create(n[u].attrs,s));t.step(new Fe(e.start-(r?2:0),e.end,e.start,e.end,new _(s,0,0),n.length,!0));let o=0;for(let u=0;u<n.length;u++)n[u].type==i&&(o=u+1);let l=n.length-o,a=e.start+n.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,f=!0;u<d;u++,f=!1)!f&&Un(t.doc,a,l)&&(t.split(a,l),a+=2*l),a+=c.child(u).nodeSize;return t}function uN(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?dN(e,n,t,s):fN(e,n,s):!0:!1}}function dN(t,e,n,r){let i=t.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Fe(s-1,o,s,o,new _(z.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new wa(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Ns(r);if(l==null)return!1;i.lift(r,l);let a=i.doc.resolve(i.mapping.map(s,-1)-1);return $r(i.doc,a.pos)&&a.nodeBefore.type==a.nodeAfter.type&&i.join(a.pos),e(i.scrollIntoView()),!0}function fN(t,e,n){let r=t.tr,i=n.parent;for(let h=n.end,m=n.endIndex-1,y=n.startIndex;m>y;m--)h-=i.child(m).nodeSize,r.delete(h-1,h+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,a=n.endIndex==i.childCount,c=s.node(-1),u=s.index(-1);if(!c.canReplace(u+(l?0:1),u+1,o.content.append(a?z.empty:z.from(i))))return!1;let d=s.pos,f=d+o.nodeSize;return r.step(new Fe(d-(l?1:0),f+(a?1:0),d+1,f-1,new _((l?z.empty:z.from(i.copy(z.empty))).append(a?z.empty:z.from(i.copy(z.empty))),l?0:1,a?0:1),l?0:1)),e(r.scrollIntoView()),!0}function pN(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,c=>c.childCount>0&&c.firstChild.type==t);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,a=l.child(o-1);if(a.type!=t)return!1;if(n){let c=a.lastChild&&a.lastChild.type==l.type,u=z.from(c?t.create():null),d=new _(z.from(t.create(null,z.from(l.type.create(null,u)))),c?3:1,0),f=s.start,h=s.end;n(e.tr.step(new Fe(f-(c?3:1),h,f,h,d,1,!0)).scrollIntoView())}return!0}}function sc(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}class oc{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:n,state:r}=this,{view:i}=n,{tr:s}=r,o=this.buildProps(s);return Object.fromEntries(Object.entries(e).map(([l,a])=>[l,(...u)=>{const d=a(...u)(o);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l=[],a=!!e,c=e||s.tr,u=()=>(!a&&n&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(c),l.every(f=>f===!0)),d={...Object.fromEntries(Object.entries(r).map(([f,h])=>[f,(...y)=>{const k=this.buildProps(c,n),g=h(...y)(k);return l.push(g),d}])),run:u};return d}createCan(e){const{rawCommands:n,state:r}=this,i=!1,s=e||r.tr,o=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(n).map(([a,c])=>[a,(...u)=>c(...u)({...o,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(e,n=!0){const{rawCommands:r,editor:i,state:s}=this,{view:o}=i,l={tr:e,editor:i,view:o,state:sc({state:s,transaction:e}),dispatch:n?()=>{}:void 0,chain:()=>this.createChain(e,n),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([a,c])=>[a,(...u)=>c(...u)(l)]))}};return l}}class hN{constructor(){this.callbacks={}}on(e,n){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(n),this}emit(e,...n){const r=this.callbacks[e];return r&&r.forEach(i=>i.apply(this,n)),this}off(e,n){const r=this.callbacks[e];return r&&(n?this.callbacks[e]=r.filter(i=>i!==n):delete this.callbacks[e]),this}once(e,n){const r=(...i)=>{this.off(e,r),n.apply(this,i)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function V(t,e,n){return t.config[e]===void 0&&t.parent?V(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?V(t.parent,e,n):null}):t.config[e]}function lc(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function vv(t){const e=[],{nodeExtensions:n,markExtensions:r}=lc(t),i=[...n,...r],s={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},a=V(o,"addGlobalAttributes",l);if(!a)return;a().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([f,h])=>{e.push({type:d,name:f,attribute:{...s,...h}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},a=V(o,"addAttributes",l);if(!a)return;const c=a();Object.entries(c).forEach(([u,d])=>{const f={...s,...d};typeof(f==null?void 0:f.default)=="function"&&(f.default=f.default()),f!=null&&f.isRequired&&(f==null?void 0:f.default)===void 0&&delete f.default,e.push({type:o.name,name:u,attribute:f})})}),e}function He(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}function Ne(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],a=r[i]?r[i].split(" "):[],c=l.filter(u=>!a.includes(u));r[i]=[...a,...c].join(" ")}else if(i==="style"){const l=s?s.split(";").map(u=>u.trim()).filter(Boolean):[],a=r[i]?r[i].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;a.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),l.forEach(u=>{const[d,f]=u.split(":").map(h=>h.trim());c.set(d,f)}),r[i]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[i]=s}),r},{})}function Ed(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>Ne(n,r),{})}function wv(t){return typeof t=="function"}function Z(t,e=void 0,...n){return wv(t)?e?t.bind(e)(...n):t(...n):t}function mN(t={}){return Object.keys(t).length===0&&t.constructor===Object}function gN(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function $m(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):gN(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function Bm(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&mN(n)?!1:n!=null))}function yN(t,e){var n;const r=vv(t),{nodeExtensions:i,markExtensions:s}=lc(t),o=(n=i.find(c=>V(c,"topNode")))===null||n===void 0?void 0:n.name,l=Object.fromEntries(i.map(c=>{const u=r.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((g,x)=>{const w=V(x,"extendNodeSchema",d);return{...g,...w?w(c):{}}},{}),h=Bm({...f,content:Z(V(c,"content",d)),marks:Z(V(c,"marks",d)),group:Z(V(c,"group",d)),inline:Z(V(c,"inline",d)),atom:Z(V(c,"atom",d)),selectable:Z(V(c,"selectable",d)),draggable:Z(V(c,"draggable",d)),code:Z(V(c,"code",d)),whitespace:Z(V(c,"whitespace",d)),linebreakReplacement:Z(V(c,"linebreakReplacement",d)),defining:Z(V(c,"defining",d)),isolating:Z(V(c,"isolating",d)),attrs:Object.fromEntries(u.map(g=>{var x;return[g.name,{default:(x=g==null?void 0:g.attribute)===null||x===void 0?void 0:x.default}]}))}),m=Z(V(c,"parseHTML",d));m&&(h.parseDOM=m.map(g=>$m(g,u)));const y=V(c,"renderHTML",d);y&&(h.toDOM=g=>y({node:g,HTMLAttributes:Ed(g,u)}));const k=V(c,"renderText",d);return k&&(h.toText=k),[c.name,h]})),a=Object.fromEntries(s.map(c=>{const u=r.filter(k=>k.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},f=t.reduce((k,g)=>{const x=V(g,"extendMarkSchema",d);return{...k,...x?x(c):{}}},{}),h=Bm({...f,inclusive:Z(V(c,"inclusive",d)),excludes:Z(V(c,"excludes",d)),group:Z(V(c,"group",d)),spanning:Z(V(c,"spanning",d)),code:Z(V(c,"code",d)),attrs:Object.fromEntries(u.map(k=>{var g;return[k.name,{default:(g=k==null?void 0:k.attribute)===null||g===void 0?void 0:g.default}]}))}),m=Z(V(c,"parseHTML",d));m&&(h.parseDOM=m.map(k=>$m(k,u)));const y=V(c,"renderHTML",d);return y&&(h.toDOM=k=>y({mark:k,HTMLAttributes:Ed(k,u)})),[c.name,h]}));return new lx({topNode:o,nodes:l,marks:a})}function ru(t,e){return e.nodes[t]||e.marks[t]||null}function Fm(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Xf(t,e){const n=Ei.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}const xN=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,o,l)=>{var a,c;const u=((c=(a=i.type.spec).toText)===null||c===void 0?void 0:c.call(a,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?u:u.slice(0,Math.max(0,r-s))}),n};function Zf(t){return Object.prototype.toString.call(t)==="[object RegExp]"}class ac{constructor(e){this.find=e.find,this.handler=e.handler}}const vN=(t,e)=>{if(Zf(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function kl(t){var e;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=t,{view:a}=n;if(a.composing)return!1;const c=a.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(f=>f.type.spec.code))return!1;let u=!1;const d=xN(c)+s;return o.forEach(f=>{if(u)return;const h=vN(d,f.find);if(!h)return;const m=a.state.tr,y=sc({state:a.state,transaction:m}),k={from:r-(h[0].length-s.length),to:i},{commands:g,chain:x,can:w}=new oc({editor:n,state:y});f.handler({state:y,range:k,match:h,commands:g,chain:x,can:w})===null||!m.steps.length||(m.setMeta(l,{transform:m,from:r,to:i,text:s}),a.dispatch(m),u=!0)}),u}function wN(t){const{editor:e,rules:n}=t,r=new ht({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const a=i.getMeta("applyInputRules");return!!a&&setTimeout(()=>{let{text:u}=a;typeof u=="string"?u=u:u=Xf(z.from(u),o.schema);const{from:d}=a,f=d+u.length;kl({editor:e,from:d,to:f,text:u,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return kl({editor:e,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&kl({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?kl({editor:e,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function kN(t){return Object.prototype.toString.call(t).slice(8,-1)}function bl(t){return kN(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function cc(t,e){const n={...t};return bl(t)&&bl(e)&&Object.keys(e).forEach(r=>{bl(e[r])&&bl(t[r])?n[r]=cc(t[r],e[r]):n[r]=e[r]}),n}class Pt{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Z(V(this,"addOptions",{name:this.name}))),this.storage=Z(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Pt(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Pt(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Z(V(n,"addOptions",{name:n.name})),n.storage=Z(V(n,"addStorage",{name:n.name,options:n.options})),n}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(c=>(c==null?void 0:c.type.name)===n.name))return!1;const a=o.find(c=>(c==null?void 0:c.type.name)===n.name);return a&&r.removeStoredMark(a),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}}function bN(t){return typeof t=="number"}class SN{constructor(e){this.find=e.find,this.handler=e.handler}}const CN=(t,e,n)=>{if(Zf(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function NN(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=t,{commands:a,chain:c,can:u}=new oc({editor:e,state:n}),d=[];return n.doc.nodesBetween(r,i,(h,m)=>{if(!h.isTextblock||h.type.spec.code)return;const y=Math.max(r,m),k=Math.min(i,m+h.content.size),g=h.textBetween(y-m,k-m,void 0,"");CN(g,s.find,o).forEach(w=>{if(w.index===void 0)return;const v=y+w.index+1,S=v+w[0].length,b={from:n.tr.mapping.map(v),to:n.tr.mapping.map(S)},C=s.handler({state:n,range:b,match:w,commands:a,chain:c,can:u,pasteEvent:o,dropEvent:l});d.push(C)})}),d.every(h=>h!==null)}let Sl=null;const MN=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)===null||e===void 0||e.setData("text/html",t),n};function EN(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const a=({state:u,from:d,to:f,rule:h,pasteEvt:m})=>{const y=u.tr,k=sc({state:u,transaction:y});if(!(!NN({editor:e,state:k,from:Math.max(d-1,0),to:f.b-1,rule:h,pasteEvent:m,dropEvent:l})||!y.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,y}};return n.map(u=>new ht({view(d){const f=m=>{var y;r=!((y=d.dom.parentElement)===null||y===void 0)&&y.contains(m.target)?d.dom.parentElement:null,r&&(Sl=e)},h=()=>{Sl&&(Sl=null)};return window.addEventListener("dragstart",f),window.addEventListener("dragend",h),{destroy(){window.removeEventListener("dragstart",f),window.removeEventListener("dragend",h)}}},props:{handleDOMEvents:{drop:(d,f)=>{if(s=r===d.dom.parentElement,l=f,!s){const h=Sl;h!=null&&h.isEditable&&setTimeout(()=>{const m=h.state.selection;m&&h.commands.deleteRange({from:m.from,to:m.to})},10)}return!1},paste:(d,f)=>{var h;const m=(h=f.clipboardData)===null||h===void 0?void 0:h.getData("text/html");return o=f,i=!!(m!=null&&m.includes("data-pm-slice")),!1}}},appendTransaction:(d,f,h)=>{const m=d[0],y=m.getMeta("uiEvent")==="paste"&&!i,k=m.getMeta("uiEvent")==="drop"&&!s,g=m.getMeta("applyPasteRules"),x=!!g;if(!y&&!k&&!x)return;if(x){let{text:S}=g;typeof S=="string"?S=S:S=Xf(z.from(S),h.schema);const{from:b}=g,C=b+S.length,M=MN(S);return a({rule:u,state:h,from:b,to:{b:C},pasteEvt:M})}const w=f.doc.content.findDiffStart(h.doc.content),v=f.doc.content.findDiffEnd(h.doc.content);if(!(!bN(w)||!v||w===v.b))return a({rule:u,state:h,from:w,to:v,pasteEvt:o})}}))}function TN(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}class Yi{constructor(e,n){this.splittableMarks=[],this.editor=n,this.extensions=Yi.resolve(e),this.schema=yN(this.extensions,n),this.setupExtensions()}static resolve(e){const n=Yi.sort(Yi.flatten(e)),r=TN(n.map(i=>i.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),n}static flatten(e){return e.map(n=>{const r={name:n.name,options:n.options,storage:n.storage},i=V(n,"addExtensions",r);return i?[n,...this.flatten(i())]:n}).flat(10)}static sort(e){return e.sort((r,i)=>{const s=V(r,"priority")||100,o=V(i,"priority")||100;return s>o?-1:s<o?1:0})}get commands(){return this.extensions.reduce((e,n)=>{const r={name:n.name,options:n.options,storage:n.storage,editor:this.editor,type:ru(n.name,this.schema)},i=V(n,"addCommands",r);return i?{...e,...i()}:e},{})}get plugins(){const{editor:e}=this,n=Yi.sort([...this.extensions].reverse()),r=[],i=[],s=n.map(o=>{const l={name:o.name,options:o.options,storage:o.storage,editor:e,type:ru(o.name,this.schema)},a=[],c=V(o,"addKeyboardShortcuts",l);let u={};if(o.type==="mark"&&V(o,"exitable",l)&&(u.ArrowRight=()=>Pt.handleExit({editor:e,mark:o})),c){const y=Object.fromEntries(Object.entries(c()).map(([k,g])=>[k,()=>g({editor:e})]));u={...u,...y}}const d=KC(u);a.push(d);const f=V(o,"addInputRules",l);Fm(o,e.options.enableInputRules)&&f&&r.push(...f());const h=V(o,"addPasteRules",l);Fm(o,e.options.enablePasteRules)&&h&&i.push(...h());const m=V(o,"addProseMirrorPlugins",l);if(m){const y=m();a.push(...y)}return a}).flat();return[wN({editor:e,rules:r}),...EN({editor:e,rules:i}),...s]}get attributes(){return vv(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:n}=lc(this.extensions);return Object.fromEntries(n.filter(r=>!!V(r,"addNodeView")).map(r=>{const i=this.attributes.filter(a=>a.type===r.name),s={name:r.name,options:r.options,storage:r.storage,editor:e,type:He(r.name,this.schema)},o=V(r,"addNodeView",s);if(!o)return[];const l=(a,c,u,d,f)=>{const h=Ed(a,i);return o()({node:a,view:c,getPos:u,decorations:d,innerDecorations:f,editor:e,extension:r,HTMLAttributes:h})};return[r.name,l]}))}setupExtensions(){this.extensions.forEach(e=>{var n;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:ru(e.name,this.schema)};e.type==="mark"&&(!((n=Z(V(e,"keepOnSplit",r)))!==null&&n!==void 0)||n)&&this.splittableMarks.push(e.name);const i=V(e,"onBeforeCreate",r),s=V(e,"onCreate",r),o=V(e,"onUpdate",r),l=V(e,"onSelectionUpdate",r),a=V(e,"onTransaction",r),c=V(e,"onFocus",r),u=V(e,"onBlur",r),d=V(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),a&&this.editor.on("transaction",a),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ie{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Z(V(this,"addOptions",{name:this.name}))),this.storage=Z(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ie(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new Ie({...this.config,...e});return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Z(V(n,"addOptions",{name:n.name})),n.storage=Z(V(n,"addStorage",{name:n.name,options:n.options})),n}}function kv(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return t.nodesBetween(r,i,(a,c,u,d)=>{var f;a.isBlock&&c>r&&(l+=s);const h=o==null?void 0:o[a.type.name];if(h)return u&&(l+=h({node:a,pos:c,parent:u,index:d,range:e})),!1;a.isText&&(l+=(f=a==null?void 0:a.text)===null||f===void 0?void 0:f.slice(Math.max(r,c)-c,i-c))}),l}function bv(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}const ON=Ie.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new ht({key:new hn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,o=Math.min(...s.map(u=>u.$from.pos)),l=Math.max(...s.map(u=>u.$to.pos)),a=bv(n);return kv(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:a})}}})]}}),zN=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window==null?void 0:window.getSelection())===null||n===void 0||n.removeAllRanges())}),!0),DN=(t=!1)=>({commands:e})=>e.setContent("",t),jN=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{t.doc.nodesBetween(s.pos,o.pos,(l,a)=>{if(l.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(a)),f=c.resolve(u.map(a+l.nodeSize)),h=d.blockRange(f);if(!h)return;const m=Ns(h);if(l.type.isTextblock){const{defaultType:y}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(h.start,y)}(m||m===0)&&e.lift(h,m)})}),!0},AN=t=>e=>t(e),PN=()=>({state:t,dispatch:e})=>mv(t,e),IN=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const o=r.mapping.map(e);return r.insert(o,s.content),r.setSelection(new Y(r.doc.resolve(Math.max(o-1,0)))),!0},RN=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const l=i.before(s),a=i.after(s);t.delete(l,a).scrollIntoView()}return!0}return!1},LN=t=>({tr:e,state:n,dispatch:r})=>{const i=He(t,n.schema),s=e.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const a=s.before(o),c=s.after(o);e.delete(a,c).scrollIntoView()}return!0}return!1},_N=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},$N=()=>({state:t,dispatch:e})=>Kf(t,e),BN=()=>({commands:t})=>t.keyboardShortcut("Enter"),FN=()=>({state:t,dispatch:e})=>ZC(t,e);function Ta(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Zf(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function Sv(t,e,n={}){return t.find(r=>r.type===e&&Ta(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function Vm(t,e,n={}){return!!Sv(t,e,n)}function ep(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(u=>u.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(u=>u.type===e)||(n=n||((r=i.node.marks[0])===null||r===void 0?void 0:r.attrs),!Sv([...i.node.marks],e,n)))return;let o=i.index,l=t.start()+i.offset,a=o+1,c=l+i.node.nodeSize;for(;o>0&&Vm([...t.parent.child(o-1).marks],e,n);)o-=1,l-=t.parent.child(o).nodeSize;for(;a<t.parent.childCount&&Vm([...t.parent.child(a).marks],e,n);)c+=t.parent.child(a).nodeSize,a+=1;return{from:l,to:c}}function Fr(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}const VN=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=Fr(t,r.schema),{doc:o,selection:l}=n,{$from:a,from:c,to:u}=l;if(i){const d=ep(a,s,e);if(d&&d.from<=c&&d.to>=u){const f=Y.create(o,d.from,d.to);n.setSelection(f)}}return!0},HN=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function tp(t){return t instanceof Y}function Hn(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Cv(t,e=null){if(!e)return null;const n=Q.atStart(t),r=Q.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Y.create(t,Hn(0,i,s),Hn(t.content.size,i,s)):Y.create(t,Hn(e,i,s),Hn(e,i,s))}function WN(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function np(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const UN=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const o=()=>{(np()||WN())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!tp(n.state.selection))return o(),!0;const l=Cv(i.doc,t)||n.state.selection,a=n.state.selection.eq(l);return s&&(a||i.setSelection(l),a&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},qN=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),KN=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),Nv=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&Nv(r)}return t};function Cl(t){const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return Nv(n)}function Lo(t,e,n){if(t instanceof Or||t instanceof z)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return z.fromArray(t.map(l=>e.nodeFromJSON(l)));const o=e.nodeFromJSON(t);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),Lo("",e,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const a=new lx({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(o=!0,l=typeof c=="string"?c:c.outerHTML,null)}]}})});if(n.slice?so.fromSchema(a).parseSlice(Cl(t),n.parseOptions):so.fromSchema(a).parse(Cl(t),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=so.fromSchema(e);return n.slice?s.parseSlice(Cl(t),n.parseOptions).content:s.parse(Cl(t),n.parseOptions)}return Lo("",e,n)}function JN(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof _e||i instanceof Fe))return;const s=t.mapping.maps[r];let o=0;s.forEach((l,a,c,u)=>{o===0&&(o=u)}),t.setSelection(Q.near(t.doc.resolve(o),n))}const YN=t=>!("type"in t),GN=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const a=k=>{s.emit("contentError",{editor:s,error:k,disableCollaboration:()=>{s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Lo(e,s.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(k){a(k)}try{l=Lo(e,s.schema,{parseOptions:c,errorOnInvalidContent:(o=n.errorOnInvalidContent)!==null&&o!==void 0?o:s.options.enableContentCheck})}catch(k){return a(k),!1}let{from:u,to:d}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},f=!0,h=!0;if((YN(l)?l:[l]).forEach(k=>{k.check(),f=f?k.isText&&k.marks.length===0:!1,h=h?k.isBlock:!1}),u===d&&h){const{parent:k}=r.doc.resolve(u);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(u-=1,d+=1)}let y;if(f){if(Array.isArray(e))y=e.map(k=>k.text||"").join("");else if(e instanceof z){let k="";e.forEach(g=>{g.text&&(k+=g.text)}),y=k}else typeof e=="object"&&e&&e.text?y=e.text:y=e;r.insertText(y,u,d)}else y=l,r.replaceWith(u,d,y);n.updateSelection&&JN(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:y}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:y})}return!0},QN=()=>({state:t,dispatch:e})=>GC(t,e),XN=()=>({state:t,dispatch:e})=>QC(t,e),ZN=()=>({state:t,dispatch:e})=>av(t,e),e2=()=>({state:t,dispatch:e})=>fv(t,e),t2=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Za(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},n2=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Za(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},r2=()=>({state:t,dispatch:e})=>JC(t,e),i2=()=>({state:t,dispatch:e})=>YC(t,e);function Mv(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function s2(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<e.length-1;l+=1){const a=e[l];if(/^(cmd|meta|m)$/i.test(a))o=!0;else if(/^a(lt)?$/i.test(a))r=!0;else if(/^(c|ctrl|control)$/i.test(a))i=!0;else if(/^s(hift)?$/i.test(a))s=!0;else if(/^mod$/i.test(a))np()||Mv()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${a}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}const o2=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=s2(t).split(/-(?!$)/),o=s.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),a=e.captureTransaction(()=>{n.someProp("handleKeyDown",c=>c(n,l))});return a==null||a.steps.forEach(c=>{const u=c.map(r.mapping);u&&i&&r.maybeStep(u)}),!0};function _o(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,o=e?He(e,t.schema):null,l=[];t.doc.nodesBetween(r,i,(d,f)=>{if(d.isText)return;const h=Math.max(r,f),m=Math.min(i,f+d.nodeSize);l.push({node:d,from:h,to:m})});const a=i-r,c=l.filter(d=>o?o.name===d.node.type.name:!0).filter(d=>Ta(d.node.attrs,n,{strict:!1}));return s?!!c.length:c.reduce((d,f)=>d+f.to-f.from,0)>=a}const l2=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return _o(n,i,e)?XC(n,r):!1},a2=()=>({state:t,dispatch:e})=>gv(t,e),c2=t=>({state:e,dispatch:n})=>{const r=He(t,e.schema);return uN(r)(e,n)},u2=()=>({state:t,dispatch:e})=>hv(t,e);function uc(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Hm(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}const d2=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=uc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=He(t,r.schema)),l==="mark"&&(o=Fr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{r.doc.nodesBetween(a.$from.pos,a.$to.pos,(c,u)=>{s&&s===c.type&&n.setNodeMarkup(u,void 0,Hm(c.attrs,e)),o&&c.marks.length&&c.marks.forEach(d=>{o===d.type&&n.addMark(u,u+c.nodeSize,o.create(Hm(d.attrs,e)))})})}),!0):!1},f2=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),p2=()=>({tr:t,dispatch:e})=>{if(e){const n=new jt(t.doc);t.setSelection(n)}return!0},h2=()=>({state:t,dispatch:e})=>uv(t,e),m2=()=>({state:t,dispatch:e})=>pv(t,e),g2=()=>({state:t,dispatch:e})=>nN(t,e),y2=()=>({state:t,dispatch:e})=>sN(t,e),x2=()=>({state:t,dispatch:e})=>iN(t,e);function Td(t,e,n={},r={}){return Lo(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}const v2=(t,e=!1,n={},r={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{var a,c;const{doc:u}=s;if(n.preserveWhitespace!=="full"){const d=Td(t,i.schema,n,{errorOnInvalidContent:(a=r.errorOnInvalidContent)!==null&&a!==void 0?a:i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return o&&s.setMeta("preventUpdate",!e),l.insertContentAt({from:0,to:u.content.size},t,{parseOptions:n,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:i.options.enableContentCheck})};function Ev(t,e){const n=Fr(e,t.schema),{from:r,to:i,empty:s}=t.selection,o=[];s?(t.storedMarks&&o.push(...t.storedMarks),o.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,a=>{o.push(...a.marks)});const l=o.find(a=>a.type.name===n.name);return l?{...l.attrs}:{}}function w2(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function k2(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function rp(t){return e=>k2(e.$from,t)}function b2(t,e){const n={from:0,to:t.content.size};return kv(t,n,e)}function S2(t,e){const n=He(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function C2(t,e){const n=uc(typeof e=="string"?e:e.name,t.schema);return n==="node"?S2(t,e):n==="mark"?Ev(t,e):{}}function Tv(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),o=ep(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(t,e,(i,s)=>{!i||(i==null?void 0:i.nodeSize)===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}function Wl(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}function Od(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?Fr(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(d=>s?s.name===d.type.name:!0).find(d=>Ta(d.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:d,$to:f})=>{const h=d.pos,m=f.pos;t.doc.nodesBetween(h,m,(y,k)=>{if(!y.isText&&!y.marks.length)return;const g=Math.max(h,k),x=Math.min(m,k+y.nodeSize),w=x-g;o+=w,l.push(...y.marks.map(v=>({mark:v,from:g,to:x})))})}),o===0)return!1;const a=l.filter(d=>s?s.name===d.mark.type.name:!0).filter(d=>Ta(d.mark.attrs,n,{strict:!1})).reduce((d,f)=>d+f.to-f.from,0),c=l.filter(d=>s?d.mark.type!==s&&d.mark.type.excludes(s):!0).reduce((d,f)=>d+f.to-f.from,0);return(a>0?a+c:a)>=o}function N2(t,e,n={}){if(!e)return _o(t,null,n)||Od(t,null,n);const r=uc(e,t.schema);return r==="node"?_o(t,e,n):r==="mark"?Od(t,e,n):!1}function Wm(t,e){const{nodeExtensions:n}=lc(e),r=n.find(o=>o.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Z(V(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function ip(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!==null&&r!==void 0?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(ip(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function Ov(t){return t instanceof q}function M2(t,e,n){const i=t.state.doc.content.size,s=Hn(e,0,i),o=Hn(n,0,i),l=t.coordsAtPos(s),a=t.coordsAtPos(o,-1),c=Math.min(l.top,a.top),u=Math.max(l.bottom,a.bottom),d=Math.min(l.left,a.left),f=Math.max(l.right,a.right),h=f-d,m=u-c,g={top:c,bottom:u,left:d,right:f,width:h,height:m,x:d,y:c};return{...g,toJSON:()=>g}}function E2(t,e,n){var r;const{selection:i}=e;let s=null;if(tp(i)&&(s=i.$cursor),s){const l=(r=t.storedMarks)!==null&&r!==void 0?r:s.marks();return!!n.isInSet(l)||!l.some(a=>a.type.excludes(n))}const{ranges:o}=i;return o.some(({$from:l,$to:a})=>{let c=l.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(l.pos,a.pos,(u,d,f)=>{if(c)return!1;if(u.isInline){const h=!f||f.type.allowsMarkType(n),m=!!n.isInSet(u.marks)||!u.marks.some(y=>y.type.excludes(n));c=h&&m}return!c}),c})}const T2=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,a=Fr(t,r.schema);if(i)if(o){const c=Ev(r,a);n.addStoredMark(a.create({...c,...e}))}else l.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(f,h)=>{const m=Math.max(h,u),y=Math.min(h+f.nodeSize,d);f.marks.find(g=>g.type===a)?f.marks.forEach(g=>{a===g.type&&n.addMark(m,y,a.create({...g.attrs,...e}))}):n.addMark(m,y,a.create(e))})});return E2(r,n,a)},O2=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),z2=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=He(t,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>_m(s,{...o,...e})(n)?!0:l.clearNodes()).command(({state:l})=>_m(s,{...o,...e})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},D2=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=Hn(t,0,r.content.size),s=q.create(r,i);e.setSelection(s)}return!0},j2=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,o=Y.atStart(r).from,l=Y.atEnd(r).to,a=Hn(i,o,l),c=Hn(s,o,l),u=Y.create(r,a,c);e.setSelection(u)}return!0},A2=t=>({state:e,dispatch:n})=>{const r=He(t,e.schema);return pN(r)(e,n)};function Um(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e==null?void 0:e.includes(i.type.name));t.tr.ensureMarks(r)}}const P2=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=e,{$from:l,$to:a}=s,c=i.extensionManager.attributes,u=Wl(c,l.node().type.name,l.node().attrs);if(s instanceof q&&s.node.isBlock)return!l.parentOffset||!Un(o,l.pos)?!1:(r&&(t&&Um(n,i.extensionManager.splittableMarks),e.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const d=a.parentOffset===a.parent.content.size,f=l.depth===0?void 0:w2(l.node(-1).contentMatchAt(l.indexAfter(-1)));let h=d&&f?[{type:f,attrs:u}]:void 0,m=Un(e.doc,e.mapping.map(l.pos),1,h);if(!h&&!m&&Un(e.doc,e.mapping.map(l.pos),1,f?[{type:f}]:void 0)&&(m=!0,h=f?[{type:f,attrs:u}]:void 0),r){if(m&&(s instanceof Y&&e.deleteSelection(),e.split(e.mapping.map(l.pos),1,h),f&&!d&&!l.parentOffset&&l.parent.type!==f)){const y=e.mapping.map(l.before()),k=e.doc.resolve(y);l.node(-1).canReplaceWith(k.index(),k.index()+1,f)&&e.setNodeMarkup(e.mapping.map(l.before()),f)}t&&Um(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return m},I2=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=He(t,r.schema),{$from:a,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||a.depth<2||!a.sameParent(c))return!1;const d=a.node(-1);if(d.type!==l)return!1;const f=s.extensionManager.attributes;if(a.parent.content.size===0&&a.node(-1).childCount===a.indexAfter(-1)){if(a.depth===2||a.node(-3).type!==l||a.index(-2)!==a.node(-2).childCount-1)return!1;if(i){let g=z.empty;const x=a.index(-1)?1:a.index(-2)?2:3;for(let M=a.depth-x;M>=a.depth-3;M-=1)g=z.from(a.node(M).copy(g));const w=a.indexAfter(-1)<a.node(-2).childCount?1:a.indexAfter(-2)<a.node(-3).childCount?2:3,v={...Wl(f,a.node().type.name,a.node().attrs),...e},S=((o=l.contentMatch.defaultType)===null||o===void 0?void 0:o.createAndFill(v))||void 0;g=g.append(z.from(l.createAndFill(null,S)||void 0));const b=a.before(a.depth-(x-1));n.replace(b,a.after(-w),new _(g,4-x,0));let C=-1;n.doc.nodesBetween(b,n.doc.content.size,(M,D)=>{if(C>-1)return!1;M.isTextblock&&M.content.size===0&&(C=D+1)}),C>-1&&n.setSelection(Y.near(n.doc.resolve(C))),n.scrollIntoView()}return!0}const h=c.pos===a.end()?d.contentMatchAt(0).defaultType:null,m={...Wl(f,d.type.name,d.attrs),...e},y={...Wl(f,a.node().type.name,a.node().attrs),...e};n.delete(a.pos,c.pos);const k=h?[{type:l,attrs:m},{type:h,attrs:y}]:[{type:l,attrs:m}];if(!Un(n.doc,a.pos,2))return!1;if(i){const{selection:g,storedMarks:x}=r,{splittableMarks:w}=s.extensionManager,v=x||g.$to.parentOffset&&g.$from.marks();if(n.split(a.pos,2,k).scrollIntoView(),!v||!i)return!0;const S=v.filter(b=>w.includes(b.type.name));n.ensureMarks(S)}return!0},iu=(t,e)=>{const n=rp(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&$r(t.doc,n.pos)&&t.join(n.pos),!0},su=(t,e)=>{const n=rp(o=>o.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===(i==null?void 0:i.type)&&$r(t.doc,r)&&t.join(r),!0},R2=(t,e,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:a,commands:c,can:u})=>{const{extensions:d,splittableMarks:f}=i.extensionManager,h=He(t,o.schema),m=He(e,o.schema),{selection:y,storedMarks:k}=o,{$from:g,$to:x}=y,w=g.blockRange(x),v=k||y.$to.parentOffset&&y.$from.marks();if(!w)return!1;const S=rp(b=>Wm(b.type.name,d))(y);if(w.depth>=1&&S&&w.depth-S.depth<=1){if(S.node.type===h)return c.liftListItem(m);if(Wm(S.node.type.name,d)&&h.validContent(S.node.content)&&l)return a().command(()=>(s.setNodeMarkup(S.pos,h),!0)).command(()=>iu(s,h)).command(()=>su(s,h)).run()}return!n||!v||!l?a().command(()=>u().wrapInList(h,r)?!0:c.clearNodes()).wrapInList(h,r).command(()=>iu(s,h)).command(()=>su(s,h)).run():a().command(()=>{const b=u().wrapInList(h,r),C=v.filter(M=>f.includes(M.type.name));return s.ensureMarks(C),b?!0:c.clearNodes()}).wrapInList(h,r).command(()=>iu(s,h)).command(()=>su(s,h)).run()},L2=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Fr(t,r.schema);return Od(r,o,e)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,e)},_2=(t,e,n={})=>({state:r,commands:i})=>{const s=He(t,r.schema),o=He(e,r.schema),l=_o(r,s,n);let a;return r.selection.$anchor.sameParent(r.selection.$head)&&(a=r.selection.$anchor.parent.attrs),l?i.setNode(o,a):i.setNode(s,{...a,...n})},$2=(t,e={})=>({state:n,commands:r})=>{const i=He(t,n.schema);return _o(n,i,e)?r.lift(i):r.wrapIn(i,e)},B2=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const o=t.tr,l=s.transform;for(let a=l.steps.length-1;a>=0;a-=1)o.step(l.steps[a].invert(l.docs[a]));if(s.text){const a=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,t.schema.text(s.text,a))}else o.delete(s.from,s.to)}return!0}}return!1},F2=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},V2=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=e,{selection:l}=n,a=Fr(t,r.schema),{$from:c,empty:u,ranges:d}=l;if(!i)return!0;if(u&&o){let{from:f,to:h}=l;const m=(s=c.marks().find(k=>k.type===a))===null||s===void 0?void 0:s.attrs,y=ep(c,a,m);y&&(f=y.from,h=y.to),n.removeMark(f,h,a)}else d.forEach(f=>{n.removeMark(f.$from.pos,f.$to.pos,a)});return n.removeStoredMark(a),!0},H2=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=uc(typeof t=="string"?t:t.name,r.schema);return l?(l==="node"&&(s=He(t,r.schema)),l==="mark"&&(o=Fr(t,r.schema)),i&&n.selection.ranges.forEach(a=>{const c=a.$from.pos,u=a.$to.pos;let d,f,h,m;n.selection.empty?r.doc.nodesBetween(c,u,(y,k)=>{s&&s===y.type&&(h=Math.max(k,c),m=Math.min(k+y.nodeSize,u),d=k,f=y)}):r.doc.nodesBetween(c,u,(y,k)=>{k<c&&s&&s===y.type&&(h=Math.max(k,c),m=Math.min(k+y.nodeSize,u),d=k,f=y),k>=c&&k<=u&&(s&&s===y.type&&n.setNodeMarkup(k,void 0,{...y.attrs,...e}),o&&y.marks.length&&y.marks.forEach(g=>{if(o===g.type){const x=Math.max(k,c),w=Math.min(k+y.nodeSize,u);n.addMark(x,w,o.create({...g.attrs,...e}))}}))}),f&&(d!==void 0&&n.setNodeMarkup(d,void 0,{...f.attrs,...e}),o&&f.marks.length&&f.marks.forEach(y=>{o===y.type&&n.addMark(h,m,o.create({...y.attrs,...e}))}))}),!0):!1},W2=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return oN(i,e)(n,r)},U2=(t,e={})=>({state:n,dispatch:r})=>{const i=He(t,n.schema);return lN(i,e)(n,r)};var q2=Object.freeze({__proto__:null,blur:zN,clearContent:DN,clearNodes:jN,command:AN,createParagraphNear:PN,cut:IN,deleteCurrentNode:RN,deleteNode:LN,deleteRange:_N,deleteSelection:$N,enter:BN,exitCode:FN,extendMarkRange:VN,first:HN,focus:UN,forEach:qN,insertContent:KN,insertContentAt:GN,joinBackward:ZN,joinDown:XN,joinForward:e2,joinItemBackward:t2,joinItemForward:n2,joinTextblockBackward:r2,joinTextblockForward:i2,joinUp:QN,keyboardShortcut:o2,lift:l2,liftEmptyBlock:a2,liftListItem:c2,newlineInCode:u2,resetAttributes:d2,scrollIntoView:f2,selectAll:p2,selectNodeBackward:h2,selectNodeForward:m2,selectParentNode:g2,selectTextblockEnd:y2,selectTextblockStart:x2,setContent:v2,setMark:T2,setMeta:O2,setNode:z2,setNodeSelection:D2,setTextSelection:j2,sinkListItem:A2,splitBlock:P2,splitListItem:I2,toggleList:R2,toggleMark:L2,toggleNode:_2,toggleWrap:$2,undoInputRule:B2,unsetAllMarks:F2,unsetMark:V2,updateAttributes:H2,wrapIn:W2,wrapInList:U2});const K2=Ie.create({name:"commands",addCommands(){return{...q2}}}),J2=Ie.create({name:"drop",addProseMirrorPlugins(){return[new ht({key:new hn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),Y2=Ie.create({name:"editable",addProseMirrorPlugins(){return[new ht({key:new hn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),G2=new hn("focusEvents"),Q2=Ie.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new ht({key:G2,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),X2=Ie.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:a,doc:c}=l,{empty:u,$anchor:d}=a,{pos:f,parent:h}=d,m=d.parent.isTextblock&&f>0?l.doc.resolve(f-1):d,y=m.parent.type.spec.isolating,k=d.pos-d.parentOffset,g=y&&m.parent.childCount===1?k===d.pos:Q.atStart(c).from===f;return!u||!h.type.isTextblock||h.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return np()||Mv()?s:i},addProseMirrorPlugins(){return[new ht({key:new hn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(y=>y.getMeta("composition")))return;const r=t.some(y=>y.docChanged)&&!e.doc.eq(n.doc),i=t.some(y=>y.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=e.selection,a=Q.atStart(e.doc).from,c=Q.atEnd(e.doc).to;if(s||!(o===a&&l===c)||!ip(n.doc))return;const f=n.tr,h=sc({state:n,transaction:f}),{commands:m}=new oc({editor:this.editor,state:h});if(m.clearNodes(),!!f.steps.length)return f}})]}}),Z2=Ie.create({name:"paste",addProseMirrorPlugins(){return[new ht({key:new hn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),eM=Ie.create({name:"tabindex",addProseMirrorPlugins(){return[new ht({key:new hn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Xr{get name(){return this.node.type.name}constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Xr(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Xr(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Xr(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const a=new Xr(l,this.editor,i,i?n:null);i&&(a.actualDepth=this.depth+1),e.push(new Xr(l,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const a=o[l];if(s[a]!==n[a])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===e&&s.every(a=>n[a]===o.node.attrs[a])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}}const tM=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function nM(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}class rM extends hN{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:n})=>{throw n},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:n,slice:r,moved:i})=>this.options.onDrop(n,r,i)),this.on("paste",({event:n,slice:r})=>this.options.onPaste(n,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=nM(tM,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,n=!0){this.setOptions({editable:e}),n&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,n){const r=wv(n)?n(e,[...this.state.plugins]):[...this.state.plugins,e],i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}unregisterPlugin(e){if(this.isDestroyed)return;const n=this.state.plugins;let r=n;if([].concat(e).forEach(s=>{const o=typeof s=="string"?`${s}$`:s.key;r=r.filter(l=>!l.key.startsWith(o))}),n.length===r.length)return;const i=this.state.reconfigure({plugins:r});return this.view.updateState(i),i}createExtensionManager(){var e,n;const i=[...this.options.enableCoreExtensions?[Y2,ON.configure({blockSeparator:(n=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||n===void 0?void 0:n.blockSeparator}),K2,Q2,X2,eM,J2,Z2].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s==null?void 0:s.type));this.extensionManager=new Yi(i,this)}createCommandManager(){this.commandManager=new oc({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let n;try{n=Td(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(o){if(!(o instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(o.message))throw o;this.emit("contentError",{editor:this,error:o,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(l=>l.name!=="collaboration"),this.createExtensionManager()}}),n=Td(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=Cv(n,this.options.autofocus);this.view=new sv(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:Ji.create({doc:n,selection:r||void 0})});const i=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(i),this.createNodeViews(),this.prependClass();const s=this.view.dom;s.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const n=this.capturedTransaction;return this.capturedTransaction=null,n}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(o=>{var l;return(l=this.capturedTransaction)===null||l===void 0?void 0:l.step(o)});return}const n=this.state.apply(e),r=!this.state.selection.eq(n.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:n}),this.view.updateState(n),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const i=e.getMeta("focus"),s=e.getMeta("blur");i&&this.emit("focus",{editor:this,event:i.event,transaction:e}),s&&this.emit("blur",{editor:this,event:s.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return C2(this.state,e)}isActive(e,n){const r=typeof e=="string"?e:null,i=typeof e=="string"?n:e;return N2(this.state,r,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Xf(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:n=`

`,textSerializers:r={}}=e||{};return b2(this.state.doc,{blockSeparator:n,textSerializers:{...bv(this.schema),...r}})}get isEmpty(){return ip(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,n))||null}$nodes(e,n){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,n))||null}$pos(e){const n=this.state.doc.resolve(e);return new Xr(n,this)}get $doc(){return this.$pos(0)}}function ki(t){return new ac({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Z(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,o=r[r.length-1],l=r[0];if(o){const a=l.search(/\S/),c=n.from+l.indexOf(o),u=c+o.length;if(Tv(n.from,n.to,e.doc).filter(h=>h.mark.type.excluded.find(y=>y===t.type&&y!==h.mark.type)).filter(h=>h.to>c).length)return null;u<n.to&&s.delete(u,n.to),c>n.from&&s.delete(n.from+a,c);const f=n.from+a+o.length;s.addMark(n.from+a,f,t.type.create(i||{})),s.removeStoredMark(t.type)}}})}function zv(t){return new ac({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Z(t.getAttributes,void 0,r)||{},{tr:s}=e,o=n.from;let l=n.to;const a=t.type.create(i);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=o+c;u>l?u=l:l=u+r[1].length;const d=r[0][r[0].length-1];s.insertText(d,o+r[0].length-1),s.replaceWith(u,l,a)}else if(r[0]){const c=t.type.isInline?o:o-1;s.insert(c,t.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()}})}function zd(t){return new ac({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Z(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)}})}function $o(t){return new ac({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Z(t.getAttributes,void 0,r)||{},o=e.tr.delete(n.from,n.to),a=o.doc.resolve(n.from).blockRange(),c=a&&Rf(a,t.type,s);if(!c)return null;if(o.wrap(a,c),t.keepMarks&&t.editor){const{selection:d,storedMarks:f}=e,{splittableMarks:h}=t.editor.extensionManager,m=f||d.$to.parentOffset&&d.$from.marks();if(m){const y=m.filter(k=>h.includes(k.type.name));o.ensureMarks(y)}}if(t.keepAttributes){const d=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(d,s).run()}const u=o.doc.resolve(n.from-1).nodeBefore;u&&u.type===t.type&&$r(o.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,u))&&o.join(n.from-1)}})}class st{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=Z(V(this,"addOptions",{name:this.name}))),this.storage=Z(V(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new st(e)}configure(e={}){const n=this.extend({...this.config,addOptions:()=>cc(this.options,e)});return n.name=this.name,n.parent=this.parent,n}extend(e={}){const n=new st(e);return n.parent=this,this.child=n,n.name=e.name?e.name:n.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${n.name}".`),n.options=Z(V(n,"addOptions",{name:n.name})),n.storage=Z(V(n,"addStorage",{name:n.name,options:n.options})),n}}function bi(t){return new SN({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Z(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=e,l=r[r.length-1],a=r[0];let c=n.to;if(l){const u=a.search(/\S/),d=n.from+a.indexOf(l),f=d+l.length;if(Tv(n.from,n.to,e.doc).filter(m=>m.mark.type.excluded.find(k=>k===t.type&&k!==m.mark.type)).filter(m=>m.to>d).length)return null;f<n.to&&o.delete(f,n.to),d>n.from&&o.delete(n.from+u,d),c=n.from+u+l.length,o.addMark(n.from+u,c,t.type.create(s||{})),o.removeStoredMark(t.type)}}})}function iM(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof q){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}const sM=t=>{if(!t.children.length)return;const e=t.querySelectorAll("span");e&&e.forEach(n=>{var r,i;const s=n.getAttribute("style"),o=(i=(r=n.parentElement)===null||r===void 0?void 0:r.closest("span"))===null||i===void 0?void 0:i.getAttribute("style");n.setAttribute("style",`${o};${s}`)})},oM=Pt.create({name:"textStyle",priority:101,addOptions(){return{HTMLAttributes:{},mergeNestedSpanStyles:!1}},parseHTML(){return[{tag:"span",getAttrs:t=>t.hasAttribute("style")?(this.options.mergeNestedSpanStyles&&sM(t),{}):!1}]},renderHTML({HTMLAttributes:t}){return["span",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{removeEmptyTextStyle:()=>({tr:t})=>{const{selection:e}=t;return t.doc.nodesBetween(e.from,e.to,(n,r)=>{if(n.isTextblock)return!0;n.marks.filter(i=>i.type===this.type).some(i=>Object.values(i.attrs).some(s=>!!s))||t.removeMark(r,r+n.nodeSize,this.type)}),!0}}}}),lM=Ie.create({name:"color",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{color:{default:null,parseHTML:t=>{var e;return(e=t.style.color)===null||e===void 0?void 0:e.replace(/['"]+/g,"")},renderHTML:t=>t.color?{style:`color: ${t.color}`}:{}}}}]},addCommands(){return{setColor:t=>({chain:e})=>e().setMark("textStyle",{color:t}).run(),unsetColor:()=>({chain:t})=>t().setMark("textStyle",{color:null}).removeEmptyTextStyle().run()}}}),aM=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,cM=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,uM=Pt.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:t=>t.getAttribute("data-color")||t.style.backgroundColor,renderHTML:t=>t.color?{"data-color":t.color,style:`background-color: ${t.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:t}){return["mark",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setHighlight:t=>({commands:e})=>e.setMark(this.name,t),toggleHighlight:t=>({commands:e})=>e.toggleMark(this.name,t),unsetHighlight:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[ki({find:aM,type:this.type})]},addPasteRules(){return[bi({find:cM,type:this.type})]}}),dM=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,fM=st.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:t}){return["img",Ne(this.options.HTMLAttributes,t)]},addCommands(){return{setImage:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}},addInputRules(){return[zv({find:dM,type:this.type,getAttributes:t=>{const[,,e,n,r]=t;return{src:n,alt:e,title:r}}})]}}),pM=Pt.create({name:"subscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sub"},{style:"vertical-align",getAttrs(t){return t!=="sub"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sub",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setSubscript:()=>({commands:t})=>t.setMark(this.name),toggleSubscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSubscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-,":()=>this.editor.commands.toggleSubscript()}}}),hM=Pt.create({name:"superscript",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"sup"},{style:"vertical-align",getAttrs(t){return t!=="super"?!1:null}}]},renderHTML({HTMLAttributes:t}){return["sup",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setSuperscript:()=>({commands:t})=>t.setMark(this.name),toggleSuperscript:()=>({commands:t})=>t.toggleMark(this.name),unsetSuperscript:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-.":()=>this.editor.commands.toggleSuperscript()}}}),mM=Ie.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:t=>{const e=t.style.textAlign;return this.options.alignments.includes(e)?e:this.options.defaultAlignment},renderHTML:t=>t.textAlign?{style:`text-align: ${t.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:t=>({commands:e})=>this.options.alignments.includes(t)?this.options.types.map(n=>e.updateAttributes(n,{textAlign:t})).every(n=>n):!1,unsetTextAlign:()=>({commands:t})=>this.options.types.map(e=>t.resetAttributes(e,"textAlign")).every(e=>e),toggleTextAlign:t=>({editor:e,commands:n})=>this.options.alignments.includes(t)?e.isActive({textAlign:t})?n.unsetTextAlign():n.setTextAlign(t):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),gM=Pt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});var St="top",Zt="bottom",en="right",Ct="left",sp="auto",Go=[St,Zt,en,Ct],ys="start",Bo="end",yM="clippingParents",Dv="viewport",$s="popper",xM="reference",qm=Go.reduce(function(t,e){return t.concat([e+"-"+ys,e+"-"+Bo])},[]),jv=[].concat(Go,[sp]).reduce(function(t,e){return t.concat([e,e+"-"+ys,e+"-"+Bo])},[]),vM="beforeRead",wM="read",kM="afterRead",bM="beforeMain",SM="main",CM="afterMain",NM="beforeWrite",MM="write",EM="afterWrite",TM=[vM,wM,kM,bM,SM,CM,NM,MM,EM];function Dn(t){return t?(t.nodeName||"").toLowerCase():null}function It(t){if(t==null)return window;if(t.toString()!=="[object Window]"){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function Si(t){var e=It(t).Element;return t instanceof e||t instanceof Element}function Gt(t){var e=It(t).HTMLElement;return t instanceof e||t instanceof HTMLElement}function op(t){if(typeof ShadowRoot>"u")return!1;var e=It(t).ShadowRoot;return t instanceof e||t instanceof ShadowRoot}function OM(t){var e=t.state;Object.keys(e.elements).forEach(function(n){var r=e.styles[n]||{},i=e.attributes[n]||{},s=e.elements[n];!Gt(s)||!Dn(s)||(Object.assign(s.style,r),Object.keys(i).forEach(function(o){var l=i[o];l===!1?s.removeAttribute(o):s.setAttribute(o,l===!0?"":l)}))})}function zM(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach(function(r){var i=e.elements[r],s=e.attributes[r]||{},o=Object.keys(e.styles.hasOwnProperty(r)?e.styles[r]:n[r]),l=o.reduce(function(a,c){return a[c]="",a},{});!Gt(i)||!Dn(i)||(Object.assign(i.style,l),Object.keys(s).forEach(function(a){i.removeAttribute(a)}))})}}const Av={name:"applyStyles",enabled:!0,phase:"write",fn:OM,effect:zM,requires:["computeStyles"]};function Tn(t){return t.split("-")[0]}var ui=Math.max,Oa=Math.min,xs=Math.round;function Dd(){var t=navigator.userAgentData;return t!=null&&t.brands&&Array.isArray(t.brands)?t.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function Pv(){return!/^((?!chrome|android).)*safari/i.test(Dd())}function vs(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!1);var r=t.getBoundingClientRect(),i=1,s=1;e&&Gt(t)&&(i=t.offsetWidth>0&&xs(r.width)/t.offsetWidth||1,s=t.offsetHeight>0&&xs(r.height)/t.offsetHeight||1);var o=Si(t)?It(t):window,l=o.visualViewport,a=!Pv()&&n,c=(r.left+(a&&l?l.offsetLeft:0))/i,u=(r.top+(a&&l?l.offsetTop:0))/s,d=r.width/i,f=r.height/s;return{width:d,height:f,top:u,right:c+d,bottom:u+f,left:c,x:c,y:u}}function lp(t){var e=vs(t),n=t.offsetWidth,r=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-r)<=1&&(r=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:r}}function Iv(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&op(n)){var r=e;do{if(r&&t.isSameNode(r))return!0;r=r.parentNode||r.host}while(r)}return!1}function Qn(t){return It(t).getComputedStyle(t)}function DM(t){return["table","td","th"].indexOf(Dn(t))>=0}function Vr(t){return((Si(t)?t.ownerDocument:t.document)||window.document).documentElement}function dc(t){return Dn(t)==="html"?t:t.assignedSlot||t.parentNode||(op(t)?t.host:null)||Vr(t)}function Km(t){return!Gt(t)||Qn(t).position==="fixed"?null:t.offsetParent}function jM(t){var e=/firefox/i.test(Dd()),n=/Trident/i.test(Dd());if(n&&Gt(t)){var r=Qn(t);if(r.position==="fixed")return null}var i=dc(t);for(op(i)&&(i=i.host);Gt(i)&&["html","body"].indexOf(Dn(i))<0;){var s=Qn(i);if(s.transform!=="none"||s.perspective!=="none"||s.contain==="paint"||["transform","perspective"].indexOf(s.willChange)!==-1||e&&s.willChange==="filter"||e&&s.filter&&s.filter!=="none")return i;i=i.parentNode}return null}function Qo(t){for(var e=It(t),n=Km(t);n&&DM(n)&&Qn(n).position==="static";)n=Km(n);return n&&(Dn(n)==="html"||Dn(n)==="body"&&Qn(n).position==="static")?e:n||jM(t)||e}function ap(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function co(t,e,n){return ui(t,Oa(e,n))}function AM(t,e,n){var r=co(t,e,n);return r>n?n:r}function Rv(){return{top:0,right:0,bottom:0,left:0}}function Lv(t){return Object.assign({},Rv(),t)}function _v(t,e){return e.reduce(function(n,r){return n[r]=t,n},{})}var PM=function(e,n){return e=typeof e=="function"?e(Object.assign({},n.rects,{placement:n.placement})):e,Lv(typeof e!="number"?e:_v(e,Go))};function IM(t){var e,n=t.state,r=t.name,i=t.options,s=n.elements.arrow,o=n.modifiersData.popperOffsets,l=Tn(n.placement),a=ap(l),c=[Ct,en].indexOf(l)>=0,u=c?"height":"width";if(!(!s||!o)){var d=PM(i.padding,n),f=lp(s),h=a==="y"?St:Ct,m=a==="y"?Zt:en,y=n.rects.reference[u]+n.rects.reference[a]-o[a]-n.rects.popper[u],k=o[a]-n.rects.reference[a],g=Qo(s),x=g?a==="y"?g.clientHeight||0:g.clientWidth||0:0,w=y/2-k/2,v=d[h],S=x-f[u]-d[m],b=x/2-f[u]/2+w,C=co(v,b,S),M=a;n.modifiersData[r]=(e={},e[M]=C,e.centerOffset=C-b,e)}}function RM(t){var e=t.state,n=t.options,r=n.element,i=r===void 0?"[data-popper-arrow]":r;i!=null&&(typeof i=="string"&&(i=e.elements.popper.querySelector(i),!i)||Iv(e.elements.popper,i)&&(e.elements.arrow=i))}const LM={name:"arrow",enabled:!0,phase:"main",fn:IM,effect:RM,requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function ws(t){return t.split("-")[1]}var _M={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $M(t,e){var n=t.x,r=t.y,i=e.devicePixelRatio||1;return{x:xs(n*i)/i||0,y:xs(r*i)/i||0}}function Jm(t){var e,n=t.popper,r=t.popperRect,i=t.placement,s=t.variation,o=t.offsets,l=t.position,a=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,d=t.isFixed,f=o.x,h=f===void 0?0:f,m=o.y,y=m===void 0?0:m,k=typeof u=="function"?u({x:h,y}):{x:h,y};h=k.x,y=k.y;var g=o.hasOwnProperty("x"),x=o.hasOwnProperty("y"),w=Ct,v=St,S=window;if(c){var b=Qo(n),C="clientHeight",M="clientWidth";if(b===It(n)&&(b=Vr(n),Qn(b).position!=="static"&&l==="absolute"&&(C="scrollHeight",M="scrollWidth")),b=b,i===St||(i===Ct||i===en)&&s===Bo){v=Zt;var D=d&&b===S&&S.visualViewport?S.visualViewport.height:b[C];y-=D-r.height,y*=a?1:-1}if(i===Ct||(i===St||i===Zt)&&s===Bo){w=en;var E=d&&b===S&&S.visualViewport?S.visualViewport.width:b[M];h-=E-r.width,h*=a?1:-1}}var I=Object.assign({position:l},c&&_M),$=u===!0?$M({x:h,y},It(n)):{x:h,y};if(h=$.x,y=$.y,a){var K;return Object.assign({},I,(K={},K[v]=x?"0":"",K[w]=g?"0":"",K.transform=(S.devicePixelRatio||1)<=1?"translate("+h+"px, "+y+"px)":"translate3d("+h+"px, "+y+"px, 0)",K))}return Object.assign({},I,(e={},e[v]=x?y+"px":"",e[w]=g?h+"px":"",e.transform="",e))}function BM(t){var e=t.state,n=t.options,r=n.gpuAcceleration,i=r===void 0?!0:r,s=n.adaptive,o=s===void 0?!0:s,l=n.roundOffsets,a=l===void 0?!0:l,c={placement:Tn(e.placement),variation:ws(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:i,isFixed:e.options.strategy==="fixed"};e.modifiersData.popperOffsets!=null&&(e.styles.popper=Object.assign({},e.styles.popper,Jm(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:a})))),e.modifiersData.arrow!=null&&(e.styles.arrow=Object.assign({},e.styles.arrow,Jm(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:a})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})}const FM={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:BM,data:{}};var Nl={passive:!0};function VM(t){var e=t.state,n=t.instance,r=t.options,i=r.scroll,s=i===void 0?!0:i,o=r.resize,l=o===void 0?!0:o,a=It(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&c.forEach(function(u){u.addEventListener("scroll",n.update,Nl)}),l&&a.addEventListener("resize",n.update,Nl),function(){s&&c.forEach(function(u){u.removeEventListener("scroll",n.update,Nl)}),l&&a.removeEventListener("resize",n.update,Nl)}}const HM={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:VM,data:{}};var WM={left:"right",right:"left",bottom:"top",top:"bottom"};function Ul(t){return t.replace(/left|right|bottom|top/g,function(e){return WM[e]})}var UM={start:"end",end:"start"};function Ym(t){return t.replace(/start|end/g,function(e){return UM[e]})}function cp(t){var e=It(t),n=e.pageXOffset,r=e.pageYOffset;return{scrollLeft:n,scrollTop:r}}function up(t){return vs(Vr(t)).left+cp(t).scrollLeft}function qM(t,e){var n=It(t),r=Vr(t),i=n.visualViewport,s=r.clientWidth,o=r.clientHeight,l=0,a=0;if(i){s=i.width,o=i.height;var c=Pv();(c||!c&&e==="fixed")&&(l=i.offsetLeft,a=i.offsetTop)}return{width:s,height:o,x:l+up(t),y:a}}function KM(t){var e,n=Vr(t),r=cp(t),i=(e=t.ownerDocument)==null?void 0:e.body,s=ui(n.scrollWidth,n.clientWidth,i?i.scrollWidth:0,i?i.clientWidth:0),o=ui(n.scrollHeight,n.clientHeight,i?i.scrollHeight:0,i?i.clientHeight:0),l=-r.scrollLeft+up(t),a=-r.scrollTop;return Qn(i||n).direction==="rtl"&&(l+=ui(n.clientWidth,i?i.clientWidth:0)-s),{width:s,height:o,x:l,y:a}}function dp(t){var e=Qn(t),n=e.overflow,r=e.overflowX,i=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+i+r)}function $v(t){return["html","body","#document"].indexOf(Dn(t))>=0?t.ownerDocument.body:Gt(t)&&dp(t)?t:$v(dc(t))}function uo(t,e){var n;e===void 0&&(e=[]);var r=$v(t),i=r===((n=t.ownerDocument)==null?void 0:n.body),s=It(r),o=i?[s].concat(s.visualViewport||[],dp(r)?r:[]):r,l=e.concat(o);return i?l:l.concat(uo(dc(o)))}function jd(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function JM(t,e){var n=vs(t,!1,e==="fixed");return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}function Gm(t,e,n){return e===Dv?jd(qM(t,n)):Si(e)?JM(e,n):jd(KM(Vr(t)))}function YM(t){var e=uo(dc(t)),n=["absolute","fixed"].indexOf(Qn(t).position)>=0,r=n&&Gt(t)?Qo(t):t;return Si(r)?e.filter(function(i){return Si(i)&&Iv(i,r)&&Dn(i)!=="body"}):[]}function GM(t,e,n,r){var i=e==="clippingParents"?YM(t):[].concat(e),s=[].concat(i,[n]),o=s[0],l=s.reduce(function(a,c){var u=Gm(t,c,r);return a.top=ui(u.top,a.top),a.right=Oa(u.right,a.right),a.bottom=Oa(u.bottom,a.bottom),a.left=ui(u.left,a.left),a},Gm(t,o,r));return l.width=l.right-l.left,l.height=l.bottom-l.top,l.x=l.left,l.y=l.top,l}function Bv(t){var e=t.reference,n=t.element,r=t.placement,i=r?Tn(r):null,s=r?ws(r):null,o=e.x+e.width/2-n.width/2,l=e.y+e.height/2-n.height/2,a;switch(i){case St:a={x:o,y:e.y-n.height};break;case Zt:a={x:o,y:e.y+e.height};break;case en:a={x:e.x+e.width,y:l};break;case Ct:a={x:e.x-n.width,y:l};break;default:a={x:e.x,y:e.y}}var c=i?ap(i):null;if(c!=null){var u=c==="y"?"height":"width";switch(s){case ys:a[c]=a[c]-(e[u]/2-n[u]/2);break;case Bo:a[c]=a[c]+(e[u]/2-n[u]/2);break}}return a}function Fo(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=r===void 0?t.placement:r,s=n.strategy,o=s===void 0?t.strategy:s,l=n.boundary,a=l===void 0?yM:l,c=n.rootBoundary,u=c===void 0?Dv:c,d=n.elementContext,f=d===void 0?$s:d,h=n.altBoundary,m=h===void 0?!1:h,y=n.padding,k=y===void 0?0:y,g=Lv(typeof k!="number"?k:_v(k,Go)),x=f===$s?xM:$s,w=t.rects.popper,v=t.elements[m?x:f],S=GM(Si(v)?v:v.contextElement||Vr(t.elements.popper),a,u,o),b=vs(t.elements.reference),C=Bv({reference:b,element:w,placement:i}),M=jd(Object.assign({},w,C)),D=f===$s?M:b,E={top:S.top-D.top+g.top,bottom:D.bottom-S.bottom+g.bottom,left:S.left-D.left+g.left,right:D.right-S.right+g.right},I=t.modifiersData.offset;if(f===$s&&I){var $=I[i];Object.keys(E).forEach(function(K){var ue=[en,Zt].indexOf(K)>=0?1:-1,ie=[St,Zt].indexOf(K)>=0?"y":"x";E[K]+=$[ie]*ue})}return E}function QM(t,e){e===void 0&&(e={});var n=e,r=n.placement,i=n.boundary,s=n.rootBoundary,o=n.padding,l=n.flipVariations,a=n.allowedAutoPlacements,c=a===void 0?jv:a,u=ws(r),d=u?l?qm:qm.filter(function(m){return ws(m)===u}):Go,f=d.filter(function(m){return c.indexOf(m)>=0});f.length===0&&(f=d);var h=f.reduce(function(m,y){return m[y]=Fo(t,{placement:y,boundary:i,rootBoundary:s,padding:o})[Tn(y)],m},{});return Object.keys(h).sort(function(m,y){return h[m]-h[y]})}function XM(t){if(Tn(t)===sp)return[];var e=Ul(t);return[Ym(t),e,Ym(e)]}function ZM(t){var e=t.state,n=t.options,r=t.name;if(!e.modifiersData[r]._skip){for(var i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!0:o,a=n.fallbackPlacements,c=n.padding,u=n.boundary,d=n.rootBoundary,f=n.altBoundary,h=n.flipVariations,m=h===void 0?!0:h,y=n.allowedAutoPlacements,k=e.options.placement,g=Tn(k),x=g===k,w=a||(x||!m?[Ul(k)]:XM(k)),v=[k].concat(w).reduce(function(Oe,Se){return Oe.concat(Tn(Se)===sp?QM(e,{placement:Se,boundary:u,rootBoundary:d,padding:c,flipVariations:m,allowedAutoPlacements:y}):Se)},[]),S=e.rects.reference,b=e.rects.popper,C=new Map,M=!0,D=v[0],E=0;E<v.length;E++){var I=v[E],$=Tn(I),K=ws(I)===ys,ue=[St,Zt].indexOf($)>=0,ie=ue?"width":"height",se=Fo(e,{placement:I,boundary:u,rootBoundary:d,altBoundary:f,padding:c}),be=ue?K?en:Ct:K?Zt:St;S[ie]>b[ie]&&(be=Ul(be));var A=Ul(be),L=[];if(s&&L.push(se[$]<=0),l&&L.push(se[be]<=0,se[A]<=0),L.every(function(Oe){return Oe})){D=I,M=!1;break}C.set(I,L)}if(M)for(var U=m?3:1,oe=function(Se){var ve=v.find(function(Mt){var ze=C.get(Mt);if(ze)return ze.slice(0,Se).every(function(_t){return _t})});if(ve)return D=ve,"break"},le=U;le>0;le--){var Nt=oe(le);if(Nt==="break")break}e.placement!==D&&(e.modifiersData[r]._skip=!0,e.placement=D,e.reset=!0)}}const eE={name:"flip",enabled:!0,phase:"main",fn:ZM,requiresIfExists:["offset"],data:{_skip:!1}};function Qm(t,e,n){return n===void 0&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function Xm(t){return[St,en,Zt,Ct].some(function(e){return t[e]>=0})}function tE(t){var e=t.state,n=t.name,r=e.rects.reference,i=e.rects.popper,s=e.modifiersData.preventOverflow,o=Fo(e,{elementContext:"reference"}),l=Fo(e,{altBoundary:!0}),a=Qm(o,r),c=Qm(l,i,s),u=Xm(a),d=Xm(c);e.modifiersData[n]={referenceClippingOffsets:a,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:d},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":d})}const nE={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:tE};function rE(t,e,n){var r=Tn(t),i=[Ct,St].indexOf(r)>=0?-1:1,s=typeof n=="function"?n(Object.assign({},e,{placement:t})):n,o=s[0],l=s[1];return o=o||0,l=(l||0)*i,[Ct,en].indexOf(r)>=0?{x:l,y:o}:{x:o,y:l}}function iE(t){var e=t.state,n=t.options,r=t.name,i=n.offset,s=i===void 0?[0,0]:i,o=jv.reduce(function(u,d){return u[d]=rE(d,e.rects,s),u},{}),l=o[e.placement],a=l.x,c=l.y;e.modifiersData.popperOffsets!=null&&(e.modifiersData.popperOffsets.x+=a,e.modifiersData.popperOffsets.y+=c),e.modifiersData[r]=o}const sE={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:iE};function oE(t){var e=t.state,n=t.name;e.modifiersData[n]=Bv({reference:e.rects.reference,element:e.rects.popper,placement:e.placement})}const lE={name:"popperOffsets",enabled:!0,phase:"read",fn:oE,data:{}};function aE(t){return t==="x"?"y":"x"}function cE(t){var e=t.state,n=t.options,r=t.name,i=n.mainAxis,s=i===void 0?!0:i,o=n.altAxis,l=o===void 0?!1:o,a=n.boundary,c=n.rootBoundary,u=n.altBoundary,d=n.padding,f=n.tether,h=f===void 0?!0:f,m=n.tetherOffset,y=m===void 0?0:m,k=Fo(e,{boundary:a,rootBoundary:c,padding:d,altBoundary:u}),g=Tn(e.placement),x=ws(e.placement),w=!x,v=ap(g),S=aE(v),b=e.modifiersData.popperOffsets,C=e.rects.reference,M=e.rects.popper,D=typeof y=="function"?y(Object.assign({},e.rects,{placement:e.placement})):y,E=typeof D=="number"?{mainAxis:D,altAxis:D}:Object.assign({mainAxis:0,altAxis:0},D),I=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,$={x:0,y:0};if(b){if(s){var K,ue=v==="y"?St:Ct,ie=v==="y"?Zt:en,se=v==="y"?"height":"width",be=b[v],A=be+k[ue],L=be-k[ie],U=h?-M[se]/2:0,oe=x===ys?C[se]:M[se],le=x===ys?-M[se]:-C[se],Nt=e.elements.arrow,Oe=h&&Nt?lp(Nt):{width:0,height:0},Se=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:Rv(),ve=Se[ue],Mt=Se[ie],ze=co(0,C[se],Oe[se]),_t=w?C[se]/2-U-ze-ve-E.mainAxis:oe-ze-ve-E.mainAxis,mn=w?-C[se]/2+U+ze+Mt+E.mainAxis:le+ze+Mt+E.mainAxis,gn=e.elements.arrow&&Qo(e.elements.arrow),Hr=gn?v==="y"?gn.clientTop||0:gn.clientLeft||0:0,Zn=(K=I==null?void 0:I[v])!=null?K:0,Ti=be+_t-Zn-Hr,er=be+mn-Zn,jn=co(h?Oa(A,Ti):A,be,h?ui(L,er):L);b[v]=jn,$[v]=jn-be}if(l){var tn,mt=v==="x"?St:Ct,Et=v==="x"?Zt:en,Qe=b[S],nn=S==="y"?"height":"width",$t=Qe+k[mt],yn=Qe-k[Et],rn=[St,Ct].indexOf(g)!==-1,Wr=(tn=I==null?void 0:I[S])!=null?tn:0,xn=rn?$t:Qe-C[nn]-M[nn]-Wr+E.altAxis,Ur=rn?Qe+C[nn]+M[nn]-Wr-E.altAxis:yn,tr=h&&rn?AM(xn,Qe,Ur):co(h?xn:$t,Qe,h?Ur:yn);b[S]=tr,$[S]=tr-Qe}e.modifiersData[r]=$}}const uE={name:"preventOverflow",enabled:!0,phase:"main",fn:cE,requiresIfExists:["offset"]};function dE(t){return{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}}function fE(t){return t===It(t)||!Gt(t)?cp(t):dE(t)}function pE(t){var e=t.getBoundingClientRect(),n=xs(e.width)/t.offsetWidth||1,r=xs(e.height)/t.offsetHeight||1;return n!==1||r!==1}function hE(t,e,n){n===void 0&&(n=!1);var r=Gt(e),i=Gt(e)&&pE(e),s=Vr(e),o=vs(t,i,n),l={scrollLeft:0,scrollTop:0},a={x:0,y:0};return(r||!r&&!n)&&((Dn(e)!=="body"||dp(s))&&(l=fE(e)),Gt(e)?(a=vs(e,!0),a.x+=e.clientLeft,a.y+=e.clientTop):s&&(a.x=up(s))),{x:o.left+l.scrollLeft-a.x,y:o.top+l.scrollTop-a.y,width:o.width,height:o.height}}function mE(t){var e=new Map,n=new Set,r=[];t.forEach(function(s){e.set(s.name,s)});function i(s){n.add(s.name);var o=[].concat(s.requires||[],s.requiresIfExists||[]);o.forEach(function(l){if(!n.has(l)){var a=e.get(l);a&&i(a)}}),r.push(s)}return t.forEach(function(s){n.has(s.name)||i(s)}),r}function gE(t){var e=mE(t);return TM.reduce(function(n,r){return n.concat(e.filter(function(i){return i.phase===r}))},[])}function yE(t){var e;return function(){return e||(e=new Promise(function(n){Promise.resolve().then(function(){e=void 0,n(t())})})),e}}function xE(t){var e=t.reduce(function(n,r){var i=n[r.name];return n[r.name]=i?Object.assign({},i,r,{options:Object.assign({},i.options,r.options),data:Object.assign({},i.data,r.data)}):r,n},{});return Object.keys(e).map(function(n){return e[n]})}var Zm={placement:"bottom",modifiers:[],strategy:"absolute"};function eg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some(function(r){return!(r&&typeof r.getBoundingClientRect=="function")})}function vE(t){t===void 0&&(t={});var e=t,n=e.defaultModifiers,r=n===void 0?[]:n,i=e.defaultOptions,s=i===void 0?Zm:i;return function(l,a,c){c===void 0&&(c=s);var u={placement:"bottom",orderedModifiers:[],options:Object.assign({},Zm,s),modifiersData:{},elements:{reference:l,popper:a},attributes:{},styles:{}},d=[],f=!1,h={state:u,setOptions:function(g){var x=typeof g=="function"?g(u.options):g;y(),u.options=Object.assign({},s,u.options,x),u.scrollParents={reference:Si(l)?uo(l):l.contextElement?uo(l.contextElement):[],popper:uo(a)};var w=gE(xE([].concat(r,u.options.modifiers)));return u.orderedModifiers=w.filter(function(v){return v.enabled}),m(),h.update()},forceUpdate:function(){if(!f){var g=u.elements,x=g.reference,w=g.popper;if(eg(x,w)){u.rects={reference:hE(x,Qo(w),u.options.strategy==="fixed"),popper:lp(w)},u.reset=!1,u.placement=u.options.placement,u.orderedModifiers.forEach(function(E){return u.modifiersData[E.name]=Object.assign({},E.data)});for(var v=0;v<u.orderedModifiers.length;v++){if(u.reset===!0){u.reset=!1,v=-1;continue}var S=u.orderedModifiers[v],b=S.fn,C=S.options,M=C===void 0?{}:C,D=S.name;typeof b=="function"&&(u=b({state:u,options:M,name:D,instance:h})||u)}}}},update:yE(function(){return new Promise(function(k){h.forceUpdate(),k(u)})}),destroy:function(){y(),f=!0}};if(!eg(l,a))return h;h.setOptions(c).then(function(k){!f&&c.onFirstUpdate&&c.onFirstUpdate(k)});function m(){u.orderedModifiers.forEach(function(k){var g=k.name,x=k.options,w=x===void 0?{}:x,v=k.effect;if(typeof v=="function"){var S=v({state:u,name:g,instance:h,options:w}),b=function(){};d.push(S||b)}})}function y(){d.forEach(function(k){return k()}),d=[]}return h}}var wE=[HM,lE,FM,Av,sE,eE,uE,LM,nE],kE=vE({defaultModifiers:wE}),bE="tippy-box",Fv="tippy-content",SE="tippy-backdrop",Vv="tippy-arrow",Hv="tippy-svg-arrow",Gr={passive:!0,capture:!0},Wv=function(){return document.body};function ou(t,e,n){if(Array.isArray(t)){var r=t[e];return r??(Array.isArray(n)?n[e]:n)}return t}function fp(t,e){var n={}.toString.call(t);return n.indexOf("[object")===0&&n.indexOf(e+"]")>-1}function Uv(t,e){return typeof t=="function"?t.apply(void 0,e):t}function tg(t,e){if(e===0)return t;var n;return function(r){clearTimeout(n),n=setTimeout(function(){t(r)},e)}}function CE(t){return t.split(/\s+/).filter(Boolean)}function Ii(t){return[].concat(t)}function ng(t,e){t.indexOf(e)===-1&&t.push(e)}function NE(t){return t.filter(function(e,n){return t.indexOf(e)===n})}function ME(t){return t.split("-")[0]}function za(t){return[].slice.call(t)}function rg(t){return Object.keys(t).reduce(function(e,n){return t[n]!==void 0&&(e[n]=t[n]),e},{})}function fo(){return document.createElement("div")}function fc(t){return["Element","Fragment"].some(function(e){return fp(t,e)})}function EE(t){return fp(t,"NodeList")}function TE(t){return fp(t,"MouseEvent")}function OE(t){return!!(t&&t._tippy&&t._tippy.reference===t)}function zE(t){return fc(t)?[t]:EE(t)?za(t):Array.isArray(t)?t:za(document.querySelectorAll(t))}function lu(t,e){t.forEach(function(n){n&&(n.style.transitionDuration=e+"ms")})}function ig(t,e){t.forEach(function(n){n&&n.setAttribute("data-state",e)})}function DE(t){var e,n=Ii(t),r=n[0];return r!=null&&(e=r.ownerDocument)!=null&&e.body?r.ownerDocument:document}function jE(t,e){var n=e.clientX,r=e.clientY;return t.every(function(i){var s=i.popperRect,o=i.popperState,l=i.props,a=l.interactiveBorder,c=ME(o.placement),u=o.modifiersData.offset;if(!u)return!0;var d=c==="bottom"?u.top.y:0,f=c==="top"?u.bottom.y:0,h=c==="right"?u.left.x:0,m=c==="left"?u.right.x:0,y=s.top-r+d>a,k=r-s.bottom-f>a,g=s.left-n+h>a,x=n-s.right-m>a;return y||k||g||x})}function au(t,e,n){var r=e+"EventListener";["transitionend","webkitTransitionEnd"].forEach(function(i){t[r](i,n)})}function sg(t,e){for(var n=e;n;){var r;if(t.contains(n))return!0;n=n.getRootNode==null||(r=n.getRootNode())==null?void 0:r.host}return!1}var Sn={isTouch:!1},og=0;function AE(){Sn.isTouch||(Sn.isTouch=!0,window.performance&&document.addEventListener("mousemove",qv))}function qv(){var t=performance.now();t-og<20&&(Sn.isTouch=!1,document.removeEventListener("mousemove",qv)),og=t}function PE(){var t=document.activeElement;if(OE(t)){var e=t._tippy;t.blur&&!e.state.isVisible&&t.blur()}}function IE(){document.addEventListener("touchstart",AE,Gr),window.addEventListener("blur",PE)}var RE=typeof window<"u"&&typeof document<"u",LE=RE?!!window.msCrypto:!1,_E={animateFill:!1,followCursor:!1,inlinePositioning:!1,sticky:!1},$E={allowHTML:!1,animation:"fade",arrow:!0,content:"",inertia:!1,maxWidth:350,role:"tooltip",theme:"",zIndex:9999},un=Object.assign({appendTo:Wv,aria:{content:"auto",expanded:"auto"},delay:0,duration:[300,250],getReferenceClientRect:null,hideOnClick:!0,ignoreAttributes:!1,interactive:!1,interactiveBorder:2,interactiveDebounce:0,moveTransition:"",offset:[0,10],onAfterUpdate:function(){},onBeforeUpdate:function(){},onCreate:function(){},onDestroy:function(){},onHidden:function(){},onHide:function(){},onMount:function(){},onShow:function(){},onShown:function(){},onTrigger:function(){},onUntrigger:function(){},onClickOutside:function(){},placement:"top",plugins:[],popperOptions:{},render:null,showOnCreate:!1,touch:!0,trigger:"mouseenter focus",triggerTarget:null},_E,$E),BE=Object.keys(un),FE=function(e){var n=Object.keys(e);n.forEach(function(r){un[r]=e[r]})};function Kv(t){var e=t.plugins||[],n=e.reduce(function(r,i){var s=i.name,o=i.defaultValue;if(s){var l;r[s]=t[s]!==void 0?t[s]:(l=un[s])!=null?l:o}return r},{});return Object.assign({},t,n)}function VE(t,e){var n=e?Object.keys(Kv(Object.assign({},un,{plugins:e}))):BE,r=n.reduce(function(i,s){var o=(t.getAttribute("data-tippy-"+s)||"").trim();if(!o)return i;if(s==="content")i[s]=o;else try{i[s]=JSON.parse(o)}catch{i[s]=o}return i},{});return r}function lg(t,e){var n=Object.assign({},e,{content:Uv(e.content,[t])},e.ignoreAttributes?{}:VE(t,e.plugins));return n.aria=Object.assign({},un.aria,n.aria),n.aria={expanded:n.aria.expanded==="auto"?e.interactive:n.aria.expanded,content:n.aria.content==="auto"?e.interactive?null:"describedby":n.aria.content},n}var HE=function(){return"innerHTML"};function Ad(t,e){t[HE()]=e}function ag(t){var e=fo();return t===!0?e.className=Vv:(e.className=Hv,fc(t)?e.appendChild(t):Ad(e,t)),e}function cg(t,e){fc(e.content)?(Ad(t,""),t.appendChild(e.content)):typeof e.content!="function"&&(e.allowHTML?Ad(t,e.content):t.textContent=e.content)}function Pd(t){var e=t.firstElementChild,n=za(e.children);return{box:e,content:n.find(function(r){return r.classList.contains(Fv)}),arrow:n.find(function(r){return r.classList.contains(Vv)||r.classList.contains(Hv)}),backdrop:n.find(function(r){return r.classList.contains(SE)})}}function Jv(t){var e=fo(),n=fo();n.className=bE,n.setAttribute("data-state","hidden"),n.setAttribute("tabindex","-1");var r=fo();r.className=Fv,r.setAttribute("data-state","hidden"),cg(r,t.props),e.appendChild(n),n.appendChild(r),i(t.props,t.props);function i(s,o){var l=Pd(e),a=l.box,c=l.content,u=l.arrow;o.theme?a.setAttribute("data-theme",o.theme):a.removeAttribute("data-theme"),typeof o.animation=="string"?a.setAttribute("data-animation",o.animation):a.removeAttribute("data-animation"),o.inertia?a.setAttribute("data-inertia",""):a.removeAttribute("data-inertia"),a.style.maxWidth=typeof o.maxWidth=="number"?o.maxWidth+"px":o.maxWidth,o.role?a.setAttribute("role",o.role):a.removeAttribute("role"),(s.content!==o.content||s.allowHTML!==o.allowHTML)&&cg(c,t.props),o.arrow?u?s.arrow!==o.arrow&&(a.removeChild(u),a.appendChild(ag(o.arrow))):a.appendChild(ag(o.arrow)):u&&a.removeChild(u)}return{popper:e,onUpdate:i}}Jv.$$tippy=!0;var WE=1,Ml=[],cu=[];function UE(t,e){var n=lg(t,Object.assign({},un,Kv(rg(e)))),r,i,s,o=!1,l=!1,a=!1,c=!1,u,d,f,h=[],m=tg(Ti,n.interactiveDebounce),y,k=WE++,g=null,x=NE(n.plugins),w={isEnabled:!0,isVisible:!1,isDestroyed:!1,isMounted:!1,isShown:!1},v={id:k,reference:t,popper:fo(),popperInstance:g,props:n,state:w,plugins:x,clearDelayTimeouts:xn,setProps:Ur,setContent:tr,show:Zo,hide:pc,hideWithInteractivity:nr,enable:rn,disable:Wr,unmount:An,destroy:Oi};if(!n.render)return v;var S=n.render(v),b=S.popper,C=S.onUpdate;b.setAttribute("data-tippy-root",""),b.id="tippy-"+v.id,v.popper=b,t._tippy=v,b._tippy=v;var M=x.map(function(T){return T.fn(v)}),D=t.hasAttribute("aria-expanded");return gn(),U(),be(),A("onCreate",[v]),n.showOnCreate&&$t(),b.addEventListener("mouseenter",function(){v.props.interactive&&v.state.isVisible&&v.clearDelayTimeouts()}),b.addEventListener("mouseleave",function(){v.props.interactive&&v.props.trigger.indexOf("mouseenter")>=0&&ue().addEventListener("mousemove",m)}),v;function E(){var T=v.props.touch;return Array.isArray(T)?T:[T,0]}function I(){return E()[0]==="hold"}function $(){var T;return!!((T=v.props.render)!=null&&T.$$tippy)}function K(){return y||t}function ue(){var T=K().parentNode;return T?DE(T):document}function ie(){return Pd(b)}function se(T){return v.state.isMounted&&!v.state.isVisible||Sn.isTouch||u&&u.type==="focus"?0:ou(v.props.delay,T?0:1,un.delay)}function be(T){T===void 0&&(T=!1),b.style.pointerEvents=v.props.interactive&&!T?"":"none",b.style.zIndex=""+v.props.zIndex}function A(T,F,W){if(W===void 0&&(W=!0),M.forEach(function(ee){ee[T]&&ee[T].apply(ee,F)}),W){var ne;(ne=v.props)[T].apply(ne,F)}}function L(){var T=v.props.aria;if(T.content){var F="aria-"+T.content,W=b.id,ne=Ii(v.props.triggerTarget||t);ne.forEach(function(ee){var De=ee.getAttribute(F);if(v.state.isVisible)ee.setAttribute(F,De?De+" "+W:W);else{var Xe=De&&De.replace(W,"").trim();Xe?ee.setAttribute(F,Xe):ee.removeAttribute(F)}})}}function U(){if(!(D||!v.props.aria.expanded)){var T=Ii(v.props.triggerTarget||t);T.forEach(function(F){v.props.interactive?F.setAttribute("aria-expanded",v.state.isVisible&&F===K()?"true":"false"):F.removeAttribute("aria-expanded")})}}function oe(){ue().removeEventListener("mousemove",m),Ml=Ml.filter(function(T){return T!==m})}function le(T){if(!(Sn.isTouch&&(a||T.type==="mousedown"))){var F=T.composedPath&&T.composedPath()[0]||T.target;if(!(v.props.interactive&&sg(b,F))){if(Ii(v.props.triggerTarget||t).some(function(W){return sg(W,F)})){if(Sn.isTouch||v.state.isVisible&&v.props.trigger.indexOf("click")>=0)return}else A("onClickOutside",[v,T]);v.props.hideOnClick===!0&&(v.clearDelayTimeouts(),v.hide(),l=!0,setTimeout(function(){l=!1}),v.state.isMounted||ve())}}}function Nt(){a=!0}function Oe(){a=!1}function Se(){var T=ue();T.addEventListener("mousedown",le,!0),T.addEventListener("touchend",le,Gr),T.addEventListener("touchstart",Oe,Gr),T.addEventListener("touchmove",Nt,Gr)}function ve(){var T=ue();T.removeEventListener("mousedown",le,!0),T.removeEventListener("touchend",le,Gr),T.removeEventListener("touchstart",Oe,Gr),T.removeEventListener("touchmove",Nt,Gr)}function Mt(T,F){_t(T,function(){!v.state.isVisible&&b.parentNode&&b.parentNode.contains(b)&&F()})}function ze(T,F){_t(T,F)}function _t(T,F){var W=ie().box;function ne(ee){ee.target===W&&(au(W,"remove",ne),F())}if(T===0)return F();au(W,"remove",d),au(W,"add",ne),d=ne}function mn(T,F,W){W===void 0&&(W=!1);var ne=Ii(v.props.triggerTarget||t);ne.forEach(function(ee){ee.addEventListener(T,F,W),h.push({node:ee,eventType:T,handler:F,options:W})})}function gn(){I()&&(mn("touchstart",Zn,{passive:!0}),mn("touchend",er,{passive:!0})),CE(v.props.trigger).forEach(function(T){if(T!=="manual")switch(mn(T,Zn),T){case"mouseenter":mn("mouseleave",er);break;case"focus":mn(LE?"focusout":"blur",jn);break;case"focusin":mn("focusout",jn);break}})}function Hr(){h.forEach(function(T){var F=T.node,W=T.eventType,ne=T.handler,ee=T.options;F.removeEventListener(W,ne,ee)}),h=[]}function Zn(T){var F,W=!1;if(!(!v.state.isEnabled||tn(T)||l)){var ne=((F=u)==null?void 0:F.type)==="focus";u=T,y=T.currentTarget,U(),!v.state.isVisible&&TE(T)&&Ml.forEach(function(ee){return ee(T)}),T.type==="click"&&(v.props.trigger.indexOf("mouseenter")<0||o)&&v.props.hideOnClick!==!1&&v.state.isVisible?W=!0:$t(T),T.type==="click"&&(o=!W),W&&!ne&&yn(T)}}function Ti(T){var F=T.target,W=K().contains(F)||b.contains(F);if(!(T.type==="mousemove"&&W)){var ne=nn().concat(b).map(function(ee){var De,Xe=ee._tippy,Pn=(De=Xe.popperInstance)==null?void 0:De.state;return Pn?{popperRect:ee.getBoundingClientRect(),popperState:Pn,props:n}:null}).filter(Boolean);jE(ne,T)&&(oe(),yn(T))}}function er(T){var F=tn(T)||v.props.trigger.indexOf("click")>=0&&o;if(!F){if(v.props.interactive){v.hideWithInteractivity(T);return}yn(T)}}function jn(T){v.props.trigger.indexOf("focusin")<0&&T.target!==K()||v.props.interactive&&T.relatedTarget&&b.contains(T.relatedTarget)||yn(T)}function tn(T){return Sn.isTouch?I()!==T.type.indexOf("touch")>=0:!1}function mt(){Et();var T=v.props,F=T.popperOptions,W=T.placement,ne=T.offset,ee=T.getReferenceClientRect,De=T.moveTransition,Xe=$()?Pd(b).arrow:null,Pn=ee?{getBoundingClientRect:ee,contextElement:ee.contextElement||K()}:t,qr={name:"$$tippy",enabled:!0,phase:"beforeWrite",requires:["computeStyles"],fn:function(rr){var vn=rr.state;if($()){var ir=ie(),Ms=ir.box;["placement","reference-hidden","escaped"].forEach(function(ce){ce==="placement"?Ms.setAttribute("data-placement",vn.placement):vn.attributes.popper["data-popper-"+ce]?Ms.setAttribute("data-"+ce,""):Ms.removeAttribute("data-"+ce)}),vn.attributes.popper={}}}},In=[{name:"offset",options:{offset:ne}},{name:"preventOverflow",options:{padding:{top:2,bottom:2,left:5,right:5}}},{name:"flip",options:{padding:5}},{name:"computeStyles",options:{adaptive:!De}},qr];$()&&Xe&&In.push({name:"arrow",options:{element:Xe,padding:3}}),In.push.apply(In,(F==null?void 0:F.modifiers)||[]),v.popperInstance=kE(Pn,b,Object.assign({},F,{placement:W,onFirstUpdate:f,modifiers:In}))}function Et(){v.popperInstance&&(v.popperInstance.destroy(),v.popperInstance=null)}function Qe(){var T=v.props.appendTo,F,W=K();v.props.interactive&&T===Wv||T==="parent"?F=W.parentNode:F=Uv(T,[W]),F.contains(b)||F.appendChild(b),v.state.isMounted=!0,mt()}function nn(){return za(b.querySelectorAll("[data-tippy-root]"))}function $t(T){v.clearDelayTimeouts(),T&&A("onTrigger",[v,T]),Se();var F=se(!0),W=E(),ne=W[0],ee=W[1];Sn.isTouch&&ne==="hold"&&ee&&(F=ee),F?r=setTimeout(function(){v.show()},F):v.show()}function yn(T){if(v.clearDelayTimeouts(),A("onUntrigger",[v,T]),!v.state.isVisible){ve();return}if(!(v.props.trigger.indexOf("mouseenter")>=0&&v.props.trigger.indexOf("click")>=0&&["mouseleave","mousemove"].indexOf(T.type)>=0&&o)){var F=se(!1);F?i=setTimeout(function(){v.state.isVisible&&v.hide()},F):s=requestAnimationFrame(function(){v.hide()})}}function rn(){v.state.isEnabled=!0}function Wr(){v.hide(),v.state.isEnabled=!1}function xn(){clearTimeout(r),clearTimeout(i),cancelAnimationFrame(s)}function Ur(T){if(!v.state.isDestroyed){A("onBeforeUpdate",[v,T]),Hr();var F=v.props,W=lg(t,Object.assign({},F,rg(T),{ignoreAttributes:!0}));v.props=W,gn(),F.interactiveDebounce!==W.interactiveDebounce&&(oe(),m=tg(Ti,W.interactiveDebounce)),F.triggerTarget&&!W.triggerTarget?Ii(F.triggerTarget).forEach(function(ne){ne.removeAttribute("aria-expanded")}):W.triggerTarget&&t.removeAttribute("aria-expanded"),U(),be(),C&&C(F,W),v.popperInstance&&(mt(),nn().forEach(function(ne){requestAnimationFrame(ne._tippy.popperInstance.forceUpdate)})),A("onAfterUpdate",[v,T])}}function tr(T){v.setProps({content:T})}function Zo(){var T=v.state.isVisible,F=v.state.isDestroyed,W=!v.state.isEnabled,ne=Sn.isTouch&&!v.props.touch,ee=ou(v.props.duration,0,un.duration);if(!(T||F||W||ne)&&!K().hasAttribute("disabled")&&(A("onShow",[v],!1),v.props.onShow(v)!==!1)){if(v.state.isVisible=!0,$()&&(b.style.visibility="visible"),be(),Se(),v.state.isMounted||(b.style.transition="none"),$()){var De=ie(),Xe=De.box,Pn=De.content;lu([Xe,Pn],0)}f=function(){var In;if(!(!v.state.isVisible||c)){if(c=!0,b.offsetHeight,b.style.transition=v.props.moveTransition,$()&&v.props.animation){var Kr=ie(),rr=Kr.box,vn=Kr.content;lu([rr,vn],ee),ig([rr,vn],"visible")}L(),U(),ng(cu,v),(In=v.popperInstance)==null||In.forceUpdate(),A("onMount",[v]),v.props.animation&&$()&&ze(ee,function(){v.state.isShown=!0,A("onShown",[v])})}},Qe()}}function pc(){var T=!v.state.isVisible,F=v.state.isDestroyed,W=!v.state.isEnabled,ne=ou(v.props.duration,1,un.duration);if(!(T||F||W)&&(A("onHide",[v],!1),v.props.onHide(v)!==!1)){if(v.state.isVisible=!1,v.state.isShown=!1,c=!1,o=!1,$()&&(b.style.visibility="hidden"),oe(),ve(),be(!0),$()){var ee=ie(),De=ee.box,Xe=ee.content;v.props.animation&&(lu([De,Xe],ne),ig([De,Xe],"hidden"))}L(),U(),v.props.animation?$()&&Mt(ne,v.unmount):v.unmount()}}function nr(T){ue().addEventListener("mousemove",m),ng(Ml,m),m(T)}function An(){v.state.isVisible&&v.hide(),v.state.isMounted&&(Et(),nn().forEach(function(T){T._tippy.unmount()}),b.parentNode&&b.parentNode.removeChild(b),cu=cu.filter(function(T){return T!==v}),v.state.isMounted=!1,A("onHidden",[v]))}function Oi(){v.state.isDestroyed||(v.clearDelayTimeouts(),v.unmount(),Hr(),delete t._tippy,v.state.isDestroyed=!0,A("onDestroy",[v]))}}function Xo(t,e){e===void 0&&(e={});var n=un.plugins.concat(e.plugins||[]);IE();var r=Object.assign({},e,{plugins:n}),i=zE(t),s=i.reduce(function(o,l){var a=l&&UE(l,r);return a&&o.push(a),o},[]);return fc(t)?s[0]:s}Xo.defaultProps=un;Xo.setDefaultProps=FE;Xo.currentInput=Sn;Object.assign({},Av,{effect:function(e){var n=e.state,r={popper:{position:n.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};Object.assign(n.elements.popper.style,r.popper),n.styles=r,n.elements.arrow&&Object.assign(n.elements.arrow.style,r.arrow)}});Xo.setDefaultProps({render:Jv});class qE{constructor({editor:e,element:n,view:r,tippyOptions:i={},updateDelay:s=250,shouldShow:o}){this.preventHide=!1,this.shouldShow=({view:l,state:a,from:c,to:u})=>{const{doc:d,selection:f}=a,{empty:h}=f,m=!d.textBetween(c,u).length&&tp(a.selection),y=this.element.contains(document.activeElement);return!(!(l.hasFocus()||y)||h||m||!this.editor.isEditable)},this.mousedownHandler=()=>{this.preventHide=!0},this.dragstartHandler=()=>{this.hide()},this.focusHandler=()=>{setTimeout(()=>this.update(this.editor.view))},this.blurHandler=({event:l})=>{var a;if(this.preventHide){this.preventHide=!1;return}l!=null&&l.relatedTarget&&(!((a=this.element.parentNode)===null||a===void 0)&&a.contains(l.relatedTarget))||(l==null?void 0:l.relatedTarget)!==this.editor.view.dom&&this.hide()},this.tippyBlurHandler=l=>{this.blurHandler({event:l})},this.handleDebouncedUpdate=(l,a)=>{const c=!(a!=null&&a.selection.eq(l.state.selection)),u=!(a!=null&&a.doc.eq(l.state.doc));!c&&!u||(this.updateDebounceTimer&&clearTimeout(this.updateDebounceTimer),this.updateDebounceTimer=window.setTimeout(()=>{this.updateHandler(l,c,u,a)},this.updateDelay))},this.updateHandler=(l,a,c,u)=>{var d,f,h;const{state:m,composing:y}=l,{selection:k}=m;if(y||!a&&!c)return;this.createTooltip();const{ranges:x}=k,w=Math.min(...x.map(b=>b.$from.pos)),v=Math.max(...x.map(b=>b.$to.pos));if(!((d=this.shouldShow)===null||d===void 0?void 0:d.call(this,{editor:this.editor,element:this.element,view:l,state:m,oldState:u,from:w,to:v}))){this.hide();return}(f=this.tippy)===null||f===void 0||f.setProps({getReferenceClientRect:((h=this.tippyOptions)===null||h===void 0?void 0:h.getReferenceClientRect)||(()=>{if(Ov(m.selection)){let b=l.nodeDOM(w);if(b){const C=b.dataset.nodeViewWrapper?b:b.querySelector("[data-node-view-wrapper]");if(C&&(b=C.firstChild),b)return b.getBoundingClientRect()}}return M2(l,w,v)})}),this.show()},this.editor=e,this.element=n,this.view=r,this.updateDelay=s,o&&(this.shouldShow=o),this.element.addEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.addEventListener("dragstart",this.dragstartHandler),this.editor.on("focus",this.focusHandler),this.editor.on("blur",this.blurHandler),this.tippyOptions=i,this.element.remove(),this.element.style.visibility="visible"}createTooltip(){const{element:e}=this.editor.options,n=!!e.parentElement;this.element.tabIndex=0,!(this.tippy||!n)&&(this.tippy=Xo(e,{duration:0,getReferenceClientRect:null,content:this.element,interactive:!0,trigger:"manual",placement:"top",hideOnClick:"toggle",...this.tippyOptions}),this.tippy.popper.firstChild&&this.tippy.popper.firstChild.addEventListener("blur",this.tippyBlurHandler))}update(e,n){const{state:r}=e,i=r.selection.from!==r.selection.to;if(this.updateDelay>0&&i){this.handleDebouncedUpdate(e,n);return}const s=!(n!=null&&n.selection.eq(e.state.selection)),o=!(n!=null&&n.doc.eq(e.state.doc));this.updateHandler(e,s,o,n)}show(){var e;(e=this.tippy)===null||e===void 0||e.show()}hide(){var e;(e=this.tippy)===null||e===void 0||e.hide()}destroy(){var e,n;!((e=this.tippy)===null||e===void 0)&&e.popper.firstChild&&this.tippy.popper.firstChild.removeEventListener("blur",this.tippyBlurHandler),(n=this.tippy)===null||n===void 0||n.destroy(),this.element.removeEventListener("mousedown",this.mousedownHandler,{capture:!0}),this.view.dom.removeEventListener("dragstart",this.dragstartHandler),this.editor.off("focus",this.focusHandler),this.editor.off("blur",this.blurHandler)}}const Yv=t=>new ht({key:typeof t.pluginKey=="string"?new hn(t.pluginKey):t.pluginKey,view:e=>new qE({view:e,...t})});Ie.create({name:"bubbleMenu",addOptions(){return{element:null,tippyOptions:{},pluginKey:"bubbleMenu",updateDelay:void 0,shouldShow:null}},addProseMirrorPlugins(){return this.options.element?[Yv({pluginKey:this.options.pluginKey,editor:this.editor,element:this.options.element,tippyOptions:this.options.tippyOptions,updateDelay:this.options.updateDelay,shouldShow:this.options.shouldShow})]:[]}});function KE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gv={exports:{}},uu={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ug;function JE(){if(ug)return uu;ug=1;var t=J;function e(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,o=t.useDebugValue;function l(d,f){var h=f(),m=r({inst:{value:h,getSnapshot:f}}),y=m[0].inst,k=m[1];return s(function(){y.value=h,y.getSnapshot=f,a(y)&&k({inst:y})},[d,h,f]),i(function(){return a(y)&&k({inst:y}),d(function(){a(y)&&k({inst:y})})},[d]),o(h),h}function a(d){var f=d.getSnapshot;d=d.value;try{var h=f();return!n(d,h)}catch{return!0}}function c(d,f){return f()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:l;return uu.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:u,uu}Gv.exports=JE();var pp=Gv.exports;const YE=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},GE=({contentComponent:t})=>{const e=pp.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return J.createElement(J.Fragment,null,Object.values(e))};function QE(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:ab.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}class XE extends J.Component{constructor(e){var n;super(e),this.editorContentRef=J.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((n=e.editor)===null||n===void 0)&&n.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.options.element.childNodes),e.setOptions({element:n}),e.contentComponent=QE(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const n=document.createElement("div");n.append(...e.options.element.childNodes),e.setOptions({element:n})}render(){const{editor:e,innerRef:n,...r}=this.props;return J.createElement(J.Fragment,null,J.createElement("div",{ref:YE(n,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&J.createElement(GE,{contentComponent:e.contentComponent}))}}const ZE=O.forwardRef((t,e)=>{const n=J.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return J.createElement(XE,{key:n,innerRef:e,...t})}),eT=J.memo(ZE);var tT=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(e)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!t(e[i],n[i]))return!1;return!0}if(e instanceof Map&&n instanceof Map){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;for(i of e.entries())if(!t(i[1],n.get(i[0])))return!1;return!0}if(e instanceof Set&&n instanceof Set){if(e.size!==n.size)return!1;for(i of e.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(n)){if(r=e.length,r!=n.length)return!1;for(i=r;i--!==0;)if(e[i]!==n[i])return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(s=Object.keys(e),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&e.$$typeof)&&!t(e[o],n[o]))return!1}return!0}return e!==e&&n!==n},nT=KE(tT),Qv={exports:{}},du={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dg;function rT(){if(dg)return du;dg=1;var t=J,e=pp;function n(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,o=t.useEffect,l=t.useMemo,a=t.useDebugValue;return du.useSyncExternalStoreWithSelector=function(c,u,d,f,h){var m=s(null);if(m.current===null){var y={hasValue:!1,value:null};m.current=y}else y=m.current;m=l(function(){function g(b){if(!x){if(x=!0,w=b,b=f(b),h!==void 0&&y.hasValue){var C=y.value;if(h(C,b))return v=C}return v=b}if(C=v,r(w,b))return C;var M=f(b);return h!==void 0&&h(C,M)?C:(w=b,v=M)}var x=!1,w,v,S=d===void 0?null:d;return[function(){return g(u())},S===null?void 0:function(){return g(S())}]},[u,d,f,h]);var k=i(c,m[0],m[1]);return o(function(){y.hasValue=!0,y.value=k},[k]),a(k),k},du}Qv.exports=rT();var iT=Qv.exports;const sT=typeof window<"u"?O.useLayoutEffect:O.useEffect;class oT{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const n=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},r=this.editor;return r.on("transaction",n),()=>{r.off("transaction",n)}}}}function lT(t){var e;const[n]=O.useState(()=>new oT(t.editor)),r=iT.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!==null&&e!==void 0?e:nT);return sT(()=>n.watch(t.editor),[t.editor,n]),O.useDebugValue(r),r}const aT=!1,Id=typeof window>"u",cT=Id||!!(typeof window<"u"&&window.next);class hp{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Id||cT?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)===null||s===void 0?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)===null||s===void 0?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)===null||s===void 0?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)===null||s===void 0?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)===null||s===void 0?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)===null||s===void 0?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)===null||s===void 0?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)===null||s===void 0?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)===null||s===void 0?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)===null||s===void 0?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)===null||s===void 0?void 0:s.call(i,...r)}};return new rM(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var o;return i===((o=n.extensions)===null||o===void 0?void 0:o[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?hp.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function uT(t={},e=[]){const n=O.useRef(t);n.current=t;const[r]=O.useState(()=>new hp(n)),i=pp.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(e)),lT({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1?null:t.immediatelyRender&&s===0?0:s+1}),i}const Xv=O.createContext({editor:null});Xv.Consumer;const dT=()=>O.useContext(Xv),fT=t=>{const[e,n]=O.useState(null),{editor:r}=dT();return O.useEffect(()=>{var i;if(!e||!((i=t.editor)===null||i===void 0)&&i.isDestroyed||r!=null&&r.isDestroyed)return;const{pluginKey:s="bubbleMenu",editor:o,tippyOptions:l={},updateDelay:a,shouldShow:c=null}=t,u=o||r;if(!u){console.warn("BubbleMenu component is not rendered inside of an editor component or does not have editor prop.");return}const d=Yv({updateDelay:a,editor:u,element:e,pluginKey:s,shouldShow:c,tippyOptions:l});return u.registerPlugin(d),()=>{u.unregisterPlugin(s)}},[t.editor,r,e]),J.createElement("div",{ref:n,className:t.className,style:{visibility:"hidden"}},t.children)},pT=O.createContext({onDragStart:void 0}),hT=()=>O.useContext(pT);J.forwardRef((t,e)=>{const{onDragStart:n}=hT(),r=t.as||"div";return J.createElement(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});const mT=/^\s*>\s$/,gT=st.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return["blockquote",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[$o({find:mT,type:this.type})]}}),yT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,xT=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,vT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,wT=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,kT=Pt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return["strong",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[ki({find:yT,type:this.type}),ki({find:vT,type:this.type})]},addPasteRules(){return[bi({find:xT,type:this.type}),bi({find:wT,type:this.type})]}}),bT="listItem",fg="textStyle",pg=/^\s*([-+*])\s$/,ST=st.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(bT,this.editor.getAttributes(fg)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=$o({find:pg,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$o({find:pg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(fg),editor:this.editor})),[t]}}),CT=/(^|[^`])`([^`]+)`(?!`)/,NT=/(^|[^`])`([^`]+)`(?!`)/g,MT=Pt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[ki({find:CT,type:this.type})]},addPasteRules(){return[bi({find:NT,type:this.type})]}}),ET=/^```([a-z]+)?[\s\n]$/,TT=/^~~~([a-z]+)?[\s\n]$/,OT=st.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options,s=[...((e=t.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",Ne(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:t.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?t.commands.command(({tr:c})=>(c.setSelection(Q.near(r.resolve(l))),!0)):t.commands.exitCode()}}},addInputRules(){return[zd({find:ET,type:this.type,getAttributes:t=>({language:t[1]})}),zd({find:TT,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new ht({key:new hn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i==null?void 0:i.mode;if(!n||!s)return!1;const{tr:o,schema:l}=t.state,a=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},a)),o.selection.$from.parent.type!==this.type&&o.setSelection(Y.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),t.dispatch(o),!0}}})]}}),zT=st.create({name:"doc",topNode:!0,content:"block+"});function DT(t={}){return new ht({view(e){return new jT(e,t)}})}class jT{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let d=e.nodeBefore,f=e.nodeAfter;if(d||f){let h=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(h){let m=h.getBoundingClientRect(),y=d?m.bottom:m.top;d&&f&&(y=(y+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*l;r={left:m.left,right:m.right,top:y-k,bottom:y+k}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;r={left:d.left-f,right:d.left+f,top:d.top,bottom:d.bottom}}let a=this.editorView.dom.offsetParent;this.element||(this.element=a.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,u;if(!a||a==document.body&&getComputedStyle(a).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=a.getBoundingClientRect(),f=d.width/a.offsetWidth,h=d.height/a.offsetHeight;c=d.left-a.scrollLeft*f,u=d.top-a.scrollTop*h}this.element.style.left=(r.left-c)/o+"px",this.element.style.top=(r.top-u)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=xx(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const AT=Ie.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[DT(this.options)]}});class ke extends Q{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return ke.valid(r)?new ke(r):Q.near(r)}content(){return _.empty}eq(e){return e instanceof ke&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new ke(e.resolve(n.pos))}getBookmark(){return new mp(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!PT(e)||!IT(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&ke.valid(e))return e;let i=e.pos,s=null;for(let o=e.depth;;o--){let l=e.node(o);if(n>0?e.indexAfter(o)<l.childCount:e.index(o)>0){s=l.child(n>0?e.indexAfter(o):e.index(o)-1);break}else if(o==0)return null;i+=n;let a=e.doc.resolve(i);if(ke.valid(a))return a}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!q.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=e.doc.resolve(i);if(ke.valid(l))return l}return null}}}ke.prototype.visible=!1;ke.findFrom=ke.findGapCursorFrom;Q.jsonID("gapcursor",ke);class mp{constructor(e){this.pos=e}map(e){return new mp(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return ke.valid(n)?new ke(n):Q.near(n)}}function Zv(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function PT(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||Zv(i.type))return!0;if(i.inlineContent)return!1}}return!0}function IT(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||Zv(i.type))return!0;if(i.inlineContent)return!1}}return!0}function RT(){return new ht({props:{decorations:BT,createSelectionBetween(t,e,n){return e.pos==n.pos&&ke.valid(n)?new ke(n):null},handleClick:_T,handleKeyDown:LT,handleDOMEvents:{beforeinput:$T}}})}const LT=ov({ArrowLeft:El("horiz",-1),ArrowRight:El("horiz",1),ArrowUp:El("vert",-1),ArrowDown:El("vert",1)});function El(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let o=r.selection,l=e>0?o.$to:o.$from,a=o.empty;if(o instanceof Y){if(!s.endOfTextblock(n)||l.depth==0)return!1;a=!1,l=r.doc.resolve(e>0?l.after():l.before())}let c=ke.findGapCursorFrom(l,e,a);return c?(i&&i(r.tr.setSelection(new ke(c))),!0):!1}}function _T(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!ke.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&q.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new ke(r))),!0)}function $T(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof ke))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=z.empty;for(let o=r.length-1;o>=0;o--)i=z.from(r[o].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new _(i,0,0));return s.setSelection(Y.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function BT(t){if(!(t.selection instanceof ke))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Ae.create(t.doc,[qt.widget(t.selection.head,e,{key:"gapcursor"})])}const FT=Ie.create({name:"gapCursor",addProseMirrorPlugins(){return[RT()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Z(V(t,"allowGapCursor",n)))!==null&&e!==void 0?e:null}}}),VT=st.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",Ne(this.options.HTMLAttributes,t)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,a=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&a&&o){const d=a.filter(f=>l.includes(f.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),HT=st.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,Ne(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>zd({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}});var Da=200,Ve=function(){};Ve.prototype.append=function(e){return e.length?(e=Ve.from(e),!this.length&&e||e.length<Da&&this.leafAppend(e)||this.length<Da&&e.leafPrepend(this)||this.appendInner(e)):this};Ve.prototype.prepend=function(e){return e.length?Ve.from(e).append(this):this};Ve.prototype.appendInner=function(e){return new WT(this,e)};Ve.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Ve.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Ve.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Ve.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Ve.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(e(s,o))},n,r),i};Ve.from=function(e){return e instanceof Ve?e:e&&e.length?new e1(e):Ve.empty};var e1=function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,o,l){for(var a=s;a<o;a++)if(i(this.values[a],l+a)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,o,l){for(var a=s-1;a>=o;a--)if(i(this.values[a],l+a)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=Da)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=Da)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(Ve);Ve.empty=new e1([]);var WT=function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(Ve);const UT=500;class cn{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=e.tr,l,a,c=[],u=[];return this.items.forEach((d,f)=>{if(!d.step){i||(i=this.remapping(r,f+1),s=i.maps.length),s--,u.push(d);return}if(i){u.push(new bn(d.map));let h=d.step.map(i.slice(s)),m;h&&o.maybeStep(h).doc&&(m=o.mapping.maps[o.mapping.maps.length-1],c.push(new bn(m,void 0,void 0,c.length+u.length))),s--,m&&i.appendMap(m,s)}else o.maybeStep(d.step);if(d.selection)return l=i?d.selection.map(i.slice(s)):d.selection,a=new cn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:a,transform:o,selection:l}}addTransform(e,n,r,i){let s=[],o=this.eventCount,l=this.items,a=!i&&l.length?l.get(l.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),f=new bn(e.mapping.maps[u],d,n),h;(h=a&&a.merge(f))&&(f=h,u?s.pop():l=l.slice(0,l.length-1)),s.push(f),n&&(o++,n=void 0),i||(a=f)}let c=o-r.depth;return c>KT&&(l=qT(l,c),o-=c),new cn(l.append(s),o)}remapping(e,n){let r=new jo;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},e,n),r}addMaps(e){return this.eventCount==0?this:new cn(this.items.append(e.map(n=>new bn(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,o=e.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},i);let a=n;this.items.forEach(f=>{let h=s.getMirror(--a);if(h==null)return;o=Math.min(o,h);let m=s.maps[h];if(f.step){let y=e.steps[h].invert(e.docs[h]),k=f.selection&&f.selection.map(s.slice(a+1,h));k&&l++,r.push(new bn(m,y,k))}else r.push(new bn(m))},i);let c=[];for(let f=n;f<o;f++)c.push(new bn(s.maps[f]));let u=this.items.slice(0,i).append(c).append(r),d=new cn(u,l);return d.emptyItemCount()>UT&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=e)i.push(o),o.selection&&s++;else if(o.step){let a=o.step.map(n.slice(r)),c=a&&a.getMap();if(r--,c&&n.appendMap(c,r),a){let u=o.selection&&o.selection.map(n.slice(r));u&&s++;let d=new bn(c.invert(),a,u),f,h=i.length-1;(f=i.length&&i[h].merge(d))?i[h]=f:i.push(d)}}else o.map&&r--},this.items.length,0),new cn(Ve.from(i.reverse()),s)}}cn.empty=new cn(Ve.empty,0);function qT(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class bn{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new bn(n.getMap().invert(),n,this.selection)}}}class fr{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const KT=20;function JT(t,e,n,r){let i=n.getMeta(di),s;if(i)return i.historyState;n.getMeta(QT)&&(t=new fr(t.done,t.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(o&&o.getMeta(di))return o.getMeta(di).redo?new fr(t.done.addTransform(n,void 0,r,ql(e)),t.undone,hg(n.mapping.maps),t.prevTime,t.prevComposition):new fr(t.done,t.undone.addTransform(n,void 0,r,ql(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),a=t.prevTime==0||!o&&t.prevComposition!=l&&(t.prevTime<(n.time||0)-r.newGroupDelay||!YT(n,t.prevRanges)),c=o?fu(t.prevRanges,n.mapping):hg(n.mapping.maps);return new fr(t.done.addTransform(n,a?e.selection.getBookmark():void 0,r,ql(e)),cn.empty,c,n.time,l??t.prevComposition)}else return(s=n.getMeta("rebased"))?new fr(t.done.rebased(n,s),t.undone.rebased(n,s),fu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new fr(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),fu(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function YT(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function hg(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,o)=>e.push(s,o));return e}function fu(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function GT(t,e,n){let r=ql(e),i=di.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),a=new fr(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(di,{redo:n,historyState:a})}let pu=!1,mg=null;function ql(t){let e=t.plugins;if(mg!=e){pu=!1,mg=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){pu=!0;break}}return pu}const di=new hn("history"),QT=new hn("closeHistory");function XT(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new ht({key:di,state:{init(){return new fr(cn.empty,cn.empty,null,0,-1)},apply(e,n,r){return JT(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?n1:r=="historyRedo"?r1:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function t1(t,e){return(n,r)=>{let i=di.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=GT(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const n1=t1(!1,!0),r1=t1(!0,!0),ZT=Ie.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>n1(t,e),redo:()=>({state:t,dispatch:e})=>r1(t,e)}},addProseMirrorPlugins(){return[XT(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),eO=st.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",Ne(this.options.HTMLAttributes,t)]},addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!iM(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$from:r,$to:i}=n,s=t();return r.parentOffset===0?s.insertContentAt({from:Math.max(r.pos-1,0),to:i.pos},{type:this.name}):Ov(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({tr:o,dispatch:l})=>{var a;if(l){const{$to:c}=o.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?o.setSelection(Y.create(o.doc,c.pos+1)):c.nodeAfter.isBlock?o.setSelection(q.create(o.doc,c.pos)):o.setSelection(Y.create(o.doc,c.pos));else{const d=(a=c.parent.type.contentMatch.defaultType)===null||a===void 0?void 0:a.create();d&&(o.insert(u,d),o.setSelection(Y.create(o.doc,u+1)))}o.scrollIntoView()}return!0}).run()}}},addInputRules(){return[zv({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),tO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,nO=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,rO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,iO=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,sO=Pt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[ki({find:tO,type:this.type}),ki({find:rO,type:this.type})]},addPasteRules(){return[bi({find:nO,type:this.type}),bi({find:iO,type:this.type})]}}),oO=st.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",Ne(this.options.HTMLAttributes,t),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),lO="listItem",gg="textStyle",yg=/^(\d+)\.\s$/,aO=st.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",Ne(this.options.HTMLAttributes,n),0]:["ol",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(lO,this.editor.getAttributes(gg)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=$o({find:yg,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=$o({find:yg,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(gg)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),cO=st.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),uO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,dO=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,fO=Pt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",Ne(this.options.HTMLAttributes,t),0]},addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[ki({find:uO,type:this.type})]},addPasteRules(){return[bi({find:dO,type:this.type})]}}),pO=st.create({name:"text",group:"inline"}),hO=Ie.create({name:"starterKit",addExtensions(){const t=[];return this.options.bold!==!1&&t.push(kT.configure(this.options.bold)),this.options.blockquote!==!1&&t.push(gT.configure(this.options.blockquote)),this.options.bulletList!==!1&&t.push(ST.configure(this.options.bulletList)),this.options.code!==!1&&t.push(MT.configure(this.options.code)),this.options.codeBlock!==!1&&t.push(OT.configure(this.options.codeBlock)),this.options.document!==!1&&t.push(zT.configure(this.options.document)),this.options.dropcursor!==!1&&t.push(AT.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&t.push(FT.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&t.push(VT.configure(this.options.hardBreak)),this.options.heading!==!1&&t.push(HT.configure(this.options.heading)),this.options.history!==!1&&t.push(ZT.configure(this.options.history)),this.options.horizontalRule!==!1&&t.push(eO.configure(this.options.horizontalRule)),this.options.italic!==!1&&t.push(sO.configure(this.options.italic)),this.options.listItem!==!1&&t.push(oO.configure(this.options.listItem)),this.options.orderedList!==!1&&t.push(aO.configure(this.options.orderedList)),this.options.paragraph!==!1&&t.push(cO.configure(this.options.paragraph)),this.options.strike!==!1&&t.push(fO.configure(this.options.strike)),this.options.text!==!1&&t.push(pO.configure(this.options.text)),t}}),i1="inscript_demo_posts",gp="inscript_demo_drafts",Tl=()=>{const t=localStorage.getItem(i1);return t?JSON.parse(t):[{filename:"welcome-to-inscript.md",title:"Welcome to Inscript (Demo)",created:new Date().toISOString(),modified:new Date().toISOString(),tags:["demo","welcome"],categories:["Guide"],isUnpublished:!1,content:"<h1>Welcome to Inscript!</h1><p>This is a <strong>live demo</strong> running entirely in your browser.</p><p>Feel free to edit this post or create new ones.</p><blockquote><p>Note: Changes are saved to your browser's LocalStorage.</p></blockquote>"}]},xg=t=>{localStorage.setItem(i1,JSON.stringify(t))},ja=()=>{const t=localStorage.getItem(gp);return t?JSON.parse(t):{}},mO=(t,e)=>{const n=ja();n[t]=e,localStorage.setItem(gp,JSON.stringify(n))},hu=t=>{const e=ja();delete e[t],localStorage.setItem(gp,JSON.stringify(e))},gO={get:async(t,e)=>{if(await new Promise(r=>setTimeout(r,400)),t==="/api/posts")return{data:Tl().map(({content:r,...i})=>i)};const n=t.split("?")[0];if(n.startsWith("/api/posts/")){const r=n.split("/").pop(),i=Tl().find(s=>s.filename===r);if(i){const o=ja()[r];return{data:{filename:r,frontmatter:{title:i.title,tags:i.tags,categories:i.categories,created:i.created,modified:i.modified},html:i.content,title:i.title,savedHtml:i.content,savedTitle:i.title,hasDraft:!!o,history:(o==null?void 0:o.history)||[],currentIndex:(o==null?void 0:o.currentIndex)||0,isUnpublished:!1}}}return ja(),{status:404}}return t==="/api/images"?{data:[{url:"https://images.unsplash.com/photo-1707343843437-caacff5cfa74",name:"demo-nature.jpg"},{url:"https://images.unsplash.com/photo-1707345512638-997d31a10cee",name:"demo-tech.jpg"}]}:t==="/api/youtube/search"?{data:{items:[]}}:{data:{}}},post:async(t,e,n)=>{if(await new Promise(r=>setTimeout(r,600)),t==="/api/posts"){const{filename:r,frontmatter:i,html:s}=e,o=Tl(),l=o.findIndex(c=>c.filename===r),a={filename:r,title:i.title||"Untitled",created:i.created||new Date().toISOString(),modified:new Date().toISOString(),tags:i.tags||[],categories:i.categories||[],content:s,isUnpublished:!1};return l>=0?o[l]=a:o.push(a),xg(o),hu(r),{data:{success:!0,frontmatter:i}}}if(t.startsWith("/api/drafts/")){const r=t.split("/").pop(),{title:i,history:s,currentIndex:o}=e;return mO(r,{history:s,currentIndex:o,title:i}),{data:{success:!0}}}return t==="/api/upload"?{data:{url:"https://source.unsplash.com/random/800x600"}}:{data:{success:!0}}},delete:async t=>{if(await new Promise(e=>setTimeout(e,300)),t.startsWith("/api/drafts/")){const e=t.split("/").pop();return hu(e),{data:{success:!0}}}if(t.startsWith("/api/posts/")){const e=t.split("/").pop(),n=Tl().filter(r=>r.filename!==e);return xg(n),hu(e),{data:{success:!0}}}return{data:{success:!0}}}},gt=gO;class s1{diff(e,n,r={}){let i;typeof r=="function"?(i=r,r={}):"callback"in r&&(i=r.callback);const s=this.castInput(e,r),o=this.castInput(n,r),l=this.removeEmpty(this.tokenize(s,r)),a=this.removeEmpty(this.tokenize(o,r));return this.diffWithOptionsObj(l,a,r,i)}diffWithOptionsObj(e,n,r,i){var s;const o=x=>{if(x=this.postProcess(x,r),i){setTimeout(function(){i(x)},0);return}else return x},l=n.length,a=e.length;let c=1,u=l+a;r.maxEditLength!=null&&(u=Math.min(u,r.maxEditLength));const d=(s=r.timeout)!==null&&s!==void 0?s:1/0,f=Date.now()+d,h=[{oldPos:-1,lastComponent:void 0}];let m=this.extractCommon(h[0],n,e,0,r);if(h[0].oldPos+1>=a&&m+1>=l)return o(this.buildValues(h[0].lastComponent,n,e));let y=-1/0,k=1/0;const g=()=>{for(let x=Math.max(y,-c);x<=Math.min(k,c);x+=2){let w;const v=h[x-1],S=h[x+1];v&&(h[x-1]=void 0);let b=!1;if(S){const M=S.oldPos-x;b=S&&0<=M&&M<l}const C=v&&v.oldPos+1<a;if(!b&&!C){h[x]=void 0;continue}if(!C||b&&v.oldPos<S.oldPos?w=this.addToPath(S,!0,!1,0,r):w=this.addToPath(v,!1,!0,1,r),m=this.extractCommon(w,n,e,x,r),w.oldPos+1>=a&&m+1>=l)return o(this.buildValues(w.lastComponent,n,e))||!0;h[x]=w,w.oldPos+1>=a&&(k=Math.min(k,x-1)),m+1>=l&&(y=Math.max(y,x+1))}c++};if(i)(function x(){setTimeout(function(){if(c>u||Date.now()>f)return i(void 0);g()||x()},0)})();else for(;c<=u&&Date.now()<=f;){const x=g();if(x)return x}}addToPath(e,n,r,i,s){const o=e.lastComponent;return o&&!s.oneChangePerToken&&o.added===n&&o.removed===r?{oldPos:e.oldPos+i,lastComponent:{count:o.count+1,added:n,removed:r,previousComponent:o.previousComponent}}:{oldPos:e.oldPos+i,lastComponent:{count:1,added:n,removed:r,previousComponent:o}}}extractCommon(e,n,r,i,s){const o=n.length,l=r.length;let a=e.oldPos,c=a-i,u=0;for(;c+1<o&&a+1<l&&this.equals(r[a+1],n[c+1],s);)c++,a++,u++,s.oneChangePerToken&&(e.lastComponent={count:1,previousComponent:e.lastComponent,added:!1,removed:!1});return u&&!s.oneChangePerToken&&(e.lastComponent={count:u,previousComponent:e.lastComponent,added:!1,removed:!1}),e.oldPos=a,c}equals(e,n,r){return r.comparator?r.comparator(e,n):e===n||!!r.ignoreCase&&e.toLowerCase()===n.toLowerCase()}removeEmpty(e){const n=[];for(let r=0;r<e.length;r++)e[r]&&n.push(e[r]);return n}castInput(e,n){return e}tokenize(e,n){return Array.from(e)}join(e){return e.join("")}postProcess(e,n){return e}get useLongestToken(){return!1}buildValues(e,n,r){const i=[];let s;for(;e;)i.push(e),s=e.previousComponent,delete e.previousComponent,e=s;i.reverse();const o=i.length;let l=0,a=0,c=0;for(;l<o;l++){const u=i[l];if(u.removed)u.value=this.join(r.slice(c,c+u.count)),c+=u.count;else{if(!u.added&&this.useLongestToken){let d=n.slice(a,a+u.count);d=d.map(function(f,h){const m=r[c+h];return m.length>f.length?m:f}),u.value=this.join(d)}else u.value=this.join(n.slice(a,a+u.count));a+=u.count,u.added||(c+=u.count)}}return i}}function vg(t,e){let n;for(n=0;n<t.length&&n<e.length;n++)if(t[n]!=e[n])return t.slice(0,n);return t.slice(0,n)}function wg(t,e){let n;if(!t||!e||t[t.length-1]!=e[e.length-1])return"";for(n=0;n<t.length&&n<e.length;n++)if(t[t.length-(n+1)]!=e[e.length-(n+1)])return t.slice(-n);return t.slice(-n)}function Rd(t,e,n){if(t.slice(0,e.length)!=e)throw Error(`string ${JSON.stringify(t)} doesn't start with prefix ${JSON.stringify(e)}; this is a bug`);return n+t.slice(e.length)}function Ld(t,e,n){if(!e)return t+n;if(t.slice(-e.length)!=e)throw Error(`string ${JSON.stringify(t)} doesn't end with suffix ${JSON.stringify(e)}; this is a bug`);return t.slice(0,-e.length)+n}function Bs(t,e){return Rd(t,e,"")}function Ol(t,e){return Ld(t,e,"")}function kg(t,e){return e.slice(0,yO(t,e))}function yO(t,e){let n=0;t.length>e.length&&(n=t.length-e.length);let r=e.length;t.length<e.length&&(r=t.length);const i=Array(r);let s=0;i[0]=0;for(let o=1;o<r;o++){for(e[o]==e[s]?i[o]=i[s]:i[o]=s;s>0&&e[o]!=e[s];)s=i[s];e[o]==e[s]&&s++}s=0;for(let o=n;o<t.length;o++){for(;s>0&&t[o]!=e[s];)s=i[s];t[o]==e[s]&&s++}return s}function Fs(t){let e;for(e=t.length-1;e>=0&&t[e].match(/\s/);e--);return t.substring(e+1)}function lr(t){const e=t.match(/^\s*/);return e?e[0]:""}const bg="a-zA-Z0-9_\\u{C0}-\\u{FF}\\u{D8}-\\u{F6}\\u{F8}-\\u{2C6}\\u{2C8}-\\u{2D7}\\u{2DE}-\\u{2FF}\\u{1E00}-\\u{1EFF}",xO=new RegExp(`[${bg}]+|\\s+|[^${bg}]`,"ug");class vO extends s1{equals(e,n,r){return r.ignoreCase&&(e=e.toLowerCase(),n=n.toLowerCase()),e.trim()===n.trim()}tokenize(e,n={}){let r;if(n.intlSegmenter){const o=n.intlSegmenter;if(o.resolvedOptions().granularity!="word")throw new Error('The segmenter passed must have a granularity of "word"');r=Array.from(o.segment(e),l=>l.segment)}else r=e.match(xO)||[];const i=[];let s=null;return r.forEach(o=>{/\s/.test(o)?s==null?i.push(o):i.push(i.pop()+o):s!=null&&/\s/.test(s)?i[i.length-1]==s?i.push(i.pop()+o):i.push(s+o):i.push(o),s=o}),i}join(e){return e.map((n,r)=>r==0?n:n.replace(/^\s+/,"")).join("")}postProcess(e,n){if(!e||n.oneChangePerToken)return e;let r=null,i=null,s=null;return e.forEach(o=>{o.added?i=o:o.removed?s=o:((i||s)&&Cg(r,s,i,o),r=o,i=null,s=null)}),(i||s)&&Cg(r,s,i,null),e}}const wO=new vO;function Sg(t,e,n){return wO.diff(t,e,n)}function Cg(t,e,n,r){if(e&&n){const i=lr(e.value),s=Fs(e.value),o=lr(n.value),l=Fs(n.value);if(t){const a=vg(i,o);t.value=Ld(t.value,o,a),e.value=Bs(e.value,a),n.value=Bs(n.value,a)}if(r){const a=wg(s,l);r.value=Rd(r.value,l,a),e.value=Ol(e.value,a),n.value=Ol(n.value,a)}}else if(n){if(t){const i=lr(n.value);n.value=n.value.substring(i.length)}if(r){const i=lr(r.value);r.value=r.value.substring(i.length)}}else if(t&&r){const i=lr(r.value),s=lr(e.value),o=Fs(e.value),l=vg(i,s);e.value=Bs(e.value,l);const a=wg(Bs(i,l),o);e.value=Ol(e.value,a),r.value=Rd(r.value,i,a),t.value=Ld(t.value,i,i.slice(0,i.length-a.length))}else if(r){const i=lr(r.value),s=Fs(e.value),o=kg(s,i);e.value=Ol(e.value,o)}else if(t){const i=Fs(t.value),s=lr(e.value),o=kg(i,s);e.value=Bs(e.value,o)}}class kO extends s1{constructor(){super(...arguments),this.tokenize=CO}equals(e,n,r){return r.ignoreWhitespace?((!r.newlineIsToken||!e.includes(`
`))&&(e=e.trim()),(!r.newlineIsToken||!n.includes(`
`))&&(n=n.trim())):r.ignoreNewlineAtEof&&!r.newlineIsToken&&(e.endsWith(`
`)&&(e=e.slice(0,-1)),n.endsWith(`
`)&&(n=n.slice(0,-1))),super.equals(e,n,r)}}const bO=new kO;function SO(t,e,n){return bO.diff(t,e,n)}function CO(t,e){e.stripTrailingCr&&(t=t.replace(/\r\n/g,`
`));const n=[],r=t.split(/(\n|\r\n)/);r[r.length-1]||r.pop();for(let i=0;i<r.length;i++){const s=r[i];i%2&&!e.newlineIsToken?n[n.length-1]+=s:n.push(s)}return n}/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NO=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),MO=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,n,r)=>r?r.toUpperCase():n.toLowerCase()),Ng=t=>{const e=MO(t);return e.charAt(0).toUpperCase()+e.slice(1)},o1=(...t)=>t.filter((e,n,r)=>!!e&&e.trim()!==""&&r.indexOf(e)===n).join(" ").trim(),EO=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TO={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OO=O.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:i="",children:s,iconNode:o,...l},a)=>O.createElement("svg",{ref:a,...TO,width:e,height:e,stroke:t,strokeWidth:r?Number(n)*24/Number(e):n,className:o1("lucide",i),...!s&&!EO(l)&&{"aria-hidden":"true"},...l},[...o.map(([c,u])=>O.createElement(c,u)),...Array.isArray(s)?s:[s]]));/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const H=(t,e)=>{const n=O.forwardRef(({className:r,...i},s)=>O.createElement(OO,{ref:s,iconNode:e,className:o1(`lucide-${NO(Ng(t))}`,`lucide-${t}`,r),...i}));return n.displayName=Ng(t),n};/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["path",{d:"m15 16 2.536-7.328a1.02 1.02 1 0 1 1.928 0L22 16",key:"xik6mr"}],["path",{d:"M15.697 14h5.606",key:"1stdlc"}],["path",{d:"m2 16 4.039-9.69a.5.5 0 0 1 .923 0L11 16",key:"d5nyq2"}],["path",{d:"M3.304 13h6.392",key:"1q3zxz"}]],DO=H("a-large-small",zO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],AO=H("activity",jO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]],IO=H("arrow-down-wide-narrow",PO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RO=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],LO=H("arrow-up-narrow-wide",RO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],l1=H("bold",_O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],BO=H("calendar",$O);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],a1=H("chevron-down",FO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],HO=H("chevron-left",VO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],c1=H("chevron-right",WO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["path",{d:"m6 17 5-5-5-5",key:"xnjwq"}],["path",{d:"m13 17 5-5-5-5",key:"17xmmf"}]],qO=H("chevrons-right",UO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],u1=H("circle-alert",KO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JO=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],is=H("circle-check-big",JO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],Aa=H("circle-x",YO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GO=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],QO=H("clock",GO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["path",{d:"M12 13v8",key:"1l5pq0"}],["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"m8 17 4-4 4 4",key:"1quai1"}]],d1=H("cloud-upload",XO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],f1=H("code",ZO);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M17 20v2",key:"1rnc9c"}],["path",{d:"M17 2v2",key:"11trls"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M2 17h2",key:"7oei6x"}],["path",{d:"M2 7h2",key:"asdhe0"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"M20 17h2",key:"1fpfkl"}],["path",{d:"M20 7h2",key:"1o8tra"}],["path",{d:"M7 20v2",key:"4gnj0m"}],["path",{d:"M7 2v2",key:"1i4yhu"}],["rect",{x:"4",y:"4",width:"16",height:"16",rx:"2",key:"1vbyd7"}],["rect",{x:"8",y:"8",width:"8",height:"8",rx:"1",key:"z9xiuo"}]],tz=H("cpu",ez);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nz=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],rz=H("database",nz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iz=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sz=H("eye",iz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Mg=H("file-text",oz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],yp=H("funnel",lz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}],["line",{x1:"3",x2:"9",y1:"12",y2:"12",key:"1dyftd"}],["line",{x1:"15",x2:"21",y1:"12",y2:"12",key:"oup4p8"}]],p1=H("git-commit-horizontal",az);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],h1=H("globe",cz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]],dz=H("heading-1",uz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]],pz=H("heading-2",fz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],m1=H("highlighter",hz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],g1=H("image",mz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],yz=H("info",gz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],y1=H("italic",xz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],wz=H("list-ordered",vz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kz=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],bz=H("list",kz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sz=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],Cz=H("monitor",Sz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nz=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],x1=H("palette",Nz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m16 15-3-3 3-3",key:"14y99z"}]],mu=H("panel-left-close",Mz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ez=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"m14 9 3 3-3 3",key:"8010ee"}]],Eg=H("panel-left-open",Ez);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tz=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Oz=H("panels-top-left",Tz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zz=[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],gu=H("pen-line",zz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dz=[["path",{d:"M12 17v5",key:"bb1du9"}],["path",{d:"M9 10.76a2 2 0 0 1-1.11 1.79l-1.78.9A2 2 0 0 0 5 15.24V16a1 1 0 0 0 1 1h12a1 1 0 0 0 1-1v-.76a2 2 0 0 0-1.11-1.79l-1.78-.9A2 2 0 0 1 15 10.76V7a1 1 0 0 1 1-1 2 2 0 0 0 0-4H8a2 2 0 0 0 0 4 1 1 0 0 1 1 1z",key:"1nkz8b"}]],Tg=H("pin",Dz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],ks=H("plus",jz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Az=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],v1=H("quote",Az);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pz=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],w1=H("redo",Pz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iz=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],k1=H("save",Iz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rz=[["path",{d:"M9.671 4.136a2.34 2.34 0 0 1 4.659 0 2.34 2.34 0 0 0 3.319 1.915 2.34 2.34 0 0 1 2.33 4.033 2.34 2.34 0 0 0 0 3.831 2.34 2.34 0 0 1-2.33 4.033 2.34 2.34 0 0 0-3.319 1.915 2.34 2.34 0 0 1-4.659 0 2.34 2.34 0 0 0-3.32-1.915 2.34 2.34 0 0 1-2.33-4.033 2.34 2.34 0 0 0 0-3.831A2.34 2.34 0 0 1 6.35 6.051a2.34 2.34 0 0 0 3.319-1.915",key:"1i5ecw"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Lz=H("settings",Rz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _z=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],$z=H("share-2",_z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bz=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Fz=H("strikethrough",Bz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vz=[["path",{d:"m4 5 8 8",key:"1eunvl"}],["path",{d:"m12 5-8 8",key:"1ah0jp"}],["path",{d:"M20 19h-4c0-1.5.44-2 1.5-2.5S20 15.33 20 14c0-.47-.17-.93-.48-1.29a2.11 2.11 0 0 0-2.62-.44c-.42.24-.74.62-.9 1.07",key:"e8ta8j"}]],Hz=H("subscript",Vz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wz=[["path",{d:"m4 19 8-8",key:"hr47gm"}],["path",{d:"m12 19-8-8",key:"1dhhmo"}],["path",{d:"M20 12h-4c0-1.5.442-2 1.5-2.5S20 8.334 20 7.002c0-.472-.17-.93-.484-1.29a2.105 2.105 0 0 0-2.617-.436c-.42.239-.738.614-.899 1.06",key:"1dfcux"}]],Uz=H("superscript",Wz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qz=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],Kz=H("tag",qz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jz=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],Yz=H("text-align-center",Jz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gz=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],Qz=H("text-align-end",Gz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xz=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],Zz=H("text-align-justify",Xz);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eD=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],tD=H("text-align-start",eD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nD=[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]],b1=H("trash-2",nD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rD=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],S1=H("triangle-alert",rD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iD=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],sD=H("underline",iD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],lD=H("undo",oD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aD=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Ci=H("x",aD);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],_d=H("youtube",cD),uD=st.create({name:"youtube",group:"block",selectable:!0,draggable:!0,atom:!0,addAttributes(){return{"data-youtube-video":{default:null}}},parseHTML(){return[{tag:"div[data-youtube-video]"},{tag:'iframe[src*="youtube.com"]',getAttrs:t=>{const e=t.getAttribute("src");if(!e)return!1;const n=e.match(/(?:embed\/|v=)([^&?/\s]+)/);return n?{"data-youtube-video":n[1]}:!1}}]},renderHTML({HTMLAttributes:t}){const e=t["data-youtube-video"];return["div",{"data-youtube-video":e,class:"youtube-embed relative w-full aspect-video rounded-lg overflow-hidden my-4 bg-zinc-800"},["iframe",{src:`https://www.youtube.com/embed/${e}`,title:"YouTube video player",frameborder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share",allowfullscreen:"true",class:"absolute top-0 left-0 w-full h-full"}]]},addCommands(){return{setYoutubeVideo:t=>({commands:e})=>e.insertContent({type:this.name,attrs:t})}}}),dD=Ie.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:t=>t.style.fontSize.replace("px",""),renderHTML:t=>t.fontSize?{style:`font-size: ${t.fontSize}px`}:{}}}}]},addCommands(){return{setFontSize:t=>({chain:e})=>e().setMark("textStyle",{fontSize:t}).run(),unsetFontSize:()=>({chain:t})=>t().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),fD=({isOpen:t,onClose:e,tags:n,categories:r,postTags:i,postCategories:s,onTagsChange:o,onCategoriesChange:l})=>{if(!t)return null;const[a,c]=O.useState("tags"),[u,d]=O.useState(""),f=a==="tags"?n:r,h=a==="tags"?i:s,m=a==="tags"?o:l,y=f.filter(x=>x.toLowerCase().includes(u.toLowerCase())),k=x=>{h.includes(x)?m(h.filter(w=>w!==x)):m([...h,x])},g=()=>{if(!u)return;const x=f.find(w=>w.toLowerCase()===u.toLowerCase());x?h.includes(x)||k(x):k(u),d("")};return p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl w-full max-w-lg flex flex-col max-h-[80vh] animate-in zoom-in-95 duration-200",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[p.jsx("h2",{className:"text-lg font-bold text-zinc-100",children:"Metadata"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-400 hover:text-white transition-colors",children:p.jsx(Ci,{size:20})})]}),p.jsxs("div",{className:"flex p-2 gap-2 border-b border-zinc-800",children:[p.jsxs("button",{onClick:()=>{c("tags"),d("")},className:`flex-1 py-2 text-sm font-bold rounded-lg transition-colors ${a==="tags"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:["Tags (",i.length,")"]}),p.jsxs("button",{onClick:()=>{c("categories"),d("")},className:`flex-1 py-2 text-sm font-bold rounded-lg transition-colors ${a==="categories"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300"}`,children:["Categories (",s.length,")"]})]}),p.jsx("div",{className:"p-4 border-b border-zinc-800",children:p.jsx("input",{type:"text",value:u,onChange:x=>d(x.target.value),placeholder:`Search or create ${a}...`,className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg px-4 py-3 text-white placeholder-zinc-600 focus:outline-none focus:border-emerald-500 transition-colors",autoFocus:!0})}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[u&&y.length===0&&p.jsxs("button",{onClick:g,className:"w-full py-3 bg-emerald-500/10 border border-emerald-500/20 text-emerald-500 rounded-lg hover:bg-emerald-500/20 transition-all font-bold flex items-center justify-center gap-2 mb-4",children:[p.jsx(ks,{size:16}),'Create "',u,'"']}),p.jsx("div",{className:"mb-2 text-[10px] font-bold uppercase text-zinc-500 tracking-wider",children:u?"Matching Results":"Available Items"}),p.jsxs("div",{className:"flex flex-wrap gap-2",children:[y.map(x=>p.jsx("button",{onClick:()=>k(x),className:`px-3 py-1.5 rounded-full text-xs font-bold transition-all border ${h.includes(x)?"bg-emerald-500 text-black border-emerald-500":"bg-zinc-800 text-zinc-400 border-zinc-700 hover:border-zinc-500 hover:text-white"}`,children:x},x)),y.length===0&&!u&&p.jsx("span",{className:"text-zinc-500 text-sm italic",children:"No items found."})]})]}),p.jsxs("div",{className:"p-4 bg-zinc-950/50 border-t border-zinc-800 text-xs text-zinc-500",children:["Selected: ",h.length>0?h.join(", "):"None"]})]})})},pD=({isOpen:t,onClose:e,images:n,onSelect:r,onUpload:i})=>{if(!t)return null;const[s,o]=O.useState(""),l=n.filter(a=>a.name.toLowerCase().includes(s.toLowerCase()));return p.jsx("div",{className:"fixed inset-0 z-[100] bg-black/50 backdrop-blur-sm flex items-center justify-center p-4",children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl w-full max-w-4xl flex flex-col h-[80vh] animate-in zoom-in-95 duration-200",children:[p.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-zinc-800",children:[p.jsx("h2",{className:"text-lg font-bold text-zinc-100",children:"Media Library"}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-400 hover:text-white transition-colors",children:p.jsx(Ci,{size:20})})]}),p.jsxs("div",{className:"p-4 border-b border-zinc-800 flex gap-4",children:[p.jsxs("div",{className:"flex-1 relative",children:[p.jsx("input",{type:"text",value:s,onChange:a=>o(a.target.value),placeholder:"Search images...",className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg pl-10 pr-4 py-2 text-white placeholder-zinc-600 focus:outline-none focus:border-emerald-500 transition-colors",autoFocus:!0}),p.jsx("div",{className:"absolute left-3 top-2.5 text-zinc-500",children:p.jsx(yp,{size:16})})]}),p.jsxs("label",{className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-lg cursor-pointer transition-colors flex items-center gap-2 shadow-lg shadow-emerald-900/20",children:[p.jsx(ks,{size:18}),p.jsx("span",{children:"Upload New"}),p.jsx("input",{type:"file",className:"hidden",onChange:i,accept:"image/*"})]})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto p-4 bg-zinc-950/30",children:[p.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4",children:l.map(a=>p.jsxs("button",{onClick:()=>r(a.url),className:"group relative aspect-square bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden hover:ring-2 hover:ring-emerald-500 transition-all hover:scale-[1.02]",children:[p.jsx("img",{src:a.url,alt:a.name,className:"w-full h-full object-cover"}),p.jsx("div",{className:"absolute inset-x-0 bottom-0 bg-gradient-to-t from-black/90 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity",children:p.jsx("p",{className:"text-xs text-white truncate font-medium",children:a.name})})]},a.url))}),l.length===0&&p.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-zinc-500 gap-2",children:[p.jsx(g1,{size:48,className:"opacity-20"}),p.jsx("p",{children:"No images found"})]})]})]})})},Bt={BUTTON:38,DIVIDER:12,CUSTOM:48,GAP:4},Pa=({onClick:t,active:e,disabled:n,children:r,title:i,className:s="",width:o=Bt.BUTTON})=>p.jsx("button",{type:"button",onClick:t,disabled:n,title:i,style:{width:`${o}px`,height:`${Bt.BUTTON}px`},className:`flex items-center justify-center rounded transition-colors shrink-0 ${e?"bg-zinc-800 text-white shadow-inner":"text-zinc-400 hover:bg-zinc-800 hover:text-white"} ${n?"opacity-20 cursor-not-allowed grayscale":""} ${s}`,children:r}),Ia=({icon:t,title:e,activeColor:n,onChange:r,onRemove:i,presets:s,variant:o="text"})=>{const[l,a]=O.useState(!1);return p.jsxs("div",{className:"relative",children:[p.jsx(Pa,{onClick:()=>a(!l),active:!!n,title:e,children:p.jsxs("div",{className:"relative flex items-center justify-center",children:[p.jsx(t,{size:18,style:{color:o==="text"?n:void 0}}),o==="highlight"&&n&&p.jsx("span",{className:"absolute -bottom-1 left-0 right-0 h-1 rounded-sm",style:{backgroundColor:n}})]})}),l&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>a(!1)}),p.jsxs("div",{className:"absolute top-full right-0 md:left-1/2 md:-translate-x-1/2 mt-2 p-3 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-[80] min-w-[200px] animate-in slide-in-from-top-2 fade-in",children:[p.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2 uppercase tracking-wider",children:"Presets"}),p.jsx("div",{className:"grid grid-cols-5 gap-1.5 mb-3",children:s.map(c=>p.jsx("button",{onClick:()=>{r(c),a(!1)},className:`w-6 h-6 rounded border ${n===c?"border-white ring-1 ring-white":"border-zinc-700 hover:scale-110 active:scale-95"} transition-all`,style:{backgroundColor:c},title:c},c))}),p.jsx("div",{className:"h-px bg-zinc-800 my-2"}),p.jsxs("div",{className:"flex flex-col gap-2",children:[p.jsxs("label",{className:"flex items-center gap-2 text-xs text-zinc-300 hover:text-white cursor-pointer px-1 py-1 rounded hover:bg-zinc-800 transition-colors",children:[p.jsx("div",{className:"w-5 h-5 rounded border border-zinc-600 bg-gradient-to-br from-red-500 via-green-500 to-blue-500 relative overflow-hidden flex items-center justify-center",children:p.jsx("input",{type:"color",className:"opacity-0 absolute inset-0 w-full h-full cursor-pointer",value:n||"#000000",onChange:c=>{r(c.target.value)}})}),p.jsx("span",{children:"Custom Color..."})]}),p.jsxs("button",{onClick:()=>{i(),a(!1)},className:"flex items-center gap-2 text-xs text-red-400 hover:text-red-300 px-1 py-1 rounded hover:bg-red-400/10 transition-colors",children:[p.jsx(Aa,{size:14}),p.jsx("span",{children:o==="text"?"Reset to Default":"No Highlight"})]})]})]})]})]})},C1=({editor:t})=>{var s;const[e,n]=O.useState(!1),r=[12,14,16,18,20,24,30,36,48,60,72],i=(s=t==null?void 0:t.getAttributes("textStyle"))==null?void 0:s.fontSize;return p.jsxs("div",{className:"relative",children:[p.jsx(Pa,{onClick:()=>n(!e),active:!!i,title:"Font Size",width:Bt.CUSTOM,children:p.jsxs("div",{className:"flex items-center justify-center gap-0.5",children:[p.jsx(DO,{size:16}),i&&p.jsx("span",{className:"text-[10px] font-bold",children:i})]})}),e&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>n(!1)}),p.jsxs("div",{className:"absolute top-full left-0 mt-2 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl z-[80] flex flex-col min-w-[80px] max-h-[200px] overflow-y-auto animate-in slide-in-from-top-2 fade-in",children:[r.map(o=>p.jsxs("button",{onClick:()=>{t.chain().focus().setFontSize(o).run(),n(!1)},className:`px-3 py-2 text-left hover:bg-zinc-800 transition-colors text-sm flex items-center justify-between ${i==o?"text-white bg-zinc-800":"text-zinc-400"}`,children:[p.jsxs("span",{children:[o,"px"]}),i==o&&p.jsx(is,{size:12,className:"text-emerald-500"})]},o)),p.jsxs("button",{onClick:()=>{t.chain().focus().unsetFontSize().run(),n(!1)},className:"px-3 py-2 text-left hover:bg-zinc-800 transition-colors text-xs text-red-400 border-t border-zinc-800 mt-1 flex items-center gap-2",children:[p.jsx(Aa,{size:12}),"Reset"]})]})]})]})},hD=({editor:t,onHistoryUndo:e,onHistoryRedo:n,canUndo:r,canRedo:i,showMetadataModal:s,hasMetadata:o,showMetadataActive:l,onShowMediaLibrary:a,onAddYoutube:c})=>{const u=J.useRef(null),[d,f]=J.useState(100),[h,m]=J.useState(!1),y=O.useMemo(()=>[{id:"undo",icon:lD,action:e,disabled:!r,title:"Undo"},{id:"redo",icon:w1,action:n,disabled:!i,title:"Redo"},{type:"divider"},{id:"bold",icon:l1,action:()=>t.chain().focus().toggleBold().run(),active:t==null?void 0:t.isActive("bold")},{id:"italic",icon:y1,action:()=>t.chain().focus().toggleItalic().run(),active:t==null?void 0:t.isActive("italic")},{id:"underline",icon:sD,action:()=>t.chain().focus().toggleUnderline().run(),active:t==null?void 0:t.isActive("underline")},{id:"strike",icon:Fz,action:()=>t.chain().focus().toggleStrike().run(),active:t==null?void 0:t.isActive("strike")},{type:"divider"},{id:"fontSize",type:"custom",render:()=>p.jsx(C1,{editor:t})},{id:"highlight",type:"custom",render:()=>p.jsx(Ia,{icon:m1,title:"Highlight Color",activeColor:t==null?void 0:t.getAttributes("highlight").color,onChange:w=>t.chain().focus().toggleHighlight({color:w}).run(),onRemove:()=>t.chain().focus().unsetHighlight().run(),presets:["#fef08a","#bbf7d0","#bfdbfe","#fbcfe8","#e9d5ff","#fed7aa","#fecaca"],variant:"highlight"})},{id:"color",type:"custom",render:()=>p.jsx(Ia,{icon:x1,title:"Text Color",activeColor:t==null?void 0:t.getAttributes("textStyle").color,onChange:w=>t.chain().focus().setColor(w).run(),onRemove:()=>t.chain().focus().unsetColor().run(),presets:["#000000","#2563eb","#dc2626","#16a34a","#d97706","#9333ea","#71717a"],variant:"text"})},{type:"divider"},{id:"h1",icon:dz,action:()=>t.chain().focus().toggleHeading({level:1}).run(),active:t==null?void 0:t.isActive("heading",{level:1})},{id:"h2",icon:pz,action:()=>t.chain().focus().toggleHeading({level:2}).run(),active:t==null?void 0:t.isActive("heading",{level:2})},{id:"sub",icon:Hz,action:()=>t.chain().focus().toggleSubscript().run(),active:t==null?void 0:t.isActive("subscript")},{id:"sup",icon:Uz,action:()=>t.chain().focus().toggleSuperscript().run(),active:t==null?void 0:t.isActive("superscript")},{type:"divider"},{id:"bullet",icon:bz,action:()=>t.chain().focus().toggleBulletList().run(),active:t==null?void 0:t.isActive("bulletList")},{id:"ordered",icon:wz,action:()=>t.chain().focus().toggleOrderedList().run(),active:t==null?void 0:t.isActive("orderedList")},{type:"divider"},{id:"left",icon:tD,action:()=>t.chain().focus().setTextAlign("left").run(),active:t==null?void 0:t.isActive({textAlign:"left"})},{id:"center",icon:Yz,action:()=>t.chain().focus().setTextAlign("center").run(),active:t==null?void 0:t.isActive({textAlign:"center"})},{id:"right",icon:Qz,action:()=>t.chain().focus().setTextAlign("right").run(),active:t==null?void 0:t.isActive({textAlign:"right"})},{id:"justify",icon:Zz,action:()=>t.chain().focus().setTextAlign("justify").run(),active:t==null?void 0:t.isActive({textAlign:"justify"})},{type:"divider"},{id:"code",icon:f1,action:()=>t.chain().focus().toggleCodeBlock().run(),active:t==null?void 0:t.isActive("codeBlock")},{id:"quote",icon:v1,action:()=>t.chain().focus().toggleBlockquote().run(),active:t==null?void 0:t.isActive("blockquote")},{type:"divider"},{id:"image",icon:g1,action:a,title:"Insert Image"},{id:"youtube",icon:_d,action:c,title:"Embed YouTube Video"},{id:"tags",type:"custom",render:()=>p.jsx(Pa,{onClick:s,active:l,title:"Manage Tags & Categories",width:Bt.CUSTOM,children:p.jsxs("div",{className:"relative flex items-center justify-center",children:[p.jsx(Kz,{size:18}),o&&p.jsx("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-emerald-500 rounded-full"})]})})}],[t,e,n,r,i,s,o,l,a,c]);O.useEffect(()=>{const w=()=>{if(u.current){const S=u.current.clientWidth-50;let b=0,C=0;for(let M=0;M<y.length;M++){const D=y[M];let E=0;if(D.type==="divider"?E=Bt.DIVIDER:D.type==="custom"?E=Bt.CUSTOM:E=Bt.BUTTON,b+E+Bt.GAP>S)break;b+=E+Bt.GAP,C++}f(Math.max(2,C))}};w(),window.addEventListener("resize",w);const v=new ResizeObserver(w);return u.current&&v.observe(u.current),()=>{window.removeEventListener("resize",w),v.disconnect()}},[]);const k=y.slice(0,d),g=y.slice(d),x=(w,v)=>{if(w.type==="divider")return p.jsx("div",{style:{width:`${Bt.DIVIDER}px`},className:"h-6 flex items-center justify-center shrink-0",children:p.jsx("div",{className:"w-px h-full bg-zinc-800"})},v);if(w.type==="custom")return p.jsx(J.Fragment,{children:w.render()},w.id);const S=w.icon;return S?p.jsx(Pa,{onClick:w.action,active:w.active,disabled:w.disabled,title:w.title,children:p.jsx(S,{size:18})},w.id):null};return p.jsxs("div",{ref:u,className:"px-4 py-2 border-b border-zinc-800 flex items-center gap-1 bg-zinc-900/20 w-full relative",children:[k.map((w,v)=>x(w,v)),g.length>0&&p.jsxs("div",{className:"relative ml-auto",children:[p.jsx("button",{onClick:()=>m(!h),style:{width:`${Bt.BUTTON}px`,height:`${Bt.BUTTON}px`},className:`flex items-center justify-center rounded hover:bg-zinc-800 text-zinc-400 hover:text-white transition-colors shrink-0 ${h?"bg-zinc-800 text-white":""}`,title:"More tools",children:p.jsx(qO,{size:18})}),h&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>m(!1)}),p.jsx("div",{className:"absolute right-0 top-full mt-2 bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl p-2 z-[60] flex flex-col gap-1 min-w-[150px] animate-in slide-in-from-top-2 fade-in",children:p.jsx("div",{className:"flex flex-wrap gap-1 max-w-[200px]",children:g.map((w,v)=>x(w,v))})})]})]})]})},mD=({value:t,onChange:e,options:n})=>{const[r,i]=O.useState(!1),s=n.find(o=>o.value===t);return p.jsxs("div",{className:"relative flex-1",children:[p.jsxs("button",{onClick:()=>i(!r),className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg py-1.5 px-3 text-xs text-left text-zinc-300 hover:border-zinc-500 transition-colors flex justify-between items-center",children:[p.jsx("span",{children:s?s.label:"Sort by..."}),p.jsx(a1,{size:14,className:`transition-transform duration-200 ${r?"rotate-180":""}`})]}),r&&p.jsxs(p.Fragment,{children:[p.jsx("div",{className:"fixed inset-0 z-[70]",onClick:()=>i(!1)}),p.jsx("div",{className:"absolute top-full left-0 right-0 mt-1 bg-zinc-900 border border-zinc-800 rounded-lg shadow-2xl z-[80] overflow-hidden animate-in fade-in slide-in-from-top-1 duration-150",children:n.map(o=>p.jsx("button",{onClick:()=>{e(o.value),i(!1)},className:`w-full text-left px-3 py-2 text-xs transition-colors ${t===o.value?"bg-emerald-500/10 text-emerald-500":"text-zinc-400 hover:bg-zinc-800 hover:text-white"}`,children:o.label},o.value))})]})]})},Og=({options:t,selected:e,onChange:n,placeholder:r,label:i})=>p.jsxs("div",{className:"space-y-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-500 ml-1",children:i}),p.jsx("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-1 max-h-32 overflow-y-auto custom-scrollbar",children:t.length>0?t.map(s=>p.jsxs("button",{onClick:()=>{e.includes(s)?n(e.filter(o=>o!==s)):n([...e,s])},className:`w-full text-left px-2 py-1.5 rounded text-[11px] transition-all flex items-center justify-between group ${e.includes(s)?"bg-emerald-500/10 text-emerald-500":"text-zinc-400 hover:bg-zinc-700 hover:text-white"}`,children:[p.jsx("span",{children:s}),e.includes(s)&&p.jsx(is,{size:12})]},s)):p.jsxs("div",{className:"p-2 text-[10px] text-zinc-600 italic",children:["No ",i.toLowerCase()," available"]})})]}),zg=({label:t,range:e,onChange:n})=>{const[r,i]=O.useState(new Date),[s,o]=O.useState("days"),l=(k,g)=>new Date(k,g+1,0).getDate(),a=(k,g)=>new Date(k,g,1).getDay(),c=k=>{const g=k;if(!e.start||e.start&&e.end)n({start:g,end:null});else{const x=new Date(e.start);new Date(g)<x?n({start:g,end:e.start}):n({start:e.start,end:g})}},u=()=>{s==="days"?o("months"):s==="months"?o("years"):s==="years"&&o("decades")},d=()=>{s==="days"?i(new Date(r.getFullYear(),r.getMonth()-1,1)):s==="months"?i(new Date(r.getFullYear()-1,r.getMonth(),1)):s==="years"?i(new Date(r.getFullYear()-10,r.getMonth(),1)):s==="decades"&&i(new Date(r.getFullYear()-100,r.getMonth(),1))},f=()=>{s==="days"?i(new Date(r.getFullYear(),r.getMonth()+1,1)):s==="months"?i(new Date(r.getFullYear()+1,r.getMonth(),1)):s==="years"?i(new Date(r.getFullYear()+10,r.getMonth(),1)):s==="decades"&&i(new Date(r.getFullYear()+100,r.getMonth(),1))},h=()=>{const k=new Date,g=`${k.getFullYear()}-${String(k.getMonth()+1).padStart(2,"0")}-${String(k.getDate()).padStart(2,"0")}`;i(new Date),o("days"),n({start:g,end:g})},m=()=>{const k=r.getFullYear();if(s==="days")return r.toLocaleString("default",{month:"short",year:"numeric"});if(s==="months")return`${k}`;if(s==="years"){const g=Math.floor(k/10)*10;return`${g} - ${g+9}`}if(s==="decades"){const g=Math.floor(k/100)*100;return`${g} - ${g+99}`}},y=()=>{const k=r.getFullYear();if(s==="days"){const g=r.getMonth(),x=l(k,g),w=a(k,g),v=[];for(let S=0;S<w;S++)v.push(null);for(let S=1;S<=x;S++){const b=new Date(k,g,S),C=b.getFullYear(),M=String(b.getMonth()+1).padStart(2,"0"),D=String(b.getDate()).padStart(2,"0");v.push(`${C}-${M}-${D}`)}return p.jsxs("div",{children:[p.jsx("div",{className:"grid grid-cols-7 gap-1 text-center mb-1",children:["S","M","T","W","T","F","S"].map(S=>p.jsx("span",{className:"text-[9px] text-zinc-600 font-bold",children:S},S))}),p.jsx("div",{className:"grid grid-cols-7 gap-1",children:v.map((S,b)=>{const C=S&&(S===e.start||S===e.end),M=S&&e.start&&e.end&&S>e.start&&S<e.end,D=new Date,E=`${D.getFullYear()}-${String(D.getMonth()+1).padStart(2,"0")}-${String(D.getDate()).padStart(2,"0")}`,I=S===E;return p.jsx("button",{disabled:!S,onClick:()=>c(S),className:`aspect-square rounded text-[10px] flex items-center justify-center transition-all ${S?"":"invisible"} ${C?"bg-emerald-500 text-zinc-950 font-bold":M?"bg-emerald-500/20 text-emerald-500":I?"bg-zinc-700 text-white font-bold ring-1 ring-zinc-500":"text-zinc-400 hover:bg-zinc-700"}`,children:S?new Date(S).getDate():""},b)})})]})}if(s==="months"){const g=Array.from({length:12},(x,w)=>new Date(k,w,1));return p.jsx("div",{className:"grid grid-cols-3 gap-2",children:g.map((x,w)=>p.jsx("button",{onClick:()=>{i(x),o("days")},className:"p-2 text-[10px] rounded text-zinc-400 hover:bg-zinc-700 hover:text-white",children:x.toLocaleString("default",{month:"short"})},w))})}if(s==="years"){const g=Math.floor(k/10)*10,x=Array.from({length:10},(w,v)=>g+v);return p.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(w=>p.jsx("button",{onClick:()=>{i(new Date(w,0,1)),o("months")},className:`p-2 text-[10px] rounded hover:bg-zinc-700 hover:text-white ${w===new Date().getFullYear()?"text-emerald-500 font-bold":"text-zinc-400"}`,children:w},w))})}if(s==="decades"){const g=Math.floor(k/100)*100,x=Array.from({length:10},(w,v)=>g+v*10);return p.jsx("div",{className:"grid grid-cols-3 gap-2",children:x.map(w=>p.jsxs("button",{onClick:()=>{i(new Date(w,0,1)),o("years")},className:"p-2 text-[10px] rounded text-zinc-400 hover:bg-zinc-700 hover:text-white",children:[w,"-",w+9]},w))})}};return p.jsxs("div",{className:"space-y-1",children:[p.jsxs("div",{className:"flex justify-between items-center px-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-500",children:t}),p.jsx("button",{onClick:h,className:"text-[9px] font-bold text-emerald-500 hover:text-emerald-400 transition-colors bg-emerald-500/5 px-1.5 py-0.5 rounded border border-emerald-500/10",children:"Today"})]}),p.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 rounded-lg p-3",children:[p.jsxs("div",{className:"flex justify-between items-center mb-3",children:[p.jsx("button",{onClick:d,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400",children:p.jsx(HO,{size:14})}),p.jsx("button",{onClick:u,className:"text-[11px] font-bold text-zinc-300 hover:text-white hover:underline transition-all",children:m()}),p.jsx("button",{onClick:f,className:"p-1 hover:bg-zinc-700 rounded text-zinc-400",children:p.jsx(c1,{size:14})})]}),y(),s==="days"&&(e.start||e.end)&&p.jsxs("div",{className:"mt-3 flex items-center justify-between text-[9px] text-zinc-500 border-t border-zinc-700 pt-2",children:[p.jsxs("span",{children:[e.start?new Date(e.start).toLocaleDateString():"..."," - ",e.end?new Date(e.end).toLocaleDateString():"..."]}),p.jsx("button",{onClick:()=>n({start:null,end:null}),className:"text-red-400 hover:underline",children:"Reset"})]})]})]})},gD=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,i]=O.useState("");if(!t)return null;const s=()=>{r.trim()&&(n(r.trim()),i(""))};return p.jsx("div",{className:"fixed inset-0 z-[60] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 text-white",children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 opacity-100",children:[p.jsxs("div",{className:"p-6 text-white",children:[p.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[p.jsx("div",{className:"p-2 bg-emerald-500/10 text-emerald-500 rounded-lg",children:p.jsx(ks,{size:20})}),p.jsx("h3",{className:"text-lg font-bold",children:"Create New Post"})]}),p.jsx("p",{className:"text-zinc-400 text-sm mb-4",children:"Enter a filename for your new post."}),p.jsx("input",{autoFocus:!0,type:"text",value:r,onChange:o=>i(o.target.value),placeholder:"My New Post",className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg py-2.5 px-4 text-white focus:outline-none focus:border-emerald-500 transition-colors shadow-inner",onKeyDown:o=>{o.key==="Enter"&&s(),o.key==="Escape"&&e()}})]}),p.jsxs("div",{className:"px-6 py-4 bg-zinc-950/50 flex justify-end gap-3 border-t border-zinc-800",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",children:"Cancel"}),p.jsx("button",{onClick:s,disabled:!r.trim(),className:"px-6 py-2 rounded-lg text-sm font-bold text-zinc-950 bg-emerald-500 hover:bg-emerald-400 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg shadow-emerald-900/20 transition-all",children:"Create"})]})]})})},yD=({isOpen:t,onClose:e,onConfirm:n})=>{const[r,i]=O.useState("search"),[s,o]=O.useState(""),[l,a]=O.useState([]),[c,u]=O.useState(!1),[d,f]=O.useState(""),[h,m]=O.useState(null);O.useEffect(()=>{t||(o(""),a([]),f(""),m(null))},[t]);const y=async g=>{if(g&&g.preventDefault(),!!s.trim()){u(!0);try{const x=await gt.get(`/api/youtube/search?q=${encodeURIComponent(s)}`);a(x.data.items||[])}catch(x){console.error("YouTube Search Failed:",x)}finally{u(!1)}}},k=g=>{const x=g.match(/(?:embed\/|v=|vi\/|youtu\.be\/|shorts\/|\/)([a-zA-Z0-9_-]{11})/);return x?x[1]:g.length===11?g:null};return O.useEffect(()=>{const g=k(d);m(g)},[d]),t?p.jsx("div",{className:"fixed inset-0 z-[100] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4 text-white",children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-2xl shadow-2xl max-w-2xl w-full overflow-hidden flex flex-col max-h-[90vh]",children:[p.jsxs("div",{className:"p-6 border-b border-zinc-800 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:"p-2 bg-red-500/10 text-red-500 rounded-lg",children:p.jsx(_d,{size:24})}),p.jsxs("div",{children:[p.jsx("h3",{className:"text-lg font-bold",children:"Embed YouTube Video"}),p.jsx("p",{className:"text-xs text-zinc-500",children:"Search or paste a link to embed"})]})]}),p.jsx("button",{onClick:e,className:"p-2 hover:bg-zinc-800 rounded-lg text-zinc-500 hover:text-white transition-colors",children:p.jsx(Ci,{size:20})})]}),p.jsxs("div",{className:"flex px-6 pt-2 border-b border-zinc-800 gap-6",children:[p.jsx("button",{onClick:()=>i("search"),className:`py-3 text-sm font-medium border-b-2 transition-all ${r==="search"?"border-emerald-500 text-emerald-500":"border-transparent text-zinc-500 hover:text-zinc-300"}`,children:"Search YouTube"}),p.jsx("button",{onClick:()=>i("link"),className:`py-3 text-sm font-medium border-b-2 transition-all ${r==="link"?"border-emerald-500 text-emerald-500":"border-transparent text-zinc-500 hover:text-zinc-300"}`,children:"Direct Link"})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:r==="search"?p.jsxs("div",{className:"space-y-6",children:[p.jsxs("form",{onSubmit:y,className:"relative",children:[p.jsx("input",{autoFocus:!0,type:"text",placeholder:"Search for videos...",className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl py-3 pl-4 pr-12 text-white focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 outline-none transition-all shadow-inner",value:s,onChange:g=>o(g.target.value)}),p.jsx("button",{type:"submit",disabled:c,className:"absolute right-2 top-2 p-1.5 bg-emerald-500 text-zinc-950 rounded-lg hover:bg-emerald-400 transition-colors disabled:opacity-50",children:p.jsx(yp,{size:18})})]}),c?p.jsx("div",{className:"grid grid-cols-2 gap-4 animate-pulse",children:[1,2,3,4].map(g=>p.jsxs("div",{className:"space-y-2",children:[p.jsx("div",{className:"aspect-video bg-zinc-800 rounded-lg"}),p.jsx("div",{className:"h-4 bg-zinc-800 rounded w-3/4"})]},g))}):l.length>0?p.jsx("div",{className:"grid grid-cols-2 gap-4",children:l.map(g=>{var x;return p.jsxs("button",{onClick:()=>n(g.url.split("v=")[1]||g.url.split("/").pop()),className:"group text-left space-y-2 hover:bg-zinc-800/50 p-2 rounded-xl transition-all",children:[p.jsxs("div",{className:"relative aspect-video rounded-lg overflow-hidden bg-zinc-800",children:[p.jsx("img",{src:g.thumbnail,alt:g.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}),p.jsx("div",{className:"absolute inset-0 bg-black/40 opacity-0 group-hover:opacity-100 flex items-center justify-center transition-opacity",children:p.jsx(ks,{size:32,className:"text-white bg-emerald-500 rounded-full p-2"})}),p.jsx("span",{className:"absolute bottom-2 right-2 bg-black/80 text-[10px] px-1.5 py-0.5 rounded font-mono",children:g.duration?Math.floor(g.duration/60)+":"+(g.duration%60).toString().padStart(2,"0"):""})]}),p.jsxs("div",{className:"space-y-1",children:[p.jsx("h4",{className:"text-sm font-medium line-clamp-2 leading-tight group-hover:text-emerald-400 transition-colors",children:g.title}),p.jsxs("p",{className:"text-[10px] text-zinc-500 flex items-center gap-1",children:[g.uploaderName,"  ",(x=g.views)==null?void 0:x.toLocaleString()," views"]})]})]},g.url)})}):s&&!c?p.jsx("div",{className:"text-center py-12 text-zinc-500 italic",children:"No videos found. Try a different search."}):p.jsxs("div",{className:"text-center py-12 flex flex-col items-center gap-4 text-zinc-500",children:[p.jsx(_d,{size:48,className:"opacity-10"}),p.jsx("p",{children:"Enter a topic or video name to find content"})]})]}):p.jsxs("div",{className:"space-y-6",children:[p.jsxs("div",{children:[p.jsx("label",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest mb-2 block",children:"Video URL or ID"}),p.jsx("input",{autoFocus:!0,type:"text",placeholder:"https://youtube.com/watch?v=...",className:"w-full bg-zinc-800 border border-zinc-700 rounded-xl py-3 px-4 text-white focus:ring-2 focus:ring-emerald-500/50 focus:border-emerald-500 outline-none transition-all shadow-inner",value:d,onChange:g=>f(g.target.value)})]}),h&&p.jsxs("div",{className:"space-y-3",children:[p.jsx("label",{className:"text-xs font-bold text-zinc-500 uppercase tracking-widest block",children:"Live Preview"}),p.jsxs("div",{className:"aspect-video rounded-xl overflow-hidden bg-black ring-1 ring-zinc-800 relative shadow-2xl",children:[p.jsx("iframe",{src:`https://www.youtube.com/embed/${h}?controls=0&modestbranding=1`,className:"w-full h-full",title:"Preview"}),p.jsx("div",{className:"absolute inset-0 z-10 pointer-events-none border-2 border-emerald-500/30 rounded-xl"})]}),p.jsxs("p",{className:"text-[10px] text-emerald-500 font-mono text-center",children:["Detected ID: ",h]})]})]})}),p.jsxs("div",{className:"p-6 bg-zinc-950/50 border-t border-zinc-800 flex justify-end gap-3",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 text-sm font-medium text-zinc-400 hover:text-white transition-colors",children:"Cancel"}),p.jsx("button",{onClick:()=>h&&n(h),disabled:!h,className:"px-6 py-2 bg-emerald-500 text-zinc-950 rounded-lg text-sm font-bold hover:bg-emerald-400 transition-all disabled:opacity-50 disabled:grayscale",children:"Insert Video"})]})]})}):null},xD=({onSave:t,onAction:e,isSaving:n,isDirty:r,deployStatus:i})=>{const[s,o]=O.useState(!1),l=J.useRef(null);O.useEffect(()=>{const u=d=>{l.current&&!l.current.contains(d.target)&&o(!1)};return document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[]);const a=[{label:"Save & Publish",icon:h1,steps:["save","publish"],color:"text-blue-400"},{label:"Save, Publish & Commit",icon:p1,steps:["save","publish","commit"],color:"text-purple-400"}];a.push({label:"Save, Publish, Commit & Push",icon:d1,steps:["save","publish","commit","push"],color:"text-emerald-400"});const c=()=>i==="publishing"?"Publishing...":i==="committing"?"Committing...":i==="pushing"?"Pushing...":n?"Saving...":"Save";return p.jsxs("div",{className:"relative flex items-stretch h-10",ref:l,children:[p.jsxs("button",{type:"button",onClick:t,disabled:n||!!i||!r,className:`flex items-center gap-2 pl-4 pr-3 rounded-l-lg font-bold transition-all justify-center text-sm border-r border-black/10 ${r?"bg-yellow-400 text-zinc-950 hover:bg-yellow-300 shadow-[0_0_20px_rgba(250,204,21,0.2)]":"bg-zinc-800 text-zinc-600 cursor-not-allowed opacity-50"}`,title:n?"Saving...":"Save Changes",children:[p.jsx(k1,{size:18}),p.jsx("span",{className:"hidden md:inline",children:c()})]}),p.jsx("button",{type:"button",onClick:u=>{u.stopPropagation(),i||o(!s)},disabled:!!i,className:`px-2 rounded-r-lg transition-all border-l border-white/10 ${r?"bg-yellow-400 text-zinc-950 hover:bg-yellow-300":"bg-zinc-800 text-zinc-600 cursor-not-allowed opacity-50"}`,children:p.jsx(a1,{size:16,className:`transition-transform duration-200 ${s?"rotate-180":""}`})}),s&&p.jsx("div",{className:"absolute top-full right-0 mt-2 w-72 bg-zinc-900 border border-zinc-700 rounded-xl shadow-[0_10px_40px_rgba(0,0,0,0.5)] z-[200] overflow-hidden",children:p.jsx("div",{className:"p-2 space-y-1",children:a.map(u=>p.jsxs("button",{type:"button",onClick:d=>{d.stopPropagation(),e(u.steps),o(!1)},className:"w-full flex items-center gap-3 px-3 py-2.5 rounded-lg hover:bg-zinc-800 text-left transition-colors group",children:[p.jsx("div",{className:`p-1.5 rounded-md bg-zinc-800 group-hover:bg-zinc-700 ${u.color}`,children:p.jsx(u.icon,{size:16})}),p.jsxs("div",{className:"flex flex-col",children:[p.jsx("span",{className:"text-sm font-medium text-zinc-200",children:u.label}),p.jsx("span",{className:"text-[10px] text-zinc-500 uppercase tracking-tighter",children:"Workflow"})]})]},u.label))})})]})},vD=({isOpen:t,onClose:e,workflow:n,onCancelStep:r,onAbort:i,onConfirmCommit:s,currentTitle:o})=>{const[l,a]=O.useState(`Update ${o||"blog content"}`),[c,u]=O.useState(null),[d,f]=O.useState(!1),[h,m]=O.useState(()=>localStorage.getItem("inscript_hide_push_warning")==="true"),[y,k]=O.useState(()=>localStorage.getItem("inscript_hide_push_info")==="true");if(O.useEffect(()=>{(n==null?void 0:n.currentIndex)!==void 0&&(n.steps[n.currentIndex]==="commit"&&a(`Update ${o||"blog content"}`),u(M=>M!==null&&M<=n.currentIndex?null:M))},[n==null?void 0:n.currentIndex,o]),!t||!n)return null;const{steps:g,currentIndex:x,status:w,error:v}=n,S={save:{label:"Save",icon:k1},publish:{label:"Publish",icon:h1},commit:{label:"Commit",icon:p1},push:{label:"Push",icon:d1}},b=g[x],C=b==="commit"&&w==="paused";return p.jsx("div",{className:"fixed inset-0 z-[150] flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl max-w-lg w-full overflow-hidden animate-in fade-in zoom-in-95 duration-200",children:[p.jsxs("div",{className:"p-6",children:[p.jsxs("div",{className:"flex justify-between items-center mb-8",children:[p.jsx("h2",{className:"text-xl font-bold text-white",children:"Workflow Progress"}),p.jsx("button",{onClick:i,className:"text-zinc-500 hover:text-red-400 transition-colors",children:p.jsx(Ci,{size:20})})]}),p.jsxs("div",{className:"relative mb-12",children:[p.jsx("div",{className:"absolute top-1/2 left-0 w-full h-0.5 bg-zinc-800 -translate-y-1/2"}),p.jsx("div",{className:"relative flex justify-between items-center",children:g.map((M,D)=>{const E=S[M],I=D<x||w==="completed"&&D===g.length-1,$=D===x&&w!=="error"&&w!=="completed",K=D===x&&w==="error",ue=D>x,ie=c!==null&&D>=c&&D>x||d&&D>=x&&w!=="completed";return p.jsxs("div",{className:"relative flex flex-col items-center group",children:[D>0&&D<=x&&p.jsx("div",{className:`absolute top-1/2 right-full w-full h-0.5 -translate-y-1/2 z-0 ${(I||$)&&!ie?"bg-emerald-500":"bg-zinc-800"}`,style:{width:"100%"}}),p.jsxs("div",{className:`w-10 h-10 rounded-full flex items-center justify-center z-10 transition-all duration-300 relative ${ie?"bg-red-500/20 text-red-500 ring-2 ring-red-500/30":I?"bg-emerald-500 text-zinc-950":$?"bg-emerald-500/20 text-emerald-500 ring-4 ring-emerald-500/10":K?"bg-red-500/20 text-red-500":"bg-zinc-800 text-zinc-500"}`,children:[I&&!ie?p.jsx(is,{size:20}):p.jsx(E.icon,{size:20,className:$?"animate-pulse":""}),ue&&p.jsx("button",{onClick:se=>{se.stopPropagation(),r(D)},onMouseEnter:()=>u(D),onMouseLeave:()=>u(null),className:"absolute -top-1 -right-1 bg-zinc-700 text-zinc-400 hover:bg-red-500 hover:text-white rounded-full p-0.5 opacity-40 hover:opacity-100 transition-opacity z-20",title:"Cancel this and following steps",children:p.jsx(Ci,{size:10})})]}),p.jsx("span",{className:`absolute top-full mt-2 text-[10px] font-bold uppercase tracking-wider ${ie?"text-red-500":$?"text-emerald-500":"text-zinc-500"}`,children:E.label})]},M)})})]}),p.jsxs("div",{className:"min-h-[140px] flex flex-col justify-center",children:[w==="error"?p.jsxs("div",{className:"p-4 bg-red-500/10 border border-red-500/20 rounded-lg flex gap-3",children:[p.jsx(u1,{className:"text-red-500 shrink-0",size:20}),p.jsxs("div",{children:[p.jsx("p",{className:"text-sm font-bold text-red-200",children:"Step Failed"}),p.jsx("p",{className:"text-xs text-red-200/70",children:v})]})]}):C?p.jsxs("div",{className:"space-y-4 animate-in slide-in-from-bottom-2",children:[p.jsxs("div",{children:[p.jsx("label",{className:"block text-[10px] font-bold text-zinc-500 uppercase tracking-wider mb-2",children:"Commit Message"}),p.jsx("textarea",{autoFocus:!0,value:l,onChange:M=>a(M.target.value),className:"w-full bg-zinc-950 border border-zinc-800 rounded-lg p-3 text-zinc-200 text-sm outline-none focus:border-emerald-500/50 transition-colors min-h-[80px] resize-none",placeholder:"What changed?"})]}),p.jsxs("button",{onClick:()=>s(l),className:"w-full py-2.5 bg-emerald-500 hover:bg-emerald-400 text-zinc-950 rounded-lg text-sm font-bold shadow-lg shadow-emerald-900/20 transition-all flex items-center justify-center gap-2",children:["Confirm & Continue ",p.jsx(c1,{size:16})]})]}):p.jsxs("div",{className:"text-center py-4",children:[p.jsx("div",{className:"text-sm text-zinc-300 font-medium mb-1",children:w==="completed"?"Workflow Successful!":b==="save"?"Saving post content...":b==="publish"?"Generating static site...":b==="commit"?"Recording changes to Git...":b==="push"?"Pushing to remote repository...":"Processing..."}),p.jsx("div",{className:"text-xs text-zinc-500",children:w==="completed"?"All steps finished. You can now close this modal.":"Please wait while we handle the deployment."})]}),p.jsxs("div",{className:"space-y-3 mt-4",children:[g.includes("push")&&w!=="completed"&&w!=="error"&&!h&&p.jsxs("div",{className:"p-4 bg-orange-500/10 border border-orange-500/20 rounded-lg flex gap-3 animate-in fade-in slide-in-from-top-1",children:[p.jsx(S1,{className:"text-orange-500 shrink-0",size:20}),p.jsxs("div",{className:"flex-1",children:[p.jsx("p",{className:"text-xs font-bold text-orange-200 mb-1",children:"Push Warning"}),p.jsx("p",{className:"text-[10px] text-orange-200/70 leading-relaxed",children:"External pushes are irreversible and will affect the live repository."}),p.jsxs("label",{className:"flex items-center gap-2 mt-2 cursor-pointer group",children:[p.jsx("input",{type:"checkbox",checked:h,onChange:M=>{const D=M.target.checked;m(D),localStorage.setItem("inscript_hide_push_warning",D?"true":"false")},className:"w-3 h-3 rounded border-zinc-700 bg-zinc-800 text-emerald-500"}),p.jsx("span",{className:"text-[9px] text-orange-200/40 group-hover:text-orange-200/60 transition-colors",children:"Don't show again"})]})]})]}),!1]})]})]}),p.jsxs("div",{className:"px-6 py-4 bg-zinc-950/50 flex justify-between items-center border-t border-zinc-800",children:[p.jsx("button",{onClick:i,onMouseEnter:()=>f(!0),onMouseLeave:()=>f(!1),className:"text-xs font-bold text-red-500/60 hover:text-red-500 transition-colors uppercase tracking-widest",children:"Abort Workflow"}),w==="completed"&&p.jsx("button",{onClick:e,className:"px-4 py-1.5 bg-zinc-800 hover:bg-zinc-700 text-white rounded text-xs font-bold transition-all",children:"Close"})]})]})})},wD=({config:t,onClose:e})=>{if(!t)return null;const{title:n,message:r,type:i="warning",confirmText:s="Confirm",onConfirm:o}=t;return p.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm p-4",children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl shadow-2xl max-w-md w-full overflow-hidden transform transition-all scale-100 opacity-100",children:[p.jsx("div",{className:"p-6",children:p.jsxs("div",{className:"flex items-start gap-4",children:[p.jsx("div",{className:`p-3 rounded-full ${i==="danger"?"bg-red-500/10 text-red-500":"bg-yellow-500/10 text-yellow-500"}`,children:i==="danger"?p.jsx(b1,{size:24}):p.jsx(S1,{size:24})}),p.jsxs("div",{className:"flex-1",children:[p.jsx("h3",{className:"text-lg font-bold text-white mb-2",children:n}),p.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:r})]})]})}),p.jsxs("div",{className:"px-6 py-4 bg-zinc-950/50 flex justify-end gap-3 border-t border-zinc-800",children:[p.jsx("button",{onClick:e,className:"px-4 py-2 rounded-lg text-sm font-medium text-zinc-400 hover:text-white hover:bg-zinc-800 transition-colors",children:"Cancel"}),p.jsx("button",{onClick:o,className:`px-4 py-2 rounded-lg text-sm font-bold text-white shadow-lg transition-all ${i==="danger"?"bg-red-600 hover:bg-red-500 shadow-red-900/20":"bg-yellow-600 hover:bg-yellow-500 shadow-yellow-900/20"}`,children:s})]})]})})},kD=()=>{const[t,e]=O.useState([]),[n,r]=O.useState(!1),[i,s]=O.useState(null),[o,l]=O.useState(""),[a,c]=O.useState([]),[u,d]=O.useState([]),[f,h]=O.useState(""),[m,y]=O.useState(!1),[k,g]=O.useState(!1),[x,w]=O.useState([]),[v,S]=O.useState({title:"",html:"",tags:[],categories:[]}),[b,C]=O.useState(!1),[M,D]=O.useState(!1),[E,I]=O.useState([]),[$,K]=O.useState(-1),[ue,ie]=O.useState(0),[se,be]=O.useState(null),[A,L]=O.useState(null),[U,oe]=O.useState(!1),[le,Nt]=O.useState(!1),[Oe,Se]=O.useState(null),[ve,Mt]=O.useState("all"),[ze,_t]=O.useState(!0),[mn,gn]=O.useState(!1),[Hr,Zn]=O.useState(!1),[Ti,er]=O.useState(!1),[jn,tn]=O.useState(null),[mt,Et]=O.useState(null),[Qe,nn]=O.useState([]),[$t,yn]=O.useState([]),[rn,Wr]=O.useState({start:null,end:null}),[xn,Ur]=O.useState({start:null,end:null}),[tr,Zo]=O.useState(!1),pc=J.useRef({title:"",html:""}),nr=J.useRef(!1),An=J.useRef(!1),Oi=J.useRef(o),T=J.useRef([]),F=J.useRef(-1),W=J.useRef(null),ne=J.useRef(null),ee=J.useRef(!1),De=J.useRef(new URLSearchParams(window.location.search));O.useEffect(()=>{T.current=E,F.current=$},[E,$]);const[Xe,Pn]=O.useState(()=>{const N=localStorage.getItem("inscript_sidebar_width");return N?parseInt(N,10):320}),qr=J.useRef(!1),In=J.useCallback(()=>{qr.current=!0,document.body.style.cursor="col-resize",document.body.style.userSelect="none"},[]),Kr=J.useCallback(()=>{qr.current&&(qr.current=!1,document.body.style.cursor="",document.body.style.userSelect="",localStorage.setItem("inscript_sidebar_width",Xe))},[Xe]),rr=J.useCallback(N=>{if(qr.current){const P=Math.min(600,window.innerWidth-50),R=Math.max(240,Math.min(P,N.clientX));Pn(R)}},[]);O.useEffect(()=>{window.addEventListener("mousemove",rr),window.addEventListener("mouseup",Kr);const N=()=>{Pn(P=>Math.min(P,window.innerWidth-50))};return window.addEventListener("resize",N),()=>{window.removeEventListener("mousemove",rr),window.removeEventListener("mouseup",Kr),window.removeEventListener("resize",N)}},[rr,Kr]),O.useEffect(()=>{Oi.current=o},[o]);const vn=!1,[ir,Ms]=O.useState(()=>new URLSearchParams(window.location.search).get("readonly")==="true"),ce=ir,xp=J.useRef(ce);O.useEffect(()=>{xp.current=ce},[ce]),O.useEffect(()=>{f&&o==null&&(console.warn("[Inscript] Detected invalid title (null/undefined). Healing to fallback..."),l(f.replace(".md","")||"Untitled"))},[o,f]);const G=uT({extensions:[hO,fM.configure({allowBase64:!0}),oM,lM,dD,uM.configure({multicolor:!0}),gM,pM,hM,mM.configure({types:["heading","paragraph"]}),uD],content:(i==null?void 0:i.html)||"",editable:!ce,editorProps:{attributes:{class:"prose prose-invert prose-lg max-w-none focus:outline-none min-h-[calc(100vh-300px)]"}},onUpdate:({editor:N})=>{xp.current||(ie(P=>P+1),!nr.current&&!An.current&&(W.current&&clearTimeout(W.current),W.current=setTimeout(()=>{const P=N.getHTML(),R=Oi.current,Me=T.current,X=F.current,Re=Me[X];if(!Re||Re.html!==P||Re.title!==R||JSON.stringify(Re.tags)!==JSON.stringify(a)||JSON.stringify(Re.categories)!==JSON.stringify(u)){const We=Me.slice(0,X+1),lt={html:P,title:R,tags:a,categories:u,timestamp:new Date().toISOString()};We.push(lt),I(We),K(We.length-1),C(!0)}},1e3)))},onSelectionUpdate:({editor:N})=>{ie(P=>P+1)}},[f]);O.useEffect(()=>{G&&!G.isDestroyed&&G.setEditable(!ce)},[G,ce]);const N1=(N,P)=>{const R=E.length>1||E.length>0&&!E[0].isOriginal,Me=v&&N!==v.title;(R||Me)&&C(!0)};O.useEffect(()=>{if(!f||An.current||E.length<=1)return;const N=setTimeout(async()=>{try{await gt.post(`/api/drafts/${f}`,{history:E,currentIndex:$}),console.log(`[DraftSync] Saved history (len: ${E.length}, ptr: ${$})`),s(P=>P&&{...P,hasDraft:!0}),e(P=>P.map(R=>R.filename===f?{...R,hasDraft:!0}:R)),L("success"),setTimeout(()=>L(null),2e3)}catch(P){console.error("[DraftSync] Failed:",P),L("error")}},2e3);return()=>clearTimeout(N)},[E,$,o,f,a,u]),O.useEffect(()=>{G&&!nr.current&&!An.current&&N1(o,G.getHTML())},[o,G]),O.useEffect(()=>{const N="Harsh's Blog";if(f){const P=new URL(window.location);P.searchParams.set("post",f.replace(".md","")),window.history.replaceState({},"",P),document.title=`${o} | ${N}`}else if(!De.current.get("post")){const R=new URL(window.location);R.searchParams.delete("post"),window.history.replaceState({},"",R),document.title=N}},[f,o]),O.useEffect(()=>{Es()},[]);const Es=async()=>{try{const N=(await gt.get(vn?"/data.json":"/api/posts")).data;e(N);const P=De.current.get("post");if(P&&!f){const R=P+".md";N.find(X=>X.filename===R)&&(hc(R,N),De.current=new URLSearchParams)}}catch(N){console.error("Error fetching posts:",N)}},vp=async()=>{try{const N=await gt.get("/api/images");w(N.data)}catch(N){console.error("Error fetching library images:",N)}},hc=async(N,P=null)=>{window.innerWidth<768&&_t(!1),N!==f&&(C(!1),L(null),wp(N,P))},wp=async(N,P=null)=>{var R,Me;y(!0),nr.current=!0,h(N),W.current&&clearTimeout(W.current),ne.current&&clearTimeout(ne.current);try{let X={data:null};vn||(X=await gt.get(`/api/posts/${N}?t=${Date.now()}`));const Re=X.data.title||X.data.frontmatter.title||N;D(!1),h(N),s(X.data);const We={title:Re,html:X.data.savedHtml!==void 0?X.data.savedHtml:X.data.html,tags:((R=X.data.frontmatter)==null?void 0:R.tags)||X.data.tags||[],categories:((Me=X.data.frontmatter)==null?void 0:Me.categories)||X.data.categories||[],timestamp:X.data.created||new Date().toISOString(),isOriginal:!0};let lt=Array.isArray(X.data.history)&&X.data.history.length>0?X.data.history:[];const Ep=lt.length>0&&lt[0].html===We.html;Ep||(lt=[We,...lt]),lt.length===0&&(lt=[We]);const Tp=typeof X.data.currentIndex=="number"?X.data.currentIndex:lt.length-1,R1=!Ep&&X.data.hasDraft?Tp+1:Tp,Op=Math.max(0,Math.min(R1,lt.length-1));I(lt),K(Op),(lt.length>1||lt.length>0&&!lt[0].isOriginal)&&C(!0);const Os=lt[Op],zp=(Os==null?void 0:Os.title)||Re||(f==null?void 0:f.replace(".md",""))||"Untitled";l(zp),Oi.current=zp,c(Os.tags||We.tags),d(Os.categories||We.categories),S({title:We.title,html:We.html,tags:We.tags||[],categories:We.categories||[]}),y(!1)}catch(X){console.error("[LoadPost] Failed:",X),y(!1),nr.current=!1,An.current=!1}},mc=N=>{if(!f)return;K(N);const P=E[N];if(P){An.current=!0,G.commands.setContent(P.html);const R=(P==null?void 0:P.title)||o||"Untitled";l(R),c(P.tags||[]),d(P.categories||[]),setTimeout(()=>An.current=!1,100)}ne.current&&clearTimeout(ne.current),ne.current=setTimeout(async()=>{try{console.log(`[HistorySync] Syncing pointer to ${N}`),L("saving"),await gt.post(`/api/drafts/${f}`,{history:T.current,currentIndex:N}),L("success"),setTimeout(()=>L(null),2e3)}catch(R){console.error("[HistorySync] Failed:",R),L("error")}},500)};O.useEffect(()=>{if(G&&i&&f&&i.filename===f&&$>=0&&E.length>$&&!G.isDestroyed){const N=E[$],P=(N==null?void 0:N.html)||"";nr.current&&(console.log(`[Editor] Initializing content from history[${$}]`),G.commands.setContent(P),S({title:E[0].title,html:E[0].html,tags:E[0].tags,categories:E[0].categories}),nr.current=!1,setTimeout(()=>{An.current=!1},100))}},[G,f,i,E,$]);const M1=async()=>{f&&Se({title:"Delete Post",message:`Are you sure you want to delete "${f}"? This cannot be undone.`,type:"danger",confirmText:"Delete",onConfirm:async()=>{try{await gt.delete(`/api/posts/${f}`),h(null),s(null),C(!1),Es(),Se(null)}catch(N){console.error("[Delete] Failed:",N),alert("Failed to delete post")}}})},E1=async()=>{!f||!i||Se({title:"Discard Draft",message:"Discard all draft changes? This will revert to the published version.",type:"warning",confirmText:"Discard Changes",onConfirm:async()=>{try{await gt.delete(`/api/drafts/${f}`),await wp(f),Es(),Se(null)}catch(N){console.error("[Discard] Failed:",N),alert("Failed to discard draft")}}})},T1=async()=>{if(!(!f||!b||m)){y(!0),L("saving");try{const N=G.getHTML();console.log("[Save] Sending to /api/posts:",{filename:f,title:o});const P=await gt.post("/api/posts",{filename:f,frontmatter:{...i==null?void 0:i.frontmatter,title:o,tags:a,categories:u},html:N});console.log("[Save] Success:",P.data),P.data.frontmatter&&s(Me=>({...Me,frontmatter:P.data.frontmatter}));const R=G.getHTML();pc.current={title:o,html:R},S({title:o,html:R,tags:a,categories:u}),C(!1),y(!1),L("success"),setTimeout(()=>L("saved"),3e3),Es()}catch(N){console.error("[Save] Failed to save post:",N),N.response&&(console.error("[Save] Server Error Data:",N.response.data),console.error("[Save] Server Status:",N.response.status)),y(!1),L("error"),setTimeout(()=>L(null),5e3)}}};O.useEffect(()=>{if(!mt||mt.status!=="active"||ee.current)return;(async()=>{ee.current=!0;const P=mt.steps[mt.currentIndex];try{if(P==="save"){L("saving");const R=G.getHTML();await gt.post("/api/posts",{filename:f,frontmatter:{...i==null?void 0:i.frontmatter,title:o,tags:a,categories:u},html:R}),L("success"),C(!1),setTimeout(()=>L("saved"),2e3)}else if(P==="publish")tn("publishing"),await gt.post("/api/publish");else if(P==="commit"){if(!mt.commitMessage){Et(R=>({...R,status:"paused"})),ee.current=!1;return}tn("committing"),await gt.post("/api/git/commit",{message:mt.commitMessage,filename:f})}else P==="push"&&(tn("pushing"),await gt.post("/api/git/push"));Et(R=>!R||R.status!=="active"?R:R.currentIndex<R.steps.length-1?{...R,currentIndex:R.currentIndex+1}:(tn(null),Es(),{...R,status:"completed"}))}catch(R){console.error(`[Workflow] Step ${P} failed:`,R),Et(Me=>{var X,Re;return{...Me,status:"error",error:((Re=(X=R.response)==null?void 0:X.data)==null?void 0:Re.error)||R.message}}),tn(null)}finally{ee.current=!1}})()},[mt,f,o,a,u,G,i]);const O1=N=>{!f||m||jn||Et({steps:N,currentIndex:0,status:"active",error:null,commitMessage:null})},z1=()=>{gn(!0)},kp=(N,P={})=>{if(!N)return;const R=(N.endsWith(".md")?N:`${N}.md`).split(" ").join("").toLowerCase();h(R),l(N),G.commands.setContent(""),s({frontmatter:{title:N,...P},hasDraft:!1});const Me={filename:R,title:N,created:new Date().toISOString(),modified:new Date().toISOString(),hasDraft:!0,isUnpublished:!0,tags:[],categories:[],...P};e(X=>[Me,...X]),I([{title:N,html:"",tags:[],categories:[],...P,timestamp:new Date().toISOString(),isOriginal:!0}]),K(0),C(!0),gn(!1)},D1=async N=>{const P=N.target.files[0];if(!P)return;const R=new FormData;R.append("image",P),await gt.post("/api/upload",R),vp()},j1=N=>{G.chain().focus().setImage({src:N}).run(),g(!1)},[el,bp]=O.useState(""),[Sp,A1]=O.useState("created"),[Ts,P1]=O.useState("desc"),Cp=O.useMemo(()=>{const N=new Set;return t.forEach(P=>(P.tags||[]).forEach(R=>N.add(R))),Array.from(N).sort()},[t]),Np=O.useMemo(()=>{const N=new Set;return t.forEach(P=>(P.categories||[]).forEach(R=>N.add(R))),Array.from(N).sort()},[t]),sr=O.useMemo(()=>t.find(N=>N.type==="introduction"),[t]),I1=t.filter(N=>{if(N.type==="introduction"||!(N.title.toLowerCase().includes(el.toLowerCase())||N.filename.toLowerCase().includes(el.toLowerCase()))||ve==="drafts"&&!N.hasDraft||ve==="unpublished"&&!N.isUnpublished)return!1;if(Qe.length>0){const Me=N.tags||[];if(!Qe.some(Re=>Me.includes(Re)))return!1}if($t.length>0){const Me=N.categories||[];if(!$t.some(Re=>Me.includes(Re)))return!1}const R=(Me,X)=>{if(!X.start&&!X.end)return!0;const Re=new Date(Me).setHours(0,0,0,0);if(X.start){const We=new Date(X.start).setHours(0,0,0,0);if(Re<We)return!1}if(X.end){const We=new Date(X.end).setHours(0,0,0,0);if(Re>We)return!1}return!0};return!(!R(N.created,rn)||!R(N.modified,xn))}).sort((N,P)=>{let R=0;switch(Sp){case"title":R=N.title.localeCompare(P.title);break;case"filename":R=N.filename.localeCompare(P.filename);break;case"created":R=new Date(N.created)-new Date(P.created);break;case"modified":R=new Date(N.modified)-new Date(P.modified);break;case"status":R=(N.hasDraft?1:0)-(P.hasDraft?1:0);break;default:R=0}return Ts==="asc"?R:-R}),Mp=()=>{nn([]),yn([]),Wr({start:null,end:null}),Ur({start:null,end:null}),Zo(!1)};return p.jsxs("div",{className:"flex h-screen overflow-hidden",children:[p.jsx(wD,{config:Oe,onClose:()=>Se(null)}),!ce&&p.jsx(gD,{isOpen:mn,onClose:()=>gn(!1),onConfirm:kp,existingFilenames:t.map(N=>N.filename)}),!ce&&p.jsx(fD,{isOpen:Hr,onClose:()=>Zn(!1),tags:Cp,categories:Np,postTags:a,postCategories:u,onTagsChange:c,onCategoriesChange:d}),!ce&&p.jsx(yD,{isOpen:Ti,onClose:()=>er(!1),onConfirm:N=>{G.chain().focus().setYoutubeVideo({"data-youtube-video":N}).run(),er(!1)}}),!ce&&p.jsx(pD,{isOpen:k,onClose:()=>g(!1),images:x,onSelect:j1,onUpload:D1}),!ce&&p.jsx(vD,{isOpen:!!mt,onClose:()=>Et(null),workflow:mt,currentTitle:o,onAbort:()=>Et(null),onCancelStep:N=>{Et(P=>{const R=P.steps.slice(0,N);return R.length===0?null:{...P,steps:R}})},onConfirmCommit:N=>{Et(P=>({...P,status:"active",commitMessage:N}))}}),ze&&p.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-40 md:hidden",onClick:()=>_t(!1)}),ze&&p.jsxs("div",{className:"fixed inset-y-0 left-0 z-50 md:sticky md:top-0 md:h-screen md:relative md:z-30 bg-zinc-900 border-r border-zinc-800 flex flex-col flex-shrink-0 group/sidebar shadow-2xl md:shadow-none",style:{width:Math.min(Xe,typeof window<"u"?window.innerWidth-60:300)},children:[p.jsxs("div",{className:"p-6 border-b border-zinc-800",children:[p.jsxs("div",{className:"flex justify-between items-center mb-6 min-h-14",children:[p.jsx("button",{onClick:()=>{h(null),s(null),I([]),K(-1),C(!1),L(null),S({title:"",html:"",tags:[],categories:[]})},className:"hover:opacity-80 transition-opacity text-left",children:p.jsx("h1",{className:"text-xl font-bold tracking-tight text-white",children:"Harsh's Blog"})}),p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("span",{className:"text-[10px] bg-zinc-800 text-zinc-500 px-2 py-1 rounded font-mono hidden sm:inline-block",children:[t.length," POSTS"]}),p.jsx("button",{onClick:()=>_t(!1),className:"w-10 h-10 flex items-center justify-center p-0 md:hidden text-zinc-400 hover:text-white bg-zinc-800/50 hover:bg-zinc-800 rounded-lg transition-colors",children:p.jsx(mu,{size:20})}),!ce&&p.jsx("button",{onClick:z1,className:"w-10 h-10 flex items-center justify-center p-0 bg-emerald-500/10 hover:bg-emerald-500/20 text-emerald-500 rounded-lg transition-colors border border-emerald-500/20",title:"New Post",children:p.jsx(ks,{size:20})})]})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{className:"flex gap-2",children:[p.jsxs("div",{className:"relative flex-1",children:[p.jsx("input",{type:"text",placeholder:"Search posts...",value:el,onChange:N=>bp(N.target.value),className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg py-2 pl-3 pr-10 text-sm focus:outline-none focus:border-white transition-colors"}),el&&p.jsx("button",{onClick:()=>bp(""),className:"absolute right-3 top-1/2 -translate-y-1/2 text-zinc-500 hover:text-white",children:p.jsx(Ci,{size:14})})]}),p.jsxs("button",{onClick:()=>Zo(!tr),className:`w-10 h-10 flex items-center justify-center p-0 rounded-lg border transition-all ${tr||Qe.length>0||$t.length>0||rn.start||xn.start?"bg-emerald-500/10 border-emerald-500/50 text-emerald-500":"bg-zinc-800 border-zinc-700 text-zinc-400 hover:border-white"}`,title:"Toggle Filters",children:[p.jsx(yp,{size:16}),(Qe.length>0||$t.length>0||rn.start||xn.start)&&p.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full"})]})]}),tr&&p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-xl p-4 space-y-4 shadow-xl max-h-[60vh] overflow-y-auto custom-scrollbar",children:[p.jsxs("div",{className:"flex justify-between items-center pb-2 border-b border-zinc-800",children:[p.jsx("span",{className:"text-xs font-bold text-zinc-400 uppercase tracking-widest",children:"Advanced Filters"}),p.jsxs("button",{onClick:Mp,className:"text-[10px] text-zinc-500 hover:text-red-400 transition-colors uppercase font-bold tracking-wide flex items-center gap-1",children:[p.jsx(Aa,{size:10}),"Clear All"]})]}),!ce&&p.jsxs("div",{className:"space-y-2",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-500 ml-1",children:"Status"}),p.jsx("div",{className:"flex p-1 bg-zinc-900 rounded-lg border border-zinc-700",children:["all","drafts","unpublished"].map(N=>p.jsx("button",{onClick:()=>Mt(N),className:`flex-1 py-1.5 text-xs font-bold uppercase tracking-wide rounded-md transition-all ${ve===N?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-zinc-300"}`,children:N},N))})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(Og,{label:"Tags",options:Cp,selected:Qe,onChange:nn}),p.jsx(Og,{label:"Categories",options:Np,selected:$t,onChange:yn})]}),p.jsxs("div",{className:"space-y-4",children:[p.jsx(zg,{label:"Created Date Range",range:rn,onChange:Wr}),p.jsx(zg,{label:"Modified Date Range",range:xn,onChange:Ur})]}),(Qe.length>0||$t.length>0||rn.start||xn.start||ve!=="all"&&!ce)&&p.jsx("button",{onClick:Mp,className:"w-full py-2 bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 text-zinc-300 text-xs font-bold uppercase tracking-wider rounded-lg transition-all",children:"Reset Filters"})]}),p.jsxs("div",{className:"space-y-1.5 pt-2 border-t border-zinc-800/50",children:[p.jsxs("div",{className:"flex justify-between items-center px-1",children:[p.jsx("label",{className:"text-[10px] uppercase font-bold text-zinc-500",children:"Sort by"}),p.jsx("span",{className:"text-[10px] text-zinc-600 font-mono",children:Ts.toUpperCase()})]}),p.jsxs("div",{className:"flex gap-2",children:[p.jsx(mD,{value:Sp,onChange:A1,options:[{value:"created",label:"Date Created"},{value:"modified",label:"Date Modified"},{value:"title",label:"Post Title"},{value:"filename",label:"Filename"},!ce&&{value:"status",label:"Draft Status"}].filter(Boolean)}),p.jsx("button",{onClick:()=>P1(N=>N==="asc"?"desc":"asc"),className:`w-10 flex items-center justify-center p-0 rounded-lg border transition-all ${Ts==="asc"?"bg-zinc-800 border-zinc-700":"bg-emerald-500/10 border-emerald-500/50 text-emerald-500"} hover:border-white`,title:`Switch to ${Ts==="asc"?"Descending":"Ascending"}`,children:Ts==="asc"?p.jsx(LO,{size:14}):p.jsx(IO,{size:14})})]})]})]})]}),p.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:I1.map(N=>p.jsxs("button",{onClick:()=>hc(N.filename),className:`w-full text-left p-3 rounded-lg transition-all flex items-start gap-3 relative group ${f===N.filename?"bg-zinc-800 shadow-lg border border-zinc-700":"hover:bg-zinc-800/50 border border-transparent"}`,title:N.title,children:[p.jsx(Mg,{size:18,className:"text-zinc-500 mt-1 flex-shrink-0"}),!ce&&(b&&f===N.filename||N.hasDraft)&&p.jsx("div",{className:`absolute top-3 right-3 w-2 h-2 rounded-full shadow-[0_0_8px_currentColor] ${N.isUnpublished?"bg-purple-400 text-purple-400":"bg-yellow-400 text-yellow-400"}`,title:N.isUnpublished?"Unpublished Draft":"Unsaved changes (Draft)"}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("div",{className:"text-sm font-medium truncate",children:N.title}),p.jsxs("div",{className:"flex items-center gap-3 mt-1.5 opacity-60",children:[p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-zinc-400 font-mono",title:`Created: ${new Date(N.created).toLocaleString()}`,children:[p.jsx(BO,{size:10}),p.jsx("span",{children:new Date(N.created).toLocaleDateString()})]}),p.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-zinc-400 font-mono",title:`Modified: ${new Date(N.modified).toLocaleString()}`,children:[p.jsx(gu,{size:10}),p.jsx("span",{children:new Date(N.modified).toLocaleDateString()})]})]})]})]},N.filename))}),(sr||!ce)&&p.jsx("div",{className:"p-2 border-t border-zinc-800 bg-zinc-900/30",children:sr?p.jsxs("button",{onClick:()=>hc(sr.filename),className:`w-full text-left p-3 rounded-lg transition-all flex items-start gap-3 relative group border-2 ${f===sr.filename?"bg-zinc-800 shadow-md border-emerald-500/50":"hover:bg-zinc-800/50 border-emerald-500/20 hover:border-emerald-500/40"}`,title:sr.title,children:[p.jsx("div",{className:"text-emerald-500 mt-1 flex-shrink-0",children:p.jsx(Tg,{size:18,fill:"currentColor",className:"opacity-80"})}),!ce&&(b&&f===sr.filename||sr.hasDraft)&&p.jsx("div",{className:"absolute top-3 right-3 w-2 h-2 rounded-full bg-yellow-400 shadow-[0_0_8px_currentColor]",title:"Unsaved changes"}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("div",{className:"text-sm font-bold truncate text-emerald-100",children:sr.title}),p.jsx("div",{className:"flex items-center gap-2 mt-1.5 opacity-60",children:p.jsx("span",{className:"text-[10px] uppercase font-bold tracking-wider text-emerald-500",children:"Introduction"})})]})]}):p.jsxs("button",{onClick:()=>kp("Introduction",{type:"introduction"}),className:"w-full text-left p-3 rounded-lg transition-all flex items-center gap-3 border-2 border-dashed border-zinc-800 hover:border-emerald-500/50 hover:bg-zinc-800/50 group text-zinc-500 hover:text-emerald-500",title:"Create Introduction Post",children:[p.jsx("div",{className:"mt-0.5 flex-shrink-0",children:p.jsx(Tg,{size:18,className:"opacity-50 group-hover:opacity-100"})}),p.jsxs("div",{className:"min-w-0 flex-1",children:[p.jsx("div",{className:"text-sm font-medium",children:"Create Introduction"}),p.jsx("div",{className:"text-[10px] mt-0.5 opacity-60",children:"Pinned Recommendation"})]}),p.jsx(ks,{size:16,className:"opacity-50 group-hover:opacity-100"})]})}),p.jsx("div",{onMouseDown:In,className:"absolute right-0 translate-x-1/2 top-0 bottom-0 w-4 bg-transparent hover:bg-emerald-500/50 cursor-col-resize z-50 transition-colors"})]}),p.jsx("div",{className:"flex-1 flex flex-col bg-zinc-950 overflow-hidden relative",children:f?p.jsxs(p.Fragment,{children:[p.jsxs("div",{className:"h-16 border-b border-zinc-800 px-4 md:px-8 flex items-center justify-between bg-zinc-900/80 backdrop-blur-xl sticky top-0 z-20",children:[p.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0 mr-2 md:mr-4",children:[p.jsxs("div",{className:"flex items-center gap-2 md:gap-4 flex-1 min-w-0",children:[p.jsx("button",{onClick:()=>_t(!ze),className:"w-10 h-10 flex items-center justify-center p-0 rounded-lg transition-colors text-zinc-500 hover:text-white hover:bg-zinc-800/50",title:ze?"Collapse Sidebar":"Expand Sidebar",children:ze?p.jsx(mu,{size:20}):p.jsx(Eg,{size:20})}),p.jsx("div",{className:`h-6 w-px bg-zinc-800 ${!ze&&"hidden"}`}),ce?p.jsx("h1",{className:"text-lg md:text-xl font-bold w-full truncate mb-0 flex justify-between items-center",children:o}):p.jsx("input",{ref:Oi,type:"text",value:o,onChange:N=>l(N.target.value),className:"bg-transparent text-lg md:text-xl font-bold outline-none w-full min-w-0 mb-0",placeholder:"Post Title"})]}),p.jsxs("div",{className:"flex-shrink-0 flex items-center justify-end",children:[A==="saving"&&p.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-zinc-800 rounded text-zinc-400 text-[10px] font-bold uppercase tracking-wider animate-pulse",children:[p.jsx("div",{className:"w-2 h-2 border-2 border-current border-t-transparent rounded-full animate-spin"}),p.jsx("span",{className:"hidden md:inline",children:"Saving"})]}),A==="success"&&p.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-emerald-500/10 text-emerald-500 text-[10px] font-bold uppercase tracking-wider rounded border border-emerald-500/20",children:[p.jsx(is,{size:10}),p.jsx("span",{className:"hidden md:inline",children:"Saved"})]}),A==="error"&&p.jsxs("span",{className:"flex items-center gap-1.5 px-2 py-0.5 bg-red-900/20 text-red-400 text-[10px] font-bold uppercase tracking-wider rounded border border-red-900/30",children:[p.jsx(u1,{size:10}),p.jsx("span",{className:"hidden md:inline",children:"Error"})]})]})]}),p.jsx("div",{className:"flex items-center gap-2",children:p.jsx("button",{onClick:async()=>{const N=new URL(window.location);N.searchParams.set("post",f.replace(".md",""));const P=N.toString();if(navigator.share)try{await navigator.share({title:`${o} | Harsh's Blog`,text:`Check out "${o}"`,url:P});return}catch{console.log("Share cancelled/failed, falling back to copy")}try{await navigator.clipboard.writeText(P),r(!0),setTimeout(()=>r(!1),2e3)}catch(R){console.error("Failed to copy",R)}},className:`w-10 h-10 flex items-center justify-center p-0 rounded-lg transition-colors mr-2 ${n?"text-emerald-500 bg-emerald-500/10":"text-zinc-500 hover:text-white hover:bg-zinc-800/50"}`,title:n?"Link Copied!":"Share Link",children:n?p.jsx(is,{size:20}):p.jsx($z,{size:20})})}),!ce&&p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsxs("div",{className:"flex items-center gap-1 md:mr-4 bg-zinc-900 p-1 rounded-lg border border-zinc-800",children:[p.jsxs("button",{onClick:()=>D(!1),className:`p-2 md:px-3 md:py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-2 ${M?"text-zinc-500 hover:text-white":"bg-zinc-800 text-white shadow-sm"}`,title:"Editor View",children:[p.jsx(gu,{size:16,className:"md:hidden"}),p.jsx("span",{className:"hidden md:inline",children:"Editor"})]}),p.jsxs("button",{onClick:()=>D(!0),className:`p-2 md:px-3 md:py-1.5 text-xs font-bold rounded-md transition-all flex items-center gap-2 ${M?"bg-yellow-500/10 text-yellow-500 border border-yellow-500/20 shadow-sm":"text-zinc-500 hover:text-white"}`,title:"Version History",children:[p.jsx(QO,{size:16,className:"md:hidden"}),p.jsx("span",{className:"hidden md:inline",children:"History"})]})]}),p.jsx("button",{onClick:E1,disabled:!(i!=null&&i.hasDraft),className:`w-10 h-10 flex items-center justify-center p-0 transition-colors rounded-lg ${i!=null&&i.hasDraft?"text-zinc-500 hover:text-red-400 hover:bg-red-400/10":"text-zinc-700 cursor-not-allowed"}`,title:i!=null&&i.hasDraft?"Discard Draft":"No Draft to Discard",children:p.jsx(Aa,{size:20})}),p.jsx("button",{onClick:M1,className:"w-10 h-10 flex items-center justify-center p-0 text-red-900 hover:text-red-500 hover:bg-red-500/10 rounded-lg transition-colors group",title:"Delete Post",children:p.jsx(b1,{size:20})}),p.jsx(xD,{isSaving:A==="saving",isDirty:b||!!jn,deployStatus:jn,onSave:T1,onAction:O1})]})]}),!ce&&!M&&p.jsx(hD,{editor:G,onHistoryUndo:()=>{if($>0){W.current&&clearTimeout(W.current);const N=$-1;mc(N)}},onHistoryRedo:()=>{if($<E.length-1){W.current&&clearTimeout(W.current);const N=$+1;mc(N)}},canUndo:$>0,canRedo:$<E.length-1,showMetadataModal:()=>Zn(!0),hasMetadata:a.length>0||u.length>0,showMetadataActive:Hr,onShowMediaLibrary:()=>{g(!0),vp()},onAddYoutube:()=>er(!0)}),p.jsx("div",{className:"flex-1 overflow-y-auto relative bg-zinc-950",children:M?p.jsx(bD,{history:E,originalHtml:v.html,originalTitle:v.title,originalTags:v.tags,originalCategories:v.categories,current:G.getHTML(),currentIndex:$,onSelect:N=>{mc(N),D(!1)}}):p.jsxs("div",{className:"max-w-6xl mx-auto px-2 py-3 md:px-8 md:py-12",children:[G&&p.jsx(fT,{editor:G,shouldShow:({editor:N})=>!ce&&!N.state.selection.empty&&!N.isActive("image"),tippyOptions:{duration:100,zIndex:9999,maxWidth:"98vw",interactive:!0},children:p.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg shadow-xl flex items-center p-1 gap-1 flex-wrap overflow-visible max-w-[90vw] custom-scrollbar",children:[p.jsx("button",{onClick:()=>G.chain().focus().toggleBold().run(),className:`p-1.5 rounded hover:bg-zinc-800 ${G.isActive("bold")?"text-yellow-400 bg-zinc-800":"text-zinc-300"}`,title:"Bold",children:p.jsx(l1,{size:16})}),p.jsx("button",{onClick:()=>G.chain().focus().toggleItalic().run(),className:`p-1.5 rounded hover:bg-zinc-800 ${G.isActive("italic")?"text-yellow-400 bg-zinc-800":"text-zinc-300"}`,title:"Italic",children:p.jsx(y1,{size:16})}),p.jsx("div",{className:"w-px h-4 bg-zinc-800 mx-1"}),p.jsx(C1,{editor:G}),p.jsx("div",{className:"w-px h-4 bg-zinc-800 mx-1"}),p.jsx(Ia,{icon:m1,title:"Highlight",activeColor:G.getAttributes("highlight").color,onChange:N=>G.chain().focus().toggleHighlight({color:N}).run(),onRemove:()=>G.chain().focus().unsetHighlight().run(),presets:["#fef08a","#bbf7d0","#bfdbfe","#fbcfe8","#e9d5ff","#fed7aa","#fecaca"],variant:"highlight"}),p.jsx(Ia,{icon:x1,title:"Text Color",activeColor:G.getAttributes("textStyle").color,onChange:N=>G.chain().focus().setColor(N).run(),onRemove:()=>G.chain().focus().unsetColor().run(),presets:["#000000","#2563eb","#dc2626","#16a34a","#d97706","#9333ea","#71717a"],variant:"text"}),p.jsx("div",{className:"w-px h-4 bg-zinc-800 mx-1"}),p.jsx("button",{onClick:()=>G.chain().focus().toggleCodeBlock().run(),className:`p-1.5 rounded hover:bg-zinc-800 ${G.isActive("codeBlock")?"text-yellow-400 bg-zinc-800":"text-zinc-300"}`,title:"Code Block",children:p.jsx(f1,{size:16})}),p.jsx("button",{onClick:()=>G.chain().focus().toggleBlockquote().run(),className:`p-1.5 rounded hover:bg-zinc-800 ${G.isActive("blockquote")?"text-yellow-400 bg-zinc-800":"text-zinc-300"}`,title:"Quote",children:p.jsx(v1,{size:16})})]})}),p.jsx(eT,{editor:G})]})})]}):p.jsxs("div",{className:"flex-1 flex flex-col h-full",children:[p.jsxs("div",{className:"h-16 border-b border-zinc-800 px-8 flex items-center bg-zinc-900/80 backdrop-blur-xl sticky top-0 z-20",children:[p.jsx("button",{onClick:()=>_t(!ze),className:"p-2 rounded-lg transition-colors text-zinc-500 hover:text-white hover:bg-zinc-800/50 mr-4",title:ze?"Collapse Sidebar":"Expand Sidebar",children:ze?p.jsx(mu,{size:20}):p.jsx(Eg,{size:20})}),p.jsx("h1",{className:"text-xl font-bold text-zinc-500"})]}),p.jsxs("div",{className:"flex-1 flex flex-col items-center justify-center text-zinc-500 gap-4 p-4 text-center",children:[p.jsx(Mg,{size:64,className:"opacity-20"}),p.jsxs("p",{className:"text-lg",children:["Select a post to start ",ce?"reading":"editing"]})]})]})}),p.jsx("button",{onClick:()=>oe(!U),className:`fixed bottom-4 right-4 z-[110] w-10 h-10 flex items-center justify-center rounded-lg border transition-all duration-300 ${U?"bg-zinc-100 border-zinc-200 text-zinc-900 shadow-xl scale-110":"bg-zinc-900/80 backdrop-blur-md border-zinc-800 text-zinc-500 hover:text-white hover:border-zinc-700"}`,title:"Mission Control Debugger",children:U?p.jsx(Ci,{size:18}):p.jsx(Lz,{size:18})}),U&&!vn&&p.jsxs("div",{className:"fixed bottom-16 right-4 z-[100] bg-zinc-950/95 backdrop-blur-xl border border-zinc-800 rounded-2xl w-80 shadow-2xl overflow-hidden animate-in fade-in slide-in-from-bottom-4 duration-300 flex flex-col max-h-[80vh]",children:[p.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800 bg-zinc-900/50 flex items-center justify-between",children:[p.jsxs("div",{className:"flex items-center gap-2",children:[p.jsx(AO,{size:16,className:"text-emerald-500"}),p.jsx("h3",{className:"text-sm font-bold text-white tracking-tight",children:"Debug Dashboard"})]}),p.jsx("span",{className:"text-[10px] bg-zinc-800 text-zinc-500 px-2 py-0.5 rounded font-mono",children:"v2.4.0"})]}),p.jsxs("div",{className:"flex-1 overflow-y-auto custom-scrollbar p-5 space-y-6",children:[p.jsxs("div",{className:"p-4 bg-blue-500/10 border border-blue-500/20 rounded-xl relative overflow-hidden group",children:[p.jsx("div",{className:"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity",children:p.jsx(Cz,{size:48})}),p.jsxs("div",{className:"flex gap-3 relative z-10",children:[p.jsx(yz,{className:"text-blue-500 shrink-0",size:18}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-bold text-blue-200 mb-1",children:"Visualization Tip"}),p.jsxs("p",{className:"text-[10px] text-blue-200/70 leading-relaxed",children:["The ",p.jsx("code",{className:"bg-blue-500/20 px-1 rounded text-blue-300",children:"readonly=true"})," parameter helps you see exactly how the app looks when published."]})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[p.jsx(Oz,{size:12})," Interactive Controls"]}),p.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-900/50 rounded-xl border border-zinc-800 hover:border-zinc-700 transition-colors group",children:[p.jsxs("div",{className:"flex items-center gap-3",children:[p.jsx("div",{className:`p-2 rounded-lg transition-colors ${ir?"bg-emerald-500/10 text-emerald-500":"bg-zinc-800 text-zinc-500"}`,children:ir?p.jsx(sz,{size:16}):p.jsx(gu,{size:16})}),p.jsxs("div",{children:[p.jsx("p",{className:"text-xs font-bold text-zinc-200",children:"Readonly Mode"}),p.jsx("p",{className:"text-[10px] text-zinc-500",children:"Hide editing tools"})]})]}),p.jsx("button",{onClick:()=>{const N=new URL(window.location),P=!ir;P?N.searchParams.set("readonly","true"):N.searchParams.delete("readonly"),window.history.replaceState({},"",N),Ms(P)},className:`w-10 h-5 rounded-full relative transition-colors duration-300 ${ir?"bg-emerald-500":"bg-zinc-700"}`,children:p.jsx("div",{className:`absolute top-1 left-1 w-3 h-3 bg-white rounded-full transition-transform duration-300 ${ir?"translate-x-5":""}`})})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[p.jsx(tz,{size:12})," Live Engine State"]}),p.jsxs("div",{className:"space-y-2 font-mono text-[11px]",children:[p.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-900/30 rounded-lg",children:[p.jsx("span",{className:"text-zinc-500",children:"isDirty"}),p.jsx("span",{className:b?"text-yellow-400 font-bold":"text-emerald-400",children:b?"YES":"NO"})]}),p.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-900/30 rounded-lg",children:[p.jsx("span",{className:"text-zinc-500",children:"title"}),p.jsx("span",{className:"text-zinc-300 truncate ml-4",title:o,children:o||"EMPTY"})]}),p.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-900/30 rounded-lg",children:[p.jsx("span",{className:"text-zinc-500",children:"filename"}),p.jsx("span",{className:"text-zinc-300 truncate ml-4",title:f,children:f||"none"})]}),p.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-900/30 rounded-lg",children:[p.jsx("span",{className:"text-zinc-500",children:"saveStatus"}),p.jsx("span",{className:"text-blue-400",children:A||"idle"})]}),p.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-900/30 rounded-lg",children:[p.jsx("span",{className:"text-zinc-500",children:"historyPtr"}),p.jsxs("span",{className:"text-zinc-300",children:[$," / ",E.length]})]}),p.jsxs("div",{className:"flex justify-between py-1.5 px-3 bg-zinc-900/30 rounded-lg",children:[p.jsx("span",{className:"text-zinc-500",children:"tokens"}),p.jsxs("span",{className:"text-zinc-300",children:[G?G.getText().length:0," chars"]})]})]})]}),p.jsxs("div",{children:[p.jsxs("h4",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-widest mb-3 flex items-center gap-2",children:[p.jsx(rz,{size:12})," Configuration"]}),p.jsxs("div",{className:"space-y-4",children:[p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] text-zinc-500 mb-1",children:"Site Configuration"}),p.jsx("div",{className:"space-y-1",children:p.jsxs("div",{className:"p-2 bg-zinc-900/30 border border-zinc-800/50 rounded-lg flex flex-col gap-1",children:[p.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[p.jsx("span",{className:"text-zinc-500",children:"Title"}),p.jsx("span",{className:"text-zinc-300 truncate ml-2",children:"Harsh's Blog"})]}),p.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[p.jsx("span",{className:"text-zinc-500",children:"URL"}),p.jsx("span",{className:"text-zinc-300 truncate ml-2",children:"https://blog.harshankur.com"})]}),p.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[p.jsx("span",{className:"text-zinc-500",children:"Port"}),p.jsx("span",{className:"text-zinc-300 font-mono",children:"3001"})]}),p.jsxs("div",{className:"flex justify-between items-center text-[10px]",children:[p.jsx("span",{className:"text-zinc-500",children:"Favicon"}),p.jsx("span",{className:"text-zinc-300 truncate ml-2",children:"../favicon.png"})]})]})})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] text-zinc-500 mb-1",children:"Filesystem Paths"}),p.jsx("div",{className:"space-y-1.5 font-mono text-[9px]",children:p.jsxs("div",{className:"p-2 bg-zinc-900/30 border border-zinc-800/50 rounded-lg space-y-2",children:[p.jsxs("div",{children:[p.jsx("span",{className:"text-zinc-500 block mb-0.5",children:"Content"}),p.jsx("span",{className:"text-zinc-400 break-all leading-tight",children:"../content"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-zinc-500 block mb-0.5",children:"Static"}),p.jsx("span",{className:"text-zinc-400 break-all leading-tight",children:"../static"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-zinc-500 block mb-0.5",children:"Drafts"}),p.jsx("span",{className:"text-zinc-400 break-all leading-tight",children:"../drafts"})]}),p.jsxs("div",{children:[p.jsx("span",{className:"text-zinc-500 block mb-0.5",children:"Dist"}),p.jsx("span",{className:"text-zinc-400 break-all leading-tight",children:"../dist"})]})]})})]}),p.jsxs("div",{children:[p.jsx("p",{className:"text-[10px] text-zinc-500 mb-1",children:"Git Permissions"}),p.jsxs("div",{className:"p-2 rounded-lg text-[10px] font-bold flex items-center gap-2 bg-emerald-500/10 text-emerald-500",children:[p.jsx(is,{size:12}),"ALLOW_PUSH: ENABLED"]})]})]})]})]}),p.jsx("div",{className:"p-4 border-t border-zinc-800 bg-zinc-900/30 text-center",children:p.jsx("p",{className:"text-[9px] text-zinc-600 uppercase tracking-tighter",children:"Mission Control Debugger  2026"})})]})]})},Dg=t=>new DOMParser().parseFromString(t,"text/html").body.textContent||"",bD=({history:t,originalHtml:e,originalTitle:n,originalTags:r=[],originalCategories:i=[],current:s,currentIndex:o,onSelect:l})=>{const[a,c]=O.useState(o),[u,d]=O.useState("visual"),f=J.useRef(null),h=J.useRef(null),m=J.useRef(null),y=J.useRef(!1);J.useEffect(()=>{m.current&&m.current.scrollIntoView({block:"nearest",behavior:"smooth"})},[a]);const k=E=>I=>{if(y.current)return;y.current=!0;const $=E==="left"?h.current:f.current;if($){const K=I.target.scrollTop/(I.target.scrollHeight-I.target.clientHeight);Number.isFinite(K)&&($.scrollTop=K*($.scrollHeight-$.clientHeight))}setTimeout(()=>{y.current=!1},50)},g=t[a]||{},x=g.html||"",w=J.useMemo(()=>u==="visual"?null:u==="source"?SO(e||"",x):u==="text"?Sg(Dg(e||""),Dg(x)):null,[e,x,u]),v=J.useMemo(()=>{if(u==="visual")return null;const E=typeof n=="string"?n:"",I=g.title||"";return Sg(E,I)},[n,g.title,u]),S=(E=[],I=[])=>{const $=I.filter(ie=>!E.includes(ie)),K=E.filter(ie=>!I.includes(ie)),ue=E.filter(ie=>I.includes(ie));return{added:$,removed:K,unchanged:ue}},b=J.useMemo(()=>S(r,g.tags),[r,g.tags]),C=J.useMemo(()=>S(i,g.categories),[i,g.categories]),M=(E,I,$)=>{if(!E)return null;const{added:K,removed:ue,unchanged:ie}=E;return K.length===0&&ue.length===0&&ie.length===0?null:p.jsxs("div",{className:"mb-4",children:[p.jsx("div",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-wider mb-1.5",children:I}),p.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[ie.map(se=>p.jsx("span",{className:"px-2 py-0.5 rounded bg-zinc-800 text-zinc-400 text-xs border border-zinc-700",children:se},se)),$?ue.map(se=>p.jsx("span",{className:"px-2 py-0.5 rounded bg-red-900/20 text-red-400 text-xs border border-red-900/30 line-through decoration-red-400/50",title:"Removed",children:se},se)):K.map(se=>p.jsxs("span",{className:"px-2 py-0.5 rounded bg-emerald-900/20 text-emerald-400 text-xs border border-emerald-900/30 font-bold",title:"Added",children:["+ ",se]},se))]})]})},D=(E=[],I)=>!E||E.length===0?null:p.jsxs("div",{className:"mb-4",children:[p.jsx("div",{className:"text-[10px] font-bold text-zinc-500 uppercase tracking-wider mb-1.5",children:I}),p.jsx("div",{className:"flex flex-wrap gap-1.5",children:E.map($=>p.jsx("span",{className:"px-2 py-0.5 rounded bg-zinc-800 text-zinc-300 text-xs border border-zinc-700",children:$},$))})]});return p.jsxs("div",{className:"flex flex-col md:flex-row h-full bg-zinc-950",children:[p.jsxs("div",{className:"w-full md:w-64 h-56 md:h-auto bg-zinc-950 border-b md:border-b-0 md:border-r border-zinc-800 flex flex-col flex-shrink-0",children:[p.jsx("div",{className:"h-10 md:h-16 flex items-center px-4 md:px-6 border-b border-zinc-800",children:p.jsx("span",{className:"font-bold text-zinc-400 text-xs uppercase tracking-wider",children:"Version History"})}),p.jsx("div",{className:"flex-1 overflow-y-auto bg-zinc-900/30",children:t.map((E,I)=>{const $=I===o,K=I===0,ue=a===I;return p.jsxs("button",{ref:ue?m:null,onClick:()=>c(I),className:`w-full text-left px-4 md:px-6 py-3 md:py-4 border-b border-zinc-800/50 flex flex-col gap-1 transition-all ${ue?"bg-zinc-900 border-l-2 border-l-emerald-500":"hover:bg-zinc-900/50 border-l-2 border-l-transparent"}`,children:[p.jsxs("div",{className:"flex justify-between items-center mb-1",children:[p.jsx("span",{className:`text-sm font-bold ${K?"text-blue-400":"text-zinc-300"}`,children:K?"Original":`Version ${I}`}),$&&p.jsx("span",{className:"text-[10px] bg-emerald-500/10 text-emerald-500 px-1.5 py-0.5 rounded uppercase font-bold tracking-wider",children:"Active"})]}),p.jsx("span",{className:"text-[10px] font-mono text-zinc-500",children:new Date(E.timestamp).toLocaleString(void 0,{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})})]},I)})}),p.jsx("div",{className:"p-2 md:p-4 border-t border-zinc-800 bg-zinc-900/50",children:p.jsxs("button",{onClick:()=>l(a),className:"w-full py-2 md:py-2.5 bg-zinc-100 hover:bg-white text-black font-bold rounded-lg text-xs uppercase tracking-wide transition-colors shadow-lg flex items-center justify-center gap-2",children:[p.jsx("span",{className:"md:hidden",children:p.jsx(w1,{size:14})}),"Restore Version"]})})]}),p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden",children:[p.jsxs("div",{className:"p-2 min-h-12 md:min-h-16 md:p-3 bg-zinc-900/50 border-b border-zinc-800 flex justify-between items-center sticky top-0 bg-zinc-950/95 backdrop-blur z-20",children:[p.jsx("span",{className:"text-[10px] font-bold uppercase tracking-widest text-zinc-500 pl-1 md:pl-2",children:"Original (Reference)"}),p.jsxs("div",{className:"flex bg-zinc-900 border border-zinc-800 rounded-lg p-0.5 shadow-sm",children:[p.jsx("button",{onClick:()=>d("visual"),className:`px-2 py-1 text-[10px] font-bold rounded transition-all ${u==="visual"?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-white"}`,children:"Preview"}),p.jsx("button",{onClick:()=>d("text"),className:`px-2 py-1 text-[10px] font-bold rounded transition-all ${u==="text"?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-white"}`,children:"Text"}),p.jsx("button",{onClick:()=>d("source"),className:`px-2 py-1 text-[10px] font-bold rounded transition-all ${u==="source"?"bg-zinc-800 text-white shadow-sm":"text-zinc-500 hover:text-white"}`,children:"Source"})]})]}),p.jsxs("div",{ref:f,onScroll:k("left"),className:"flex-1 overflow-y-auto custom-scrollbar",children:[p.jsxs("div",{className:"px-4 md:px-8 pt-4 md:pt-6 pb-2 border-b border-zinc-800/50",children:[p.jsx("div",{className:"text-xs font-bold text-zinc-500 uppercase tracking-wider mb-2",children:"Title"}),u==="visual"?p.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-400 mb-4 md:mb-6 break-words",children:n}):p.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-400 font-mono mb-4 md:mb-6 break-words",children:v?v.map((E,I)=>!E.added&&p.jsx("span",{style:E.removed?{backgroundColor:"rgba(127,29,29,0.4)",textDecoration:"line-through"}:{},children:E.value},I)):n}),u!=="visual"?p.jsxs(p.Fragment,{children:[M(b,"Tags",!0),M(C,"Categories",!0)]}):p.jsxs(p.Fragment,{children:[D(r,"Tags"),D(i,"Categories")]})]}),p.jsx("div",{className:"p-4 md:p-8",children:u==="visual"?p.jsx("div",{className:"prose prose-invert max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:e}}):p.jsx("pre",{className:"font-mono text-xs text-zinc-400 whitespace-pre-wrap",children:w&&w.map((E,I)=>!E.added&&p.jsx("span",{style:E.removed?{backgroundColor:"rgba(127,29,29,0.4)",textDecoration:"line-through"}:{},children:E.value},I))})})]})]}),p.jsxs("div",{className:"flex-1 flex flex-col min-h-0 overflow-hidden bg-zinc-900/20",children:[p.jsxs("div",{className:"p-2 min-h-12 md:min-h-16 md:p-3 bg-zinc-900/50 border-b border-zinc-800 flex justify-between items-center text-[10px] font-bold uppercase tracking-widest text-emerald-500 sticky top-0 bg-zinc-950/95 backdrop-blur z-10",children:["Selected Version (",a,")"]}),p.jsxs("div",{ref:h,onScroll:k("right"),className:"flex-1 overflow-y-auto custom-scrollbar",children:[p.jsxs("div",{className:"px-4 md:px-8 pt-4 md:pt-6 pb-2 border-b border-zinc-800/50 shrink-0",children:[p.jsx("div",{className:"text-xs font-bold text-emerald-600 uppercase tracking-wider mb-2",children:"Title"}),u==="visual"?p.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-200 mb-4 md:mb-6 break-words",children:g.title}):p.jsx("div",{className:"text-lg md:text-xl font-bold text-zinc-200 font-mono mb-4 md:mb-6 break-words",children:v?v.map((E,I)=>!E.removed&&p.jsx("span",{style:E.added?{backgroundColor:"rgba(6,78,59,0.4)"}:{},children:E.value},I)):g.title}),u!=="visual"?p.jsxs(p.Fragment,{children:[M(b,"Tags",!1),M(C,"Categories",!1)]}):p.jsxs(p.Fragment,{children:[D(g.tags,"Tags"),D(g.categories,"Categories")]})]}),p.jsx("div",{className:"p-4 md:p-8",children:u==="visual"?p.jsx("div",{className:"prose prose-invert max-w-none prose-sm md:prose-base",dangerouslySetInnerHTML:{__html:x}}):p.jsx("pre",{className:"font-mono text-xs text-zinc-300 whitespace-pre-wrap",children:w&&w.map((E,I)=>!E.removed&&p.jsx("span",{style:E.added?{backgroundColor:"rgba(6,78,59,0.4)"}:{},children:E.value},I))})})]})]})]})},SD=kD;yu.createRoot(document.getElementById("root")).render(p.jsx(J.StrictMode,{children:p.jsx(SD,{})}));
